{"version":3,"file":"live2d.js","mappings":"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","sources":["webpack://trunk/./src/lib/Live2DFramework.js","webpack://trunk/./src/lib/live2d.min.js","webpack://trunk/./src/DbCache.ts","webpack://trunk/./src/Framework/cubismdefaultparameterid.ts","webpack://trunk/./src/Framework/cubismframeworkconfig.ts","webpack://trunk/./src/Framework/cubismmodelsettingjson.ts","webpack://trunk/./src/Framework/effect/cubismbreath.ts","webpack://trunk/./src/Framework/effect/cubismeyeblink.ts","webpack://trunk/./src/Framework/effect/cubismpose.ts","webpack://trunk/./src/Framework/icubismmodelsetting.ts","webpack://trunk/./src/Framework/id/cubismid.ts","webpack://trunk/./src/Framework/id/cubismidmanager.ts","webpack://trunk/./src/Framework/live2dcubismframework.ts","webpack://trunk/./src/Framework/math/cubismmath.ts","webpack://trunk/./src/Framework/math/cubismmatrix44.ts","webpack://trunk/./src/Framework/math/cubismmodelmatrix.ts","webpack://trunk/./src/Framework/math/cubismtargetpoint.ts","webpack://trunk/./src/Framework/math/cubismvector2.ts","webpack://trunk/./src/Framework/math/cubismviewmatrix.ts","webpack://trunk/./src/Framework/model/cubismmoc.ts","webpack://trunk/./src/Framework/model/cubismmodel.ts","webpack://trunk/./src/Framework/model/cubismmodeluserdata.ts","webpack://trunk/./src/Framework/model/cubismmodeluserdatajson.ts","webpack://trunk/./src/Framework/model/cubismusermodel.ts","webpack://trunk/./src/Framework/motion/acubismmotion.ts","webpack://trunk/./src/Framework/motion/cubismexpressionmotion.ts","webpack://trunk/./src/Framework/motion/cubismmotion.ts","webpack://trunk/./src/Framework/motion/cubismmotioninternal.ts","webpack://trunk/./src/Framework/motion/cubismmotionjson.ts","webpack://trunk/./src/Framework/motion/cubismmotionmanager.ts","webpack://trunk/./src/Framework/motion/cubismmotionqueueentry.ts","webpack://trunk/./src/Framework/motion/cubismmotionqueuemanager.ts","webpack://trunk/./src/Framework/physics/cubismphysics.ts","webpack://trunk/./src/Framework/physics/cubismphysicsinternal.ts","webpack://trunk/./src/Framework/physics/cubismphysicsjson.ts","webpack://trunk/./src/Framework/rendering/cubismrenderer.ts","webpack://trunk/./src/Framework/rendering/cubismrenderer_webgl.ts","webpack://trunk/./src/Framework/type/csmmap.ts","webpack://trunk/./src/Framework/type/csmrectf.ts","webpack://trunk/./src/Framework/type/csmstring.ts","webpack://trunk/./src/Framework/type/csmvector.ts","webpack://trunk/./src/Framework/utils/cubismdebug.ts","webpack://trunk/./src/Framework/utils/cubismjson.ts","webpack://trunk/./src/Framework/utils/cubismjsonextension.ts","webpack://trunk/./src/LAppLive2DManager_v2.ts","webpack://trunk/./src/LAppModel_v2.ts","webpack://trunk/./src/PlatformManager.ts","webpack://trunk/./src/lappdefine.ts","webpack://trunk/./src/lappdelegate.ts","webpack://trunk/./src/lapplive2dmanager.ts","webpack://trunk/./src/lappmodel.ts","webpack://trunk/./src/lapppal.ts","webpack://trunk/./src/lapptexturemanager.ts","webpack://trunk/./src/lappview.ts","webpack://trunk/./src/lib/MatrixStack.ts","webpack://trunk/./src/lib/ModelSettingJson.ts","webpack://trunk/./src/touchmanager.ts","webpack://trunk/./node_modules/dexie/dist/modern/dexie.mjs","webpack://trunk/webpack/bootstrap","webpack://trunk/webpack/runtime/compat get default export","webpack://trunk/webpack/runtime/define property getters","webpack://trunk/webpack/runtime/hasOwnProperty shorthand","webpack://trunk/webpack/runtime/make namespace object","webpack://trunk/./src/main.js"],"sourcesContent":["/**\r\n * EYHN 基于 live2d 官方 Live2DFramework.js 修改\r\n * \r\n * Copyright © 2016 - 2017 EYHN\r\n */\r\n//============================================================\r\n//============================================================\r\n//  class L2DBaseModel         \r\n//============================================================\r\n//============================================================\r\nfunction L2DBaseModel() {\r\n    this.live2DModel = null; // ALive2DModel\r\n    this.modelMatrix = null; // L2DModelMatrix\r\n    this.eyeBlink = null; // L2DEyeBlink\r\n    this.physics = null; // L2DPhysics\r\n    this.pose = null; // L2DPose\r\n    this.debugMode = false;\r\n    this.initialized = false;\r\n    this.updating = false;\r\n    this.alpha = 1;\r\n    this.accAlpha = 0;\r\n    this.lipSync = false;\r\n    this.lipSyncValue = 0;\r\n    this.accelX = 0;\r\n    this.accelY = 0;\r\n    this.accelZ = 0;\r\n    this.dragX = 0;\r\n    this.dragY = 0;\r\n    this.startTimeMSec = null;\r\n    this.mainMotionManager = new L2DMotionManager(); //L2DMotionManager\r\n    this.expressionManager = new L2DMotionManager(); //L2DMotionManager\r\n    this.motions = {};\r\n    this.expressions = {};\r\n\r\n    this.isTexLoaded = false;\r\n}\r\n\r\nvar texCounter = 0;\r\n\r\n//============================================================\r\n//    L2DBaseModel # getModelMatrix()\r\n//============================================================\r\nL2DBaseModel.prototype.getModelMatrix = function () {\r\n    return this.modelMatrix;\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # setAlpha()\r\n//============================================================\r\nL2DBaseModel.prototype.setAlpha = function (a/*float*/) {\r\n    if (a > 0.999) a = 1;\r\n    if (a < 0.001) a = 0;\r\n    this.alpha = a;\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # getAlpha()\r\n//============================================================\r\nL2DBaseModel.prototype.getAlpha = function () {\r\n    return this.alpha;\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # isInitialized()\r\n//============================================================\r\nL2DBaseModel.prototype.isInitialized = function () {\r\n    return this.initialized;\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # setInitialized()\r\n//============================================================\r\nL2DBaseModel.prototype.setInitialized = function (v/*boolean*/) {\r\n    this.initialized = v;\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # isUpdating()\r\n//============================================================\r\nL2DBaseModel.prototype.isUpdating = function () {\r\n    return this.updating;\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # setUpdating()\r\n//============================================================\r\nL2DBaseModel.prototype.setUpdating = function (v/*boolean*/) {\r\n    this.updating = v;\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # getLive2DModel()\r\n//============================================================\r\nL2DBaseModel.prototype.getLive2DModel = function () {\r\n    return this.live2DModel;\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # setLipSync()\r\n//============================================================\r\nL2DBaseModel.prototype.setLipSync = function (v/*boolean*/) {\r\n    this.lipSync = v;\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # setLipSyncValue()\r\n//============================================================\r\nL2DBaseModel.prototype.setLipSyncValue = function (v/*float*/) {\r\n    this.lipSyncValue = v;\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # setAccel()\r\n//============================================================\r\nL2DBaseModel.prototype.setAccel = function (x/*float*/, y/*float*/, z/*float*/) {\r\n    this.accelX = x;\r\n    this.accelY = y;\r\n    this.accelZ = z;\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # setDrag()\r\n//============================================================\r\nL2DBaseModel.prototype.setDrag = function (x/*float*/, y/*float*/) {\r\n    this.dragX = x;\r\n    this.dragY = y;\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # getMainMotionManager()\r\n//============================================================\r\nL2DBaseModel.prototype.getMainMotionManager = function () {\r\n    return this.mainMotionManager;\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # getExpressionManager()\r\n//============================================================\r\nL2DBaseModel.prototype.getExpressionManager = function () {\r\n    return this.expressionManager;\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # loadModelData()\r\n//============================================================\r\nL2DBaseModel.prototype.loadModelData = function (path/*String*/, callback) {\r\n    /*\r\n    if( this.live2DModel != null ) {\r\n        this.live2DModel.deleteTextures();\r\n    }\r\n    */\r\n    var pm = Live2DFramework.getPlatformManager(); //IPlatformManager\r\n    if (this.debugMode) pm.log(\"Load model : \" + path);\r\n\r\n    var thisRef = this;\r\n    pm.loadLive2DModel(path, function (l2dModel) {\r\n        thisRef.live2DModel = l2dModel;\r\n        thisRef.live2DModel.saveParam();\r\n\r\n        var _err = Live2D.getError();\r\n\r\n        if (_err != 0) {\r\n            console.error(\"Error : Failed to loadModelData().\");\r\n            return;\r\n        }\r\n\r\n        thisRef.modelMatrix = new L2DModelMatrix(\r\n            thisRef.live2DModel.getCanvasWidth(),\r\n            thisRef.live2DModel.getCanvasHeight()); //L2DModelMatrix\r\n        thisRef.modelMatrix.setWidth(2);\r\n        thisRef.modelMatrix.setCenterPosition(0, 0);\r\n\r\n        callback(thisRef.live2DModel);\r\n    });\r\n}\r\n\r\n\r\n//============================================================\r\n//    L2DBaseModel # loadTexture()\r\n//============================================================\r\nL2DBaseModel.prototype.loadTexture = function (no/*int*/, path/*String*/, callback) {\r\n    texCounter++;\r\n\r\n    var pm = Live2DFramework.getPlatformManager(); //IPlatformManager\r\n\r\n    if (this.debugMode) pm.log(\"Load Texture : \" + path);\r\n\r\n    var thisRef = this;\r\n    pm.loadTexture(this.live2DModel, no, path, function () {\r\n        texCounter--;\r\n        if (texCounter == 0) thisRef.isTexLoaded = true;\r\n        if (typeof callback == \"function\") callback();\r\n    });\r\n\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # loadMotion()\r\n//============================================================\r\nL2DBaseModel.prototype.loadMotion = function (name/*String*/, path /*String*/, callback) {\r\n    var pm = Live2DFramework.getPlatformManager(); //IPlatformManager\r\n\r\n    if (this.debugMode) pm.log(\"Load Motion : \" + path);\r\n\r\n    var motion = null; //Live2DMotion\r\n\r\n    var thisRef = this;\r\n    pm.loadBytes(path).then((buf)=>{\r\n        motion = Live2DMotion.loadMotion(buf);\r\n        if (name != null) {\r\n            thisRef.motions[name] = motion;\r\n        }\r\n        callback(motion);\r\n    });\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # loadExpression()\r\n//============================================================\r\nL2DBaseModel.prototype.loadExpression = function (name/*String*/, path /*String*/, callback) {\r\n    var pm = Live2DFramework.getPlatformManager(); //IPlatformManager\r\n\r\n    if (this.debugMode) pm.log(\"Load Expression : \" + path);\r\n\r\n    var thisRef = this;\r\n    pm.loadBytes(path).then((buf)=>{\r\n        if (name != null) {\r\n            thisRef.expressions[name] = L2DExpressionMotion.loadJson(buf);\r\n        }\r\n        if (typeof callback == \"function\") callback();\r\n    });\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # loadPose()\r\n//============================================================\r\nL2DBaseModel.prototype.loadPose = function (path /*String*/, callback) {\r\n    var pm = Live2DFramework.getPlatformManager(); //IPlatformManager\r\n    if (this.debugMode) pm.log(\"Load Pose : \" + path);\r\n    var thisRef = this;\r\n    try {\r\n        pm.loadBytes(path).then((buf)=>{\r\n            thisRef.pose = L2DPose.load(buf);\r\n            if (typeof callback == \"function\") callback();\r\n        });\r\n    }\r\n    catch (e) {\r\n        console.warn(e);\r\n    }\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # loadPhysics()\r\n//============================================================\r\nL2DBaseModel.prototype.loadPhysics = function (path/*String*/) {\r\n    var pm = Live2DFramework.getPlatformManager(); //IPlatformManager\r\n    if (this.debugMode) pm.log(\"Load Physics : \" + path);\r\n    var thisRef = this;\r\n    try {\r\n        pm.loadBytes(path).then((buf)=>{\r\n            thisRef.physics = L2DPhysics.load(buf);\r\n        });\r\n    }\r\n    catch (e) {\r\n        console.warn(e);\r\n    }\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # hitTestSimple()\r\n//============================================================\r\nL2DBaseModel.prototype.hitTestSimple = function (drawID, testX, testY) {\r\n\t\r\n\tif(this.live2DModel === null) return !1;\r\n\t\r\n    var drawIndex = this.live2DModel.getDrawDataIndex(drawID);\r\n\r\n    if (drawIndex < 0) return false;\r\n\r\n    var points = this.live2DModel.getTransformedPoints(drawIndex);\r\n    var left = this.live2DModel.getCanvasWidth();\r\n    var right = 0;\r\n    var top = this.live2DModel.getCanvasHeight();\r\n    var bottom = 0;\r\n\r\n    for (var j = 0; j < points.length; j = j + 2) {\r\n        var x = points[j];\r\n        var y = points[j + 1];\r\n\r\n        if (x < left) left = x;\r\n        if (x > right) right = x;\r\n        if (y < top) top = y;\r\n        if (y > bottom) bottom = y;\r\n    }\r\n    var tx = this.modelMatrix.invertTransformX(testX);\r\n    var ty = this.modelMatrix.invertTransformY(testY);\r\n\r\n    return (left <= tx && tx <= right && top <= ty && ty <= bottom);\r\n}\r\n\r\n//============================================================\r\n//    L2DBaseModel # hitTestSimpleCustom()\r\n//============================================================\r\nL2DBaseModel.prototype.hitTestSimpleCustom = function (x, y, testX, testY) {\r\n\t\r\n\tif(this.live2DModel === null) return !1;\r\n\ttry{\r\n        if(testX >= x[0] && testX <= y[0])\r\n            if(testY <= x[1] && testY >= y[1])\r\n                return true;\r\n        return false;\r\n    }catch(err){\r\n        console.log(\"数据可能还没有准备好 view x:\" + x + \" y:\" + y +\" testX:\" + testX + \" testY:\" + testY \r\n            + \" Error:\" +err);\r\n        return false;\r\n    }\r\n}\r\n\r\n/**\r\n *\r\n *  You can modify and use this source freely\r\n *  only for the development of application related Live2D.\r\n *\r\n *  (c) Live2D Inc. All rights reserved.\r\n */\r\n\r\n//============================================================\r\n//============================================================\r\n//  class L2DExpressionMotion  extends     AMotion\r\n//============================================================\r\n//============================================================\r\nfunction L2DExpressionMotion() {\r\n    AMotion.prototype.constructor.call(this);\r\n    this.paramList = new Array(); //ArrayList<L2DExpressionParam>\r\n}\r\n\r\nL2DExpressionMotion.prototype = new AMotion(); // L2DExpressionMotion extends AMotion\r\n\r\n//============================================================\r\nL2DExpressionMotion.EXPRESSION_DEFAULT = \"DEFAULT\";\r\nL2DExpressionMotion.TYPE_SET = 0;\r\nL2DExpressionMotion.TYPE_ADD = 1;\r\nL2DExpressionMotion.TYPE_MULT = 2;\r\n\r\n//============================================================\r\n//    static L2DExpressionMotion.loadJson()\r\n//============================================================\r\nL2DExpressionMotion.loadJson = function (buf) {\r\n    var ret = new L2DExpressionMotion();\r\n\r\n    var pm = Live2DFramework.getPlatformManager();\r\n    var json = pm.jsonParseFromBytes(buf);\r\n\r\n    ret.setFadeIn(parseInt(json.fade_in) > 0 ? parseInt(json.fade_in) : 1000);\r\n    ret.setFadeOut(parseInt(json.fade_out) > 0 ? parseInt(json.fade_out) : 1000);\r\n\r\n    if (json.params == null) {\r\n        return ret;\r\n    }\r\n\r\n    var params = json.params;\r\n    var paramNum = params.length;\r\n    ret.paramList = []; //ArrayList<L2DExpressionParam>\r\n    for (var i = 0; i < paramNum; i++) {\r\n        var param = params[i];\r\n        var paramID = param.id.toString();\r\n        var value = parseFloat(param.val);\r\n        var calcTypeInt = L2DExpressionMotion.TYPE_ADD;\r\n        var calc = param.calc != null ? param.calc.toString() : \"add\";\r\n        if (calc === \"add\") {\r\n            calcTypeInt = L2DExpressionMotion.TYPE_ADD;\r\n        }\r\n        else if (calc === \"mult\") {\r\n            calcTypeInt = L2DExpressionMotion.TYPE_MULT;\r\n        }\r\n        else if (calc === \"set\") {\r\n            calcTypeInt = L2DExpressionMotion.TYPE_SET;\r\n        }\r\n        else {\r\n            calcTypeInt = L2DExpressionMotion.TYPE_ADD;\r\n        }\r\n        if (calcTypeInt == L2DExpressionMotion.TYPE_ADD) {\r\n            var defaultValue = param.def == null ? 0 : parseFloat(param.def);\r\n            value = value - defaultValue;\r\n        }\r\n        else if (calcTypeInt == L2DExpressionMotion.TYPE_MULT) {\r\n            var defaultValue = param.def == null ? 1 : parseFloat(param.def);\r\n            if (defaultValue == 0) defaultValue = 1;\r\n            value = value / defaultValue;\r\n        }\r\n\r\n        var item = new L2DExpressionParam();\r\n        item.id = paramID;\r\n        item.type = calcTypeInt;\r\n        item.value = value;\r\n\r\n        ret.paramList.push(item);\r\n    }\r\n\r\n    return ret;\r\n}\r\n\r\n\r\n//============================================================\r\n//    L2DExpressionMotion # updateParamExe()\r\n//============================================================\r\nL2DExpressionMotion.prototype.updateParamExe = function (model /*ALive2DModel*/, timeMSec/*long*/, weight /*float*/, motionQueueEnt /*MotionQueueEnt*/) {\r\n    for (var i = this.paramList.length - 1; i >= 0; --i) {\r\n        var param = this.paramList[i]; //L2DExpressionParam\r\n        // if (!param || !param.type) continue;\r\n        if (param.type == L2DExpressionMotion.TYPE_ADD) {\r\n            model.addToParamFloat(param.id, param.value, weight);\r\n        }\r\n        else if (param.type == L2DExpressionMotion.TYPE_MULT) {\r\n            model.multParamFloat(param.id, param.value, weight);\r\n        }\r\n        else if (param.type == L2DExpressionMotion.TYPE_SET) {\r\n            model.setParamFloat(param.id, param.value, weight);\r\n        }\r\n    }\r\n}\r\n\r\n//============================================================\r\n//============================================================\r\n//  class L2DExpressionParam   \r\n//============================================================\r\n//============================================================\r\nfunction L2DExpressionParam() {\r\n    this.id = \"\";\r\n    this.type = -1;\r\n    this.value = null;\r\n}\r\n\r\n/**\r\n *\r\n *  You can modify and use this source freely\r\n *  only for the development of application related Live2D.\r\n *\r\n *  (c) Live2D Inc. All rights reserved.\r\n */\r\n\r\n//============================================================\r\n//============================================================\r\n//  class L2DEyeBlink          \r\n//============================================================\r\n//============================================================\r\nfunction L2DEyeBlink() {\r\n    this.nextBlinkTime = null /* TODO NOT INIT */; // \r\n    this.stateStartTime = null /* TODO NOT INIT */; // \r\n    this.blinkIntervalMsec = null /* TODO NOT INIT */; // \r\n    this.eyeState = EYE_STATE.STATE_FIRST;\r\n    this.blinkIntervalMsec = 4000;\r\n    this.closingMotionMsec = 100;\r\n    this.closedMotionMsec = 50;\r\n    this.openingMotionMsec = 150;\r\n    this.closeIfZero = true;\r\n    this.eyeID_L = \"PARAM_EYE_L_OPEN\";\r\n    this.eyeID_R = \"PARAM_EYE_R_OPEN\";\r\n}\r\n\r\n//============================================================\r\n//    L2DEyeBlink # calcNextBlink()\r\n//============================================================\r\nL2DEyeBlink.prototype.calcNextBlink = function () {\r\n    var time /*long*/ = UtSystem.getUserTimeMSec();\r\n    var r /*Number*/ = Math.random();\r\n    return  /*(long)*/ (time + r * (2 * this.blinkIntervalMsec - 1));\r\n}\r\n\r\n//============================================================\r\n//    L2DEyeBlink # setInterval()\r\n//============================================================\r\nL2DEyeBlink.prototype.setInterval = function (blinkIntervalMsec /*int*/) {\r\n    this.blinkIntervalMsec = blinkIntervalMsec;\r\n}\r\n\r\n//============================================================\r\n//    L2DEyeBlink # setEyeMotion()\r\n//============================================================\r\nL2DEyeBlink.prototype.setEyeMotion = function (closingMotionMsec/*int*/, closedMotionMsec/*int*/, openingMotionMsec/*int*/) {\r\n    this.closingMotionMsec = closingMotionMsec;\r\n    this.closedMotionMsec = closedMotionMsec;\r\n    this.openingMotionMsec = openingMotionMsec;\r\n}\r\n\r\n//============================================================\r\n//    L2DEyeBlink # updateParam()\r\n//============================================================\r\nL2DEyeBlink.prototype.updateParam = function (model/*ALive2DModel*/) {\r\n    var time /*:long*/ = UtSystem.getUserTimeMSec();\r\n    var eyeParamValue /*:Number*/;\r\n    var t /*:Number*/ = 0;\r\n    switch (this.eyeState) {\r\n        case EYE_STATE.STATE_CLOSING:\r\n            t = (time - this.stateStartTime) / this.closingMotionMsec;\r\n            if (t >= 1) {\r\n                t = 1;\r\n                this.eyeState = EYE_STATE.STATE_CLOSED;\r\n                this.stateStartTime = time;\r\n            }\r\n            eyeParamValue = 1 - t;\r\n            break;\r\n        case EYE_STATE.STATE_CLOSED:\r\n            t = (time - this.stateStartTime) / this.closedMotionMsec;\r\n            if (t >= 1) {\r\n                this.eyeState = EYE_STATE.STATE_OPENING;\r\n                this.stateStartTime = time;\r\n            }\r\n            eyeParamValue = 0;\r\n            break;\r\n        case EYE_STATE.STATE_OPENING:\r\n            t = (time - this.stateStartTime) / this.openingMotionMsec;\r\n            if (t >= 1) {\r\n                t = 1;\r\n                this.eyeState = EYE_STATE.STATE_INTERVAL;\r\n                this.nextBlinkTime = this.calcNextBlink();\r\n            }\r\n            eyeParamValue = t;\r\n            break;\r\n        case EYE_STATE.STATE_INTERVAL:\r\n            if (this.nextBlinkTime < time) {\r\n                this.eyeState = EYE_STATE.STATE_CLOSING;\r\n                this.stateStartTime = time;\r\n            }\r\n            eyeParamValue = 1;\r\n            break;\r\n        case EYE_STATE.STATE_FIRST:\r\n        default:\r\n            this.eyeState = EYE_STATE.STATE_INTERVAL;\r\n            this.nextBlinkTime = this.calcNextBlink();\r\n            eyeParamValue = 1;\r\n            break;\r\n    }\r\n    if (!this.closeIfZero) eyeParamValue = -eyeParamValue;\r\n    model.setParamFloat(this.eyeID_L, eyeParamValue);\r\n    model.setParamFloat(this.eyeID_R, eyeParamValue);\r\n}\r\n\r\n//== enum EYE_STATE ==\r\nvar EYE_STATE = function () { };\r\n\r\nEYE_STATE.STATE_FIRST = \"STATE_FIRST\"\r\nEYE_STATE.STATE_INTERVAL = \"STATE_INTERVAL\"\r\nEYE_STATE.STATE_CLOSING = \"STATE_CLOSING\"\r\nEYE_STATE.STATE_CLOSED = \"STATE_CLOSED\"\r\nEYE_STATE.STATE_OPENING = \"STATE_OPENING\"\r\n/**\r\n *\r\n *  You can modify and use this source freely\r\n *  only for the development of application related Live2D.\r\n *\r\n *  (c) Live2D Inc. All rights reserved.\r\n */\r\n\r\n//============================================================\r\n//============================================================\r\n//  class L2DMatrix44          \r\n//============================================================\r\n//============================================================\r\nfunction L2DMatrix44() {\r\n    this.tr = new Float32Array(16); // \r\n    this.identity();\r\n}\r\n\r\n//============================================================\r\n//    static L2DMatrix44.mul()\r\n//============================================================\r\nL2DMatrix44.mul = function (a/*float[]*/, b/*float[]*/, dst/*float[]*/) {\r\n    var c = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\r\n    var n = 4;\r\n    var i, j, k;\r\n    for (i = 0; i < n; i++) {\r\n        for (j = 0; j < n; j++) {\r\n            for (k = 0; k < n; k++) {\r\n                c[i + j * 4] += a[i + k * 4] * b[k + j * 4];\r\n            }\r\n        }\r\n    }\r\n    for (i = 0; i < 16; i++) {\r\n        dst[i] = c[i];\r\n    }\r\n}\r\n\r\n//============================================================\r\n//    L2DMatrix44 # identity()\r\n//============================================================\r\nL2DMatrix44.prototype.identity = function () {\r\n    for (var i/*:int*/ = 0; i < 16; i++)\r\n        this.tr[i] = ((i % 5) == 0) ? 1 : 0;\r\n}\r\n\r\n//============================================================\r\n//    L2DMatrix44 # getArray()\r\n//============================================================\r\nL2DMatrix44.prototype.getArray = function () {\r\n    return this.tr;\r\n}\r\n\r\n//============================================================\r\n//    L2DMatrix44 # getCopyMatrix()\r\n//============================================================\r\nL2DMatrix44.prototype.getCopyMatrix = function () {\r\n    return new Float32Array(this.tr); // this.tr.clone();\r\n}\r\n\r\n//============================================================\r\n//    L2DMatrix44 # setMatrix()\r\n//============================================================\r\nL2DMatrix44.prototype.setMatrix = function (tr/*float[]*/) {\r\n    if (this.tr == null || this.tr.length != this.tr.length) return;\r\n    for (var i/*:int*/ = 0; i < 16; i++) this.tr[i] = tr[i];\r\n}\r\n\r\n//============================================================\r\n//    L2DMatrix44 # getScaleX()\r\n//============================================================\r\nL2DMatrix44.prototype.getScaleX = function () {\r\n    return this.tr[0];\r\n}\r\n\r\n//============================================================\r\n//    L2DMatrix44 # getScaleY()\r\n//============================================================\r\nL2DMatrix44.prototype.getScaleY = function () {\r\n    return this.tr[5];\r\n}\r\n\r\n//============================================================\r\n//    L2DMatrix44 # transformX()\r\n//============================================================\r\nL2DMatrix44.prototype.transformX = function (src/*float*/) {\r\n    return this.tr[0] * src + this.tr[12];\r\n}\r\n\r\n//============================================================\r\n//    L2DMatrix44 # transformY()\r\n//============================================================\r\nL2DMatrix44.prototype.transformY = function (src/*float*/) {\r\n    return this.tr[5] * src + this.tr[13];\r\n}\r\n\r\n//============================================================\r\n//    L2DMatrix44 # invertTransformX()\r\n//============================================================\r\nL2DMatrix44.prototype.invertTransformX = function (src/*float*/) {\r\n    return (src - this.tr[12]) / this.tr[0];\r\n}\r\n\r\n//============================================================\r\n//    L2DMatrix44 # invertTransformY()\r\n//============================================================\r\nL2DMatrix44.prototype.invertTransformY = function (src/*float*/) {\r\n    return (src - this.tr[13]) / this.tr[5];\r\n}\r\n\r\n//============================================================\r\n//    L2DMatrix44 # multTranslate()\r\n//============================================================\r\nL2DMatrix44.prototype.multTranslate = function (shiftX/*float*/, shiftY/*float*/) {\r\n    var tr1 = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, shiftX, shiftY, 0, 1];\r\n    L2DMatrix44.mul(tr1, this.tr, this.tr);\r\n}\r\n\r\n//============================================================\r\n//    L2DMatrix44 # translate()\r\n//============================================================\r\nL2DMatrix44.prototype.translate = function (x/*float*/, y/*float*/) {\r\n    this.tr[12] = x;\r\n    this.tr[13] = y;\r\n}\r\n\r\n//============================================================\r\n//    L2DMatrix44 # translateX()\r\n//============================================================\r\nL2DMatrix44.prototype.translateX = function (x/*float*/) {\r\n    this.tr[12] = x;\r\n}\r\n\r\n//============================================================\r\n//    L2DMatrix44 # translateY()\r\n//============================================================\r\nL2DMatrix44.prototype.translateY = function (y/*float*/) {\r\n    this.tr[13] = y;\r\n}\r\n\r\n//============================================================\r\n//    L2DMatrix44 # multScale()\r\n//============================================================\r\nL2DMatrix44.prototype.multScale = function (scaleX/*float*/, scaleY/*float*/) {\r\n    var tr1 = [scaleX, 0, 0, 0, 0, scaleY, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\r\n    L2DMatrix44.mul(tr1, this.tr, this.tr);\r\n}\r\n\r\n//============================================================\r\n//    L2DMatrix44 # scale()\r\n//============================================================\r\nL2DMatrix44.prototype.scale = function (scaleX/*float*/, scaleY/*float*/) {\r\n    this.tr[0] = scaleX;\r\n    this.tr[5] = scaleY;\r\n}\r\n/**\r\n *\r\n *  You can modify and use this source freely\r\n *  only for the development of application related Live2D.\r\n *\r\n *  (c) Live2D Inc. All rights reserved.\r\n */\r\n\r\n//============================================================\r\n//============================================================\r\n//  class L2DModelMatrix       extends     L2DMatrix44\r\n//============================================================\r\n//============================================================\r\nfunction L2DModelMatrix(w/*float*/, h/*float*/) {\r\n    L2DMatrix44.prototype.constructor.call(this);\r\n    this.width = w;\r\n    this.height = h;\r\n}\r\n\r\n//L2DModelMatrix extends L2DMatrix44\r\nL2DModelMatrix.prototype = new L2DMatrix44();\r\n\r\n//============================================================\r\n//    L2DModelMatrix # setPosition()\r\n//============================================================\r\nL2DModelMatrix.prototype.setPosition = function (x/*float*/, y/*float*/) {\r\n    this.translate(x, y);\r\n}\r\n\r\n//============================================================\r\n//    L2DModelMatrix # setCenterPosition()\r\n//============================================================\r\nL2DModelMatrix.prototype.setCenterPosition = function (x/*float*/, y/*float*/) {\r\n    var w = this.width * this.getScaleX();\r\n    var h = this.height * this.getScaleY();\r\n    this.translate(x - w / 2, y - h / 2);\r\n}\r\n\r\n//============================================================\r\n//    L2DModelMatrix # top()\r\n//============================================================\r\nL2DModelMatrix.prototype.top = function (y/*float*/) {\r\n    this.setY(y);\r\n}\r\n\r\n//============================================================\r\n//    L2DModelMatrix # bottom()\r\n//============================================================\r\nL2DModelMatrix.prototype.bottom = function (y/*float*/) {\r\n    var h = this.height * this.getScaleY();\r\n    this.translateY(y - h);\r\n}\r\n\r\n//============================================================\r\n//    L2DModelMatrix # left()\r\n//============================================================\r\nL2DModelMatrix.prototype.left = function (x/*float*/) {\r\n    this.setX(x);\r\n}\r\n\r\n//============================================================\r\n//    L2DModelMatrix # right()\r\n//============================================================\r\nL2DModelMatrix.prototype.right = function (x/*float*/) {\r\n    var w = this.width * this.getScaleX();\r\n    this.translateX(x - w);\r\n}\r\n\r\n//============================================================\r\n//    L2DModelMatrix # centerX()\r\n//============================================================\r\nL2DModelMatrix.prototype.centerX = function (x/*float*/) {\r\n    var w = this.width * this.getScaleX();\r\n    this.translateX(x - w / 2);\r\n}\r\n\r\n//============================================================\r\n//    L2DModelMatrix # centerY()\r\n//============================================================\r\nL2DModelMatrix.prototype.centerY = function (y/*float*/) {\r\n    var h = this.height * this.getScaleY();\r\n    this.translateY(y - h / 2);\r\n}\r\n\r\n//============================================================\r\n//    L2DModelMatrix # setX()\r\n//============================================================\r\nL2DModelMatrix.prototype.setX = function (x/*float*/) {\r\n    this.translateX(x);\r\n}\r\n\r\n//============================================================\r\n//    L2DModelMatrix # setY()\r\n//============================================================\r\nL2DModelMatrix.prototype.setY = function (y/*float*/) {\r\n    this.translateY(y);\r\n}\r\n\r\n//============================================================\r\n//    L2DModelMatrix # setHeight()\r\n//============================================================\r\nL2DModelMatrix.prototype.setHeight = function (h/*float*/) {\r\n    var scaleX = h / this.height;\r\n    var scaleY = -scaleX;\r\n    this.scale(scaleX, scaleY);\r\n}\r\n\r\n//============================================================\r\n//    L2DModelMatrix # setWidth()\r\n//============================================================\r\nL2DModelMatrix.prototype.setWidth = function (w/*float*/) {\r\n    var scaleX = w / this.width;\r\n    var scaleY = -scaleX;\r\n    this.scale(scaleX, scaleY);\r\n}\r\n\r\n/**\r\n *\r\n *  You can modify and use this source freely\r\n *  only for the development of application related Live2D.\r\n *\r\n *  (c) Live2D Inc. All rights reserved.\r\n */\r\n\r\n//============================================================\r\n//============================================================\r\n//  class L2DMotionManager     extends     MotionQueueManager\r\n//============================================================\r\n//============================================================\r\nfunction L2DMotionManager() {\r\n    MotionQueueManager.prototype.constructor.call(this);\r\n    this.currentPriority = null;\r\n    this.reservePriority = null;\r\n\r\n    this.super = MotionQueueManager.prototype;\r\n}\r\n\r\n\r\nL2DMotionManager.prototype = new MotionQueueManager();\r\n\r\n//============================================================\r\n//    L2DMotionManager # getCurrentPriority()\r\n//============================================================\r\nL2DMotionManager.prototype.getCurrentPriority = function () {\r\n    return this.currentPriority;\r\n}\r\n\r\n//============================================================\r\n//    L2DMotionManager # getReservePriority()\r\n//============================================================\r\nL2DMotionManager.prototype.getReservePriority = function () {\r\n    return this.reservePriority;\r\n}\r\n\r\n//============================================================\r\n//    L2DMotionManager # reserveMotion()\r\n//============================================================\r\nL2DMotionManager.prototype.reserveMotion = function (priority/*int*/) {\r\n    if (this.reservePriority >= priority) {\r\n        return false;\r\n    }\r\n    if (this.currentPriority >= priority) {\r\n        return false;\r\n    }\r\n\r\n    this.reservePriority = priority;\r\n\r\n    return true;\r\n}\r\n\r\n//============================================================\r\n//    L2DMotionManager # setReservePriority()\r\n//============================================================\r\nL2DMotionManager.prototype.setReservePriority = function (val/*int*/) {\r\n    this.reservePriority = val;\r\n}\r\n\r\n//============================================================\r\n//    L2DMotionManager # updateParam()\r\n//============================================================\r\nL2DMotionManager.prototype.updateParam = function (model/*ALive2DModel*/) {\r\n    var updated = MotionQueueManager.prototype.updateParam.call(this, model);\r\n\r\n    if (this.isFinished()) {\r\n        this.currentPriority = 0;\r\n    }\r\n\r\n    return updated;\r\n}\r\n\r\n//============================================================\r\n//    L2DMotionManager # startMotionPrio()\r\n//============================================================\r\nL2DMotionManager.prototype.startMotionPrio = function (motion/*AMotion*/, priority/*int*/) {\r\n    if (priority == this.reservePriority) {\r\n        this.reservePriority = 0;\r\n    }\r\n    this.currentPriority = priority;\r\n    return this.startMotion(motion, false);\r\n}\r\n\r\n/**\r\n *\r\n *  You can modify and use this source freely\r\n *  only for the development of application related Live2D.\r\n *\r\n *  (c) Live2D Inc. All rights reserved.\r\n */\r\n\r\n//============================================================\r\n//============================================================\r\n//  class L2DPhysics           \r\n//============================================================\r\n//============================================================\r\nfunction L2DPhysics() {\r\n    this.physicsList = new Array(); //ArrayList<PhysicsHair>\r\n    this.startTimeMSec = UtSystem.getUserTimeMSec();\r\n}\r\n\r\n//============================================================\r\n//    static L2DPhysics.load()\r\n//============================================================\r\nL2DPhysics.load = function (buf /*byte[]*/) {\r\n    var ret = new L2DPhysics(); //L2DPhysicsL2DPhysics\r\n    var pm = Live2DFramework.getPlatformManager();\r\n    var json = pm.jsonParseFromBytes(buf);\r\n    var params = json.physics_hair;\r\n    var paramNum = params.length;\r\n    for (var i = 0; i < paramNum; i++) {\r\n        var param = params[i]; //Value\r\n        var physics = new PhysicsHair(); //PhysicsHairPhysicsHair\r\n        var setup = param.setup; //Value\r\n        var length = parseFloat(setup.length);\r\n        var resist = parseFloat(setup.regist);\r\n        var mass = parseFloat(setup.mass);\r\n        physics.setup(length, resist, mass);\r\n        var srcList = param.src; //Value\r\n        var srcNum = srcList.length;\r\n        for (var j = 0; j < srcNum; j++) {\r\n            var src = srcList[j]; //Value\r\n            var id = src.id; //String\r\n            var type = PhysicsHair.Src.SRC_TO_X;\r\n            var typeStr = src.ptype; //String\r\n            if (typeStr === \"x\") {\r\n                type = PhysicsHair.Src.SRC_TO_X;\r\n            }\r\n            else if (typeStr === \"y\") {\r\n                type = PhysicsHair.Src.SRC_TO_Y;\r\n            }\r\n            else if (typeStr === \"angle\") {\r\n                type = PhysicsHair.Src.SRC_TO_G_ANGLE;\r\n            }\r\n            else {\r\n                UtDebug.error(\"live2d\", \"Invalid parameter:PhysicsHair.Src\");\r\n            }\r\n            var scale = parseFloat(src.scale);\r\n            var weight = parseFloat(src.weight);\r\n            physics.addSrcParam(type, id, scale, weight);\r\n        }\r\n        var targetList = param.targets; //Value\r\n        var targetNum = targetList.length;\r\n        for (var j = 0; j < targetNum; j++) {\r\n            var target = targetList[j]; //Value\r\n            var id = target.id; //String\r\n            var type = PhysicsHair.Target.TARGET_FROM_ANGLE;\r\n            var typeStr = target.ptype; //String\r\n            if (typeStr === \"angle\") {\r\n                type = PhysicsHair.Target.TARGET_FROM_ANGLE;\r\n            }\r\n            else if (typeStr === \"angle_v\") {\r\n                type = PhysicsHair.Target.TARGET_FROM_ANGLE_V;\r\n            }\r\n            else {\r\n                UtDebug.error(\"live2d\", \"Invalid parameter:PhysicsHair.Target\");\r\n            }\r\n            var scale = parseFloat(target.scale);\r\n            var weight = parseFloat(target.weight);\r\n            physics.addTargetParam(type, id, scale, weight);\r\n        }\r\n        ret.physicsList.push(physics);\r\n    }\r\n    return ret;\r\n}\r\n\r\n//============================================================\r\n//    L2DPhysics # updateParam()\r\n//============================================================\r\nL2DPhysics.prototype.updateParam = function (model/*ALive2DModel*/) {\r\n    var timeMSec = UtSystem.getUserTimeMSec() - this.startTimeMSec;\r\n    for (var i = 0; i < this.physicsList.length; i++) {\r\n        this.physicsList[i].update(model, timeMSec);\r\n    }\r\n}\r\n\r\n/**\r\n *\r\n *  You can modify and use this source freely\r\n *  only for the development of application related Live2D.\r\n *\r\n *  (c) Live2D Inc. All rights reserved.\r\n */\r\n\r\n//============================================================\r\n//============================================================\r\n//  class L2DPose              \r\n//============================================================\r\n//============================================================\r\nfunction L2DPose() {\r\n    this.lastTime = 0;\r\n    this.lastModel = null; //ALive2DModel\r\n    this.partsGroups = new Array(); //ArrayList<L2DPartsParam[]>\r\n}\r\n\r\n\r\n//============================================================\r\n//    static L2DPose.load()\r\n//============================================================\r\nL2DPose.load = function (buf/*byte[]*/) {\r\n    var ret = new L2DPose(); //L2DPose\r\n    var pm = Live2DFramework.getPlatformManager();\r\n    var json = pm.jsonParseFromBytes(buf);\r\n    var poseListInfo = json.parts_visible; //Value\r\n    var poseNum = poseListInfo.length;\r\n    for (var i_pose = 0; i_pose < poseNum; i_pose++) {\r\n        var poseInfo = poseListInfo[i_pose]; //Value\r\n        var idListInfo = poseInfo.group; //Value\r\n        var idNum = idListInfo.length;\r\n        var partsGroup/*L2DPartsParam*/ = new Array();\r\n        for (var i_group = 0; i_group < idNum; i_group++) {\r\n            var partsInfo = idListInfo[i_group]; //Value\r\n            var parts = new L2DPartsParam(partsInfo.id); //L2DPartsParamL2DPartsParam\r\n            partsGroup[i_group] = parts;\r\n            if (partsInfo.link == null) continue;\r\n            var linkListInfo = partsInfo.link; //Value\r\n            var linkNum = linkListInfo.length;\r\n            parts.link = new Array(); //ArrayList<L2DPartsParam>\r\n            for (var i_link = 0; i_link < linkNum; i_link++) {\r\n                var linkParts = new L2DPartsParam(linkListInfo[i_link]); //L2DPartsParamL2DPartsParam\r\n                parts.link.push(linkParts);\r\n            }\r\n        }\r\n        ret.partsGroups.push(partsGroup);\r\n    }\r\n\r\n    return ret;\r\n}\r\n\r\n//============================================================\r\n//    L2DPose # updateParam()\r\n//============================================================\r\nL2DPose.prototype.updateParam = function (model/*ALive2DModel*/) {\r\n    if (model == null) return;\r\n\r\n    if (!(model == this.lastModel)) {\r\n        this.initParam(model);\r\n    }\r\n    this.lastModel = model;\r\n\r\n    var curTime = UtSystem.getUserTimeMSec();\r\n    var deltaTimeSec = ((this.lastTime == 0) ? 0 : (curTime - this.lastTime) / 1000.0);\r\n    this.lastTime = curTime;\r\n    if (deltaTimeSec < 0) deltaTimeSec = 0;\r\n    for (var i = 0; i < this.partsGroups.length; i++) {\r\n        this.normalizePartsOpacityGroup(model, this.partsGroups[i], deltaTimeSec);\r\n        this.copyOpacityOtherParts(model, this.partsGroups[i]);\r\n    }\r\n}\r\n\r\n//============================================================\r\n//    L2DPose # initParam()\r\n//============================================================\r\nL2DPose.prototype.initParam = function (model/*ALive2DModel*/) {\r\n    if (model == null) return;\r\n    for (var i = 0; i < this.partsGroups.length; i++) {\r\n        var partsGroup = this.partsGroups[i]; //L2DPartsParam\r\n        for (var j = 0; j < partsGroup.length; j++) {\r\n            partsGroup[j].initIndex(model);\r\n            var partsIndex = partsGroup[j].partsIndex;\r\n            var paramIndex = partsGroup[j].paramIndex;\r\n            if (partsIndex < 0) continue;\r\n            var v/*:Boolean*/ = (model.getParamFloat(paramIndex) != 0);\r\n            model.setPartsOpacity(partsIndex, (v ? 1.0 : 0.0));\r\n            model.setParamFloat(paramIndex, (v ? 1.0 : 0.0));\r\n            if (partsGroup[j].link == null) continue;\r\n            for (var k = 0; k < partsGroup[j].link.length; k++) {\r\n                partsGroup[j].link[k].initIndex(model);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n//============================================================\r\n//    L2DPose # normalizePartsOpacityGroup()\r\n//============================================================\r\nL2DPose.prototype.normalizePartsOpacityGroup = function (model/*ALive2DModel*/, partsGroup/*L2DPartsParam[]*/, deltaTimeSec/*float*/) {\r\n    var visibleParts = -1;\r\n    var visibleOpacity = 1.0;\r\n    var CLEAR_TIME_SEC = 0.5;\r\n    var phi = 0.5;\r\n    var maxBackOpacity = 0.15;\r\n    for (var i = 0; i < partsGroup.length; i++) {\r\n        var partsIndex = partsGroup[i].partsIndex;\r\n        var paramIndex = partsGroup[i].paramIndex;\r\n        if (partsIndex < 0) continue; if (model.getParamFloat(paramIndex) != 0) {\r\n            if (visibleParts >= 0) {\r\n                break;\r\n            }\r\n            visibleParts = i;\r\n            visibleOpacity = model.getPartsOpacity(partsIndex);\r\n            visibleOpacity += deltaTimeSec / CLEAR_TIME_SEC;\r\n            if (visibleOpacity > 1) {\r\n                visibleOpacity = 1;\r\n            }\r\n        }\r\n    }\r\n    if (visibleParts < 0) {\r\n        visibleParts = 0;\r\n        visibleOpacity = 1;\r\n    }\r\n    for (var i = 0; i < partsGroup.length; i++) {\r\n        var partsIndex = partsGroup[i].partsIndex;\r\n        if (partsIndex < 0) continue; if (visibleParts == i) {\r\n            model.setPartsOpacity(partsIndex, visibleOpacity);\r\n        }\r\n        else {\r\n            var opacity = model.getPartsOpacity(partsIndex);\r\n            var a1;\r\n            if (visibleOpacity < phi) {\r\n                a1 = visibleOpacity * (phi - 1) / phi + 1;\r\n            }\r\n            else {\r\n                a1 = (1 - visibleOpacity) * phi / (1 - phi);\r\n            }\r\n            var backOp = (1 - a1) * (1 - visibleOpacity);\r\n            if (backOp > maxBackOpacity) {\r\n                a1 = 1 - maxBackOpacity / (1 - visibleOpacity);\r\n            }\r\n            if (opacity > a1) {\r\n                opacity = a1;\r\n            }\r\n            model.setPartsOpacity(partsIndex, opacity);\r\n        }\r\n    }\r\n}\r\n\r\n//============================================================\r\n//    L2DPose # copyOpacityOtherParts()\r\n//============================================================\r\nL2DPose.prototype.copyOpacityOtherParts = function (model/*ALive2DModel*/, partsGroup/*L2DPartsParam[]*/) {\r\n    for (var i_group = 0; i_group < partsGroup.length; i_group++) {\r\n        var partsParam = partsGroup[i_group]; //L2DPartsParam\r\n        if (partsParam.link == null) continue;\r\n        if (partsParam.partsIndex < 0) continue;\r\n        var opacity = model.getPartsOpacity(partsParam.partsIndex);\r\n        for (var i_link = 0; i_link < partsParam.link.length; i_link++) {\r\n            var linkParts = partsParam.link[i_link]; //L2DPartsParam\r\n            if (linkParts.partsIndex < 0) continue;\r\n            model.setPartsOpacity(linkParts.partsIndex, opacity);\r\n        }\r\n    }\r\n}\r\n\r\n//============================================================\r\n//============================================================\r\n//  class L2DPartsParam        \r\n//============================================================\r\n//============================================================\r\nfunction L2DPartsParam(id/*String*/) {\r\n    this.paramIndex = -1;\r\n    this.partsIndex = -1;\r\n    this.link = null; // ArrayList<L2DPartsParam>\r\n    this.id = id;\r\n}\r\n\r\n//============================================================\r\n//    L2DPartsParam # initIndex()\r\n//============================================================\r\nL2DPartsParam.prototype.initIndex = function (model/*ALive2DModel*/) {\r\n    this.paramIndex = model.getParamIndex(\"VISIBLE:\" + this.id);\r\n    this.partsIndex = model.getPartsDataIndex(PartsDataID.getID(this.id));\r\n    model.setParamFloat(this.paramIndex, 1);\r\n}\r\n/**\r\n *\r\n *  You can modify and use this source freely\r\n *  only for the development of application related Live2D.\r\n *\r\n *  (c) Live2D Inc. All rights reserved.\r\n */\r\n\r\n//============================================================\r\n//============================================================\r\n//  class L2DTargetPoint       \r\n//============================================================\r\n//============================================================\r\nfunction L2DTargetPoint() {\r\n    this.EPSILON = 0.01; // 変化の最小値（この値以下は無視される）\r\n    this.faceTargetX = 0;\r\n    this.faceTargetY = 0;\r\n    this.faceX = 0;\r\n    this.faceY = 0;\r\n    this.faceVX = 0;\r\n    this.faceVY = 0;\r\n    this.lastTimeSec = 0;\r\n}\r\n\r\n//============================================================\r\nL2DTargetPoint.FRAME_RATE = 30;\r\n\r\n//============================================================\r\n//    L2DTargetPoint # set()\r\n//============================================================\r\nL2DTargetPoint.prototype.setPoint = function (x/*float*/, y/*float*/) {\r\n    this.faceTargetX = x;\r\n    this.faceTargetY = y;\r\n}\r\n\r\n//============================================================\r\n//    L2DTargetPoint # getX()\r\n//============================================================\r\nL2DTargetPoint.prototype.getX = function () {\r\n    return this.faceX;\r\n}\r\n\r\n//============================================================\r\n//    L2DTargetPoint # getY()\r\n//============================================================\r\nL2DTargetPoint.prototype.getY = function () {\r\n    return this.faceY;\r\n}\r\n\r\n//============================================================\r\n//    L2DTargetPoint # update()\r\n//============================================================\r\nL2DTargetPoint.prototype.update = function () {\r\n    var TIME_TO_MAX_SPEED = 0.15;\r\n    var FACE_PARAM_MAX_V = 40.0 / 7.5;\r\n    var MAX_V = FACE_PARAM_MAX_V / L2DTargetPoint.FRAME_RATE;\r\n    if (this.lastTimeSec == 0) {\r\n        this.lastTimeSec = UtSystem.getUserTimeMSec();\r\n        return;\r\n    }\r\n    var curTimeSec = UtSystem.getUserTimeMSec();\r\n    var deltaTimeWeight = (curTimeSec - this.lastTimeSec) * L2DTargetPoint.FRAME_RATE / 1000.0;\r\n    this.lastTimeSec = curTimeSec;\r\n    var FRAME_TO_MAX_SPEED = TIME_TO_MAX_SPEED * L2DTargetPoint.FRAME_RATE;\r\n    var MAX_A = deltaTimeWeight * MAX_V / FRAME_TO_MAX_SPEED;\r\n    var dx = (this.faceTargetX - this.faceX);\r\n    var dy = (this.faceTargetY - this.faceY);\r\n    // if(dx == 0 && dy == 0) return;\r\n    if (Math.abs(dx) <= this.EPSILON && Math.abs(dy) <= this.EPSILON) return;\r\n    var d = Math.sqrt(dx * dx + dy * dy);\r\n    var vx = MAX_V * dx / d;\r\n    var vy = MAX_V * dy / d;\r\n    var ax = vx - this.faceVX;\r\n    var ay = vy - this.faceVY;\r\n    var a = Math.sqrt(ax * ax + ay * ay);\r\n    if (a < -MAX_A || a > MAX_A) {\r\n        ax *= MAX_A / a;\r\n        ay *= MAX_A / a;\r\n        a = MAX_A;\r\n    }\r\n    this.faceVX += ax;\r\n    this.faceVY += ay;\r\n    {\r\n        var max_v = 0.5 * (Math.sqrt(MAX_A * MAX_A + 16 * MAX_A * d - 8 * MAX_A * d) - MAX_A);\r\n        var cur_v = Math.sqrt(this.faceVX * this.faceVX + this.faceVY * this.faceVY);\r\n        if (cur_v > max_v) {\r\n            this.faceVX *= max_v / cur_v;\r\n            this.faceVY *= max_v / cur_v;\r\n        }\r\n    }\r\n    this.faceX += this.faceVX;\r\n    this.faceY += this.faceVY;\r\n}\r\n/**\r\n *\r\n *  You can modify and use this source freely\r\n *  only for the development of application related Live2D.\r\n *\r\n *  (c) Live2D Inc. All rights reserved.\r\n */\r\n\r\n//============================================================\r\n//============================================================\r\n//  class L2DViewMatrix        extends     L2DMatrix44\r\n//============================================================\r\n//============================================================\r\nfunction L2DViewMatrix() {\r\n    L2DMatrix44.prototype.constructor.call(this);\r\n    this.screenLeft = null;\r\n    this.screenRight = null;\r\n    this.screenTop = null;\r\n    this.screenBottom = null;\r\n    this.maxLeft = null;\r\n    this.maxRight = null;\r\n    this.maxTop = null;\r\n    this.maxBottom = null;\r\n    this.max = Number.MAX_VALUE;\r\n    this.min = 0;\r\n}\r\n\r\nL2DViewMatrix.prototype = new L2DMatrix44(); //L2DViewMatrix extends L2DMatrix44\r\n\r\n//============================================================\r\n//    L2DViewMatrix # getMaxScale()\r\n//============================================================\r\nL2DViewMatrix.prototype.getMaxScale = function () {\r\n    return this.max;\r\n}\r\n\r\n//============================================================\r\n//    L2DViewMatrix # getMinScale()\r\n//============================================================\r\nL2DViewMatrix.prototype.getMinScale = function () {\r\n    return this.min;\r\n}\r\n\r\n//============================================================\r\n//    L2DViewMatrix # setMaxScale()\r\n//============================================================\r\nL2DViewMatrix.prototype.setMaxScale = function (v/*float*/) {\r\n    this.max = v;\r\n}\r\n\r\n//============================================================\r\n//    L2DViewMatrix # setMinScale()\r\n//============================================================\r\nL2DViewMatrix.prototype.setMinScale = function (v/*float*/) {\r\n    this.min = v;\r\n}\r\n\r\n//============================================================\r\n//    L2DViewMatrix # isMaxScale()\r\n//============================================================\r\nL2DViewMatrix.prototype.isMaxScale = function () {\r\n    return this.getScaleX() == this.max;\r\n}\r\n\r\n//============================================================\r\n//    L2DViewMatrix # isMinScale()\r\n//============================================================\r\nL2DViewMatrix.prototype.isMinScale = function () {\r\n    return this.getScaleX() == this.min;\r\n}\r\n\r\n//============================================================\r\n//    L2DViewMatrix # adjustTranslate()\r\n//============================================================\r\nL2DViewMatrix.prototype.adjustTranslate = function (shiftX/*float*/, shiftY/*float*/) {\r\n    if (this.tr[0] * this.maxLeft + (this.tr[12] + shiftX) > this.screenLeft)\r\n        shiftX = this.screenLeft - this.tr[0] * this.maxLeft - this.tr[12];\r\n    if (this.tr[0] * this.maxRight + (this.tr[12] + shiftX) < this.screenRight)\r\n        shiftX = this.screenRight - this.tr[0] * this.maxRight - this.tr[12];\r\n    if (this.tr[5] * this.maxTop + (this.tr[13] + shiftY) < this.screenTop)\r\n        shiftY = this.screenTop - this.tr[5] * this.maxTop - this.tr[13];\r\n    if (this.tr[5] * this.maxBottom + (this.tr[13] + shiftY) > this.screenBottom)\r\n        shiftY = this.screenBottom - this.tr[5] * this.maxBottom - this.tr[13];\r\n\r\n    var tr1 = [1, 0, 0, 0,\r\n        0, 1, 0, 0,\r\n        0, 0, 1, 0,\r\n        shiftX, shiftY, 0, 1];\r\n    L2DMatrix44.mul(tr1, this.tr, this.tr);\r\n}\r\n\r\n//============================================================\r\n//    L2DViewMatrix # adjustScale()\r\n//============================================================\r\nL2DViewMatrix.prototype.adjustScale = function (cx/*float*/, cy/*float*/, scale/*float*/) {\r\n    var targetScale = scale * this.tr[0];\r\n    if (targetScale < this.min) {\r\n        if (this.tr[0] > 0) scale = this.min / this.tr[0];\r\n    }\r\n    else if (targetScale > this.max) {\r\n        if (this.tr[0] > 0) scale = this.max / this.tr[0];\r\n    }\r\n    var tr1 = [1, 0, 0, 0,\r\n        0, 1, 0, 0,\r\n        0, 0, 1, 0,\r\n        cx, cy, 0, 1];\r\n    var tr2 = [scale, 0, 0, 0,\r\n        0, scale, 0, 0,\r\n        0, 0, 1, 0,\r\n        0, 0, 0, 1];\r\n    var tr3 = [1, 0, 0, 0,\r\n        0, 1, 0, 0,\r\n        0, 0, 1, 0,\r\n        -cx, -cy, 0, 1];\r\n    L2DMatrix44.mul(tr3, this.tr, this.tr);\r\n    L2DMatrix44.mul(tr2, this.tr, this.tr);\r\n    L2DMatrix44.mul(tr1, this.tr, this.tr);\r\n}\r\n\r\n//============================================================\r\n//    L2DViewMatrix # setScreenRect()\r\n//============================================================\r\nL2DViewMatrix.prototype.setScreenRect = function (left/*float*/, right/*float*/, bottom/*float*/, top/*float*/) {\r\n    this.screenLeft = left;\r\n    this.screenRight = right;\r\n    this.screenTop = top;\r\n    this.screenBottom = bottom;\r\n}\r\n\r\n//============================================================\r\n//    L2DViewMatrix # setMaxScreenRect()\r\n//============================================================\r\nL2DViewMatrix.prototype.setMaxScreenRect = function (left/*float*/, right/*float*/, bottom/*float*/, top/*float*/) {\r\n    this.maxLeft = left;\r\n    this.maxRight = right;\r\n    this.maxTop = top;\r\n    this.maxBottom = bottom;\r\n}\r\n\r\n//============================================================\r\n//    L2DViewMatrix # getScreenLeft()\r\n//============================================================\r\nL2DViewMatrix.prototype.getScreenLeft = function () {\r\n    return this.screenLeft;\r\n}\r\n\r\n//============================================================\r\n//    L2DViewMatrix # getScreenRight()\r\n//============================================================\r\nL2DViewMatrix.prototype.getScreenRight = function () {\r\n    return this.screenRight;\r\n}\r\n\r\n//============================================================\r\n//    L2DViewMatrix # getScreenBottom()\r\n//============================================================\r\nL2DViewMatrix.prototype.getScreenBottom = function () {\r\n    return this.screenBottom;\r\n}\r\n\r\n//============================================================\r\n//    L2DViewMatrix # getScreenTop()\r\n//============================================================\r\nL2DViewMatrix.prototype.getScreenTop = function () {\r\n    return this.screenTop;\r\n}\r\n\r\n//============================================================\r\n//    L2DViewMatrix # getMaxLeft()\r\n//============================================================\r\nL2DViewMatrix.prototype.getMaxLeft = function () {\r\n    return this.maxLeft;\r\n}\r\n\r\n//============================================================\r\n//    L2DViewMatrix # getMaxRight()\r\n//============================================================\r\nL2DViewMatrix.prototype.getMaxRight = function () {\r\n    return this.maxRight;\r\n}\r\n\r\n//============================================================\r\n//    L2DViewMatrix # getMaxBottom()\r\n//============================================================\r\nL2DViewMatrix.prototype.getMaxBottom = function () {\r\n    return this.maxBottom;\r\n}\r\n\r\n//============================================================\r\n//    L2DViewMatrix # getMaxTop()\r\n//============================================================\r\nL2DViewMatrix.prototype.getMaxTop = function () {\r\n    return this.maxTop;\r\n}\r\n\r\n/**\r\n *\r\n *  You can modify and use this source freely\r\n *  only for the development of application related Live2D.\r\n *\r\n *  (c) Live2D Inc. All rights reserved.\r\n */\r\n\r\n//============================================================\r\n//============================================================\r\n//  class Live2DFramework      \r\n//============================================================\r\n//============================================================\r\nfunction Live2DFramework() {\r\n}\r\n\r\n//============================================================\r\nLive2DFramework.platformManager = null;\r\n\r\n//============================================================\r\n//    static Live2DFramework.getPlatformManager()\r\n//============================================================\r\nLive2DFramework.getPlatformManager = function () {\r\n    return Live2DFramework.platformManager;\r\n}\r\n\r\n//============================================================\r\n//    static Live2DFramework.setPlatformManager()\r\n//============================================================\r\nLive2DFramework.setPlatformManager = function (platformManager /*IPlatformManager*/) {\r\n    Live2DFramework.platformManager = platformManager;\r\n}\r\n\r\nmodule.exports = {\r\n    L2DTargetPoint: L2DTargetPoint,\r\n    Live2DFramework: Live2DFramework,\r\n    L2DViewMatrix: L2DViewMatrix,\r\n    L2DPose: L2DPose,\r\n    L2DPartsParam: L2DPartsParam,\r\n    L2DPhysics: L2DPhysics,\r\n    L2DMotionManager: L2DMotionManager,\r\n    L2DModelMatrix: L2DModelMatrix,\r\n    L2DMatrix44: L2DMatrix44,\r\n    EYE_STATE: EYE_STATE,\r\n    L2DEyeBlink: L2DEyeBlink,\r\n    L2DExpressionParam: L2DExpressionParam,\r\n    L2DExpressionMotion: L2DExpressionMotion,\r\n    L2DBaseModel: L2DBaseModel\r\n}","\r\n(function(){var j=true;function aa(){if(j){return;}this._$MT=null;this._$5S=null;this._$NP=0;aa._$42++;this._$5S=new y(this);}aa._$0s=1;aa._$4s=2;aa._$42=0;aa._$62=function(aQ,aU){try{if(aU instanceof ArrayBuffer){aU=new DataView(aU);}if(!(aU instanceof DataView)){throw new J(\"_$SS#loadModel(b) / b _$x be DataView or ArrayBuffer\");}var aS=new K(aU);var aM=aS._$ST();var aK=aS._$ST();var aJ=aS._$ST();var aN;if(aM==109&&aK==111&&aJ==99){aN=aS._$ST();}else{throw new J(\"_$gi _$C _$li , _$Q0 _$P0.\");}aS._$gr(aN);if(aN>ay._$T7){aQ._$NP|=aa._$4s;var aR=ay._$T7;var aI=\"_$gi _$C _$li , _$n0 _$_ version _$li ( SDK : \"+aR+\" < _$f0 : \"+aN+\" )@_$SS#loadModel()\\n\";throw new J(aI);}var aL=aS._$nP();if(aN>=ay._$s7){var aH=aS._$9T();var aT=aS._$9T();if(aH!=-30584||aT!=-30584){aQ._$NP|=aa._$0s;throw new J(\"_$gi _$C _$li , _$0 _$6 _$Ui.\");}}aQ._$KS(aL);var aP=aQ.getModelContext();aP.setDrawParam(aQ.getDrawParam());aP.init();}catch(aO){q._$Rb(aO);}};aa.prototype._$KS=function(aH){this._$MT=aH;};aa.prototype.getModelImpl=function(){if(this._$MT==null){this._$MT=new w();this._$MT._$zP();}return this._$MT;};aa.prototype.getCanvasWidth=function(){if(this._$MT==null){return 0;}return this._$MT.getCanvasWidth();};aa.prototype.getCanvasHeight=function(){if(this._$MT==null){return 0;}return this._$MT.getCanvasHeight();};aa.prototype.getParamFloat=function(aH){if(typeof aH!=\"number\"){aH=this._$5S.getParamIndex(z.getID(aH));}return this._$5S.getParamFloat(aH);};aa.prototype.setParamFloat=function(aH,aJ,aI){if(typeof aH!=\"number\"){aH=this._$5S.getParamIndex(z.getID(aH));}if(arguments.length<3){aI=1;}this._$5S.setParamFloat(aH,this._$5S.getParamFloat(aH)*(1-aI)+aJ*aI);};aa.prototype.addToParamFloat=function(aH,aJ,aI){if(typeof aH!=\"number\"){aH=this._$5S.getParamIndex(z.getID(aH));}if(arguments.length<3){aI=1;}this._$5S.setParamFloat(aH,this._$5S.getParamFloat(aH)+aJ*aI);};aa.prototype.multParamFloat=function(aH,aJ,aI){if(typeof aH!=\"number\"){aH=this._$5S.getParamIndex(z.getID(aH));}if(arguments.length<3){aI=1;}this._$5S.setParamFloat(aH,this._$5S.getParamFloat(aH)*(1+(aJ-1)*aI));};aa.prototype.getParamIndex=function(aH){return this._$5S.getParamIndex(z.getID(aH));};aa.prototype.loadParam=function(){this._$5S.loadParam();};aa.prototype.saveParam=function(){this._$5S.saveParam();};aa.prototype.init=function(){this._$5S.init();};aa.prototype.update=function(){this._$5S.update();};aa.prototype._$Rs=function(){q._$li(\"_$60 _$PT _$Rs()\");return -1;};aa.prototype._$Ds=function(aH){q._$li(\"_$60 _$PT _$SS#_$Ds() \\n\");};aa.prototype._$K2=function(){};aa.prototype.draw=function(){};aa.prototype.getModelContext=function(){return this._$5S;};aa.prototype._$s2=function(){return this._$NP;};aa.prototype._$P7=function(aK,aR,aH,a0){var aU=-1;var aY=0;var aM=this;var aJ=0.5;var aI=0.15;var aX=true;if(aH==0){for(var aV=0;aV<aK.length;aV++){var aP=aK[aV];var aO=aR[aV];var aS=(aM.getParamFloat(aP)!=0);aM.setPartsOpacity(aO,(aS?1:0));}return;}else{if(aK.length==1){var aP=aK[0];var aT=(aM.getParamFloat(aP)!=0);var aO=aR[0];var aQ=aM.getPartsOpacity(aO);var aW=aH/a0;if(aT){aQ+=aW;if(aQ>1){aQ=1;}}else{aQ-=aW;if(aQ<0){aQ=0;}}aM.setPartsOpacity(aO,aQ);}else{for(var aV=0;aV<aK.length;aV++){var aP=aK[aV];var aS=(aM.getParamFloat(aP)!=0);if(aS){if(aU>=0){break;}aU=aV;var aO=aR[aV];aY=aM.getPartsOpacity(aO);aY+=aH/a0;if(aY>1){aY=1;}}}if(aU<0){console.log(\"No _$wi _$q0/ _$U default[%s]\",aK[0]);aU=0;aY=1;aM.loadParam();aM.setParamFloat(aK[aU],aY);aM.saveParam();}for(var aV=0;aV<aK.length;aV++){var aO=aR[aV];if(aU==aV){aM.setPartsOpacity(aO,aY);}else{var aL=aM.getPartsOpacity(aO);var aZ;if(aY<aJ){aZ=aY*(aJ-1)/aJ+1;}else{aZ=(1-aY)*aJ/(1-aJ);}if(aX){var aN=(1-aZ)*(1-aY);if(aN>aI){aZ=1-aI/(1-aY);}}if(aL>aZ){aL=aZ;}aM.setPartsOpacity(aO,aL);}}}}};aa.prototype.setPartsOpacity=function(aI,aH){if(typeof aI!=\"number\"){aI=this._$5S.getPartsDataIndex(i.getID(aI));}this._$5S.setPartsOpacity(aI,aH);};aa.prototype.getPartsDataIndex=function(aH){if(!(aH instanceof i)){aH=i.getID(aH);}return this._$5S.getPartsDataIndex(aH);};aa.prototype.getPartsOpacity=function(aH){if(typeof aH!=\"number\"){aH=this._$5S.getPartsDataIndex(i.getID(aH));}if(aH<0){return 0;}return this._$5S.getPartsOpacity(aH);};aa.prototype.getDrawParam=function(){};aa.prototype.getDrawDataIndex=function(aH){return this._$5S.getDrawDataIndex(Z.getID(aH));};aa.prototype.getDrawData=function(aH){return this._$5S.getDrawData(aH);};aa.prototype.getTransformedPoints=function(aH){var aI=this._$5S._$C2(aH);if(aI instanceof ag){return(aI).getTransformedPoints();}return null;};aa.prototype.getIndexArray=function(aI){if(aI<0||aI>=this._$5S._$aS.length){return null;}var aH=this._$5S._$aS[aI];if(aH!=null&&aH.getType()==a._$wb){if(aH instanceof b){return aH.getIndexArray();}}return null;};function W(aJ){if(j){return;}this.clipContextList=new Array();this.glcontext=aJ.gl;this.dp_webgl=aJ;this.curFrameNo=0;this.firstError_clipInNotUpdate=true;this.colorBuffer=0;this.isInitGLFBFunc=false;this.tmpBoundsOnModel=new av();if(Q.glContext.length>Q.frameBuffers.length){this.curFrameNo=this.getMaskRenderTexture();}else{}this.tmpModelToViewMatrix=new ac();this.tmpMatrix2=new ac();this.tmpMatrixForMask=new ac();this.tmpMatrixForDraw=new ac();this.CHANNEL_COLORS=new Array();var aI=new o();aI=new o();aI.r=0;aI.g=0;aI.b=0;aI.a=1;this.CHANNEL_COLORS.push(aI);aI=new o();aI.r=1;aI.g=0;aI.b=0;aI.a=0;this.CHANNEL_COLORS.push(aI);aI=new o();aI.r=0;aI.g=1;aI.b=0;aI.a=0;this.CHANNEL_COLORS.push(aI);aI=new o();aI.r=0;aI.g=0;aI.b=1;aI.a=0;this.CHANNEL_COLORS.push(aI);for(var aH=0;aH<this.CHANNEL_COLORS.length;aH++){this.dp_webgl.setChannelFlagAsColor(aH,this.CHANNEL_COLORS[aH]);}}W.CHANNEL_COUNT=4;W.RENDER_TEXTURE_USE_MIPMAP=false;W.NOT_USED_FRAME=-100;W.prototype._$L7=function(){if(this.tmpModelToViewMatrix){this.tmpModelToViewMatrix=null;}if(this.tmpMatrix2){this.tmpMatrix2=null;}if(this.tmpMatrixForMask){this.tmpMatrixForMask=null;}if(this.tmpMatrixForDraw){this.tmpMatrixForDraw=null;}if(this.tmpBoundsOnModel){this.tmpBoundsOnModel=null;}if(this.CHANNEL_COLORS){for(var aH=this.CHANNEL_COLORS.length-1;aH>=0;--aH){this.CHANNEL_COLORS.splice(aH,1);}this.CHANNEL_COLORS=[];}this.releaseShader();};W.prototype.releaseShader=function(){var aI=Q.frameBuffers.length;for(var aH=0;aH<aI;aH++){this.gl.deleteFramebuffer(Q.frameBuffers[aH].framebuffer);}Q.frameBuffers=[];Q.glContext=[];};W.prototype.init=function(aO,aN,aL){for(var aM=0;aM<aN.length;aM++){var aH=aN[aM].getClipIDList();if(aH==null){continue;}var aJ=this.findSameClip(aH);if(aJ==null){aJ=new U(this,aO,aH);this.clipContextList.push(aJ);}var aI=aN[aM].getDrawDataID();var aK=aO.getDrawDataIndex(aI);aJ.addClippedDrawData(aI,aK);var aP=aL[aM];aP.clipBufPre_clipContext=aJ;}};W.prototype.getMaskRenderTexture=function(){var aH=null;aH=this.dp_webgl.createFramebuffer();Q.frameBuffers[this.dp_webgl.glno]=aH;return this.dp_webgl.glno;};W.prototype.setupClip=function(a1,aQ){var aK=0;for(var aO=0;aO<this.clipContextList.length;aO++){var aP=this.clipContextList[aO];this.calcClippedDrawTotalBounds(a1,aP);if(aP.isUsing){aK++;}}if(aK>0){var aM=aQ.gl.getParameter(aQ.gl.FRAMEBUFFER_BINDING);var aW=new Array(4);aW[0]=0;aW[1]=0;aW[2]=aQ.gl.canvas.width;aW[3]=aQ.gl.canvas.height;aQ.gl.viewport(0,0,Q.clippingMaskBufferSize,Q.clippingMaskBufferSize);this.setupLayoutBounds(aK);aQ.gl.bindFramebuffer(aQ.gl.FRAMEBUFFER,Q.frameBuffers[this.curFrameNo].framebuffer);aQ.gl.clearColor(0,0,0,0);aQ.gl.clear(aQ.gl.COLOR_BUFFER_BIT);for(var aO=0;aO<this.clipContextList.length;aO++){var aP=this.clipContextList[aO];var aT=aP.allClippedDrawRect;var aN=aP.layoutChannelNo;var aV=aP.layoutBounds;var aJ=0.05;this.tmpBoundsOnModel._$jL(aT);this.tmpBoundsOnModel.expand(aT.width*aJ,aT.height*aJ);var aZ=aV.width/this.tmpBoundsOnModel.width;var aY=aV.height/this.tmpBoundsOnModel.height;this.tmpMatrix2.identity();this.tmpMatrix2.translate(-1,-1,0);this.tmpMatrix2.scale(2,2,1);this.tmpMatrix2.translate(aV.x,aV.y,0);this.tmpMatrix2.scale(aZ,aY,1);this.tmpMatrix2.translate(-this.tmpBoundsOnModel.x,-this.tmpBoundsOnModel.y,0);this.tmpMatrixForMask.setMatrix(this.tmpMatrix2.m);this.tmpMatrix2.identity();this.tmpMatrix2.translate(aV.x,aV.y,0);this.tmpMatrix2.scale(aZ,aY,1);this.tmpMatrix2.translate(-this.tmpBoundsOnModel.x,-this.tmpBoundsOnModel.y,0);this.tmpMatrixForDraw.setMatrix(this.tmpMatrix2.m);var aH=this.tmpMatrixForMask.getArray();for(var aX=0;aX<16;aX++){aP.matrixForMask[aX]=aH[aX];}var a0=this.tmpMatrixForDraw.getArray();for(var aX=0;aX<16;aX++){aP.matrixForDraw[aX]=a0[aX];}var aS=aP.clippingMaskDrawIndexList.length;for(var aU=0;aU<aS;aU++){var aR=aP.clippingMaskDrawIndexList[aU];var aI=a1.getDrawData(aR);var aL=a1._$C2(aR);aQ.setClipBufPre_clipContextForMask(aP);aI.draw(aQ,a1,aL);}}aQ.gl.bindFramebuffer(aQ.gl.FRAMEBUFFER,aM);aQ.setClipBufPre_clipContextForMask(null);aQ.gl.viewport(aW[0],aW[1],aW[2],aW[3]);}};W.prototype.getColorBuffer=function(){return this.colorBuffer;};W.prototype.findSameClip=function(aK){for(var aN=0;aN<this.clipContextList.length;aN++){var aO=this.clipContextList[aN];var aH=aO.clipIDList.length;if(aH!=aK.length){continue;}var aI=0;for(var aM=0;aM<aH;aM++){var aL=aO.clipIDList[aM];for(var aJ=0;aJ<aH;aJ++){if(aK[aJ]==aL){aI++;break;}}}if(aI==aH){return aO;}}return null;};W.prototype.calcClippedDrawTotalBounds=function(a6,aV){var aU=a6._$Ri.getModelImpl().getCanvasWidth();var a5=a6._$Ri.getModelImpl().getCanvasHeight();var aJ=aU>a5?aU:a5;var aT=aJ;var aR=aJ;var aS=0;var aP=0;var aL=aV.clippedDrawContextList.length;for(var aM=0;aM<aL;aM++){var aW=aV.clippedDrawContextList[aM];var aN=aW.drawDataIndex;var aK=a6._$C2(aN);if(aK._$yo()){var aX=aK.getTransformedPoints();var a4=aX.length;var aI=[];var aH=[];var aO=0;for(var a3=aw._$i2;a3<a4;a3+=aw._$No){aI[aO]=aX[a3];aH[aO]=aX[a3+1];aO++;}var a2=Math.min.apply(null,aI);var a1=Math.min.apply(null,aH);var a0=Math.max.apply(null,aI);var aZ=Math.max.apply(null,aH);if(a2<aT){aT=a2;}if(a1<aR){aR=a1;}if(a0>aS){aS=a0;}if(aZ>aP){aP=aZ;}}}if(aT==aJ){aV.allClippedDrawRect.x=0;aV.allClippedDrawRect.y=0;aV.allClippedDrawRect.width=0;aV.allClippedDrawRect.height=0;aV.isUsing=false;}else{var aQ=aS-aT;var aY=aP-aR;aV.allClippedDrawRect.x=aT;aV.allClippedDrawRect.y=aR;aV.allClippedDrawRect.width=aQ;aV.allClippedDrawRect.height=aY;aV.isUsing=true;}};W.prototype.setupLayoutBounds=function(aQ){var aI=aQ/W.CHANNEL_COUNT;var aP=aQ%W.CHANNEL_COUNT;aI=~~aI;aP=~~aP;var aH=0;for(var aJ=0;aJ<W.CHANNEL_COUNT;aJ++){var aM=aI+(aJ<aP?1:0);if(aM==0){}else{if(aM==1){var aL=this.clipContextList[aH++];aL.layoutChannelNo=aJ;aL.layoutBounds.x=0;aL.layoutBounds.y=0;aL.layoutBounds.width=1;aL.layoutBounds.height=1;}else{if(aM==2){for(var aO=0;aO<aM;aO++){var aN=aO%2;var aK=0;aN=~~aN;var aL=this.clipContextList[aH++];aL.layoutChannelNo=aJ;aL.layoutBounds.x=aN*0.5;aL.layoutBounds.y=0;aL.layoutBounds.width=0.5;aL.layoutBounds.height=1;}}else{if(aM<=4){for(var aO=0;aO<aM;aO++){var aN=aO%2;var aK=aO/2;aN=~~aN;aK=~~aK;var aL=this.clipContextList[aH++];aL.layoutChannelNo=aJ;aL.layoutBounds.x=aN*0.5;aL.layoutBounds.y=aK*0.5;aL.layoutBounds.width=0.5;aL.layoutBounds.height=0.5;}}else{if(aM<=9){for(var aO=0;aO<aM;aO++){var aN=aO%3;var aK=aO/3;aN=~~aN;aK=~~aK;var aL=this.clipContextList[aH++];aL.layoutChannelNo=aJ;aL.layoutBounds.x=aN/3;aL.layoutBounds.y=aK/3;aL.layoutBounds.width=1/3;aL.layoutBounds.height=1/3;}}else{q._$li(\"_$6 _$0P mask count : %d\",aM);}}}}}}};function U(aH,aK,aI){this.clipIDList=new Array();this.clipIDList=aI;this.clippingMaskDrawIndexList=new Array();for(var aJ=0;aJ<aI.length;aJ++){this.clippingMaskDrawIndexList.push(aK.getDrawDataIndex(aI[aJ]));}this.clippedDrawContextList=new Array();this.isUsing=true;this.layoutChannelNo=0;this.layoutBounds=new av();this.allClippedDrawRect=new av();this.matrixForMask=new Float32Array(16);this.matrixForDraw=new Float32Array(16);this.owner=aH;}U.prototype.addClippedDrawData=function(aJ,aI){var aH=new R(aJ,aI);this.clippedDrawContextList.push(aH);};function R(aI,aH){this._$gP=aI;this.drawDataIndex=aH;}function I(){if(j){return;}this.color=null;}function ah(){if(j){return;}this._$dP=null;this._$eo=null;this._$V0=null;this._$dP=1000;this._$eo=1000;this._$V0=1;this._$a0();}ah._$JT=function(aP,aN,aO){var aQ=aP/aN;var a1=aO/aN;var aU=a1;var aZ=1/3;var aR=2/3;var a0=1-(1-a1)*(1-a1);var a2=1-(1-aU)*(1-aU);var aM=0;var aL=((1-a1)*aZ)*a0+(aU*aR+(1-aU)*aZ)*(1-a0);var aK=(aU+(1-aU)*aR)*a2+(a1*aZ+(1-a1)*aR)*(1-a2);var aJ=1;var aY=aJ-3*aK+3*aL-aM;var aX=3*aK-6*aL+3*aM;var aW=3*aL-3*aM;var aV=aM;if(aQ<=0){return 0;}else{if(aQ>=1){return 1;}}var aS=aQ;var aI=aS*aS;var aH=aS*aI;var aT=aY*aH+aX*aI+aW*aS+aV;return aT;};ah.prototype._$a0=function(){};ah.prototype.setFadeIn=function(aH){this._$dP=aH;};ah.prototype.setFadeOut=function(aH){this._$eo=aH;};ah.prototype._$pT=function(aH){this._$V0=aH;};ah.prototype.getFadeOut=function(){return this._$eo;};ah.prototype._$4T=function(){return this._$eo;};ah.prototype._$mT=function(){return this._$V0;};ah.prototype.getDurationMSec=function(){return -1;};ah.prototype.getLoopDurationMSec=function(){return -1;};ah.prototype.updateParam=function(aJ,aN){if(!aN._$AT||aN._$9L){return;}var aL=P.getUserTimeMSec();if(aN._$z2<0){aN._$z2=aL;aN._$bs=aL;var aM=this.getDurationMSec();if(aN._$Do<0){aN._$Do=(aM<=0)?-1:aN._$z2+aM;}}var aI=this._$V0;var aH=(this._$dP==0)?1:A._$r2(((aL-aN._$bs)/(this._$dP)));var aK=(this._$eo==0||aN._$Do<0)?1:A._$r2(((aN._$Do-aL)/(this._$eo)));aI=aI*aH*aK;if(!((0<=aI&&aI<=1))){console.log(\"### assert!! ### \");}this.updateParamExe(aJ,aL,aI,aN);if(aN._$Do>0&&aN._$Do<aL){aN._$9L=true;}};ah.prototype.updateParamExe=function(aH,aI,aJ,aK){};function q(){}q._$8s=0;q._$fT=new Object();q.start=function(aI){var aH=q._$fT[aI];if(aH==null){aH=new af();aH._$r=aI;q._$fT[aI]=aH;}aH._$0S=P.getSystemTimeMSec();};q.dump=function(aJ){var aH=q._$fT[aJ];if(aH!=null){var aI=P.getSystemTimeMSec();var aK=aI-aH._$0S;console.log(aJ+\" : \"+aK+\"ms\");return aK;}else{return -1;}};q.end=function(aJ){var aH=q._$fT[aJ];if(aH!=null){var aI=P.getSystemTimeMSec();return aI-aH._$0S;}else{return -1;}};q._$li=function(aI,aH){console.log(\"_$li : \"+aI+\"\\n\",aH);};q._$Ji=function(aI,aH){console.log(aI,aH);};q._$dL=function(aI,aH){console.log(aI,aH);console.log(\"\\n\");};q._$KL=function(aJ,aI){for(var aH=0;aH<aI;aH++){if(aH%16==0&&aH>0){console.log(\"\\n\");}else{if(aH%8==0&&aH>0){console.log(\"  \");}}console.log(\"%02X \",(aJ[aH]&255));}console.log(\"\\n\");};q._$nr=function(aL,aI,aK){console.log(\"%s\\n\",aL);var aH=aI.length;for(var aJ=0;aJ<aH;++aJ){console.log(\"%5d\",aI[aJ]);console.log(\"%s\\n\",aK);console.log(\",\");}console.log(\"\\n\");};q._$Rb=function(aH){console.log(\"dump exception : \"+aH);console.log(\"stack :: \"+aH.stack);};function af(){this._$r=null;this._$0S=null;}function F(){if(j){return;}this.x=null;this.y=null;this.width=null;this.height=null;}F.prototype._$8P=function(){return 0.5*(this.x+this.x+this.width);};F.prototype._$6P=function(){return 0.5*(this.y+this.y+this.height);};F.prototype._$EL=function(){return this.x+this.width;};F.prototype._$5T=function(){return this.y+this.height;};F.prototype._$jL=function(aI,aK,aJ,aH){this.x=aI;this.y=aK;this.width=aJ;this.height=aH;};F.prototype._$jL=function(aH){this.x=aH.x;this.y=aH.y;this.width=aH.width;this.height=aH.height;};function i(aH){if(j){return;}ak.prototype.constructor.call(this,aH);}i.prototype=new ak();i._$tP=new Object();i._$27=function(){i._$tP.clear();};i.getID=function(aH){var aI=i._$tP[aH];if(aI==null){aI=new i(aH);i._$tP[aH]=aI;}return aI;};i.prototype._$3s=function(){return new i();};function S(){}function z(aH){if(j){return;}ak.prototype.constructor.call(this,aH);}z.prototype=new ak();z._$tP=new Object();z._$27=function(){z._$tP.clear();};z.getID=function(aH){var aI=z._$tP[aH];if(aI==null){aI=new z(aH);z._$tP[aH]=aI;}return aI;};z.prototype._$3s=function(){return new z();};function w(){if(j){return;}this._$vo=null;this._$F2=null;this._$ao=400;this._$1S=400;w._$42++;}w._$42=0;w.prototype._$zP=function(){if(this._$vo==null){this._$vo=new an();}if(this._$F2==null){this._$F2=new Array();}};w.prototype.getCanvasWidth=function(){return this._$ao;};w.prototype.getCanvasHeight=function(){return this._$1S;};w.prototype._$F0=function(aH){this._$vo=aH._$nP();this._$F2=aH._$nP();this._$ao=aH._$6L();this._$1S=aH._$6L();};w.prototype._$6S=function(aH){this._$F2.push(aH);};w.prototype._$Xr=function(){return this._$F2;};w.prototype._$E2=function(){return this._$vo;};function u(){if(j){return;}this.p1=new N();this.p2=new N();this._$Fo=0;this._$Db=0;this._$L2=0;this._$M2=0;this._$ks=0;this._$9b=0;this._$iP=0;this._$iT=0;this._$lL=new Array();this._$qP=new Array();this.setup(0.3,0.5,0.1);}u.prototype.setup=function(aJ,aI,aH){this._$ks=this._$Yb();this.p2._$xT();if(arguments.length==3){this._$Fo=aJ;this._$L2=aI;this.p1._$p=aH;this.p2._$p=aH;this.p2.y=aJ;this.setup();}};u.prototype.getPhysicsPoint1=function(){return this.p1;};u.prototype.getPhysicsPoint2=function(){return this.p2;};u.prototype._$qr=function(){return this._$Db;};u.prototype._$pr=function(aH){this._$Db=aH;};u.prototype._$5r=function(){return this._$M2;};u.prototype._$Cs=function(){return this._$9b;};u.prototype._$Yb=function(){return(-180*(Math.atan2(this.p1.x-this.p2.x,-(this.p1.y-this.p2.y)))/Math.PI);};u.prototype.addSrcParam=function(aJ,aH,aL,aI){var aK=new h(aJ,aH,aL,aI);this._$lL.push(aK);};u.prototype.addTargetParam=function(aJ,aH,aK,aI){var aL=new aF(aJ,aH,aK,aI);this._$qP.push(aL);};u.prototype.update=function(aI,aL){if(this._$iP==0){this._$iP=this._$iT=aL;this._$Fo=(Math.sqrt((this.p1.x-this.p2.x)*(this.p1.x-this.p2.x)+(this.p1.y-this.p2.y)*(this.p1.y-this.p2.y)));return;}var aK=(aL-this._$iT)/1000;if(aK!=0){for(var aJ=this._$lL.length-1;aJ>=0;--aJ){var aM=this._$lL[aJ];aM._$oP(aI,this);}this._$oo(aI,aK);this._$M2=this._$Yb();this._$9b=(this._$M2-this._$ks)/aK;this._$ks=this._$M2;}for(var aJ=this._$qP.length-1;aJ>=0;--aJ){var aH=this._$qP[aJ];aH._$YS(aI,this);}this._$iT=aL;};u.prototype._$oo=function(aN,aI){if(aI<0.033){aI=0.033;}var aU=1/aI;this.p1.vx=(this.p1.x-this.p1._$s0)*aU;this.p1.vy=(this.p1.y-this.p1._$70)*aU;this.p1.ax=(this.p1.vx-this.p1._$7L)*aU;this.p1.ay=(this.p1.vy-this.p1._$HL)*aU;this.p1.fx=this.p1.ax*this.p1._$p;this.p1.fy=this.p1.ay*this.p1._$p;this.p1._$xT();var aM=-(Math.atan2((this.p1.y-this.p2.y),this.p1.x-this.p2.x));var aL;var aV;var aR=Math.cos(aM);var aH=Math.sin(aM);var aW=9.8*this.p2._$p;var aQ=(this._$Db*aC._$bS);var aP=(aW*Math.cos(aM-aQ));aL=(aP*aH);aV=(aP*aR);var aK=(-this.p1.fx*aH*aH);var aT=(-this.p1.fy*aH*aR);var aJ=((-this.p2.vx*this._$L2));var aS=((-this.p2.vy*this._$L2));this.p2.fx=((aL+aK+aJ));this.p2.fy=((aV+aT+aS));this.p2.ax=this.p2.fx/this.p2._$p;this.p2.ay=this.p2.fy/this.p2._$p;this.p2.vx+=this.p2.ax*aI;this.p2.vy+=this.p2.ay*aI;this.p2.x+=this.p2.vx*aI;this.p2.y+=this.p2.vy*aI;var aO=(Math.sqrt((this.p1.x-this.p2.x)*(this.p1.x-this.p2.x)+(this.p1.y-this.p2.y)*(this.p1.y-this.p2.y)));this.p2.x=this.p1.x+this._$Fo*(this.p2.x-this.p1.x)/aO;this.p2.y=this.p1.y+this._$Fo*(this.p2.y-this.p1.y)/aO;this.p2.vx=(this.p2.x-this.p2._$s0)*aU;this.p2.vy=(this.p2.y-this.p2._$70)*aU;this.p2._$xT();};function N(){this._$p=1;this.x=0;this.y=0;this.vx=0;this.vy=0;this.ax=0;this.ay=0;this.fx=0;this.fy=0;this._$s0=0;this._$70=0;this._$7L=0;this._$HL=0;}N.prototype._$xT=function(){this._$s0=this.x;this._$70=this.y;this._$7L=this.vx;this._$HL=this.vy;};function at(aJ,aI,aH){this._$wL=null;this.scale=null;this._$V0=null;this._$wL=aJ;this.scale=aI;this._$V0=aH;}at.prototype._$oP=function(aI,aH){};function h(aJ,aK,aI,aH){at.prototype.constructor.call(this,aK,aI,aH);this._$tL=null;this._$tL=aJ;}h.prototype=new at();h.prototype._$oP=function(aJ,aH){var aK=this.scale*aJ.getParamFloat(this._$wL);var aL=aH.getPhysicsPoint1();switch(this._$tL){default:case u.Src.SRC_TO_X:aL.x=aL.x+(aK-aL.x)*this._$V0;break;case u.Src.SRC_TO_Y:aL.y=aL.y+(aK-aL.y)*this._$V0;break;case u.Src.SRC_TO_G_ANGLE:var aI=aH._$qr();aI=aI+(aK-aI)*this._$V0;aH._$pr(aI);break;}};function d(aJ,aI,aH){this._$wL=null;this.scale=null;this._$V0=null;this._$wL=aJ;this.scale=aI;this._$V0=aH;}d.prototype._$YS=function(aI,aH){};function aF(aI,aK,aJ,aH){d.prototype.constructor.call(this,aK,aJ,aH);this._$YP=null;this._$YP=aI;}aF.prototype=new d();aF.prototype._$YS=function(aI,aH){switch(this._$YP){default:case u.Target.TARGET_FROM_ANGLE:aI.setParamFloat(this._$wL,this.scale*aH._$5r(),this._$V0);break;case u.Target.TARGET_FROM_ANGLE_V:aI.setParamFloat(this._$wL,this.scale*aH._$Cs(),this._$V0);break;}};u.Src=function(){};u.Src.SRC_TO_X=\"SRC_TO_X\";u.Src.SRC_TO_Y=\"SRC_TO_Y\";u.Src.SRC_TO_G_ANGLE=\"SRC_TO_G_ANGLE\";u.Target=function(){};u.Target.TARGET_FROM_ANGLE=\"TARGET_FROM_ANGLE\";u.Target.TARGET_FROM_ANGLE_V=\"TARGET_FROM_ANGLE_V\";function X(){if(j){return;}this._$fL=0;this._$gL=0;this._$B0=1;this._$z0=1;this._$qT=0;this.reflectX=false;this.reflectY=false;}X.prototype.init=function(aH){this._$fL=aH._$fL;this._$gL=aH._$gL;this._$B0=aH._$B0;this._$z0=aH._$z0;this._$qT=aH._$qT;this.reflectX=aH.reflectX;this.reflectY=aH.reflectY;};X.prototype._$F0=function(aH){this._$fL=aH._$_T();this._$gL=aH._$_T();this._$B0=aH._$_T();this._$z0=aH._$_T();this._$qT=aH._$_T();if(aH.getFormatVersion()>=ay.LIVE2D_FORMAT_VERSION_V2_10_SDK2){this.reflectX=aH._$po();this.reflectY=aH._$po();}};X.prototype._$e=function(){};var ad=function(){};ad._$ni=function(aL,aJ,aR,aQ,aK,aI,aH,aS,aN){var aM=(aH*aI-aS*aK);if(aM==0){return null;}else{var aO=((aL-aR)*aI-(aJ-aQ)*aK)/aM;var aP;if(aK!=0){aP=(aL-aR-aO*aH)/aK;}else{aP=(aJ-aQ-aO*aS)/aI;}if(isNaN(aP)){aP=(aL-aR-aO*aH)/aK;if(isNaN(aP)){aP=(aJ-aQ-aO*aS)/aI;}if(isNaN(aP)){console.log(\"a is NaN @UtVector#_$ni() \");console.log(\"v1x : \"+aK);console.log(\"v1x != 0 ? \"+(aK!=0));}}if(aN==null){return new Array(aP,aO);}else{aN[0]=aP;aN[1]=aO;return aN;}}};function av(){if(j){return;}this.x=null;this.y=null;this.width=null;this.height=null;}av.prototype._$8P=function(){return this.x+0.5*this.width;};av.prototype._$6P=function(){return this.y+0.5*this.height;};av.prototype._$EL=function(){return this.x+this.width;};av.prototype._$5T=function(){return this.y+this.height;};av.prototype._$jL=function(aI,aK,aJ,aH){this.x=aI;this.y=aK;this.width=aJ;this.height=aH;};av.prototype._$jL=function(aH){this.x=aH.x;this.y=aH.y;this.width=aH.width;this.height=aH.height;};av.prototype.contains=function(aH,aI){return this.x<=this.x&&this.y<=this.y&&(this.x<=this.x+this.width)&&(this.y<=this.y+this.height);};av.prototype.expand=function(aH,aI){this.x-=aH;this.y-=aI;this.width+=aH*2;this.height+=aI*2;};function aG(){}aG._$Z2=function(bb,bo,bp,a2){var a1=bo._$Q2(bb,bp);var a3=bb._$vs();var ba=bb._$Tr();bo._$zr(a3,ba,a1);if(a1<=0){return a2[a3[0]];}else{if(a1==1){var bj=a2[a3[0]];var bi=a2[a3[1]];var a9=ba[0];return(bj+(bi-bj)*a9)|0;}else{if(a1==2){var bj=a2[a3[0]];var bi=a2[a3[1]];var a0=a2[a3[2]];var aZ=a2[a3[3]];var a9=ba[0];var a8=ba[1];var br=(bj+(bi-bj)*a9)|0;var bq=(a0+(aZ-a0)*a9)|0;return(br+(bq-br)*a8)|0;}else{if(a1==3){var aP=a2[a3[0]];var aO=a2[a3[1]];var bn=a2[a3[2]];var bm=a2[a3[3]];var aK=a2[a3[4]];var aJ=a2[a3[5]];var bg=a2[a3[6]];var bf=a2[a3[7]];var a9=ba[0];var a8=ba[1];var a6=ba[2];var bj=(aP+(aO-aP)*a9)|0;var bi=(bn+(bm-bn)*a9)|0;var a0=(aK+(aJ-aK)*a9)|0;var aZ=(bg+(bf-bg)*a9)|0;var br=(bj+(bi-bj)*a8)|0;var bq=(a0+(aZ-a0)*a8)|0;return(br+(bq-br)*a6)|0;}else{if(a1==4){var aT=a2[a3[0]];var aS=a2[a3[1]];var bu=a2[a3[2]];var bt=a2[a3[3]];var aN=a2[a3[4]];var aM=a2[a3[5]];var bl=a2[a3[6]];var bk=a2[a3[7]];var be=a2[a3[8]];var bc=a2[a3[9]];var aX=a2[a3[10]];var aW=a2[a3[11]];var a7=a2[a3[12]];var a5=a2[a3[13]];var aR=a2[a3[14]];var aQ=a2[a3[15]];var a9=ba[0];var a8=ba[1];var a6=ba[2];var a4=ba[3];var aP=(aT+(aS-aT)*a9)|0;var aO=(bu+(bt-bu)*a9)|0;var bn=(aN+(aM-aN)*a9)|0;var bm=(bl+(bk-bl)*a9)|0;var aK=(be+(bc-be)*a9)|0;var aJ=(aX+(aW-aX)*a9)|0;var bg=(a7+(a5-a7)*a9)|0;var bf=(aR+(aQ-aR)*a9)|0;var bj=(aP+(aO-aP)*a8)|0;var bi=(bn+(bm-bn)*a8)|0;var a0=(aK+(aJ-aK)*a8)|0;var aZ=(bg+(bf-bg)*a8)|0;var br=(bj+(bi-bj)*a6)|0;var bq=(a0+(aZ-a0)*a6)|0;return(br+(bq-br)*a4)|0;}else{var aV=1<<a1;var aY=new Float32Array(aV);for(var bh=0;bh<aV;bh++){var aI=bh;var aH=1;for(var aL=0;aL<a1;aL++){aH*=(aI%2==0)?(1-ba[aL]):ba[aL];aI/=2;}aY[bh]=aH;}var bs=new Float32Array(aV);for(var aU=0;aU<aV;aU++){bs[aU]=a2[a3[aU]];}var bd=0;for(var aU=0;aU<aV;aU++){bd+=aY[aU]*bs[aU];}return(bd+0.5)|0;}}}}}};aG._$br=function(ba,bo,bp,bg){var a1=bo._$Q2(ba,bp);var a2=ba._$vs();var a9=ba._$Tr();bo._$zr(a2,a9,a1);if(a1<=0){return bg[a2[0]];}else{if(a1==1){var bj=bg[a2[0]];var bi=bg[a2[1]];var a8=a9[0];return bj+(bi-bj)*a8;}else{if(a1==2){var bj=bg[a2[0]];var bi=bg[a2[1]];var a0=bg[a2[2]];var aZ=bg[a2[3]];var a8=a9[0];var a7=a9[1];return(1-a7)*(bj+(bi-bj)*a8)+a7*(a0+(aZ-a0)*a8);}else{if(a1==3){var aP=bg[a2[0]];var aO=bg[a2[1]];var bn=bg[a2[2]];var bm=bg[a2[3]];var aK=bg[a2[4]];var aJ=bg[a2[5]];var bf=bg[a2[6]];var be=bg[a2[7]];var a8=a9[0];var a7=a9[1];var a5=a9[2];return(1-a5)*((1-a7)*(aP+(aO-aP)*a8)+a7*(bn+(bm-bn)*a8))+a5*((1-a7)*(aK+(aJ-aK)*a8)+a7*(bf+(be-bf)*a8));}else{if(a1==4){var aT=bg[a2[0]];var aS=bg[a2[1]];var bs=bg[a2[2]];var br=bg[a2[3]];var aN=bg[a2[4]];var aM=bg[a2[5]];var bl=bg[a2[6]];var bk=bg[a2[7]];var bd=bg[a2[8]];var bb=bg[a2[9]];var aX=bg[a2[10]];var aW=bg[a2[11]];var a6=bg[a2[12]];var a4=bg[a2[13]];var aR=bg[a2[14]];var aQ=bg[a2[15]];var a8=a9[0];var a7=a9[1];var a5=a9[2];var a3=a9[3];return(1-a3)*((1-a5)*((1-a7)*(aT+(aS-aT)*a8)+a7*(bs+(br-bs)*a8))+a5*((1-a7)*(aN+(aM-aN)*a8)+a7*(bl+(bk-bl)*a8)))+a3*((1-a5)*((1-a7)*(bd+(bb-bd)*a8)+a7*(aX+(aW-aX)*a8))+a5*((1-a7)*(a6+(a4-a6)*a8)+a7*(aR+(aQ-aR)*a8)));}else{var aV=1<<a1;var aY=new Float32Array(aV);for(var bh=0;bh<aV;bh++){var aI=bh;var aH=1;for(var aL=0;aL<a1;aL++){aH*=(aI%2==0)?(1-a9[aL]):a9[aL];aI/=2;}aY[bh]=aH;}var bq=new Float32Array(aV);for(var aU=0;aU<aV;aU++){bq[aU]=bg[a2[aU]];}var bc=0;for(var aU=0;aU<aV;aU++){bc+=aY[aU]*bq[aU];}return bc;}}}}}};aG._$Vr=function(bV,bW,a5,aI,bC,a3,bX,bH){var aN=bW._$Q2(bV,a5);var bw=bV._$vs();var a2=bV._$Tr();bW._$zr(bw,a2,aN);var aJ=aI*2;var aQ=bX;if(aN<=0){var bI=bw[0];var bq=bC[bI];if(bH==2&&bX==0){P._$jT(bq,0,a3,0,aJ);}else{for(var bt=0;bt<aJ;){a3[aQ]=bq[bt++];a3[aQ+1]=bq[bt++];aQ+=bH;}}}else{if(aN==1){var bq=bC[bw[0]];var bp=bC[bw[1]];var b3=a2[0];var bT=1-b3;for(var bt=0;bt<aJ;){a3[aQ]=bq[bt]*bT+bp[bt]*b3;++bt;a3[aQ+1]=bq[bt]*bT+bp[bt]*b3;++bt;aQ+=bH;}}else{if(aN==2){var bq=bC[bw[0]];var bp=bC[bw[1]];var aZ=bC[bw[2]];var aY=bC[bw[3]];var b3=a2[0];var b1=a2[1];var bT=1-b3;var bP=1-b1;var b2=bP*bT;var b0=bP*b3;var bM=b1*bT;var bL=b1*b3;for(var bt=0;bt<aJ;){a3[aQ]=b2*bq[bt]+b0*bp[bt]+bM*aZ[bt]+bL*aY[bt];++bt;a3[aQ+1]=b2*bq[bt]+b0*bp[bt]+bM*aZ[bt]+bL*aY[bt];++bt;aQ+=bH;}}else{if(aN==3){var ba=bC[bw[0]];var a9=bC[bw[1]];var aP=bC[bw[2]];var aO=bC[bw[3]];var a6=bC[bw[4]];var a4=bC[bw[5]];var aL=bC[bw[6]];var aK=bC[bw[7]];var b3=a2[0];var b1=a2[1];var bZ=a2[2];var bT=1-b3;var bP=1-b1;var bN=1-bZ;var b8=bN*bP*bT;var b7=bN*bP*b3;var bU=bN*b1*bT;var bS=bN*b1*b3;var b6=bZ*bP*bT;var b5=bZ*bP*b3;var bQ=bZ*b1*bT;var bO=bZ*b1*b3;for(var bt=0;bt<aJ;){a3[aQ]=b8*ba[bt]+b7*a9[bt]+bU*aP[bt]+bS*aO[bt]+b6*a6[bt]+b5*a4[bt]+bQ*aL[bt]+bO*aK[bt];++bt;a3[aQ+1]=b8*ba[bt]+b7*a9[bt]+bU*aP[bt]+bS*aO[bt]+b6*a6[bt]+b5*a4[bt]+bQ*aL[bt]+bO*aK[bt];++bt;aQ+=bH;}}else{if(aN==4){var bD=bC[bw[0]];var bB=bC[bw[1]];var bo=bC[bw[2]];var bm=bC[bw[3]];var by=bC[bw[4]];var bx=bC[bw[5]];var be=bC[bw[6]];var bd=bC[bw[7]];var bG=bC[bw[8]];var bE=bC[bw[9]];var bv=bC[bw[10]];var bu=bC[bw[11]];var bA=bC[bw[12]];var bz=bC[bw[13]];var bn=bC[bw[14]];var bl=bC[bw[15]];var b3=a2[0];var b1=a2[1];var bZ=a2[2];var bY=a2[3];var bT=1-b3;var bP=1-b1;var bN=1-bZ;var bK=1-bY;var bk=bK*bN*bP*bT;var bi=bK*bN*bP*b3;var aW=bK*bN*b1*bT;var aV=bK*bN*b1*b3;var bc=bK*bZ*bP*bT;var bb=bK*bZ*bP*b3;var aS=bK*bZ*b1*bT;var aR=bK*bZ*b1*b3;var bs=bY*bN*bP*bT;var br=bY*bN*bP*b3;var a1=bY*bN*b1*bT;var a0=bY*bN*b1*b3;var bh=bY*bZ*bP*bT;var bf=bY*bZ*bP*b3;var aU=bY*bZ*b1*bT;var aT=bY*bZ*b1*b3;for(var bt=0;bt<aJ;){a3[aQ]=bk*bD[bt]+bi*bB[bt]+aW*bo[bt]+aV*bm[bt]+bc*by[bt]+bb*bx[bt]+aS*be[bt]+aR*bd[bt]+bs*bG[bt]+br*bE[bt]+a1*bv[bt]+a0*bu[bt]+bh*bA[bt]+bf*bz[bt]+aU*bn[bt]+aT*bl[bt];++bt;a3[aQ+1]=bk*bD[bt]+bi*bB[bt]+aW*bo[bt]+aV*bm[bt]+bc*by[bt]+bb*bx[bt]+aS*be[bt]+aR*bd[bt]+bs*bG[bt]+br*bE[bt]+a1*bv[bt]+a0*bu[bt]+bh*bA[bt]+bf*bz[bt]+aU*bn[bt]+aT*bl[bt];++bt;aQ+=bH;}}else{var b4=1<<aN;var bJ=new Float32Array(b4);for(var bj=0;bj<b4;bj++){var aH=bj;var aM=1;for(var bF=0;bF<aN;bF++){aM*=(aH%2==0)?(1-a2[bF]):a2[bF];aH/=2;}bJ[bj]=aM;}var bg=new Float32Array(b4);for(var aX=0;aX<b4;aX++){bg[aX]=bC[bw[aX]];}for(var bt=0;bt<aJ;){var a8=0,a7=0;var bR=bt+1;for(var aX=0;aX<b4;aX++){a8+=bJ[aX]*bg[aX][bt];a7+=bJ[aX]*bg[aX][bR];}bt+=2;a3[aQ]=a8;a3[aQ+1]=a7;aQ+=bH;}}}}}}};function e(){if(j){return;}this.x=null;this.y=null;}e.prototype._$HT=function(aH,aI){this.x=aH;this.y=aI;};e.prototype._$HT=function(aH){this.x=aH.x;this.y=aH.y;};function ae(){if(j){return;}this._$gP=null;this._$dr=null;this._$GS=null;this._$qb=null;this._$Lb=null;this._$mS=null;this.clipID=null;this.clipIDList=new Array();}ae._$ur=-2;ae._$ES=500;ae._$wb=2;ae._$8S=3;ae._$52=ae._$ES;ae._$R2=ae._$ES;ae._$or=function(){return ae._$52;};ae._$Pr=function(){return ae._$R2;};ae.prototype.convertClipIDForV2_11=function(aI){var aH=[];if(aI==null){return null;}if(aI.length==0){return null;}if(!/,/.test(aI)){aH.push(aI.id);return aH;}aH=aI.id.split(\",\");return aH;};ae.prototype._$F0=function(aH){this._$gP=aH._$nP();this._$dr=aH._$nP();this._$GS=aH._$nP();this._$qb=aH._$6L();this._$Lb=aH._$cS();this._$mS=aH._$Tb();if(aH.getFormatVersion()>=ay._$T7){this.clipID=aH._$nP();this.clipIDList=this.convertClipIDForV2_11(this.clipID);}else{this.clipIDList=[];}this._$MS(this._$Lb);};ae.prototype.getClipIDList=function(){return this.clipIDList;};ae.prototype.init=function(aH){};ae.prototype._$Nr=function(aH,aI){aI._$IS[0]=false;aI._$Us=aG._$Z2(aH,this._$GS,aI._$IS,this._$Lb);if(Q._$Zs){}else{if(aI._$IS[0]){return;}}aI._$7s=aG._$br(aH,this._$GS,aI._$IS,this._$mS);};ae.prototype._$2b=function(aH,aI){};ae.prototype.getDrawDataID=function(){return this._$gP;};ae.prototype._$j2=function(aH){this._$gP=aH;};ae.prototype.getOpacity=function(aH,aI){return aI._$7s;};ae.prototype._$zS=function(aH,aI){return aI._$Us;};ae.prototype._$MS=function(aJ){for(var aI=aJ.length-1;aI>=0;--aI){var aH=aJ[aI];if(aH<ae._$52){ae._$52=aH;}else{if(aH>ae._$R2){ae._$R2=aH;}}}};ae.prototype.getTargetBaseDataID=function(){return this._$dr;};ae.prototype._$gs=function(aH){this._$dr=aH;};ae.prototype._$32=function(){return(this._$dr!=null&&(this._$dr!=n._$2o()));};ae.prototype.preDraw=function(aJ,aH,aI){};ae.prototype.draw=function(aJ,aH,aI){};ae.prototype.getType=function(){};ae.prototype._$B2=function(aI,aH,aJ){};function ax(){if(j){return;}this._$Eb=ax._$ps;this._$lT=1;this._$C0=1;this._$tT=1;this._$WL=1;this.culling=false;this.matrix4x4=new Float32Array(16);this.premultipliedAlpha=false;this.anisotropy=0;this.clippingProcess=ax.CLIPPING_PROCESS_NONE;this.clipBufPre_clipContextMask=null;this.clipBufPre_clipContextDraw=null;this.CHANNEL_COLORS=new Array();}ax._$ps=32;ax.CLIPPING_PROCESS_NONE=0;ax.CLIPPING_PROCESS_OVERWRITE_ALPHA=1;ax.CLIPPING_PROCESS_MULTIPLY_ALPHA=2;ax.CLIPPING_PROCESS_DRAW=3;ax.CLIPPING_PROCESS_CLEAR_ALPHA=4;ax.prototype.setChannelFlagAsColor=function(aH,aI){this.CHANNEL_COLORS[aH]=aI;};ax.prototype.getChannelFlagAsColor=function(aH){return this.CHANNEL_COLORS[aH];};ax.prototype._$ZT=function(){};ax.prototype._$Uo=function(aM,aK,aJ,aL,aN,aI,aH){};ax.prototype._$Rs=function(){return -1;};ax.prototype._$Ds=function(aH){};ax.prototype.setBaseColor=function(aK,aJ,aI,aH){if(aK<0){aK=0;}else{if(aK>1){aK=1;}}if(aJ<0){aJ=0;}else{if(aJ>1){aJ=1;}}if(aI<0){aI=0;}else{if(aI>1){aI=1;}}if(aH<0){aH=0;}else{if(aH>1){aH=1;}}this._$lT=aK;this._$C0=aJ;this._$tT=aI;this._$WL=aH;};ax.prototype._$WP=function(aH){this.culling=aH;};ax.prototype.setMatrix=function(aH){for(var aI=0;aI<16;aI++){this.matrix4x4[aI]=aH[aI];}};ax.prototype._$IT=function(){return this.matrix4x4;};ax.prototype.setPremultipliedAlpha=function(aH){this.premultipliedAlpha=aH;};ax.prototype.isPremultipliedAlpha=function(){return this.premultipliedAlpha;};ax.prototype.setAnisotropy=function(aH){this.anisotropy=aH;};ax.prototype.getAnisotropy=function(){return this.anisotropy;};ax.prototype.getClippingProcess=function(){return this.clippingProcess;};ax.prototype.setClippingProcess=function(aH){this.clippingProcess=aH;};ax.prototype.setClipBufPre_clipContextForMask=function(aH){this.clipBufPre_clipContextMask=aH;};ax.prototype.getClipBufPre_clipContextMask=function(){return this.clipBufPre_clipContextMask;};ax.prototype.setClipBufPre_clipContextForDraw=function(aH){this.clipBufPre_clipContextDraw=aH;};ax.prototype.getClipBufPre_clipContextDraw=function(){return this.clipBufPre_clipContextDraw;};function o(){if(j){return;}this.a=1;this.r=1;this.g=1;this.b=1;this.scale=1;this._$ho=1;this.blendMode=Q.L2D_COLOR_BLEND_MODE_MULT;}function c(){if(j){return;}this._$kP=null;this._$dr=null;this._$Ai=true;this._$mS=null;}c._$ur=-2;c._$c2=1;c._$_b=2;c.prototype._$F0=function(aH){this._$kP=aH._$nP();this._$dr=aH._$nP();};c.prototype.readV2_opacity=function(aH){if(aH.getFormatVersion()>=ay.LIVE2D_FORMAT_VERSION_V2_10_SDK2){this._$mS=aH._$Tb();}};c.prototype.init=function(aH){};c.prototype._$Nr=function(aI,aH){};c.prototype.interpolateOpacity=function(aJ,aK,aI,aH){if(this._$mS==null){aI.setInterpolatedOpacity(1);}else{aI.setInterpolatedOpacity(aG._$br(aJ,aK,aH,this._$mS));}};c.prototype._$2b=function(aI,aH){};c.prototype._$nb=function(aL,aK,aM,aH,aI,aJ,aN){};c.prototype.getType=function(){};c.prototype._$gs=function(aH){this._$dr=aH;};c.prototype._$a2=function(aH){this._$kP=aH;};c.prototype.getTargetBaseDataID=function(){return this._$dr;};c.prototype.getBaseDataID=function(){return this._$kP;};c.prototype._$32=function(){return(this._$dr!=null&&(this._$dr!=n._$2o()));};function P(){}P._$W2=0;P._$CS=P._$W2;P._$Mo=function(){return true;};P._$XP=function(aI){try{var aJ=getTimeMSec();while(getTimeMSec()-aJ<aI){}}catch(aH){aH._$Rb();}};P.getUserTimeMSec=function(){return(P._$CS==P._$W2)?P.getSystemTimeMSec():P._$CS;};P.setUserTimeMSec=function(aH){P._$CS=aH;};P.updateUserTimeMSec=function(){return(P._$CS=P.getSystemTimeMSec());};P.getTimeMSec=function(){return new Date().getTime();};P.getSystemTimeMSec=function(){return new Date().getTime();};P._$Q=function(aH){};P._$jT=function(aM,aJ,aI,aL,aH){for(var aK=0;aK<aH;aK++){aI[aL+aK]=aM[aJ+aK];}};function aA(){if(j){return;}this._$VP=0;this._$wL=null;this._$GP=null;this._$8o=aA._$ds;this._$2r=-1;this._$O2=0;this._$ri=0;}aA._$ds=-2;aA.prototype._$F0=function(aH){this._$wL=aH._$nP();this._$VP=aH._$6L();this._$GP=aH._$nP();};aA.prototype.getParamIndex=function(aH){if(this._$2r!=aH){this._$8o=aA._$ds;}return this._$8o;};aA.prototype._$Pb=function(aI,aH){this._$8o=aI;this._$2r=aH;};aA.prototype.getParamID=function(){return this._$wL;};aA.prototype._$yP=function(aH){this._$wL=aH;};aA.prototype._$N2=function(){return this._$VP;};aA.prototype._$d2=function(){return this._$GP;};aA.prototype._$t2=function(aI,aH){this._$VP=aI;this._$GP=aH;};aA.prototype._$Lr=function(){return this._$O2;};aA.prototype._$wr=function(aH){this._$O2=aH;};aA.prototype._$SL=function(){return this._$ri;};aA.prototype._$AL=function(aH){this._$ri=aH;};function G(){}G.startsWith=function(aJ,aL,aK){var aH=aL+aK.length;if(aH>=aJ.length){return false;}for(var aI=aL;aI<aH;aI++){if(G.getChar(aJ,aI)!=aK.charAt(aI-aL)){return false;}}return true;};G.getChar=function(aI,aH){return String.fromCharCode(aI.getUint8(aH));};G.createString=function(aM,aL,aJ){var aH=new ArrayBuffer(aJ*2);var aK=new Uint16Array(aH);for(var aI=0;aI<aJ;aI++){aK[aI]=aM.getUint8(aL+aI);}return String.fromCharCode.apply(null,aK);};G._$LS=function(aP,aM,aR,aK){if(aP instanceof ArrayBuffer){aP=new DataView(aP);}var aL=aR;var aJ=false;var aQ=false;var aS=0;var aO=G.getChar(aP,aL);if(aO==\"-\"){aJ=true;aL++;}var aN=false;for(;aL<aM;aL++){aO=G.getChar(aP,aL);switch(aO){case\"0\":aS=aS*10;break;case\"1\":aS=aS*10+1;break;case\"2\":aS=aS*10+2;break;case\"3\":aS=aS*10+3;break;case\"4\":aS=aS*10+4;break;case\"5\":aS=aS*10+5;break;case\"6\":aS=aS*10+6;break;case\"7\":aS=aS*10+7;break;case\"8\":aS=aS*10+8;break;case\"9\":aS=aS*10+9;break;case\".\":aQ=true;aL++;aN=true;break;default:aN=true;break;}if(aN){break;}}if(aQ){var aI=0.1;var aH=false;for(;aL<aM;aL++){aO=G.getChar(aP,aL);switch(aO){case\"0\":break;case\"1\":aS+=aI*1;break;case\"2\":aS+=aI*2;break;case\"3\":aS+=aI*3;break;case\"4\":aS+=aI*4;break;case\"5\":aS+=aI*5;break;case\"6\":aS+=aI*6;break;case\"7\":aS+=aI*7;break;case\"8\":aS+=aI*8;break;case\"9\":aS+=aI*9;break;default:aH=true;break;}aI*=0.1;if(aH){break;}}}if(aJ){aS=-aS;}aK[0]=aL;return aS;};function g(){if(j){return;}this._$Ob=null;}g.prototype._$zP=function(){this._$Ob=new Array();};g.prototype._$F0=function(aH){this._$Ob=aH._$nP();};g.prototype._$Ur=function(aK){if(aK._$WS()){return true;}var aH=aK._$v2();for(var aJ=this._$Ob.length-1;aJ>=0;--aJ){var aI=this._$Ob[aJ].getParamIndex(aH);if(aI==aA._$ds){aI=aK.getParamIndex(this._$Ob[aJ].getParamID());}if(aK._$Xb(aI)){return true;}}return false;};g.prototype._$Q2=function(aL,aV){var aX=this._$Ob.length;var aJ=aL._$v2();var aN=0;var aI;var aQ;for(var aK=0;aK<aX;aK++){var aH=this._$Ob[aK];aI=aH.getParamIndex(aJ);if(aI==aA._$ds){aI=aL.getParamIndex(aH.getParamID());aH._$Pb(aI,aJ);}if(aI<0){throw new Exception(\"err 23242 : \"+aH.getParamID());}var aU=aI<0?0:aL.getParamFloat(aI);aQ=aH._$N2();var aM=aH._$d2();var aP=-1;var aT=0;var aS;var aR;if(aQ<1){}else{if(aQ==1){aS=aM[0];if(aS-aw._$J<aU&&aU<aS+aw._$J){aP=0;aT=0;}else{aP=0;aV[0]=true;}}else{aS=aM[0];if(aU<aS-aw._$J){aP=0;aV[0]=true;}else{if(aU<aS+aw._$J){aP=0;}else{var aW=false;for(var aO=1;aO<aQ;++aO){aR=aM[aO];if(aU<aR+aw._$J){if(aR-aw._$J<aU){aP=aO;}else{aP=aO-1;aT=(aU-aS)/(aR-aS);aN++;}aW=true;break;}aS=aR;}if(!aW){aP=aQ-1;aT=0;aV[0]=true;}}}}}aH._$wr(aP);aH._$AL(aT);}return aN;};g.prototype._$zr=function(aN,aT,aP){var aR=1<<aP;if(aR+1>aw._$Qb){console.log(\"err 23245\\n\");}var aS=this._$Ob.length;var aK=1;var aH=1;var aJ=0;for(var aQ=0;aQ<aR;++aQ){aN[aQ]=0;}for(var aL=0;aL<aS;++aL){var aI=this._$Ob[aL];if(aI._$SL()==0){var aO=aI._$Lr()*aK;if(aO<0&&Q._$3T){throw new Exception(\"err 23246\");}for(var aQ=0;aQ<aR;++aQ){aN[aQ]+=aO;}}else{var aO=aK*aI._$Lr();var aM=aK*(aI._$Lr()+1);for(var aQ=0;aQ<aR;++aQ){aN[aQ]+=((aQ/aH|0)%2==0)?aO:aM;}aT[aJ++]=aI._$SL();aH*=2;}aK*=aI._$N2();}aN[aR]=65535;aT[aJ]=-1;};g.prototype._$h2=function(aJ,aH,aK){var aM=new Float32Array(aH);for(var aL=0;aL<aH;++aL){aM[aL]=aK[aL];}var aI=new aA();aI._$yP(aJ);aI._$t2(aH,aM);this._$Ob.push(aI);};g.prototype._$J2=function(aO){var aN=aO;var aM=this._$Ob.length;for(var aK=0;aK<aM;++aK){var aI=this._$Ob[aK];var aH=aI._$N2();var aJ=aN%aI._$N2();var aL=aI._$d2()[aJ];console.log(\"%s[%d]=%7.2f / \",aI.getParamID(),aJ,aL);aN/=aH;}console.log(\"\\n\");};g.prototype.getParamCount=function(){return this._$Ob.length;};g.prototype._$zs=function(){return this._$Ob;};function ac(){this.m=new Float32Array(16);this.identity();}ac.prototype.identity=function(){for(var aH=0;aH<16;aH++){this.m[aH]=((aH%5)==0)?1:0;}};ac.prototype.getArray=function(){return this.m;};ac.prototype.getCopyMatrix=function(){return new Float32Array(this.m);};ac.prototype.setMatrix=function(aI){if(aI==null||aI.length!=16){return;}for(var aH=0;aH<16;aH++){this.m[aH]=aI[aH];}};ac.prototype.mult=function(aH,aJ,aI){if(aJ==null){return null;}if(this==aJ){this.mult_safe(this.m,aH.m,aJ.m,aI);}else{this.mult_fast(this.m,aH.m,aJ.m,aI);}return aJ;};ac.prototype.mult_safe=function(aI,aH,aM,aJ){if(aI==aM){var aL=new Array(16);this.mult_fast(aI,aH,aL,aJ);for(var aK=15;aK>=0;--aK){aM[aK]=aL[aK];}}else{this.mult_fast(aI,aH,aM,aJ);}};ac.prototype.mult_fast=function(aI,aH,aK,aJ){if(aJ){aK[0]=aI[0]*aH[0]+aI[4]*aH[1]+aI[8]*aH[2];aK[4]=aI[0]*aH[4]+aI[4]*aH[5]+aI[8]*aH[6];aK[8]=aI[0]*aH[8]+aI[4]*aH[9]+aI[8]*aH[10];aK[12]=aI[0]*aH[12]+aI[4]*aH[13]+aI[8]*aH[14]+aI[12];aK[1]=aI[1]*aH[0]+aI[5]*aH[1]+aI[9]*aH[2];aK[5]=aI[1]*aH[4]+aI[5]*aH[5]+aI[9]*aH[6];aK[9]=aI[1]*aH[8]+aI[5]*aH[9]+aI[9]*aH[10];aK[13]=aI[1]*aH[12]+aI[5]*aH[13]+aI[9]*aH[14]+aI[13];aK[2]=aI[2]*aH[0]+aI[6]*aH[1]+aI[10]*aH[2];aK[6]=aI[2]*aH[4]+aI[6]*aH[5]+aI[10]*aH[6];aK[10]=aI[2]*aH[8]+aI[6]*aH[9]+aI[10]*aH[10];aK[14]=aI[2]*aH[12]+aI[6]*aH[13]+aI[10]*aH[14]+aI[14];aK[3]=aK[7]=aK[11]=0;aK[15]=1;}else{aK[0]=aI[0]*aH[0]+aI[4]*aH[1]+aI[8]*aH[2]+aI[12]*aH[3];aK[4]=aI[0]*aH[4]+aI[4]*aH[5]+aI[8]*aH[6]+aI[12]*aH[7];aK[8]=aI[0]*aH[8]+aI[4]*aH[9]+aI[8]*aH[10]+aI[12]*aH[11];aK[12]=aI[0]*aH[12]+aI[4]*aH[13]+aI[8]*aH[14]+aI[12]*aH[15];aK[1]=aI[1]*aH[0]+aI[5]*aH[1]+aI[9]*aH[2]+aI[13]*aH[3];aK[5]=aI[1]*aH[4]+aI[5]*aH[5]+aI[9]*aH[6]+aI[13]*aH[7];aK[9]=aI[1]*aH[8]+aI[5]*aH[9]+aI[9]*aH[10]+aI[13]*aH[11];aK[13]=aI[1]*aH[12]+aI[5]*aH[13]+aI[9]*aH[14]+aI[13]*aH[15];aK[2]=aI[2]*aH[0]+aI[6]*aH[1]+aI[10]*aH[2]+aI[14]*aH[3];aK[6]=aI[2]*aH[4]+aI[6]*aH[5]+aI[10]*aH[6]+aI[14]*aH[7];aK[10]=aI[2]*aH[8]+aI[6]*aH[9]+aI[10]*aH[10]+aI[14]*aH[11];aK[14]=aI[2]*aH[12]+aI[6]*aH[13]+aI[10]*aH[14]+aI[14]*aH[15];aK[3]=aI[3]*aH[0]+aI[7]*aH[1]+aI[11]*aH[2]+aI[15]*aH[3];aK[7]=aI[3]*aH[4]+aI[7]*aH[5]+aI[11]*aH[6]+aI[15]*aH[7];aK[11]=aI[3]*aH[8]+aI[7]*aH[9]+aI[11]*aH[10]+aI[15]*aH[11];aK[15]=aI[3]*aH[12]+aI[7]*aH[13]+aI[11]*aH[14]+aI[15]*aH[15];}};ac.prototype.translate=function(aH,aJ,aI){this.m[12]=this.m[0]*aH+this.m[4]*aJ+this.m[8]*aI+this.m[12];this.m[13]=this.m[1]*aH+this.m[5]*aJ+this.m[9]*aI+this.m[13];this.m[14]=this.m[2]*aH+this.m[6]*aJ+this.m[10]*aI+this.m[14];this.m[15]=this.m[3]*aH+this.m[7]*aJ+this.m[11]*aI+this.m[15];};ac.prototype.scale=function(aJ,aI,aH){this.m[0]*=aJ;this.m[4]*=aI;this.m[8]*=aH;this.m[1]*=aJ;this.m[5]*=aI;this.m[9]*=aH;this.m[2]*=aJ;this.m[6]*=aI;this.m[10]*=aH;this.m[3]*=aJ;this.m[7]*=aI;this.m[11]*=aH;};ac.prototype.rotateX=function(aH){var aK=aC.fcos(aH);var aJ=aC._$9(aH);var aI=this.m[4];this.m[4]=aI*aK+this.m[8]*aJ;this.m[8]=aI*-aJ+this.m[8]*aK;aI=this.m[5];this.m[5]=aI*aK+this.m[9]*aJ;this.m[9]=aI*-aJ+this.m[9]*aK;aI=this.m[6];this.m[6]=aI*aK+this.m[10]*aJ;this.m[10]=aI*-aJ+this.m[10]*aK;aI=this.m[7];this.m[7]=aI*aK+this.m[11]*aJ;this.m[11]=aI*-aJ+this.m[11]*aK;};ac.prototype.rotateY=function(aH){var aK=aC.fcos(aH);var aJ=aC._$9(aH);var aI=this.m[0];this.m[0]=aI*aK+this.m[8]*-aJ;this.m[8]=aI*aJ+this.m[8]*aK;aI=this.m[1];this.m[1]=aI*aK+this.m[9]*-aJ;this.m[9]=aI*aJ+this.m[9]*aK;aI=m[2];this.m[2]=aI*aK+this.m[10]*-aJ;this.m[10]=aI*aJ+this.m[10]*aK;aI=m[3];this.m[3]=aI*aK+this.m[11]*-aJ;this.m[11]=aI*aJ+this.m[11]*aK;};ac.prototype.rotateZ=function(aH){var aK=aC.fcos(aH);var aJ=aC._$9(aH);var aI=this.m[0];this.m[0]=aI*aK+this.m[4]*aJ;this.m[4]=aI*-aJ+this.m[4]*aK;aI=this.m[1];this.m[1]=aI*aK+this.m[5]*aJ;this.m[5]=aI*-aJ+this.m[5]*aK;aI=this.m[2];this.m[2]=aI*aK+this.m[6]*aJ;this.m[6]=aI*-aJ+this.m[6]*aK;aI=this.m[3];this.m[3]=aI*aK+this.m[7]*aJ;this.m[7]=aI*-aJ+this.m[7]*aK;};function Z(aH){if(j){return;}ak.prototype.constructor.call(this,aH);}Z.prototype=new ak();Z._$tP=new Object();Z._$27=function(){Z._$tP.clear();};Z.getID=function(aH){var aI=Z._$tP[aH];if(aI==null){aI=new Z(aH);Z._$tP[aH]=aI;}return aI;};Z.prototype._$3s=function(){return new Z();};function aD(){if(j){return;}this._$7=1;this._$f=0;this._$H=0;this._$g=1;this._$k=0;this._$w=0;this._$hi=STATE_IDENTITY;this._$Z=_$pS;}aD._$kS=-1;aD._$pS=0;aD._$hb=1;aD.STATE_IDENTITY=0;aD._$gb=1;aD._$fo=2;aD._$go=4;aD.prototype.transform=function(aK,aI,aH){var aT,aS,aR,aM,aL,aJ;var aQ=0;var aN=0;switch(this._$hi){default:return;case (aD._$go|aD._$fo|aD._$gb):aT=this._$7;aS=this._$H;aR=this._$k;aM=this._$f;aL=this._$g;aJ=this._$w;while(--aH>=0){var aP=aK[aQ++];var aO=aK[aQ++];aI[aN++]=(aT*aP+aS*aO+aR);aI[aN++]=(aM*aP+aL*aO+aJ);}return;case (aD._$go|aD._$fo):aT=this._$7;aS=this._$H;aM=this._$f;aL=this._$g;while(--aH>=0){var aP=aK[aQ++];var aO=aK[aQ++];aI[aN++]=(aT*aP+aS*aO);aI[aN++]=(aM*aP+aL*aO);}return;case (aD._$go|aD._$gb):aS=this._$H;aR=this._$k;aM=this._$f;aJ=this._$w;while(--aH>=0){var aP=aK[aQ++];aI[aN++]=(aS*aK[aQ++]+aR);aI[aN++]=(aM*aP+aJ);}return;case (aD._$go):aS=this._$H;aM=this._$f;while(--aH>=0){var aP=aK[aQ++];aI[aN++]=(aS*aK[aQ++]);aI[aN++]=(aM*aP);}return;case (aD._$fo|aD._$gb):aT=this._$7;aR=this._$k;aL=this._$g;aJ=this._$w;while(--aH>=0){aI[aN++]=(aT*aK[aQ++]+aR);aI[aN++]=(aL*aK[aQ++]+aJ);}return;case (aD._$fo):aT=this._$7;aL=this._$g;while(--aH>=0){aI[aN++]=(aT*aK[aQ++]);aI[aN++]=(aL*aK[aQ++]);}return;case (aD._$gb):aR=this._$k;aJ=this._$w;while(--aH>=0){aI[aN++]=(aK[aQ++]+aR);aI[aN++]=(aK[aQ++]+aJ);}return;case (aD.STATE_IDENTITY):if(aK!=aI||aQ!=aN){P._$jT(aK,aQ,aI,aN,aH*2);}return;}};aD.prototype.update=function(){if(this._$H==0&&this._$f==0){if(this._$7==1&&this._$g==1){if(this._$k==0&&this._$w==0){this._$hi=aD.STATE_IDENTITY;this._$Z=aD._$pS;}else{this._$hi=aD._$gb;this._$Z=aD._$hb;}}else{if(this._$k==0&&this._$w==0){this._$hi=aD._$fo;this._$Z=aD._$kS;}else{this._$hi=(aD._$fo|aD._$gb);this._$Z=aD._$kS;}}}else{if(this._$7==0&&this._$g==0){if(this._$k==0&&this._$w==0){this._$hi=aD._$go;this._$Z=aD._$kS;}else{this._$hi=(aD._$go|aD._$gb);this._$Z=aD._$kS;}}else{if(this._$k==0&&this._$w==0){this._$hi=(aD._$go|aD._$fo);this._$Z=aD._$kS;}else{this._$hi=(aD._$go|aD._$fo|aD._$gb);this._$Z=aD._$kS;}}}};aD.prototype._$RT=function(aK){this._$IT(aK);var aJ=aK[0];var aH=aK[2];var aN=aK[1];var aM=aK[3];var aI=Math.sqrt(aJ*aJ+aN*aN);var aL=aJ*aM-aH*aN;if(aI==0){if(Q._$so){console.log(\"affine._$RT() / rt==0\");}}else{aK[0]=aI;aK[1]=aL/aI;aK[2]=(aN*aM+aJ*aH)/aL;aK[3]=Math.atan2(aN,aJ);}};aD.prototype._$ho=function(aN,aM,aI,aH){var aL=new Float32Array(6);var aK=new Float32Array(6);aN._$RT(aL);aM._$RT(aK);var aJ=new Float32Array(6);aJ[0]=aL[0]+(aK[0]-aL[0])*aI;aJ[1]=aL[1]+(aK[1]-aL[1])*aI;aJ[2]=aL[2]+(aK[2]-aL[2])*aI;aJ[3]=aL[3]+(aK[3]-aL[3])*aI;aJ[4]=aL[4]+(aK[4]-aL[4])*aI;aJ[5]=aL[5]+(aK[5]-aL[5])*aI;aH._$CT(aJ);};aD.prototype._$CT=function(aJ){var aI=Math.cos(aJ[3]);var aH=Math.sin(aJ[3]);this._$7=aJ[0]*aI;this._$f=aJ[0]*aH;this._$H=aJ[1]*(aJ[2]*aI-aH);this._$g=aJ[1]*(aJ[2]*aH+aI);this._$k=aJ[4];this._$w=aJ[5];this.update();};aD.prototype._$IT=function(aH){aH[0]=this._$7;aH[1]=this._$f;aH[2]=this._$H;aH[3]=this._$g;aH[4]=this._$k;aH[5]=this._$w;};function Y(){if(j){return;}ah.prototype.constructor.call(this);this.motions=new Array();this._$7r=null;this._$7r=Y._$Co++;this._$D0=30;this._$yT=0;this._$E=true;this.loopFadeIn=true;this._$AS=-1;_$a0();}Y.prototype=new ah();Y._$cs=\"VISIBLE:\";Y._$ar=\"LAYOUT:\";Y._$Co=0;Y._$D2=[];Y._$1T=1;Y.loadMotion=function(aR){var aM=new Y();var aI=[0];var aP=aR.length;aM._$yT=0;for(var aJ=0;aJ<aP;++aJ){var aQ=(aR[aJ]&255);if(aQ==\"\\n\"||aQ==\"\\r\"){continue;}if(aQ==\"#\"){for(;aJ<aP;++aJ){if(aR[aJ]==\"\\n\"||aR[aJ]==\"\\r\"){break;}}continue;}if(aQ==\"$\"){var aT=aJ;var aK=-1;for(;aJ<aP;++aJ){aQ=(aR[aJ]&255);if(aQ==\"\\r\"||aQ==\"\\n\"){break;}if(aQ==\"=\"){aK=aJ;break;}}var aO=false;if(aK>=0){if(aK==aT+4&&aR[aT+1]==\"f\"&&aR[aT+2]==\"p\"&&aR[aT+3]==\"s\"){aO=true;}for(aJ=aK+1;aJ<aP;++aJ){aQ=(aR[aJ]&255);if(aQ==\"\\r\"||aQ==\"\\n\"){break;}if(aQ==\",\"||aQ==\" \"||aQ==\"\\t\"){continue;}var aL=G._$LS(aR,aP,aJ,aI);if(aI[0]>0){if(aO&&5<aL&&aL<121){aM._$D0=aL;}}aJ=aI[0];}}for(;aJ<aP;++aJ){if(aR[aJ]==\"\\n\"||aR[aJ]==\"\\r\"){break;}}continue;}if((\"a\"<=aQ&&aQ<=\"z\")||(\"A\"<=aQ&&aQ<=\"Z\")||aQ==\"_\"){var aT=aJ;var aK=-1;for(;aJ<aP;++aJ){aQ=(aR[aJ]&255);if(aQ==\"\\r\"||aQ==\"\\n\"){break;}if(aQ==\"=\"){aK=aJ;break;}}if(aK>=0){var aN=new t();if(G.startsWith(aR,aT,Y._$cs)){aN._$RP=t._$hs;aN._$4P=new String(aR,aT,aK-aT);}else{if(G.startsWith(aR,aT,Y._$ar)){aN._$4P=new String(aR,aT+7,aK-aT-7);if(G.startsWith(aR,aT+7,\"ANCHOR_X\")){aN._$RP=t._$xs;}else{if(G.startsWith(aR,aT+7,\"ANCHOR_Y\")){aN._$RP=t._$us;}else{if(G.startsWith(aR,aT+7,\"SCALE_X\")){aN._$RP=t._$qs;}else{if(G.startsWith(aR,aT+7,\"SCALE_Y\")){aN._$RP=t._$Ys;}else{if(G.startsWith(aR,aT+7,\"X\")){aN._$RP=t._$ws;}else{if(G.startsWith(aR,aT+7,\"Y\")){aN._$RP=t._$Ns;}}}}}}}else{aN._$RP=t._$Fr;aN._$4P=new String(aR,aT,aK-aT);}}aM.motions.push(aN);var aS=0;Y._$D2.clear();for(aJ=aK+1;aJ<aP;++aJ){aQ=(aR[aJ]&255);if(aQ==\"\\r\"||aQ==\"\\n\"){break;}if(aQ==\",\"||aQ==\" \"||aQ==\"\\t\"){continue;}var aL=G._$LS(aR,aP,aJ,aI);if(aI[0]>0){Y._$D2.push(aL);aS++;var aH=aI[0];if(aH<aJ){console.log(\"_$n0 _$hi . @Live2DMotion loadMotion()\\n\");break;}aJ=aH;}}aN._$I0=Y._$D2._$BL();if(aS>aM._$yT){aM._$yT=aS;}}}}aM._$AS=((1000*aM._$yT)/aM._$D0)|0;return aM;};Y.prototype.getDurationMSec=function(){return this._$AS;};Y.prototype.dump=function(){for(var aJ=0;aJ<this.motions.length;aJ++){var aH=this.motions[aJ];console.log(\"_$wL[%s] [%d]. \",aH._$4P,aH._$I0.length);for(var aI=0;aI<aH._$I0.length&&aI<10;aI++){console.log(\"%5.2f ,\",aH._$I0[aI]);}console.log(\"\\n\");}};Y.prototype.updateParamExe=function(aH,aL,aO,aX){var aM=aL-aX._$z2;var aV=aM*this._$D0/1000;var aJ=aV|0;var aP=aV-aJ;for(var aU=0;aU<this.motions.length;aU++){var aS=this.motions[aU];var aK=aS._$I0.length;var aQ=aS._$4P;if(aS._$RP==t._$hs){var aT=aS._$I0[(aJ>=aK?aK-1:aJ)];aH.setParamFloat(aQ,aT);}else{if(t._$ws<=aS._$RP&&aS._$RP<=t._$Ys){}else{var aR=aH.getParamFloat(aQ);var aY=aS._$I0[(aJ>=aK?aK-1:aJ)];var aW=aS._$I0[(aJ+1>=aK?aK-1:aJ+1)];var aI=aY+(aW-aY)*aP;var aN=aR+(aI-aR)*aO;aH.setParamFloat(aQ,aN);}}}if(aJ>=this._$yT){if(this._$E){aX._$z2=aL;if(this.loopFadeIn){aX._$bs=aL;}}else{aX._$9L=true;}}};Y.prototype._$r0=function(){return this._$E;};Y.prototype._$aL=function(aH){this._$E=aH;};Y.prototype.isLoopFadeIn=function(){return this.loopFadeIn;};Y.prototype.setLoopFadeIn=function(aH){this.loopFadeIn=aH;};function aE(){this._$P=new Float32Array(100);this.size=0;}aE.prototype.clear=function(){this.size=0;};aE.prototype.add=function(aI){if(this._$P.length<=this.size){var aH=new Float32Array(this.size*2);P._$jT(this._$P,0,aH,0,this.size);this._$P=aH;}this._$P[this.size++]=aI;};aE.prototype._$BL=function(){var aH=new Float32Array(this.size);P._$jT(this._$P,0,aH,0,this.size);return aH;};function t(){this._$4P=null;this._$I0=null;this._$RP=null;}t._$Fr=0;t._$hs=1;t._$ws=100;t._$Ns=101;t._$xs=102;t._$us=103;t._$qs=104;t._$Ys=105;function aw(){}aw._$Ms=1;aw._$Qs=2;aw._$i2=0;aw._$No=2;aw._$do=aw._$Ms;aw._$Ls=true;aw._$1r=5;aw._$Qb=65;aw._$J=0.0001;aw._$FT=0.001;aw._$Ss=3;function ay(){}ay._$o7=6;ay._$S7=7;ay._$s7=8;ay._$77=9;ay.LIVE2D_FORMAT_VERSION_V2_10_SDK2=10;ay.LIVE2D_FORMAT_VERSION_V2_11_SDK2_1=11;ay._$T7=ay.LIVE2D_FORMAT_VERSION_V2_11_SDK2_1;ay._$Is=-2004318072;ay._$h0=0;ay._$4L=23;ay._$7P=33;ay._$uT=function(aH){console.log(\"_$bo :: _$6 _$mo _$E0 : %d\\n\",aH);};ay._$9o=function(aH){if(aH<40){ay._$uT(aH);return null;}else{if(aH<50){ay._$uT(aH);return null;}else{if(aH<60){ay._$uT(aH);return null;}else{if(aH<100){switch(aH){case 65:return new E();case 66:return new g();case 67:return new aA();case 68:return new ab();case 69:return new X();case 70:return new b();default:ay._$uT(aH);return null;}}else{if(aH<150){switch(aH){case 131:return new f();case 133:return new s();case 136:return new w();case 137:return new an();case 142:return new aq();}}}}}}ay._$uT(aH);return null;};function y(aH){if(j){return;}this._$QT=true;this._$co=-1;this._$qo=0;this._$pb=new Array(y._$is);this._$_2=new Float32Array(y._$is);this._$vr=new Float32Array(y._$is);this._$Rr=new Float32Array(y._$is);this._$Or=new Float32Array(y._$is);this._$fs=new Float32Array(y._$is);this._$Js=new Array(y._$is);this._$3S=new Array();this._$aS=new Array();this._$Bo=null;this._$F2=new Array();this._$db=new Array();this._$8b=new Array();this._$Hr=new Array();this._$Ws=null;this._$Vs=null;this._$Er=null;this._$Es=new Int16Array(aw._$Qb);this._$ZP=new Float32Array(aw._$1r*2);this._$Ri=aH;this._$b0=y._$HP++;this.clipManager=null;this.dp_webgl=null;}y._$HP=0;y._$_0=true;y._$V2=-1;y._$W0=-1;y._$jr=false;y._$ZS=true;y._$tr=(-1000000);y._$lr=(1000000);y._$is=32;y._$e=false;y.prototype.getDrawDataIndex=function(aI){for(var aH=this._$aS.length-1;aH>=0;--aH){if(this._$aS[aH]!=null&&this._$aS[aH].getDrawDataID()==aI){return aH;}}return -1;};y.prototype.getDrawData=function(aH){if(aH instanceof Z){if(this._$Bo==null){this._$Bo=new Object();var aJ=this._$aS.length;for(var aI=0;aI<aJ;aI++){var aL=this._$aS[aI];var aK=aL.getDrawDataID();if(aK==null){continue;}this._$Bo[aK]=aL;}}return this._$Bo[id];}else{if(aH<this._$aS.length){return this._$aS[aH];}else{return null;}}};y.prototype.release=function(){this._$3S.clear();this._$aS.clear();this._$F2.clear();if(this._$Bo!=null){this._$Bo.clear();}this._$db.clear();this._$8b.clear();this._$Hr.clear();};y.prototype.init=function(){this._$co++;if(this._$F2.length>0){this.release();}var aO=this._$Ri.getModelImpl();var aT=aO._$Xr();var aS=aT.length;var aH=new Array();var a3=new Array();for(var aV=0;aV<aS;++aV){var a4=aT[aV];this._$F2.push(a4);this._$Hr.push(a4.init(this));var aK=a4.getBaseData();var aR=aK.length;for(var aU=0;aU<aR;++aU){aH.push(aK[aU]);}for(var aU=0;aU<aR;++aU){var aM=aK[aU].init(this);aM._$l2(aV);a3.push(aM);}var a1=a4.getDrawData();var aP=a1.length;for(var aU=0;aU<aP;++aU){var aZ=a1[aU];var a0=aZ.init(this);a0._$IP=aV;this._$aS.push(aZ);this._$8b.push(a0);}}var aY=aH.length;var aN=n._$2o();while(true){var aX=false;for(var aV=0;aV<aY;++aV){var aL=aH[aV];if(aL==null){continue;}var a2=aL.getTargetBaseDataID();if(a2==null||a2==aN||this.getBaseDataIndex(a2)>=0){this._$3S.push(aL);this._$db.push(a3[aV]);aH[aV]=null;aX=true;}}if(!aX){break;}}var aI=aO._$E2();if(aI!=null){var aJ=aI._$1s();if(aJ!=null){var aW=aJ.length;for(var aV=0;aV<aW;++aV){var aQ=aJ[aV];if(aQ==null){continue;}this._$02(aQ.getParamID(),aQ.getDefaultValue(),aQ.getMinValue(),aQ.getMaxValue());}}}this.clipManager=new W(this.dp_webgl);this.clipManager.init(this,this._$aS,this._$8b);this._$QT=true;};y.prototype.update=function(){if(y._$e){q.start(\"_$zL\");}var aK=this._$_2.length;for(var aW=0;aW<aK;aW++){if(this._$_2[aW]!=this._$vr[aW]){this._$Js[aW]=y._$ZS;this._$vr[aW]=this._$_2[aW];}}var aX=false;var aQ=this._$3S.length;var aN=this._$aS.length;var aS=a._$or();var aZ=a._$Pr();var aU=aZ-aS+1;if(this._$Ws==null||this._$Ws.length<aU){this._$Ws=new Int16Array(aU);this._$Vs=new Int16Array(aU);}for(var aW=0;aW<aU;aW++){this._$Ws[aW]=y._$V2;this._$Vs[aW]=y._$V2;}if(this._$Er==null||this._$Er.length<aN){this._$Er=new Int16Array(aN);}for(var aW=0;aW<aN;aW++){this._$Er[aW]=y._$W0;}if(y._$e){q.dump(\"_$zL\");}if(y._$e){q.start(\"_$UL\");}var aL=null;for(var aV=0;aV<aQ;++aV){var aJ=this._$3S[aV];var aH=this._$db[aV];try{aJ._$Nr(this,aH);aJ._$2b(this,aH);}catch(aY){if(aL==null){aL=aY;}}}if(aL!=null){if(y._$_0){q._$Rb(aL);}}if(y._$e){q.dump(\"_$UL\");}if(y._$e){q.start(\"_$DL\");}var aR=null;for(var aO=0;aO<aN;++aO){var aM=this._$aS[aO];var aI=this._$8b[aO];try{aM._$Nr(this,aI);if(aI._$u2()){continue;}aM._$2b(this,aI);var aT=Math.floor(aM._$zS(this,aI)-aS);var aP;try{aP=this._$Vs[aT];}catch(aY){console.log(\"_$li :: %s / %s \t\t\t\t@@_$fS\\n\",aY.toString(),aM.getDrawDataID().toString());aT=Math.floor(aM._$zS(this,aI)-aS);continue;}if(aP==y._$V2){this._$Ws[aT]=aO;}else{this._$Er[aP]=aO;}this._$Vs[aT]=aO;}catch(aY){if(aR==null){aR=aY;Q._$sT(Q._$H7);}}}if(aR!=null){if(y._$_0){q._$Rb(aR);}}if(y._$e){q.dump(\"_$DL\");}if(y._$e){q.start(\"_$eL\");}for(var aW=this._$Js.length-1;aW>=0;aW--){this._$Js[aW]=y._$jr;}this._$QT=false;if(y._$e){q.dump(\"_$eL\");}return aX;};y.prototype.preDraw=function(aH){if(this.clipManager!=null){aH._$ZT();this.clipManager.setupClip(this,aH);}};y.prototype.draw=function(aM){if(this._$Ws==null){q._$li(\"call _$Ri.update() before _$Ri.draw() \");return;}var aP=this._$Ws.length;aM._$ZT();for(var aK=0;aK<aP;++aK){var aN=this._$Ws[aK];if(aN==y._$V2){continue;}do{var aH=this._$aS[aN];var aI=this._$8b[aN];if(aI._$yo()){var aJ=aI._$IP;var aL=this._$Hr[aJ];aI._$VS=aL.getPartsOpacity();aH.draw(aM,this,aI);}var aO=this._$Er[aN];if(aO<=aN||aO==y._$W0){break;}aN=aO;}while(true);}};y.prototype.getParamIndex=function(aH){for(var aI=this._$pb.length-1;aI>=0;--aI){if(this._$pb[aI]==aH){return aI;}}return this._$02(aH,0,y._$tr,y._$lr);};y.prototype._$BS=function(aH){return this.getBaseDataIndex(aH);};y.prototype.getBaseDataIndex=function(aH){for(var aI=this._$3S.length-1;aI>=0;--aI){if(this._$3S[aI]!=null&&this._$3S[aI].getBaseDataID()==aH){return aI;}}return -1;};y.prototype._$UT=function(aJ,aH){var aI=new Float32Array(aH);P._$jT(aJ,0,aI,0,aJ.length);return aI;};y.prototype._$02=function(aN,aM,aL,aH){if(this._$qo>=this._$pb.length){var aK=this._$pb.length;var aJ=new Array(aK*2);P._$jT(this._$pb,0,aJ,0,aK);this._$pb=aJ;this._$_2=this._$UT(this._$_2,aK*2);this._$vr=this._$UT(this._$vr,aK*2);this._$Rr=this._$UT(this._$Rr,aK*2);this._$Or=this._$UT(this._$Or,aK*2);var aI=new Array();P._$jT(this._$Js,0,aI,0,aK);this._$Js=aI;}this._$pb[this._$qo]=aN;this._$_2[this._$qo]=aM;this._$vr[this._$qo]=aM;this._$Rr[this._$qo]=aL;this._$Or[this._$qo]=aH;this._$Js[this._$qo]=y._$ZS;return this._$qo++;};y.prototype._$Zo=function(aI,aH){this._$3S[aI]=aH;};y.prototype.setParamFloat=function(aH,aI){if(aI<this._$Rr[aH]){aI=this._$Rr[aH];}if(aI>this._$Or[aH]){aI=this._$Or[aH];}this._$_2[aH]=aI;};y.prototype.loadParam=function(){var aH=this._$_2.length;if(aH>this._$fs.length){aH=this._$fs.length;}P._$jT(this._$fs,0,this._$_2,0,aH);};y.prototype.saveParam=function(){var aH=this._$_2.length;if(aH>this._$fs.length){this._$fs=new Float32Array(aH);}P._$jT(this._$_2,0,this._$fs,0,aH);};y.prototype._$v2=function(){return this._$co;};y.prototype._$WS=function(){return this._$QT;};y.prototype._$Xb=function(aH){return this._$Js[aH]==y._$ZS;};y.prototype._$vs=function(){return this._$Es;};y.prototype._$Tr=function(){return this._$ZP;};y.prototype.getBaseData=function(aH){return this._$3S[aH];};y.prototype.getParamFloat=function(aH){return this._$_2[aH];};y.prototype.getParamMax=function(aH){return this._$Or[aH];};y.prototype.getParamMin=function(aH){return this._$Rr[aH];};y.prototype.setPartsOpacity=function(aJ,aH){var aI=this._$Hr[aJ];aI.setPartsOpacity(aH);};y.prototype.getPartsOpacity=function(aI){var aH=this._$Hr[aI];return aH.getPartsOpacity();};y.prototype.getPartsDataIndex=function(aI){for(var aH=this._$F2.length-1;aH>=0;--aH){if(this._$F2[aH]!=null&&this._$F2[aH]._$p2()==aI){return aH;}}return -1;};y.prototype._$q2=function(aH){return this._$db[aH];};y.prototype._$C2=function(aH){return this._$8b[aH];};y.prototype._$Bb=function(aH){return this._$Hr[aH];};y.prototype._$5s=function(aO,aK){var aJ=this._$Ws.length;var aN=aO;for(var aL=0;aL<aJ;++aL){var aI=this._$Ws[aL];if(aI==y._$V2){continue;}do{var aM=this._$8b[aI];if(aM._$yo()){aM._$GT()._$B2(this,aM,aN);aN+=aK;}var aH=this._$Er[aI];if(aH<=aI||aH==y._$W0){break;}aI=aH;}while(true);}};y.prototype.setDrawParam=function(aH){this.dp_webgl=aH;};y.prototype.getDrawParam=function(){return this.dp_webgl;};function ap(){}ap._$0T=function(aH){return ap._$0T(new _$5(aH));};ap._$0T=function(aJ){if(!aJ.exists()){throw new _$ls(aJ._$3b());}var aH=aJ.length();var aI=new Int8Array(aH);var aM=new _$Xs(new _$kb(aJ),8192);var aK;var aL=0;while((aK=aM.read(aI,aL,aH-aL))>0){aL+=aK;}return aI;};ap._$C=function(aJ){var aI=null;var aL=null;try{aI=(aJ instanceof Array)?aJ:new _$Xs(aJ,8192);aL=new _$js();var aM=1000;var aK;var aH=new Int8Array(aM);while((aK=aI.read(aH))>0){aL.write(aH,0,aK);}return aL._$TS();}finally{if(aJ!=null){aJ.close();}if(aL!=null){aL.flush();aL.close();}}};function ar(){if(j){return;}this._$12=null;this._$bb=null;this._$_L=null;this._$jo=null;this._$iL=null;this._$0L=null;this._$Br=null;this._$Dr=null;this._$Cb=null;this._$mr=null;this._$_L=az.STATE_FIRST;this._$Br=4000;this._$Dr=100;this._$Cb=50;this._$mr=150;this._$jo=true;this._$iL=\"PARAM_EYE_L_OPEN\";this._$0L=\"PARAM_EYE_R_OPEN\";}ar.prototype._$T2=function(){var aI=P.getUserTimeMSec();var aH=Math._$10();return(aI+aH*(2*this._$Br-1));};ar.prototype._$uo=function(aH){this._$Br=aH;};ar.prototype._$QS=function(aI,aH,aJ){this._$Dr=aI;this._$Cb=aH;this._$mr=aJ;};ar.prototype._$7T=function(aI){var aK=P.getUserTimeMSec();var aH;var aJ=0;switch(this._$_L){case STATE_CLOSING:aJ=(aK-this._$bb)/this._$Dr;if(aJ>=1){aJ=1;this._$_L=az.STATE_CLOSED;this._$bb=aK;}aH=1-aJ;break;case STATE_CLOSED:aJ=(aK-this._$bb)/this._$Cb;if(aJ>=1){this._$_L=az.STATE_OPENING;this._$bb=aK;}aH=0;break;case STATE_OPENING:aJ=(aK-this._$bb)/this._$mr;if(aJ>=1){aJ=1;this._$_L=az.STATE_INTERVAL;this._$12=this._$T2();}aH=aJ;break;case STATE_INTERVAL:if(this._$12<aK){this._$_L=az.STATE_CLOSING;this._$bb=aK;}aH=1;break;case STATE_FIRST:default:this._$_L=az.STATE_INTERVAL;this._$12=this._$T2();aH=1;break;}if(!this._$jo){aH=-aH;}aI.setParamFloat(this._$iL,aH);aI.setParamFloat(this._$0L,aH);};var az=function(){};az.STATE_FIRST=\"STATE_FIRST\";az.STATE_INTERVAL=\"STATE_INTERVAL\";az.STATE_CLOSING=\"STATE_CLOSING\";az.STATE_CLOSED=\"STATE_CLOSED\";az.STATE_OPENING=\"STATE_OPENING\";function x(){if(j){return;}ax.prototype.constructor.call(this);this._$sb=new Int32Array(x._$As);this._$U2=new Array();this.transform=null;this.gl=null;if(x._$NT==null){x._$NT=x._$9r(256);x._$vS=x._$9r(256);x._$no=x._$vb(256);}}x.prototype=new ax();x._$As=32;x._$Gr=false;x._$NT=null;x._$vS=null;x._$no=null;x._$9r=function(aH){var aI=new Float32Array(aH);return aI;};x._$vb=function(aH){var aI=new Int16Array(aH);return aI;};x._$cr=function(aI,aH){if(aI==null||aI._$yL()<aH.length){aI=x._$9r(aH.length*2);aI.put(aH);aI._$oT(0);}else{aI.clear();aI.put(aH);aI._$oT(0);}return aI;};x._$mb=function(aI,aH){if(aI==null||aI._$yL()<aH.length){aI=x._$vb(aH.length*2);aI.put(aH);aI._$oT(0);}else{aI.clear();aI.put(aH);aI._$oT(0);}return aI;};x._$Hs=function(){return x._$Gr;};x._$as=function(aH){x._$Gr=aH;};x.prototype.setGL=function(aH){this.gl=aH;};x.prototype.setTransform=function(aH){this.transform=aH;};x.prototype._$ZT=function(){};x.prototype._$Uo=function(aO,aH,aP,aI,aQ,aM,aK,aJ){if(aM<0.01){return;}var aL=this._$U2[aO];var aN=aM>0.9?Q.EXPAND_W:0;this.gl.drawElements(aL,aP,aI,aQ,aM,aN,this.transform,aJ);};x.prototype._$Rs=function(){throw new Error(\"_$Rs\");};x.prototype._$Ds=function(aH){throw new Error(\"_$Ds\");};x.prototype._$K2=function(){for(var aH=0;aH<this._$sb.length;aH++){var aI=this._$sb[aH];if(aI!=0){this.gl._$Sr(1,this._$sb,aH);this._$sb[aH]=0;}}};x.prototype.setTexture=function(aI,aH){if(this._$sb.length<aI+1){this._$nS(aI);}this._$sb[aI]=aH;};x.prototype.setTexture=function(aH,aI){if(this._$sb.length<aH+1){this._$nS(aH);}this._$U2[aH]=aI;};x.prototype._$nS=function(aH){var aK=Math.max(this._$sb.length*2,aH+1+10);var aI=new Int32Array(aK);P._$jT(this._$sb,0,aI,0,this._$sb.length);this._$sb=aI;var aJ=new Array();P._$jT(this._$U2,0,aJ,0,this._$U2.length);this._$U2=aJ;};function ab(){if(j){return;}c.prototype.constructor.call(this);this._$GS=null;this._$Y0=null;}ab.prototype=new c();ab._$Xo=new Float32Array(2);ab._$io=new Float32Array(2);ab._$0o=new Float32Array(2);ab._$Lo=new Float32Array(2);ab._$To=new Float32Array(2);ab._$Po=new Float32Array(2);ab._$gT=new Array();ab.prototype._$zP=function(){this._$GS=new g();this._$GS._$zP();this._$Y0=new Array();};ab.prototype.getType=function(){return c._$c2;};ab.prototype._$F0=function(aH){c.prototype._$F0.call(this,aH);this._$GS=aH._$nP();this._$Y0=aH._$nP();c.prototype.readV2_opacity.call(this,aH);};ab.prototype.init=function(aH){var aI=new al(this);aI._$Yr=new X();if(this._$32()){aI._$Wr=new X();}return aI;};ab.prototype._$Nr=function(bf,bx){if(!((this==bx._$GT()))){console.log(\"### assert!! ### \");}var bm=bx;if(!this._$GS._$Ur(bf)){return;}var bw=ab._$gT;bw[0]=false;var a2=this._$GS._$Q2(bf,bw);bx._$Ib(bw[0]);this.interpolateOpacity(bf,this._$GS,bx,bw);var a3=bf._$vs();var ba=bf._$Tr();this._$GS._$zr(a3,ba,a2);if(a2<=0){var bn=this._$Y0[a3[0]];bm._$Yr.init(bn);}else{if(a2==1){var bn=this._$Y0[a3[0]];var bl=this._$Y0[a3[1]];var a9=ba[0];bm._$Yr._$fL=bn._$fL+(bl._$fL-bn._$fL)*a9;bm._$Yr._$gL=bn._$gL+(bl._$gL-bn._$gL)*a9;bm._$Yr._$B0=bn._$B0+(bl._$B0-bn._$B0)*a9;bm._$Yr._$z0=bn._$z0+(bl._$z0-bn._$z0)*a9;bm._$Yr._$qT=bn._$qT+(bl._$qT-bn._$qT)*a9;}else{if(a2==2){var bn=this._$Y0[a3[0]];var bl=this._$Y0[a3[1]];var a1=this._$Y0[a3[2]];var a0=this._$Y0[a3[3]];var a9=ba[0];var a8=ba[1];var bC=bn._$fL+(bl._$fL-bn._$fL)*a9;var bB=a1._$fL+(a0._$fL-a1._$fL)*a9;bm._$Yr._$fL=bC+(bB-bC)*a8;bC=bn._$gL+(bl._$gL-bn._$gL)*a9;bB=a1._$gL+(a0._$gL-a1._$gL)*a9;bm._$Yr._$gL=bC+(bB-bC)*a8;bC=bn._$B0+(bl._$B0-bn._$B0)*a9;bB=a1._$B0+(a0._$B0-a1._$B0)*a9;bm._$Yr._$B0=bC+(bB-bC)*a8;bC=bn._$z0+(bl._$z0-bn._$z0)*a9;bB=a1._$z0+(a0._$z0-a1._$z0)*a9;bm._$Yr._$z0=bC+(bB-bC)*a8;bC=bn._$qT+(bl._$qT-bn._$qT)*a9;bB=a1._$qT+(a0._$qT-a1._$qT)*a9;bm._$Yr._$qT=bC+(bB-bC)*a8;}else{if(a2==3){var aP=this._$Y0[a3[0]];var aO=this._$Y0[a3[1]];var bu=this._$Y0[a3[2]];var bs=this._$Y0[a3[3]];var aK=this._$Y0[a3[4]];var aJ=this._$Y0[a3[5]];var bj=this._$Y0[a3[6]];var bi=this._$Y0[a3[7]];var a9=ba[0];var a8=ba[1];var a6=ba[2];var bC=aP._$fL+(aO._$fL-aP._$fL)*a9;var bB=bu._$fL+(bs._$fL-bu._$fL)*a9;var bz=aK._$fL+(aJ._$fL-aK._$fL)*a9;var by=bj._$fL+(bi._$fL-bj._$fL)*a9;bm._$Yr._$fL=(1-a6)*(bC+(bB-bC)*a8)+a6*(bz+(by-bz)*a8);bC=aP._$gL+(aO._$gL-aP._$gL)*a9;bB=bu._$gL+(bs._$gL-bu._$gL)*a9;bz=aK._$gL+(aJ._$gL-aK._$gL)*a9;by=bj._$gL+(bi._$gL-bj._$gL)*a9;bm._$Yr._$gL=(1-a6)*(bC+(bB-bC)*a8)+a6*(bz+(by-bz)*a8);bC=aP._$B0+(aO._$B0-aP._$B0)*a9;bB=bu._$B0+(bs._$B0-bu._$B0)*a9;bz=aK._$B0+(aJ._$B0-aK._$B0)*a9;by=bj._$B0+(bi._$B0-bj._$B0)*a9;bm._$Yr._$B0=(1-a6)*(bC+(bB-bC)*a8)+a6*(bz+(by-bz)*a8);bC=aP._$z0+(aO._$z0-aP._$z0)*a9;bB=bu._$z0+(bs._$z0-bu._$z0)*a9;bz=aK._$z0+(aJ._$z0-aK._$z0)*a9;by=bj._$z0+(bi._$z0-bj._$z0)*a9;bm._$Yr._$z0=(1-a6)*(bC+(bB-bC)*a8)+a6*(bz+(by-bz)*a8);bC=aP._$qT+(aO._$qT-aP._$qT)*a9;bB=bu._$qT+(bs._$qT-bu._$qT)*a9;bz=aK._$qT+(aJ._$qT-aK._$qT)*a9;by=bj._$qT+(bi._$qT-bj._$qT)*a9;bm._$Yr._$qT=(1-a6)*(bC+(bB-bC)*a8)+a6*(bz+(by-bz)*a8);}else{if(a2==4){var aT=this._$Y0[a3[0]];var aS=this._$Y0[a3[1]];var bE=this._$Y0[a3[2]];var bD=this._$Y0[a3[3]];var aN=this._$Y0[a3[4]];var aM=this._$Y0[a3[5]];var bp=this._$Y0[a3[6]];var bo=this._$Y0[a3[7]];var bh=this._$Y0[a3[8]];var bg=this._$Y0[a3[9]];var aY=this._$Y0[a3[10]];var aW=this._$Y0[a3[11]];var a7=this._$Y0[a3[12]];var a5=this._$Y0[a3[13]];var aR=this._$Y0[a3[14]];var aQ=this._$Y0[a3[15]];var a9=ba[0];var a8=ba[1];var a6=ba[2];var a4=ba[3];var bC=aT._$fL+(aS._$fL-aT._$fL)*a9;var bB=bE._$fL+(bD._$fL-bE._$fL)*a9;var bz=aN._$fL+(aM._$fL-aN._$fL)*a9;var by=bp._$fL+(bo._$fL-bp._$fL)*a9;var bv=bh._$fL+(bg._$fL-bh._$fL)*a9;var bt=aY._$fL+(aW._$fL-aY._$fL)*a9;var br=a7._$fL+(a5._$fL-a7._$fL)*a9;var bq=aR._$fL+(aQ._$fL-aR._$fL)*a9;bm._$Yr._$fL=(1-a4)*((1-a6)*(bC+(bB-bC)*a8)+a6*(bz+(by-bz)*a8))+a4*((1-a6)*(bv+(bt-bv)*a8)+a6*(br+(bq-br)*a8));bC=aT._$gL+(aS._$gL-aT._$gL)*a9;bB=bE._$gL+(bD._$gL-bE._$gL)*a9;bz=aN._$gL+(aM._$gL-aN._$gL)*a9;by=bp._$gL+(bo._$gL-bp._$gL)*a9;bv=bh._$gL+(bg._$gL-bh._$gL)*a9;bt=aY._$gL+(aW._$gL-aY._$gL)*a9;br=a7._$gL+(a5._$gL-a7._$gL)*a9;bq=aR._$gL+(aQ._$gL-aR._$gL)*a9;bm._$Yr._$gL=(1-a4)*((1-a6)*(bC+(bB-bC)*a8)+a6*(bz+(by-bz)*a8))+a4*((1-a6)*(bv+(bt-bv)*a8)+a6*(br+(bq-br)*a8));bC=aT._$B0+(aS._$B0-aT._$B0)*a9;bB=bE._$B0+(bD._$B0-bE._$B0)*a9;bz=aN._$B0+(aM._$B0-aN._$B0)*a9;by=bp._$B0+(bo._$B0-bp._$B0)*a9;bv=bh._$B0+(bg._$B0-bh._$B0)*a9;bt=aY._$B0+(aW._$B0-aY._$B0)*a9;br=a7._$B0+(a5._$B0-a7._$B0)*a9;bq=aR._$B0+(aQ._$B0-aR._$B0)*a9;bm._$Yr._$B0=(1-a4)*((1-a6)*(bC+(bB-bC)*a8)+a6*(bz+(by-bz)*a8))+a4*((1-a6)*(bv+(bt-bv)*a8)+a6*(br+(bq-br)*a8));bC=aT._$z0+(aS._$z0-aT._$z0)*a9;bB=bE._$z0+(bD._$z0-bE._$z0)*a9;bz=aN._$z0+(aM._$z0-aN._$z0)*a9;by=bp._$z0+(bo._$z0-bp._$z0)*a9;bv=bh._$z0+(bg._$z0-bh._$z0)*a9;bt=aY._$z0+(aW._$z0-aY._$z0)*a9;br=a7._$z0+(a5._$z0-a7._$z0)*a9;bq=aR._$z0+(aQ._$z0-aR._$z0)*a9;bm._$Yr._$z0=(1-a4)*((1-a6)*(bC+(bB-bC)*a8)+a6*(bz+(by-bz)*a8))+a4*((1-a6)*(bv+(bt-bv)*a8)+a6*(br+(bq-br)*a8));bC=aT._$qT+(aS._$qT-aT._$qT)*a9;bB=bE._$qT+(bD._$qT-bE._$qT)*a9;bz=aN._$qT+(aM._$qT-aN._$qT)*a9;by=bp._$qT+(bo._$qT-bp._$qT)*a9;bv=bh._$qT+(bg._$qT-bh._$qT)*a9;bt=aY._$qT+(aW._$qT-aY._$qT)*a9;br=a7._$qT+(a5._$qT-a7._$qT)*a9;bq=aR._$qT+(aQ._$qT-aR._$qT)*a9;bm._$Yr._$qT=(1-a4)*((1-a6)*(bC+(bB-bC)*a8)+a6*(bz+(by-bz)*a8))+a4*((1-a6)*(bv+(bt-bv)*a8)+a6*(br+(bq-br)*a8));}else{var aV=Math.pow(2,a2)|0;var aZ=new Float32Array(aV);for(var bk=0;bk<aV;bk++){var aI=bk;var aH=1;for(var aL=0;aL<a2;aL++){aH*=(aI%2==0)?(1-ba[aL]):ba[aL];aI/=2;}aZ[bk]=aH;}var bA=new Array();for(var aU=0;aU<aV;aU++){bA[aU]=this._$Y0[a3[aU]];}var be=0,bc=0,bd=0,bb=0,aX=0;for(var aU=0;aU<aV;aU++){be+=aZ[aU]*bA[aU]._$fL;bc+=aZ[aU]*bA[aU]._$gL;bd+=aZ[aU]*bA[aU]._$B0;bb+=aZ[aU]*bA[aU]._$z0;aX+=aZ[aU]*bA[aU]._$qT;}bm._$Yr._$fL=be;bm._$Yr._$gL=bc;bm._$Yr._$B0=bd;bm._$Yr._$z0=bb;bm._$Yr._$qT=aX;}}}}}var bn=this._$Y0[a3[0]];bm._$Yr.reflectX=bn.reflectX;bm._$Yr.reflectY=bn.reflectY;};ab.prototype._$2b=function(aM,aH){if(!((this==aH._$GT()))){console.log(\"### assert!! ### \");}var aR=aH;aR._$hS(true);if(!this._$32()){aR.setTotalScale_notForClient(aR._$Yr._$B0);aR.setTotalOpacity(aR.getInterpolatedOpacity());}else{var aT=this.getTargetBaseDataID();if(aR._$8r==c._$ur){aR._$8r=aM.getBaseDataIndex(aT);}if(aR._$8r<0){if(Q._$so){q._$li(\"_$L _$0P _$G :: %s\",aT);}aR._$hS(false);}else{var aI=aM.getBaseData(aR._$8r);if(aI!=null){var aL=aM._$q2(aR._$8r);var aS=ab._$Xo;aS[0]=aR._$Yr._$fL;aS[1]=aR._$Yr._$gL;var aJ=ab._$io;aJ[0]=0;aJ[1]=-0.1;var aO=aL._$GT().getType();if(aO==c._$c2){aJ[1]=-10;}else{aJ[1]=-0.1;}var aQ=ab._$0o;this._$Jr(aM,aI,aL,aS,aJ,aQ);var aP=aC._$92(aJ,aQ);aI._$nb(aM,aL,aS,aS,1,0,2);aR._$Wr._$fL=aS[0];aR._$Wr._$gL=aS[1];aR._$Wr._$B0=aR._$Yr._$B0;aR._$Wr._$z0=aR._$Yr._$z0;aR._$Wr._$qT=aR._$Yr._$qT-aP*aC._$NS;var aK=aL.getTotalScale();aR.setTotalScale_notForClient(aK*aR._$Wr._$B0);var aN=aL.getTotalOpacity();aR.setTotalOpacity(aN*aR.getInterpolatedOpacity());aR._$Wr.reflectX=aR._$Yr.reflectX;aR._$Wr.reflectY=aR._$Yr.reflectY;aR._$hS(aL._$yo());}else{aR._$hS(false);}}}};ab.prototype._$nb=function(aJ,aR,aL,a4,aT,aO,a2){if(!((this==aR._$GT()))){console.log(\"### assert!! ### \");}var aH=aR;var aU=aH._$Wr!=null?aH._$Wr:aH._$Yr;var a0=Math.sin(aC._$bS*aU._$qT);var aP=Math.cos(aC._$bS*aU._$qT);var a3=aH.getTotalScale();var aW=aU.reflectX?-1:1;var aV=aU.reflectY?-1:1;var aS=aP*a3*aW;var aQ=-a0*a3*aV;var a1=a0*a3*aW;var aZ=aP*a3*aV;var aY=aU._$fL;var aX=aU._$gL;var aN,aM;var aI=aT*a2;for(var aK=aO;aK<aI;aK+=a2){aN=aL[aK];aM=aL[aK+1];a4[aK]=aS*aN+aQ*aM+aY;a4[aK+1]=a1*aN+aZ*aM+aX;}};ab.prototype._$Jr=function(aP,aK,aI,aR,aQ,aH){if(!((aK==aI._$GT()))){console.log(\"### assert!! ### \");}var aO=ab._$Lo;ab._$Lo[0]=aR[0];ab._$Lo[1]=aR[1];aK._$nb(aP,aI,aO,aO,1,0,2);var aL=ab._$To;var aS=ab._$Po;var aN=10;var aJ=1;for(var aM=0;aM<aN;aM++){aS[0]=aR[0]+aJ*aQ[0];aS[1]=aR[1]+aJ*aQ[1];aK._$nb(aP,aI,aS,aL,1,0,2);aL[0]-=aO[0];aL[1]-=aO[1];if(aL[0]!=0||aL[1]!=0){aH[0]=aL[0];aH[1]=aL[1];return;}aS[0]=aR[0]-aJ*aQ[0];aS[1]=aR[1]-aJ*aQ[1];aK._$nb(aP,aI,aS,aL,1,0,2);aL[0]-=aO[0];aL[1]-=aO[1];if(aL[0]!=0||aL[1]!=0){aL[0]=-aL[0];aL[0]=-aL[0];aH[0]=aL[0];aH[1]=aL[1];return;}aJ*=0.1;}if(Q._$so){console.log(\"_$L0 to transform _$SP\\n\");}};function al(aH){B.prototype.constructor.call(this,aH);this._$8r=c._$ur;this._$Yr=null;this._$Wr=null;}al.prototype=new B();function a(){if(j){return;}ae.prototype.constructor.call(this);this._$gP=null;this._$dr=null;this._$GS=null;this._$qb=null;this._$Lb=null;this._$mS=null;}a.prototype=new ae();a._$ur=-2;a._$ES=500;a._$wb=2;a._$8S=3;a._$os=4;a._$52=a._$ES;a._$R2=a._$ES;a._$Sb=function(aJ){for(var aI=aJ.length-1;aI>=0;--aI){var aH=aJ[aI];if(aH<a._$52){a._$52=aH;}else{if(aH>a._$R2){a._$R2=aH;}}}};a._$or=function(){return a._$52;};a._$Pr=function(){return a._$R2;};a.prototype._$F0=function(aH){this._$gP=aH._$nP();this._$dr=aH._$nP();this._$GS=aH._$nP();this._$qb=aH._$6L();this._$Lb=aH._$cS();this._$mS=aH._$Tb();if(aH.getFormatVersion()>=ay._$T7){this.clipID=aH._$nP();this.clipIDList=this.convertClipIDForV2_11(this.clipID);}else{this.clipIDList=null;}a._$Sb(this._$Lb);};a.prototype.getClipIDList=function(){return this.clipIDList;};a.prototype._$Nr=function(aI,aH){aH._$IS[0]=false;aH._$Us=aG._$Z2(aI,this._$GS,aH._$IS,this._$Lb);if(Q._$Zs){}else{if(aH._$IS[0]){return;}}aH._$7s=aG._$br(aI,this._$GS,aH._$IS,this._$mS);};a.prototype._$2b=function(aH){};a.prototype.getDrawDataID=function(){return this._$gP;};a.prototype._$j2=function(aH){this._$gP=aH;};a.prototype.getOpacity=function(aH,aI){return aI._$7s;};a.prototype._$zS=function(aH,aI){return aI._$Us;};a.prototype.getTargetBaseDataID=function(){return this._$dr;};a.prototype._$gs=function(aH){this._$dr=aH;};a.prototype._$32=function(){return(this._$dr!=null&&(this._$dr!=n._$2o()));};a.prototype.getType=function(){};function aq(){if(j){return;}this._$NL=null;this._$3S=null;this._$aS=null;aq._$42++;}aq._$42=0;aq.prototype._$1b=function(){return this._$3S;};aq.prototype.getDrawDataList=function(){return this._$aS;};aq.prototype._$F0=function(aH){this._$NL=aH._$nP();this._$aS=aH._$nP();this._$3S=aH._$nP();};aq.prototype._$kr=function(aH){aH._$Zo(this._$3S);aH._$xo(this._$aS);this._$3S=null;this._$aS=null;};function v(){if(j){return;}aa.prototype.constructor.call(this);this._$zo=new x();}v.prototype=new aa();v.loadModel=function(aI){var aH=new v();aa._$62(aH,aI);return aH;};v.loadModel=function(aI){var aH=new v();aa._$62(aH,aI);return aH;};v._$to=function(){var aH=new v();return aH;};v._$er=function(aM){var aJ=new _$5(\"../_$_r/_$t0/_$Ri/_$_P._$d\");if(aJ.exists()==false){throw new _$ls(\"_$t0 _$_ _$6 _$Ui :: \"+aJ._$PL());}var aH=[\"../_$_r/_$t0/_$Ri/_$_P.512/_$CP._$1\",\"../_$_r/_$t0/_$Ri/_$_P.512/_$vP._$1\",\"../_$_r/_$t0/_$Ri/_$_P.512/_$EP._$1\",\"../_$_r/_$t0/_$Ri/_$_P.512/_$pP._$1\"];var aK=v.loadModel(aJ._$3b());for(var aI=0;aI<aH.length;aI++){var aL=new _$5(aH[aI]);if(aL.exists()==false){throw new _$ls(\"_$t0 _$_ _$6 _$Ui :: \"+aL._$PL());}aK.setTexture(aI,_$nL._$_o(aM,aL._$3b()));}return aK;};v.prototype.setGL=function(aH){this._$zo.setGL(aH);};v.prototype.setTransform=function(aH){this._$zo.setTransform(aH);};v.prototype.draw=function(){this._$5S.draw(this._$zo);};v.prototype._$K2=function(){this._$zo._$K2();};v.prototype.setTexture=function(aI,aH){if(this._$zo==null){q._$li(\"_$Yi for QT _$ki / _$XS() is _$6 _$ui!!\");}this._$zo.setTexture(aI,aH);};v.prototype.setTexture=function(aI,aH){if(this._$zo==null){q._$li(\"_$Yi for QT _$ki / _$XS() is _$6 _$ui!!\");}this._$zo.setTexture(aI,aH);};v.prototype._$Rs=function(){return this._$zo._$Rs();};v.prototype._$Ds=function(aH){this._$zo._$Ds(aH);};v.prototype.getDrawParam=function(){return this._$zo;};function ao(){if(j){return;}ah.prototype.constructor.call(this);this.motions=new Array();this._$o2=null;this._$7r=ao._$Co++;this._$D0=30;this._$yT=0;this._$E=false;this.loopFadeIn=true;this._$rr=-1;this._$eP=0;}ao.prototype=new ah();ao._$cs=\"VISIBLE:\";ao._$ar=\"LAYOUT:\";ao.MTN_PREFIX_FADEIN=\"FADEIN:\";ao.MTN_PREFIX_FADEOUT=\"FADEOUT:\";ao._$Co=0;ao._$1T=1;ao.loadMotion=function(aJ){var aI=ap._$C(aJ);var aH=ao.loadMotion(aI);return aH;};function p(aI,aH){return String.fromCharCode(aI.getUint8(aH));}ao.loadMotion=function(aT){if(aT instanceof ArrayBuffer){aT=new DataView(aT);}var aN=new ao();var aI=[0];var aQ=aT.byteLength;aN._$yT=0;for(var aJ=0;aJ<aQ;++aJ){var aS=p(aT,aJ);var aL=aS.charCodeAt(0);if(aS==\"\\n\"||aS==\"\\r\"){continue;}if(aS==\"#\"){for(;aJ<aQ;++aJ){if(p(aT,aJ)==\"\\n\"||p(aT,aJ)==\"\\r\"){break;}}continue;}if(aS==\"$\"){var aV=aJ;var aK=-1;for(;aJ<aQ;++aJ){aS=p(aT,aJ);if(aS==\"\\r\"||aS==\"\\n\"){break;}if(aS==\"=\"){aK=aJ;break;}}var aP=false;if(aK>=0){if(aK==aV+4&&p(aT,aV+1)==\"f\"&&p(aT,aV+2)==\"p\"&&p(aT,aV+3)==\"s\"){aP=true;}for(aJ=aK+1;aJ<aQ;++aJ){aS=p(aT,aJ);if(aS==\"\\r\"||aS==\"\\n\"){break;}if(aS==\",\"||aS==\" \"||aS==\"\\t\"){continue;}var aM=G._$LS(aT,aQ,aJ,aI);if(aI[0]>0){if(aP&&5<aM&&aM<121){aN._$D0=aM;}}aJ=aI[0];}}for(;aJ<aQ;++aJ){if(p(aT,aJ)==\"\\n\"||p(aT,aJ)==\"\\r\"){break;}}continue;}if((97<=aL&&aL<=122)||(65<=aL&&aL<=90)||aS==\"_\"){var aV=aJ;var aK=-1;for(;aJ<aQ;++aJ){aS=p(aT,aJ);if(aS==\"\\r\"||aS==\"\\n\"){break;}if(aS==\"=\"){aK=aJ;break;}}if(aK>=0){var aO=new t();if(G.startsWith(aT,aV,ao._$cs)){aO._$RP=t._$hs;aO._$4P=G.createString(aT,aV,aK-aV);}else{if(G.startsWith(aT,aV,ao._$ar)){aO._$4P=G.createString(aT,aV+7,aK-aV-7);if(G.startsWith(aT,aV+7,\"ANCHOR_X\")){aO._$RP=t._$xs;}else{if(G.startsWith(aT,aV+7,\"ANCHOR_Y\")){aO._$RP=t._$us;}else{if(G.startsWith(aT,aV+7,\"SCALE_X\")){aO._$RP=t._$qs;}else{if(G.startsWith(aT,aV+7,\"SCALE_Y\")){aO._$RP=t._$Ys;}else{if(G.startsWith(aT,aV+7,\"X\")){aO._$RP=t._$ws;}else{if(G.startsWith(aT,aV+7,\"Y\")){aO._$RP=t._$Ns;}}}}}}}else{aO._$RP=t._$Fr;aO._$4P=G.createString(aT,aV,aK-aV);}}aN.motions.push(aO);var aU=0;var aR=[];for(aJ=aK+1;aJ<aQ;++aJ){aS=p(aT,aJ);if(aS==\"\\r\"||aS==\"\\n\"){break;}if(aS==\",\"||aS==\" \"||aS==\"\\t\"){continue;}var aM=G._$LS(aT,aQ,aJ,aI);if(aI[0]>0){aR.push(aM);aU++;var aH=aI[0];if(aH<aJ){console.log(\"_$n0 _$hi . @Live2DMotion loadMotion()\\n\");break;}aJ=aH-1;}}aO._$I0=new Float32Array(aR);if(aU>aN._$yT){aN._$yT=aU;}}}}aN._$rr=((1000*aN._$yT)/aN._$D0)|0;return aN;};ao.prototype.getDurationMSec=function(){return this._$E?-1:this._$rr;};ao.prototype.getLoopDurationMSec=function(){return this._$rr;};ao.prototype.dump=function(){for(var aJ=0;aJ<this.motions.length;aJ++){var aH=this.motions[aJ];console.log(\"_$wL[%s] [%d]. \",aH._$4P,aH._$I0.length);for(var aI=0;aI<aH._$I0.length&&aI<10;aI++){console.log(\"%5.2f ,\",aH._$I0[aI]);}console.log(\"\\n\");}};ao.prototype.updateParamExe=function(aJ,aN,aQ,a3){var aO=aN-a3._$z2;var a0=aO*this._$D0/1000;var aK=a0|0;var aR=a0-aK;for(var aZ=0;aZ<this.motions.length;aZ++){var aV=this.motions[aZ];var aL=aV._$I0.length;var aT=aV._$4P;if(aV._$RP==t._$hs){var aX=aV._$I0[(aK>=aL?aL-1:aK)];aJ.setParamFloat(aT,aX);}else{if(t._$ws<=aV._$RP&&aV._$RP<=t._$Ys){}else{var aH=aJ.getParamIndex(aT);var a4=aJ.getModelContext();var aY=a4.getParamMax(aH);var aW=a4.getParamMin(aH);var aM=0.4;var aS=aM*(aY-aW);var aU=a4.getParamFloat(aH);var a2=aV._$I0[(aK>=aL?aL-1:aK)];var a1=aV._$I0[(aK+1>=aL?aL-1:aK+1)];var aI;if((a2<a1&&a1-a2>aS)||(a2>a1&&a2-a1>aS)){aI=a2;}else{aI=a2+(a1-a2)*aR;}var aP=aU+(aI-aU)*aQ;aJ.setParamFloat(aT,aP);}}}if(aK>=this._$yT){if(this._$E){a3._$z2=aN;if(this.loopFadeIn){a3._$bs=aN;}}else{a3._$9L=true;}}this._$eP=aQ;};ao.prototype._$r0=function(){return this._$E;};ao.prototype._$aL=function(aH){this._$E=aH;};ao.prototype._$S0=function(){return this._$D0;};ao.prototype._$U0=function(aH){this._$D0=aH;};ao.prototype.isLoopFadeIn=function(){return this.loopFadeIn;};ao.prototype.setLoopFadeIn=function(aH){this.loopFadeIn=aH;};function aE(){this._$P=new Float32Array(100);this.size=0;}aE.prototype.clear=function(){this.size=0;};aE.prototype.add=function(aI){if(this._$P.length<=this.size){var aH=new Float32Array(this.size*2);P._$jT(this._$P,0,aH,0,this.size);this._$P=aH;}this._$P[this.size++]=aI;};aE.prototype._$BL=function(){var aH=new Float32Array(this.size);P._$jT(this._$P,0,aH,0,this.size);return aH;};function t(){this._$4P=null;this._$I0=null;this._$RP=null;}t._$Fr=0;t._$hs=1;t._$ws=100;t._$Ns=101;t._$xs=102;t._$us=103;t._$qs=104;t._$Ys=105;function E(){if(j){return;}c.prototype.constructor.call(this);this._$o=0;this._$A=0;this._$GS=null;this._$Eo=null;}E.prototype=new c();E._$gT=new Array();E.prototype._$zP=function(){this._$GS=new g();this._$GS._$zP();};E.prototype._$F0=function(aH){c.prototype._$F0.call(this,aH);this._$A=aH._$6L();this._$o=aH._$6L();this._$GS=aH._$nP();this._$Eo=aH._$nP();c.prototype.readV2_opacity.call(this,aH);};E.prototype.init=function(aH){var aI=new H(this);var aJ=(this._$o+1)*(this._$A+1);if(aI._$Cr!=null){aI._$Cr=null;}aI._$Cr=new Float32Array(aJ*2);if(aI._$hr!=null){aI._$hr=null;}if(this._$32()){aI._$hr=new Float32Array(aJ*2);}else{aI._$hr=null;}return aI;};E.prototype._$Nr=function(aJ,aI){var aK=aI;if(!this._$GS._$Ur(aJ)){return;}var aL=this._$VT();var aH=E._$gT;aH[0]=false;aG._$Vr(aJ,this._$GS,aH,aL,this._$Eo,aK._$Cr,0,2);aI._$Ib(aH[0]);this.interpolateOpacity(aJ,this._$GS,aI,aH);};E.prototype._$2b=function(aK,aJ){var aL=aJ;aL._$hS(true);if(!this._$32()){aL.setTotalOpacity(aL.getInterpolatedOpacity());}else{var aH=this.getTargetBaseDataID();if(aL._$8r==c._$ur){aL._$8r=aK.getBaseDataIndex(aH);}if(aL._$8r<0){if(Q._$so){q._$li(\"_$L _$0P _$G :: %s\",aH);}aL._$hS(false);}else{var aN=aK.getBaseData(aL._$8r);var aI=aK._$q2(aL._$8r);if(aN!=null&&aI._$yo()){var aM=aI.getTotalScale();aL.setTotalScale_notForClient(aM);var aO=aI.getTotalOpacity();aL.setTotalOpacity(aO*aL.getInterpolatedOpacity());aN._$nb(aK,aI,aL._$Cr,aL._$hr,this._$VT(),0,2);aL._$hS(true);}else{aL._$hS(false);}}}};E.prototype._$nb=function(aL,aI,aH,aM,aO,aK,aJ){if(true){var aN=aI;var aP=(aN._$hr!=null)?aN._$hr:aN._$Cr;E.transformPoints_sdk2(aH,aM,aO,aK,aJ,aP,this._$o,this._$A);}else{this.transformPoints_sdk1(aL,aI,aH,aM,aO,aK,aJ);}};E.transformPoints_sdk2=function(a0,bc,a5,aP,aI,aR,aQ,aU){var aW=a5*aI;var aV;var bn,bm;var aT=0;var aS=0;var bl=0;var bk=0;var bf=0;var be=0;var aZ=false;for(var ba=aP;ba<aW;ba+=aI){var bd,a7,a4,aX;a4=a0[ba];aX=a0[ba+1];bd=a4*aQ;a7=aX*aU;if(bd<0||a7<0||aQ<=bd||aU<=a7){var a1=aQ+1;if(!aZ){aZ=true;aT=0.25*(aR[((0)+(0)*a1)*2]+aR[((aQ)+(0)*a1)*2]+aR[((0)+(aU)*a1)*2]+aR[((aQ)+(aU)*a1)*2]);aS=0.25*(aR[((0)+(0)*a1)*2+1]+aR[((aQ)+(0)*a1)*2+1]+aR[((0)+(aU)*a1)*2+1]+aR[((aQ)+(aU)*a1)*2+1]);var aM=aR[((aQ)+(aU)*a1)*2]-aR[((0)+(0)*a1)*2];var aL=aR[((aQ)+(aU)*a1)*2+1]-aR[((0)+(0)*a1)*2+1];var bh=aR[((aQ)+(0)*a1)*2]-aR[((0)+(aU)*a1)*2];var bg=aR[((aQ)+(0)*a1)*2+1]-aR[((0)+(aU)*a1)*2+1];bl=(aM+bh)*0.5;bk=(aL+bg)*0.5;bf=(aM-bh)*0.5;be=(aL-bg)*0.5;if(bl==0&&bk==0){}if(bf==0&&be==0){}aT-=0.5*(bl+bf);aS-=0.5*(bk+be);}if((-2<a4&&a4<3)&&(-2<aX&&aX<3)){if(a4<=0){if(aX<=0){var a3=aR[((0)+(0)*a1)*2];var a2=aR[((0)+(0)*a1)*2+1];var a8=aT-2*bl;var a6=aS-2*bk;var aK=aT-2*bf;var aJ=aS-2*be;var aO=aT-2*bl-2*bf;var aN=aS-2*bk-2*be;var bj=0.5*(a4-(-2));var bi=0.5*(aX-(-2));if(bj+bi<=1){bc[ba]=aO+(aK-aO)*bj+(a8-aO)*bi;bc[ba+1]=aN+(aJ-aN)*bj+(a6-aN)*bi;}else{bc[ba]=a3+(a8-a3)*(1-bj)+(aK-a3)*(1-bi);bc[ba+1]=a2+(a6-a2)*(1-bj)+(aJ-a2)*(1-bi);}}else{if(aX>=1){var aK=aR[((0)+(aU)*a1)*2];var aJ=aR[((0)+(aU)*a1)*2+1];var aO=aT-2*bl+1*bf;var aN=aS-2*bk+1*be;var a3=aT+3*bf;var a2=aS+3*be;var a8=aT-2*bl+3*bf;var a6=aS-2*bk+3*be;var bj=0.5*(a4-(-2));var bi=0.5*(aX-(1));if(bj+bi<=1){bc[ba]=aO+(aK-aO)*bj+(a8-aO)*bi;bc[ba+1]=aN+(aJ-aN)*bj+(a6-aN)*bi;}else{bc[ba]=a3+(a8-a3)*(1-bj)+(aK-a3)*(1-bi);bc[ba+1]=a2+(a6-a2)*(1-bj)+(aJ-a2)*(1-bi);}}else{var aH=(a7|0);if(aH==aU){aH=aU-1;}var bj=0.5*(a4-(-2));var bi=a7-aH;var bb=aH/aU;var a9=(aH+1)/aU;var aK=aR[((0)+(aH)*a1)*2];var aJ=aR[((0)+(aH)*a1)*2+1];var a3=aR[((0)+(aH+1)*a1)*2];var a2=aR[((0)+(aH+1)*a1)*2+1];var aO=aT-2*bl+bb*bf;var aN=aS-2*bk+bb*be;var a8=aT-2*bl+a9*bf;var a6=aS-2*bk+a9*be;if(bj+bi<=1){bc[ba]=aO+(aK-aO)*bj+(a8-aO)*bi;bc[ba+1]=aN+(aJ-aN)*bj+(a6-aN)*bi;}else{bc[ba]=a3+(a8-a3)*(1-bj)+(aK-a3)*(1-bi);bc[ba+1]=a2+(a6-a2)*(1-bj)+(aJ-a2)*(1-bi);}}}}else{if(1<=a4){if(aX<=0){var a8=aR[((aQ)+(0)*a1)*2];var a6=aR[((aQ)+(0)*a1)*2+1];var a3=aT+3*bl;var a2=aS+3*bk;var aO=aT+1*bl-2*bf;var aN=aS+1*bk-2*be;var aK=aT+3*bl-2*bf;var aJ=aS+3*bk-2*be;var bj=0.5*(a4-(1));var bi=0.5*(aX-(-2));if(bj+bi<=1){bc[ba]=aO+(aK-aO)*bj+(a8-aO)*bi;bc[ba+1]=aN+(aJ-aN)*bj+(a6-aN)*bi;}else{bc[ba]=a3+(a8-a3)*(1-bj)+(aK-a3)*(1-bi);bc[ba+1]=a2+(a6-a2)*(1-bj)+(aJ-a2)*(1-bi);}}else{if(aX>=1){var aO=aR[((aQ)+(aU)*a1)*2];var aN=aR[((aQ)+(aU)*a1)*2+1];var aK=aT+3*bl+1*bf;var aJ=aS+3*bk+1*be;var a8=aT+1*bl+3*bf;var a6=aS+1*bk+3*be;var a3=aT+3*bl+3*bf;var a2=aS+3*bk+3*be;var bj=0.5*(a4-(1));var bi=0.5*(aX-(1));if(bj+bi<=1){bc[ba]=aO+(aK-aO)*bj+(a8-aO)*bi;bc[ba+1]=aN+(aJ-aN)*bj+(a6-aN)*bi;}else{bc[ba]=a3+(a8-a3)*(1-bj)+(aK-a3)*(1-bi);bc[ba+1]=a2+(a6-a2)*(1-bj)+(aJ-a2)*(1-bi);}}else{var aH=(a7|0);if(aH==aU){aH=aU-1;}var bj=0.5*(a4-(1));var bi=a7-aH;var bb=aH/aU;var a9=(aH+1)/aU;var aO=aR[((aQ)+(aH)*a1)*2];var aN=aR[((aQ)+(aH)*a1)*2+1];var a8=aR[((aQ)+(aH+1)*a1)*2];var a6=aR[((aQ)+(aH+1)*a1)*2+1];var aK=aT+3*bl+bb*bf;var aJ=aS+3*bk+bb*be;var a3=aT+3*bl+a9*bf;var a2=aS+3*bk+a9*be;if(bj+bi<=1){bc[ba]=aO+(aK-aO)*bj+(a8-aO)*bi;bc[ba+1]=aN+(aJ-aN)*bj+(a6-aN)*bi;}else{bc[ba]=a3+(a8-a3)*(1-bj)+(aK-a3)*(1-bi);bc[ba+1]=a2+(a6-a2)*(1-bj)+(aJ-a2)*(1-bi);}}}}else{if(aX<=0){var aY=(bd|0);if(aY==aQ){aY=aQ-1;}var bj=bd-aY;var bi=0.5*(aX-(-2));var bp=aY/aQ;var bo=(aY+1)/aQ;var a8=aR[((aY)+(0)*a1)*2];var a6=aR[((aY)+(0)*a1)*2+1];var a3=aR[((aY+1)+(0)*a1)*2];var a2=aR[((aY+1)+(0)*a1)*2+1];var aO=aT+bp*bl-2*bf;var aN=aS+bp*bk-2*be;var aK=aT+bo*bl-2*bf;var aJ=aS+bo*bk-2*be;if(bj+bi<=1){bc[ba]=aO+(aK-aO)*bj+(a8-aO)*bi;bc[ba+1]=aN+(aJ-aN)*bj+(a6-aN)*bi;}else{bc[ba]=a3+(a8-a3)*(1-bj)+(aK-a3)*(1-bi);bc[ba+1]=a2+(a6-a2)*(1-bj)+(aJ-a2)*(1-bi);}}else{if(aX>=1){var aY=(bd|0);if(aY==aQ){aY=aQ-1;}var bj=bd-aY;var bi=0.5*(aX-(1));var bp=aY/aQ;var bo=(aY+1)/aQ;var aO=aR[((aY)+(aU)*a1)*2];var aN=aR[((aY)+(aU)*a1)*2+1];var aK=aR[((aY+1)+(aU)*a1)*2];var aJ=aR[((aY+1)+(aU)*a1)*2+1];var a8=aT+bp*bl+3*bf;var a6=aS+bp*bk+3*be;var a3=aT+bo*bl+3*bf;var a2=aS+bo*bk+3*be;if(bj+bi<=1){bc[ba]=aO+(aK-aO)*bj+(a8-aO)*bi;bc[ba+1]=aN+(aJ-aN)*bj+(a6-aN)*bi;}else{bc[ba]=a3+(a8-a3)*(1-bj)+(aK-a3)*(1-bi);bc[ba+1]=a2+(a6-a2)*(1-bj)+(aJ-a2)*(1-bi);}}else{System.err.printf(\"_$li calc : %.4f , %.4f\t\t\t\t\t@@BDBoxGrid\\n\",a4,aX);}}}}}else{bc[ba]=aT+a4*bl+aX*bf;bc[ba+1]=aS+a4*bk+aX*be;}}else{bn=bd-(bd|0);bm=a7-(a7|0);aV=2*((bd|0)+((a7|0))*(aQ+1));if(bn+bm<1){bc[ba]=aR[aV]*(1-bn-bm)+aR[aV+2]*bn+aR[aV+2*(aQ+1)]*bm;bc[ba+1]=aR[aV+1]*(1-bn-bm)+aR[aV+3]*bn+aR[aV+2*(aQ+1)+1]*bm;}else{bc[ba]=aR[aV+2*(aQ+1)+2]*(bn-1+bm)+aR[aV+2*(aQ+1)]*(1-bn)+aR[aV+2]*(1-bm);bc[ba+1]=aR[aV+2*(aQ+1)+3]*(bn-1+bm)+aR[aV+2*(aQ+1)+1]*(1-bn)+aR[aV+3]*(1-bm);}}}};E.prototype.transformPoints_sdk1=function(aJ,aR,aL,a0,aU,aP,aZ){var aH=aR;var aO,aN;var aM=this._$o;var aQ=this._$A;var aI=aU*aZ;var aS,aY;var aV;var aX,aW;var aT=(aH._$hr!=null)?aH._$hr:aH._$Cr;for(var aK=aP;aK<aI;aK+=aZ){if(Q._$ts){aO=aL[aK];aN=aL[aK+1];if(aO<0){aO=0;}else{if(aO>1){aO=1;}}if(aN<0){aN=0;}else{if(aN>1){aN=1;}}aO*=aM;aN*=aQ;aS=(aO|0);aY=(aN|0);if(aS>aM-1){aS=aM-1;}if(aY>aQ-1){aY=aQ-1;}aX=aO-aS;aW=aN-aY;aV=2*(aS+aY*(aM+1));}else{aO=aL[aK]*aM;aN=aL[aK+1]*aQ;aX=aO-(aO|0);aW=aN-(aN|0);aV=2*((aO|0)+(aN|0)*(aM+1));}if(aX+aW<1){a0[aK]=aT[aV]*(1-aX-aW)+aT[aV+2]*aX+aT[aV+2*(aM+1)]*aW;a0[aK+1]=aT[aV+1]*(1-aX-aW)+aT[aV+3]*aX+aT[aV+2*(aM+1)+1]*aW;}else{a0[aK]=aT[aV+2*(aM+1)+2]*(aX-1+aW)+aT[aV+2*(aM+1)]*(1-aX)+aT[aV+2]*(1-aW);a0[aK+1]=aT[aV+2*(aM+1)+3]*(aX-1+aW)+aT[aV+2*(aM+1)+1]*(1-aX)+aT[aV+3]*(1-aW);}}};E.prototype._$VT=function(){return(this._$o+1)*(this._$A+1);};E.prototype.getType=function(){return c._$_b;};function H(aH){B.prototype.constructor.call(this,aH);this._$8r=c._$ur;this._$Cr=null;this._$hr=null;}H.prototype=new B();function s(){if(j){return;}this.visible=true;this._$g0=false;this._$NL=null;this._$3S=null;this._$aS=null;s._$42++;}s._$42=0;s.prototype._$zP=function(){this._$3S=new Array();this._$aS=new Array();};s.prototype._$F0=function(aH){this._$g0=aH._$8L();this.visible=aH._$8L();this._$NL=aH._$nP();this._$3S=aH._$nP();this._$aS=aH._$nP();};s.prototype.init=function(aI){var aH=new aj(this);aH.setPartsOpacity(this.isVisible()?1:0);return aH;};s.prototype._$6o=function(aH){if(this._$3S==null){throw new Error(\"_$3S _$6 _$Wo@_$6o\");}this._$3S.push(aH);};s.prototype._$3o=function(aH){if(this._$aS==null){throw new Error(\"_$aS _$6 _$Wo@_$3o\");}this._$aS.push(aH);};s.prototype._$Zo=function(aH){this._$3S=aH;};s.prototype._$xo=function(aH){this._$aS=aH;};s.prototype.isVisible=function(){return this.visible;};s.prototype._$uL=function(){return this._$g0;};s.prototype._$KP=function(aH){this.visible=aH;};s.prototype._$ET=function(aH){this._$g0=aH;};s.prototype.getBaseData=function(){return this._$3S;};s.prototype.getDrawData=function(){return this._$aS;};s.prototype._$p2=function(){return this._$NL;};s.prototype._$ob=function(aH){this._$NL=aH;};s.prototype.getPartsID=function(){return this._$NL;};s.prototype._$MP=function(aH){this._$NL=aH;};function aj(aH){this._$VS=null;this._$e0=null;this._$e0=aH;}aj.prototype=new S();aj.prototype.getPartsOpacity=function(){return this._$VS;};aj.prototype.setPartsOpacity=function(aH){this._$VS=aH;};function ak(aH){if(j){return;}this.id=aH;}ak._$L7=function(){z._$27();n._$27();Z._$27();i._$27();};ak.prototype.toString=function(){return this.id;};function D(){}D.prototype._$F0=function(aH){};function an(){if(j){return;}this._$4S=null;}an.prototype._$1s=function(){return this._$4S;};an.prototype._$zP=function(){this._$4S=new Array();};an.prototype._$F0=function(aH){this._$4S=aH._$nP();};an.prototype._$Ks=function(aH){this._$4S.push(aH);};function au(aH,aI){this.canvas=aH;this.context=aI;this.viewport=new Array(0,0,aH.width,aH.height);this._$6r=1;this._$xP=0;this._$3r=1;this._$uP=0;this._$Qo=-1;this.cacheImages={};}au.tr=new am();au._$50=new am();au._$Ti=new Array(0,0);au._$Pi=new Array(0,0);au._$B=new Array(0,0);au.prototype._$lP=function(aI,aK,aJ,aH){this.viewport=new Array(aI,aK,aJ,aH);};au.prototype._$bL=function(){this.context.save();var aH=this.viewport;if(aH!=null){this.context.beginPath();this.context._$Li(aH[0],aH[1],aH[2],aH[3]);this.context.clip();}};au.prototype._$ei=function(){this.context.restore();};au.prototype.drawElements=function(bc,bm,aX,aJ,bA,aM,bl,bz){try{if(bA!=this._$Qo){this._$Qo=bA;this.context.globalAlpha=bA;}var a2=bm.length;var aP=bc.width;var a5=bc.height;var bE=this.context;var a7=this._$xP;var a6=this._$uP;var a1=this._$6r;var aZ=this._$3r;var bD=au.tr;var aI=au._$Ti;var aH=au._$Pi;var bu=au._$B;for(var by=0;by<a2;by+=3){bE.save();var aW=bm[by];var aV=bm[by+1];var aT=bm[by+2];var aL=a7+a1*aX[aW*2];var aK=a6+aZ*aX[aW*2+1];var br=a7+a1*aX[aV*2];var bp=a6+aZ*aX[aV*2+1];var bh=a7+a1*aX[aT*2];var bf=a6+aZ*aX[aT*2+1];if(bl){bl._$PS(aL,aK,bu);aL=bu[0];aK=bu[1];bl._$PS(br,bp,bu);br=bu[0];bp=bu[1];bl._$PS(bh,bf,bu);bh=bu[0];bf=bu[1];}var aS=aP*aJ[aW*2];var aQ=a5-a5*aJ[aW*2+1];var bx=aP*aJ[aV*2];var bw=a5-a5*aJ[aV*2+1];var bk=aP*aJ[aT*2];var bj=a5-a5*aJ[aT*2+1];var a3=Math.atan2(bw-aQ,bx-aS);var a0=Math.atan2(bp-aK,br-aL);var aO=br-aL;var aN=bp-aK;var bi=Math.sqrt(aO*aO+aN*aN);var aU=bx-aS;var aR=bw-aQ;var bt=Math.sqrt(aU*aU+aR*aR);var bv=bi/bt;ad._$ni(bk,bj,aS,aQ,(bx-aS),(bw-aQ),-(bw-aQ),(bx-aS),aI);ad._$ni(bh,bf,aL,aK,(br-aL),(bp-aK),-(bp-aK),(br-aL),aH);var aY=(aH[0]-aI[0])/aI[1];var bs=Math.min(aS,bx,bk);var bg=Math.max(aS,bx,bk);var bq=Math.min(aQ,bw,bj);var be=Math.max(aQ,bw,bj);var bo=Math.floor(bs);var bb=Math.floor(bq);var a4=Math.ceil(bg);var bC=Math.ceil(be);bD.identity();bD.translate(aL,aK);bD.rotate(a0);bD.scale(1,aH[1]/aI[1]);bD.shear(aY,0);bD.scale(bv,bv);bD.rotate(-a3);bD.translate(-aS,-aQ);bD.setContext(bE);var a8=true;var a9=1.2;if(!aM){aM=a8?a9:0;}if(Q.IGNORE_EXPAND){aM=0;}if(Q.USE_CACHED_POLYGON_IMAGE){var bd=bz._$e0;bd.gl_cacheImage=bd.gl_cacheImage||{};if(!bd.gl_cacheImage[by]){var bn=au.createCanvas(a4-bo,bC-bb);Q.DEBUG_DATA.LDGL_CANVAS_MB=Q.DEBUG_DATA.LDGL_CANVAS_MB||0;Q.DEBUG_DATA.LDGL_CANVAS_MB+=(a4-bo)*(bC-bb)*4;var ba=bn.getContext(\"2d\");ba.translate(-bo,-bb);au.clip(ba,bD,aM,bi,aS,aQ,bx,bw,bk,bj,aL,aK,br,bp,bh,bf);ba.drawImage(bc,0,0);bd.gl_cacheImage[by]={cacheCanvas:bn,cacheContext:ba};}bE.drawImage(bd.gl_cacheImage[by][\"cacheCanvas\"],bo,bb);}else{if(!Q.IGNORE_CLIP){au.clip(bE,bD,aM,bi,aS,aQ,bx,bw,bk,bj,aL,aK,br,bp,bh,bf);}if(Q.USE_ADJUST_TRANSLATION){bs=0;bg=aP;bq=0;be=a5;}bE.drawImage(bc,bs,bq,bg-bs,be-bq,bs,bq,bg-bs,be-bq);}bE.restore();}}catch(bB){q._$Rb(bB);}};au.clip=function(aK,aJ,aV,aI,aM,aL,aU,aT,aQ,aP,aO,aN,aH,aW,aS,aR){if(aV>0.02){au.expandClip(aK,aJ,aV,aI,aO,aN,aH,aW,aS,aR);}else{au.clipWithTransform(aK,null,aM,aL,aU,aT,aQ,aP);}};au.expandClip=function(aV,bg,aK,a3,aJ,aI,be,ba,aZ,aX){var aP=be-aJ;var aO=ba-aI;var bi=aZ-aJ;var bh=aX-aI;var bj=aP*bh-aO*bi>0?aK:-aK;var aL=-aO;var aH=aP;var bc=aZ-be;var a8=aX-ba;var a7=-a8;var a6=bc;var aQ=Math.sqrt(bc*bc+a8*a8);var bf=-bh;var bb=bi;var a2=Math.sqrt(bi*bi+bh*bh);var bd=aJ-bj*aL/a3;var a9=aI-bj*aH/a3;var aY=be-bj*aL/a3;var aW=ba-bj*aH/a3;var a5=be-bj*a7/aQ;var a4=ba-bj*a6/aQ;var aS=aZ-bj*a7/aQ;var aR=aX-bj*a6/aQ;var aN=aJ+bj*bf/a2;var aM=aI+bj*bb/a2;var a1=aZ+bj*bf/a2;var a0=aX+bj*bb/a2;var aU=au._$50;var aT=bg._$P2(aU);if(aT==null){return false;}au.clipWithTransform(aV,aU,bd,a9,aY,aW,a5,a4,aS,aR,a1,a0,aN,aM);return true;};au.clipWithTransform=function(aH,aI,aS,aN,aQ,aK,aP,aJ){if(arguments.length<(1+3*2)){q._$li(\"err : @LDGL.clip()\");return;}if(!(arguments[1] instanceof am)){q._$li(\"err : a[0] is _$6 LDTransform @LDGL.clip()\");return;}var aM=au._$B;var aO=aI;var aR=arguments;aH.beginPath();if(aO){aO._$PS(aR[2],aR[3],aM);aH.moveTo(aM[0],aM[1]);for(var aL=4;aL<aR.length;aL+=2){aO._$PS(aR[aL],aR[aL+1],aM);aH.lineTo(aM[0],aM[1]);}}else{aH.moveTo(aR[2],aR[3]);for(var aL=4;aL<aR.length;aL+=2){aH.lineTo(aR[aL],aR[aL+1]);}}aH.clip();};au.createCanvas=function(aH,aJ){var aI=document.createElement(\"canvas\");aI.setAttribute(\"width\",aH);aI.setAttribute(\"height\",aJ);if(!aI){q._$li(\"err : \"+aI);}return aI;};au.dumpValues=function(){var aI=\"\";for(var aH=0;aH<arguments.length;aH++){aI+=\"[\"+aH+\"]= \"+arguments[aH].toFixed(3)+\" , \";}console.log(aI);};function f(){if(j){return;}this._$TT=null;this._$LT=null;this._$FS=null;this._$wL=null;}f.prototype._$F0=function(aH){this._$TT=aH._$_T();this._$LT=aH._$_T();this._$FS=aH._$_T();this._$wL=aH._$nP();};f.prototype.getMinValue=function(){return this._$TT;};f.prototype.getMaxValue=function(){return this._$LT;};f.prototype.getDefaultValue=function(){return this._$FS;};f.prototype.getParamID=function(){return this._$wL;};function B(aH){if(j){return;}this._$e0=null;this._$IP=null;this._$JS=false;this._$AT=true;this._$e0=aH;this.totalScale=1;this._$7s=1;this.totalOpacity=1;}B.prototype._$yo=function(){return this._$AT&&!this._$JS;};B.prototype._$hS=function(aH){this._$AT=aH;};B.prototype._$GT=function(){return this._$e0;};B.prototype._$l2=function(aH){this._$IP=aH;};B.prototype.getPartsIndex=function(){return this._$IP;};B.prototype._$x2=function(){return this._$JS;};B.prototype._$Ib=function(aH){this._$JS=aH;};B.prototype.getTotalScale=function(){return this.totalScale;};B.prototype.setTotalScale_notForClient=function(aH){this.totalScale=aH;};B.prototype.getInterpolatedOpacity=function(){return this._$7s;};B.prototype.setInterpolatedOpacity=function(aH){this._$7s=aH;};B.prototype.getTotalOpacity=function(aH){return this.totalOpacity;};B.prototype.setTotalOpacity=function(aH){this.totalOpacity=aH;};function Q(){}Q._$2s=\"2.1.00_1\";Q._$Kr=201001000;Q._$sP=true;Q._$so=true;Q._$cb=false;Q._$3T=true;Q._$Ts=true;Q._$fb=true;Q._$ts=true;Q.L2D_DEFORMER_EXTEND=true;Q._$Wb=false;Q._$yr=false;Q._$Zs=false;Q.L2D_NO_ERROR=0;Q._$i7=1000;Q._$9s=1001;Q._$es=1100;Q._$r7=2000;Q._$07=2001;Q._$b7=2002;Q._$H7=4000;Q.L2D_COLOR_BLEND_MODE_MULT=0;Q.L2D_COLOR_BLEND_MODE_ADD=1;Q.L2D_COLOR_BLEND_MODE_INTERPOLATE=2;Q._$6b=true;Q._$cT=0;Q.clippingMaskBufferSize=256;Q.glContext=new Array();Q.frameBuffers=new Array();Q.fTexture=new Array();Q.IGNORE_CLIP=false;Q.IGNORE_EXPAND=false;Q.EXPAND_W=2;Q.USE_ADJUST_TRANSLATION=true;Q.USE_CANVAS_TRANSFORM=true;Q.USE_CACHED_POLYGON_IMAGE=false;Q.DEBUG_DATA={};Q.PROFILE_IOS_SPEED={PROFILE_NAME:\"iOS Speed\",USE_ADJUST_TRANSLATION:true,USE_CACHED_POLYGON_IMAGE:true,EXPAND_W:4};Q.PROFILE_IOS_QUALITY={PROFILE_NAME:\"iOS HiQ\",USE_ADJUST_TRANSLATION:true,USE_CACHED_POLYGON_IMAGE:false,EXPAND_W:2};Q.PROFILE_IOS_DEFAULT=Q.PROFILE_IOS_QUALITY;Q.PROFILE_ANDROID={PROFILE_NAME:\"Android\",USE_ADJUST_TRANSLATION:false,USE_CACHED_POLYGON_IMAGE:false,EXPAND_W:2};Q.PROFILE_DESKTOP={PROFILE_NAME:\"Desktop\",USE_ADJUST_TRANSLATION:false,USE_CACHED_POLYGON_IMAGE:false,EXPAND_W:2};Q.initProfile=function(){if(r.isIOS()){Q.setupProfile(Q.PROFILE_IOS_DEFAULT);}else{if(r.isAndroid()){Q.setupProfile(Q.PROFILE_ANDROID);}else{Q.setupProfile(Q.PROFILE_DESKTOP);}}};Q.setupProfile=function(aI,aJ){if(typeof aI==\"number\"){switch(aI){case 9901:aI=Q.PROFILE_IOS_SPEED;break;case 9902:aI=Q.PROFILE_IOS_QUALITY;break;case 9903:aI=Q.PROFILE_IOS_DEFAULT;break;case 9904:aI=Q.PROFILE_ANDROID;break;case 9905:aI=Q.PROFILE_DESKTOP;break;default:alert(\"profile _$6 _$Ui : \"+aI);break;}}if(arguments.length<2){aJ=true;}if(aJ){console.log(\"profile : \"+aI.PROFILE_NAME);}for(var aH in aI){Q[aH]=aI[aH];if(aJ){console.log(\"  [\"+aH+\"] = \"+aI[aH]);}}};Q.init=function(){if(Q._$6b){console.log(\"Live2D %s\",Q._$2s);Q._$6b=false;var aH=false;aH=true;Q.initProfile();}};Q.getVersionStr=function(){return Q._$2s;};Q.getVersionNo=function(){return Q._$Kr;};Q._$sT=function(aH){Q._$cT=aH;};Q.getError=function(){var aH=Q._$cT;Q._$cT=0;return aH;};Q.dispose=function(){Q.glContext=[];Q.frameBuffers=[];Q.fTexture=[];};Q.setGL=function(aJ,aI){var aH=aI||0;Q.glContext[aH]=aJ;};Q.getGL=function(aH){return Q.glContext[aH];};Q.setClippingMaskBufferSize=function(aH){Q.clippingMaskBufferSize=aH;};Q.getClippingMaskBufferSize=function(){return Q.clippingMaskBufferSize;};Q.deleteBuffer=function(aI){var aH=Q.getGL(aI);aH.deleteFramebuffer(Q.frameBuffers[aI].framebuffer);delete Q.frameBuffers[aI];delete Q.glContext[aI];};function A(){}A._$r2=function(aH){if(aH<0){return 0;}else{if(aH>1){return 1;}}return(0.5-0.5*Math.cos(aH*aC.PI_F));};function J(aH){if(j){return;}this._$ib=aH;}J._$fr=-1;J.prototype.toString=function(){return this._$ib;};function b(){if(j){return;}a.prototype.constructor.call(this);this._$LP=-1;this._$d0=0;this._$Yo=0;this._$JP=null;this._$5P=null;this._$BP=null;this._$Eo=null;this._$Qi=null;this._$6s=b._$ms;this.culling=true;this.gl_cacheImage=null;this.instanceNo=b._$42++;}b.prototype=new a();b._$42=0;b._$Os=30;b._$ms=0;b._$ns=1;b._$_s=2;b._$gT=new Array();b.prototype._$_S=function(aH){this._$LP=aH;};b.prototype.getTextureNo=function(){return this._$LP;};b.prototype._$ZL=function(){return this._$Qi;};b.prototype._$H2=function(){return this._$JP;};b.prototype.getNumPoints=function(){return this._$d0;};b.prototype.getType=function(){return a._$wb;};b.prototype._$B2=function(aL,aH,aO){var aM=aH;var aN=(aM._$hr!=null)?aM._$hr:aM._$Cr;var aK=aw._$do;switch(aK){default:case aw._$Ms:throw new Error(\"_$L _$ro \");case aw._$Qs:for(var aJ=this._$d0-1;aJ>=0;--aJ){var aI=aJ*aw._$No;aN[aI+4]=aO;}break;}};b.prototype._$zP=function(){this._$GS=new g();this._$GS._$zP();};b.prototype._$F0=function(aK){a.prototype._$F0.call(this,aK);this._$LP=aK._$6L();this._$d0=aK._$6L();this._$Yo=aK._$6L();var aH=aK._$nP();this._$BP=new Int16Array(this._$Yo*3);for(var aJ=this._$Yo*3-1;aJ>=0;--aJ){this._$BP[aJ]=aH[aJ];}this._$Eo=aK._$nP();this._$Qi=aK._$nP();if(aK.getFormatVersion()>=ay._$s7){this._$JP=aK._$6L();if(this._$JP!=0){if((this._$JP&1)!=0){var aI=aK._$6L();if(this._$5P==null){this._$5P=new Object();}this._$5P._$Hb=parseInt(aI);}if((this._$JP&b._$Os)!=0){this._$6s=(this._$JP&b._$Os)>>1;}else{this._$6s=b._$ms;}if((this._$JP&32)!=0){this.culling=false;}}}else{this._$JP=0;}};b.prototype.init=function(aL){var aN=new ag(this);var aI=this._$d0*aw._$No;var aH=this._$32();if(aN._$Cr!=null){aN._$Cr=null;}aN._$Cr=new Float32Array(aI);if(aN._$hr!=null){aN._$hr=null;}aN._$hr=aH?new Float32Array(aI):null;var aM=aw._$do;switch(aM){default:case aw._$Ms:if(aw._$Ls){for(var aJ=this._$d0-1;aJ>=0;--aJ){var aO=aJ<<1;this._$Qi[aO+1]=1-this._$Qi[aO+1];}}break;case aw._$Qs:for(var aJ=this._$d0-1;aJ>=0;--aJ){var aO=aJ<<1;var aK=aJ*aw._$No;var aQ=this._$Qi[aO];var aP=this._$Qi[aO+1];aN._$Cr[aK]=aQ;aN._$Cr[aK+1]=aP;aN._$Cr[aK+4]=0;if(aH){aN._$hr[aK]=aQ;aN._$hr[aK+1]=aP;aN._$hr[aK+4]=0;}}break;}return aN;};b.prototype._$Nr=function(aJ,aH){var aK=aH;if(!((this==aK._$GT()))){console.log(\"### assert!! ### \");}if(!this._$GS._$Ur(aJ)){return;}a.prototype._$Nr.call(this,aJ,aK);if(aK._$IS[0]){return;}var aI=b._$gT;aI[0]=false;aG._$Vr(aJ,this._$GS,aI,this._$d0,this._$Eo,aK._$Cr,aw._$i2,aw._$No);};b.prototype._$2b=function(aK,aI){try{if(!((this==aI._$GT()))){console.log(\"### assert!! ### \");}var aL=false;if(aI._$IS[0]){aL=true;}var aM=aI;if(!aL){a.prototype._$2b.call(this,aK);if(this._$32()){var aH=this.getTargetBaseDataID();if(aM._$8r==a._$ur){aM._$8r=aK.getBaseDataIndex(aH);}if(aM._$8r<0){if(Q._$so){q._$li(\"_$L _$0P _$G :: %s\",aH);}}else{var aO=aK.getBaseData(aM._$8r);var aJ=aK._$q2(aM._$8r);if(aO!=null&&!aJ._$x2()){aO._$nb(aK,aJ,aM._$Cr,aM._$hr,this._$d0,aw._$i2,aw._$No);aM._$AT=true;}else{aM._$AT=false;}aM.baseOpacity=aJ.getTotalOpacity();}}}}catch(aN){throw aN;}};b.prototype.draw=function(aN,aK,aI){if(!((this==aI._$GT()))){console.log(\"### assert!! ### \");}if(aI._$IS[0]){return;}var aL=aI;var aJ=this._$LP;if(aJ<0){aJ=1;}var aH=this.getOpacity(aK,aL)*aI._$VS*aI.baseOpacity;var aM=(aL._$hr!=null)?aL._$hr:aL._$Cr;aN.setClipBufPre_clipContextForDraw(aI.clipBufPre_clipContext);aN._$WP(this.culling);aN._$Uo(aJ,3*this._$Yo,this._$BP,aM,this._$Qi,aH,this._$6s,aL);};b.prototype.dump=function(){console.log(\"  _$yi( %d ) , _$d0( %d ) , _$Yo( %d ) \\n\",this._$LP,this._$d0,this._$Yo);console.log(\"  _$Oi _$di = { \");for(var aJ=0;aJ<this._$BP.length;aJ++){console.log(\"%5d ,\",this._$BP[aJ]);}console.log(\"\\n  _$5i _$30\");for(var aJ=0;aJ<this._$Eo.length;aJ++){console.log(\"\\n    _$30[%d] = \",aJ);var aH=this._$Eo[aJ];for(var aI=0;aI<aH.length;aI++){console.log(\"%6.2f, \",aH[aI]);}}console.log(\"\\n\");};b.prototype._$72=function(aH){if(this._$5P==null){return null;}return this._$5P[aH];};b.prototype.getIndexArray=function(){return this._$BP;};function ag(aH){aB.prototype.constructor.call(this,aH);this._$8r=a._$ur;this._$Cr=null;this._$hr=null;}ag.prototype=new aB();ag.prototype.getTransformedPoints=function(){return(this._$hr!=null)?this._$hr:this._$Cr;};function k(){if(j){return;}this.x=null;this.y=null;}k.prototype._$HT=function(aH){this.x=aH.x;this.y=aH.y;};k.prototype._$HT=function(aH,aI){this.x=aH;this.y=aI;};function l(aH){if(j){return;}aa.prototype.constructor.call(this);this.drawParamWebGL=new C(aH);this.drawParamWebGL.setGL(Q.getGL(aH));}l.prototype=new aa();l.loadModel=function(aI){var aH=new l();aa._$62(aH,aI);return aH;};l.loadModel=function(aI,aK){var aJ=aK||0;var aH=new l(aJ);aa._$62(aH,aI);return aH;};l._$to=function(){var aH=new l();return aH;};l._$er=function(aM){var aJ=new _$5(\"../_$_r/_$t0/_$Ri/_$_P._$d\");if(aJ.exists()==false){throw new _$ls(\"_$t0 _$_ _$6 _$Ui :: \"+aJ._$PL());}var aH=[\"../_$_r/_$t0/_$Ri/_$_P.512/_$CP._$1\",\"../_$_r/_$t0/_$Ri/_$_P.512/_$vP._$1\",\"../_$_r/_$t0/_$Ri/_$_P.512/_$EP._$1\",\"../_$_r/_$t0/_$Ri/_$_P.512/_$pP._$1\"];var aK=l.loadModel(aJ._$3b());for(var aI=0;aI<aH.length;aI++){var aL=new _$5(aH[aI]);if(aL.exists()==false){throw new _$ls(\"_$t0 _$_ _$6 _$Ui :: \"+aL._$PL());}aK.setTexture(aI,_$nL._$_o(aM,aL._$3b()));}return aK;};l.prototype.setGL=function(aH){Q.setGL(aH);};l.prototype.setTransform=function(aH){this.drawParamWebGL.setTransform(aH);};l.prototype.update=function(){this._$5S.update();this._$5S.preDraw(this.drawParamWebGL);};l.prototype.draw=function(){this._$5S.draw(this.drawParamWebGL);};l.prototype._$K2=function(){this.drawParamWebGL._$K2();};l.prototype.setTexture=function(aI,aH){if(this.drawParamWebGL==null){q._$li(\"_$Yi for QT _$ki / _$XS() is _$6 _$ui!!\");}this.drawParamWebGL.setTexture(aI,aH);};l.prototype.setTexture=function(aI,aH){if(this.drawParamWebGL==null){q._$li(\"_$Yi for QT _$ki / _$XS() is _$6 _$ui!!\");}this.drawParamWebGL.setTexture(aI,aH);};l.prototype._$Rs=function(){return this.drawParamWebGL._$Rs();};l.prototype._$Ds=function(aH){this.drawParamWebGL._$Ds(aH);};l.prototype.getDrawParam=function(){return this.drawParamWebGL;};l.prototype.setMatrix=function(aH){this.drawParamWebGL.setMatrix(aH);};l.prototype.setPremultipliedAlpha=function(aH){this.drawParamWebGL.setPremultipliedAlpha(aH);};l.prototype.isPremultipliedAlpha=function(){return this.drawParamWebGL.isPremultipliedAlpha();};l.prototype.setAnisotropy=function(aH){this.drawParamWebGL.setAnisotropy(aH);};l.prototype.getAnisotropy=function(){return this.drawParamWebGL.getAnisotropy();};function V(){if(j){return;}this.motions=null;this._$eb=false;this.motions=new Array();}V.prototype._$tb=function(){return this.motions;};V.prototype.startMotion=function(aJ,aI){var aM=null;var aL=null;var aH=this.motions.length;for(var aK=0;aK<aH;++aK){aL=this.motions[aK];if(aL==null){continue;}aL._$qS(aL._$w0.getFadeOut());if(this._$eb){q._$Ji(\"MotionQueueManager[size:%2d]->startMotion() / start _$K _$3 (m%d)\\n\",aH,aL._$sr);}}if(aJ==null){return -1;}aL=new M();aL._$w0=aJ;this.motions.push(aL);var aN=aL._$sr;if(this._$eb){q._$Ji(\"MotionQueueManager[size:%2d]->startMotion() / new _$w0 (m%d)\\n\",aH,aN);}return aN;};V.prototype.updateParam=function(aJ){try{var aI=false;for(var aK=0;aK<this.motions.length;aK++){var aL=this.motions[aK];if(aL==null){this.motions.splice(aK,1);aK--;continue;}var aH=aL._$w0;if(aH==null){this.motions=this.motions.splice(aK,1);aK--;continue;}aH.updateParam(aJ,aL);aI=true;if(aL.isFinished()){if(this._$eb){q._$Ji(\"MotionQueueManager[size:%2d]->updateParam() / _$T0 _$w0 (m%d)\\n\",this.motions.length-1,aL._$sr);}this.motions.splice(aK,1);aK--;}else{}}return aI;}catch(aM){q._$li(aM);return true;}};V.prototype.isFinished=function(aK){if(arguments.length>=1){for(var aI=0;aI<this.motions.length;aI++){var aJ=this.motions[aI];if(aJ==null){continue;}if(aJ._$sr==aK&&!aJ.isFinished()){return false;}}return true;}else{for(var aI=0;aI<this.motions.length;aI++){var aJ=this.motions[aI];if(aJ==null){this.motions.splice(aI,1);aI--;continue;}var aH=aJ._$w0;if(aH==null){this.motions.splice(aI,1);aI--;continue;}if(!aJ.isFinished()){return false;}}return true;}};V.prototype.stopAllMotions=function(){for(var aI=0;aI<this.motions.length;aI++){var aJ=this.motions[aI];if(aJ==null){this.motions.splice(aI,1);aI--;continue;}var aH=aJ._$w0;if(aH==null){this.motions.splice(aI,1);aI--;continue;}if(true){this.motions.splice(aI,1);aI--;}}};V.prototype._$Zr=function(aH){this._$eb=aH;};V.prototype._$e=function(){console.log(\"-- _$R --\\n\");for(var aH=0;aH<this.motions.length;aH++){var aI=this.motions[aH];var aJ=aI._$w0;console.log(\"MotionQueueEnt[%d] :: %s\\n\",this.motions.length,aJ.toString());}};function M(){this._$w0=null;this._$AT=true;this._$9L=false;this._$z2=-1;this._$bs=-1;this._$Do=-1;this._$sr=null;this._$sr=M._$Gs++;}M._$Gs=0;M.prototype.isFinished=function(){return this._$9L;};M.prototype._$qS=function(aJ){var aI=P.getUserTimeMSec();var aH=aI+aJ;if(this._$Do<0||aH<this._$Do){this._$Do=aH;}};M.prototype._$Bs=function(){return this._$sr;};function am(){this.m=new Array(1,0,0,0,1,0,0,0,1);}am.prototype.setContext=function(aI){var aH=this.m;aI.transform(aH[0],aH[1],aH[3],aH[4],aH[6],aH[7]);};am.prototype.toString=function(){var aI=\"LDTransform { \";for(var aH=0;aH<9;aH++){aI+=this.m[aH].toFixed(2)+\" ,\";}aI+=\" }\";return aI;};am.prototype.identity=function(){var aH=this.m;aH[0]=aH[4]=aH[8]=1;aH[1]=aH[2]=aH[3]=aH[5]=aH[6]=aH[7]=0;};am.prototype._$PS=function(aI,aK,aJ){if(aJ==null){aJ=new Array(0,0);}var aH=this.m;aJ[0]=aH[0]*aI+aH[3]*aK+aH[6];aJ[1]=aH[1]*aI+aH[4]*aK+aH[7];return aJ;};am.prototype._$P2=function(aK){if(!aK){aK=new am();}var aI=this.m;var aT=aI[0];var aS=aI[1];var aR=aI[2];var aQ=aI[3];var aP=aI[4];var aO=aI[5];var aN=aI[6];var aM=aI[7];var aL=aI[8];var aJ=aT*aP*aL+aS*aO*aN+aR*aQ*aM-aT*aO*aM-aR*aP*aN-aS*aQ*aL;if(aJ==0){return null;}else{var aH=1/aJ;aK.m[0]=aH*(aP*aL-aM*aO);aK.m[1]=aH*(aM*aR-aS*aL);aK.m[2]=aH*(aS*aO-aP*aR);aK.m[3]=aH*(aN*aO-aQ*aL);aK.m[4]=aH*(aT*aL-aN*aR);aK.m[5]=aH*(aQ*aR-aT*aO);aK.m[6]=aH*(aQ*aM-aN*aP);aK.m[7]=aH*(aN*aS-aT*aM);aK.m[8]=aH*(aT*aP-aQ*aS);return aK;}};am.prototype.transform=function(aI,aK,aJ){if(aJ==null){aJ=new Array(0,0);}var aH=this.m;aJ[0]=aH[0]*aI+aH[3]*aK+aH[6];aJ[1]=aH[1]*aI+aH[4]*aK+aH[7];return aJ;};am.prototype.translate=function(aI,aJ){var aH=this.m;aH[6]=aH[0]*aI+aH[3]*aJ+aH[6];aH[7]=aH[1]*aI+aH[4]*aJ+aH[7];aH[8]=aH[2]*aI+aH[5]*aJ+aH[8];};am.prototype.scale=function(aJ,aI){var aH=this.m;aH[0]*=aJ;aH[1]*=aJ;aH[2]*=aJ;aH[3]*=aI;aH[4]*=aI;aH[5]*=aI;};am.prototype.shear=function(aM,aL){var aH=this.m;var aK=aH[0]+aH[3]*aL;var aJ=aH[1]+aH[4]*aL;var aI=aH[2]+aH[5]*aL;aH[3]=aH[0]*aM+aH[3];aH[4]=aH[1]*aM+aH[4];aH[5]=aH[2]*aM+aH[5];aH[0]=aK;aH[1]=aJ;aH[2]=aI;};am.prototype.rotate=function(aM){var aH=this.m;var aN=Math.cos(aM);var aL=Math.sin(aM);var aK=aH[0]*aN+aH[3]*aL;var aJ=aH[1]*aN+aH[4]*aL;var aI=aH[2]*aN+aH[5]*aL;aH[3]=-aH[0]*aL+aH[3]*aN;aH[4]=-aH[1]*aL+aH[4]*aN;aH[5]=-aH[2]*aL+aH[5]*aN;aH[0]=aK;aH[1]=aJ;aH[2]=aI;};am.prototype.concatenate=function(aL){var aO=this.m;var aM=aL.m;var aS=aO[0]*aM[0]+aO[3]*aM[1]+aO[6]*aM[2];var aR=aO[1]*aM[0]+aO[4]*aM[1]+aO[7]*aM[2];var aQ=aO[2]*aM[0]+aO[5]*aM[1]+aO[8]*aM[2];var aP=aO[0]*aM[3]+aO[3]*aM[4]+aO[6]*aM[5];var aN=aO[1]*aM[3]+aO[4]*aM[4]+aO[7]*aM[5];var aK=aO[2]*aM[3]+aO[5]*aM[4]+aO[8]*aM[5];var aJ=aO[0]*aM[6]+aO[3]*aM[7]+aO[6]*aM[8];var aI=aO[1]*aM[6]+aO[4]*aM[7]+aO[7]*aM[8];var aH=aO[2]*aM[6]+aO[5]*aM[7]+aO[8]*aM[8];m[0]=aS;m[1]=aR;m[2]=aQ;m[3]=aP;m[4]=aN;m[5]=aK;m[6]=aJ;m[7]=aI;m[8]=aH;};function n(aH){if(j){return;}ak.prototype.constructor.call(this,aH);}n.prototype=new ak();n._$eT=null;n._$tP=new Object();n._$2o=function(){if(n._$eT==null){n._$eT=n.getID(\"DST_BASE\");}return n._$eT;};n._$27=function(){n._$tP.clear();n._$eT=null;};n.getID=function(aH){var aI=n._$tP[aH];if(aI==null){aI=new n(aH);n._$tP[aH]=aI;}return aI;};n.prototype._$3s=function(){return new n();};function C(aH){if(j){return;}ax.prototype.constructor.call(this);this.textures=new Array();this.transform=null;this.gl=null;this.glno=aH;this.firstDraw=true;this.anisotropyExt=null;this.maxAnisotropy=0;this._$As=32;this._$Gr=false;this._$NT=null;this._$vS=null;this._$no=null;this.vertShader=null;this.fragShader=null;this.vertShaderOff=null;this.fragShaderOff=null;}C.prototype=new ax();C._$9r=function(aH){var aI=new Float32Array(aH);return aI;};C._$vb=function(aH){var aI=new Int16Array(aH);return aI;};C._$cr=function(aI,aH){if(aI==null||aI._$yL()<aH.length){aI=C._$9r(aH.length*2);aI.put(aH);aI._$oT(0);}else{aI.clear();aI.put(aH);aI._$oT(0);}return aI;};C._$mb=function(aI,aH){if(aI==null||aI._$yL()<aH.length){aI=C._$vb(aH.length*2);aI.put(aH);aI._$oT(0);}else{aI.clear();aI.put(aH);aI._$oT(0);}return aI;};C._$Hs=function(){return this._$Gr;};C._$as=function(aH){this._$Gr=aH;};C.prototype.getGL=function(){return this.gl;};C.prototype.setGL=function(aH){this.gl=aH;};C.prototype.setTransform=function(aH){this.transform=aH;};C.prototype._$ZT=function(){var aH=this.gl;if(this.firstDraw){this.initShader();this.firstDraw=false;this.anisotropyExt=aH.getExtension(\"EXT_texture_filter_anisotropic\")||aH.getExtension(\"WEBKIT_EXT_texture_filter_anisotropic\")||aH.getExtension(\"MOZ_EXT_texture_filter_anisotropic\");if(this.anisotropyExt){this.maxAnisotropy=aH.getParameter(this.anisotropyExt.MAX_TEXTURE_MAX_ANISOTROPY_EXT);}}aH.disable(aH.SCISSOR_TEST);aH.disable(aH.STENCIL_TEST);aH.disable(aH.DEPTH_TEST);aH.frontFace(aH.CW);aH.enable(aH.BLEND);aH.colorMask(1,1,1,1);aH.bindBuffer(aH.ARRAY_BUFFER,null);aH.bindBuffer(aH.ELEMENT_ARRAY_BUFFER,null);};C.prototype._$Uo=function(aS,aT,aL,aU,aV,aN,aM,aO){if(aN<0.01&&this.clipBufPre_clipContextMask==null){return;}var aH=aN>0.9?Q.EXPAND_W:0;var a0=this.gl;if(this.gl==null){throw new Error(\"gl is null\");}var a1=false;var aQ=1;var aP=1;var a3=1;var aZ=1;var aW=this._$C0*aP*aN;var a2=this._$tT*a3*aN;var a5=this._$WL*aZ*aN;var a7=this._$lT*aN;if(this.clipBufPre_clipContextMask!=null){a0.frontFace(a0.CCW);a0.useProgram(this.shaderProgram);this._$vS=T(a0,this._$vS,aU);this._$no=L(a0,this._$no,aL);a0.enableVertexAttribArray(this.a_position_Loc);a0.vertexAttribPointer(this.a_position_Loc,2,a0.FLOAT,false,0,0);this._$NT=T(a0,this._$NT,aV);a0.activeTexture(a0.TEXTURE1);a0.bindTexture(a0.TEXTURE_2D,this.textures[aS]);a0.uniform1i(this.s_texture0_Loc,1);a0.enableVertexAttribArray(this.a_texCoord_Loc);a0.vertexAttribPointer(this.a_texCoord_Loc,2,a0.FLOAT,false,0,0);a0.uniformMatrix4fv(this.u_matrix_Loc,false,this.getClipBufPre_clipContextMask().matrixForMask);var aY=this.getClipBufPre_clipContextMask().layoutChannelNo;var a4=this.getChannelFlagAsColor(aY);a0.uniform4f(this.u_channelFlag,a4.r,a4.g,a4.b,a4.a);var aI=this.getClipBufPre_clipContextMask().layoutBounds;a0.uniform4f(this.u_baseColor_Loc,aI.x*2-1,aI.y*2-1,aI._$EL()*2-1,aI._$5T()*2-1);a0.uniform1i(this.u_maskFlag_Loc,true);}else{a1=this.getClipBufPre_clipContextDraw()!=null;if(a1){a0.useProgram(this.shaderProgramOff);this._$vS=T(a0,this._$vS,aU);this._$no=L(a0,this._$no,aL);a0.enableVertexAttribArray(this.a_position_Loc_Off);a0.vertexAttribPointer(this.a_position_Loc_Off,2,a0.FLOAT,false,0,0);this._$NT=T(a0,this._$NT,aV);a0.activeTexture(a0.TEXTURE1);a0.bindTexture(a0.TEXTURE_2D,this.textures[aS]);a0.uniform1i(this.s_texture0_Loc_Off,1);a0.enableVertexAttribArray(this.a_texCoord_Loc_Off);a0.vertexAttribPointer(this.a_texCoord_Loc_Off,2,a0.FLOAT,false,0,0);a0.uniformMatrix4fv(this.u_clipMatrix_Loc_Off,false,this.getClipBufPre_clipContextDraw().matrixForDraw);a0.uniformMatrix4fv(this.u_matrix_Loc_Off,false,this.matrix4x4);a0.activeTexture(a0.TEXTURE2);a0.bindTexture(a0.TEXTURE_2D,Q.fTexture[this.glno]);a0.uniform1i(this.s_texture1_Loc_Off,2);var aY=this.getClipBufPre_clipContextDraw().layoutChannelNo;var a4=this.getChannelFlagAsColor(aY);a0.uniform4f(this.u_channelFlag_Loc_Off,a4.r,a4.g,a4.b,a4.a);a0.uniform4f(this.u_baseColor_Loc_Off,aW,a2,a5,a7);}else{a0.useProgram(this.shaderProgram);this._$vS=T(a0,this._$vS,aU);this._$no=L(a0,this._$no,aL);a0.enableVertexAttribArray(this.a_position_Loc);a0.vertexAttribPointer(this.a_position_Loc,2,a0.FLOAT,false,0,0);this._$NT=T(a0,this._$NT,aV);a0.activeTexture(a0.TEXTURE1);a0.bindTexture(a0.TEXTURE_2D,this.textures[aS]);a0.uniform1i(this.s_texture0_Loc,1);a0.enableVertexAttribArray(this.a_texCoord_Loc);a0.vertexAttribPointer(this.a_texCoord_Loc,2,a0.FLOAT,false,0,0);a0.uniformMatrix4fv(this.u_matrix_Loc,false,this.matrix4x4);a0.uniform4f(this.u_baseColor_Loc,aW,a2,a5,a7);a0.uniform1i(this.u_maskFlag_Loc,false);}}if(this.culling){this.gl.enable(a0.CULL_FACE);}else{this.gl.disable(a0.CULL_FACE);}this.gl.enable(a0.BLEND);var a6;var aX;var aR;var aK;if(this.clipBufPre_clipContextMask!=null){a6=a0.ONE;aX=a0.ONE_MINUS_SRC_ALPHA;aR=a0.ONE;aK=a0.ONE_MINUS_SRC_ALPHA;}else{switch(aM){case b._$ms:a6=a0.ONE;aX=a0.ONE_MINUS_SRC_ALPHA;aR=a0.ONE;aK=a0.ONE_MINUS_SRC_ALPHA;break;case b._$ns:a6=a0.ONE;aX=a0.ONE;aR=a0.ZERO;aK=a0.ONE;break;case b._$_s:a6=a0.DST_COLOR;aX=a0.ONE_MINUS_SRC_ALPHA;aR=a0.ZERO;aK=a0.ONE;break;}}a0.blendEquationSeparate(a0.FUNC_ADD,a0.FUNC_ADD);a0.blendFuncSeparate(a6,aX,aR,aK);if(this.anisotropyExt){a0.texParameteri(a0.TEXTURE_2D,this.anisotropyExt.TEXTURE_MAX_ANISOTROPY_EXT,this.maxAnisotropy);}var aJ=aL.length;a0.drawElements(a0.TRIANGLES,aJ,a0.UNSIGNED_SHORT,0);a0.bindTexture(a0.TEXTURE_2D,null);};function T(aJ,aH,aI){if(aH==null){aH=aJ.createBuffer();}aJ.bindBuffer(aJ.ARRAY_BUFFER,aH);aJ.bufferData(aJ.ARRAY_BUFFER,aI,aJ.DYNAMIC_DRAW);return aH;}function L(aJ,aH,aI){if(aH==null){aH=aJ.createBuffer();}aJ.bindBuffer(aJ.ELEMENT_ARRAY_BUFFER,aH);aJ.bufferData(aJ.ELEMENT_ARRAY_BUFFER,aI,aJ.DYNAMIC_DRAW);return aH;}C.prototype._$Rs=function(){throw new Error(\"_$Rs\");};C.prototype._$Ds=function(aH){throw new Error(\"_$Ds\");};C.prototype._$K2=function(){for(var aH=0;aH<this.textures.length;aH++){var aI=this.textures[aH];if(aI!=0){this.gl._$K2(1,this.textures,aH);this.textures[aH]=null;}}};C.prototype.setTexture=function(aH,aI){this.textures[aH]=aI;};C.prototype.initShader=function(){var aH=this.gl;this.loadShaders2();this.a_position_Loc=aH.getAttribLocation(this.shaderProgram,\"a_position\");this.a_texCoord_Loc=aH.getAttribLocation(this.shaderProgram,\"a_texCoord\");this.u_matrix_Loc=aH.getUniformLocation(this.shaderProgram,\"u_mvpMatrix\");this.s_texture0_Loc=aH.getUniformLocation(this.shaderProgram,\"s_texture0\");this.u_channelFlag=aH.getUniformLocation(this.shaderProgram,\"u_channelFlag\");this.u_baseColor_Loc=aH.getUniformLocation(this.shaderProgram,\"u_baseColor\");this.u_maskFlag_Loc=aH.getUniformLocation(this.shaderProgram,\"u_maskFlag\");this.a_position_Loc_Off=aH.getAttribLocation(this.shaderProgramOff,\"a_position\");this.a_texCoord_Loc_Off=aH.getAttribLocation(this.shaderProgramOff,\"a_texCoord\");this.u_matrix_Loc_Off=aH.getUniformLocation(this.shaderProgramOff,\"u_mvpMatrix\");this.u_clipMatrix_Loc_Off=aH.getUniformLocation(this.shaderProgramOff,\"u_ClipMatrix\");this.s_texture0_Loc_Off=aH.getUniformLocation(this.shaderProgramOff,\"s_texture0\");this.s_texture1_Loc_Off=aH.getUniformLocation(this.shaderProgramOff,\"s_texture1\");this.u_channelFlag_Loc_Off=aH.getUniformLocation(this.shaderProgramOff,\"u_channelFlag\");this.u_baseColor_Loc_Off=aH.getUniformLocation(this.shaderProgramOff,\"u_baseColor\");};C.prototype.disposeShader=function(){var aH=this.gl;if(this.shaderProgram){aH.deleteProgram(this.shaderProgram);this.shaderProgram=null;}if(this.shaderProgramOff){aH.deleteProgram(this.shaderProgramOff);this.shaderProgramOff=null;}};C.prototype.compileShader=function(aJ,aN){var aM=this.gl;var aH;var aL=aN;var aK=aM.createShader(aJ);if(aK==null){q._$Ji(\"_$L0 to create shader\");return null;}aM.shaderSource(aK,aL);aM.compileShader(aK);var aH=aM.getShaderParameter(aK,aM.COMPILE_STATUS);if(!aH){var aI=aM.getShaderInfoLog(aK);q._$Ji(\"_$L0 to compile shader : \"+aI);aM.deleteShader(aK);return null;}return aK;};C.prototype.loadShaders2=function(){var aN=this.gl;this.shaderProgram=aN.createProgram();if(!this.shaderProgram){return false;}this.shaderProgramOff=aN.createProgram();if(!this.shaderProgramOff){return false;}var aK=\"attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_ClipPos;uniform mat4       u_mvpMatrix;void main(){    gl_Position = u_mvpMatrix * a_position;    v_ClipPos = u_mvpMatrix * a_position;    v_texCoord = a_texCoord;}\";var aM=\"precision mediump float;varying vec2       v_texCoord;varying vec4       v_ClipPos;uniform sampler2D  s_texture0;uniform vec4       u_channelFlag;uniform vec4       u_baseColor;uniform bool       u_maskFlag;void main(){    vec4 smpColor;     if(u_maskFlag){        float isInside =             step(u_baseColor.x, v_ClipPos.x/v_ClipPos.w)          * step(u_baseColor.y, v_ClipPos.y/v_ClipPos.w)          * step(v_ClipPos.x/v_ClipPos.w, u_baseColor.z)          * step(v_ClipPos.y/v_ClipPos.w, u_baseColor.w);        smpColor = u_channelFlag * texture2D(s_texture0 , v_texCoord).a * isInside;    }else{        smpColor = texture2D(s_texture0 , v_texCoord) * u_baseColor;    }    gl_FragColor = smpColor;}\";var aL=\"attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_ClipPos;uniform mat4       u_mvpMatrix;uniform mat4       u_ClipMatrix;void main(){    gl_Position = u_mvpMatrix * a_position;    v_ClipPos = u_ClipMatrix * a_position;    v_texCoord = a_texCoord ;}\";var aJ=\"precision mediump float ;varying vec2       v_texCoord;varying vec4       v_ClipPos;uniform sampler2D  s_texture0;uniform sampler2D  s_texture1;uniform vec4       u_channelFlag;uniform vec4       u_baseColor ;void main(){    vec4 col_formask = texture2D(s_texture0, v_texCoord) * u_baseColor;    vec4 clipMask = texture2D(s_texture1, v_ClipPos.xy / v_ClipPos.w) * u_channelFlag;    float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;    col_formask = col_formask * maskVal;    gl_FragColor = col_formask;}\";this.vertShader=this.compileShader(aN.VERTEX_SHADER,aK);if(!this.vertShader){q._$Ji(\"Vertex shader compile _$li!\");return false;}this.vertShaderOff=this.compileShader(aN.VERTEX_SHADER,aL);if(!this.vertShaderOff){q._$Ji(\"OffVertex shader compile _$li!\");return false;}this.fragShader=this.compileShader(aN.FRAGMENT_SHADER,aM);if(!this.fragShader){q._$Ji(\"Fragment shader compile _$li!\");return false;}this.fragShaderOff=this.compileShader(aN.FRAGMENT_SHADER,aJ);if(!this.fragShaderOff){q._$Ji(\"OffFragment shader compile _$li!\");return false;}aN.attachShader(this.shaderProgram,this.vertShader);aN.attachShader(this.shaderProgram,this.fragShader);aN.attachShader(this.shaderProgramOff,this.vertShaderOff);aN.attachShader(this.shaderProgramOff,this.fragShaderOff);aN.linkProgram(this.shaderProgram);aN.linkProgram(this.shaderProgramOff);var aH=aN.getProgramParameter(this.shaderProgram,aN.LINK_STATUS);if(!aH){var aI=aN.getProgramInfoLog(this.shaderProgram);q._$Ji(\"_$L0 to link program: \"+aI);if(this.vertShader){aN.deleteShader(this.vertShader);this.vertShader=0;}if(this.fragShader){aN.deleteShader(this.fragShader);this.fragShader=0;}if(this.shaderProgram){aN.deleteProgram(this.shaderProgram);this.shaderProgram=0;}if(this.vertShaderOff){aN.deleteShader(this.vertShaderOff);this.vertShaderOff=0;}if(this.fragShaderOff){aN.deleteShader(this.fragShaderOff);this.fragShaderOff=0;}if(this.shaderProgramOff){aN.deleteProgram(this.shaderProgramOff);this.shaderProgramOff=0;}return false;}return true;};C.prototype.createFramebuffer=function(){var aL=this.gl;var aK=Q.clippingMaskBufferSize;var aJ=aL.createFramebuffer();aL.bindFramebuffer(aL.FRAMEBUFFER,aJ);var aH=aL.createRenderbuffer();aL.bindRenderbuffer(aL.RENDERBUFFER,aH);aL.renderbufferStorage(aL.RENDERBUFFER,aL.RGBA4,aK,aK);aL.framebufferRenderbuffer(aL.FRAMEBUFFER,aL.COLOR_ATTACHMENT0,aL.RENDERBUFFER,aH);var aI=aL.createTexture();aL.bindTexture(aL.TEXTURE_2D,aI);aL.texImage2D(aL.TEXTURE_2D,0,aL.RGBA,aK,aK,0,aL.RGBA,aL.UNSIGNED_BYTE,null);aL.texParameteri(aL.TEXTURE_2D,aL.TEXTURE_MIN_FILTER,aL.LINEAR);aL.texParameteri(aL.TEXTURE_2D,aL.TEXTURE_MAG_FILTER,aL.LINEAR);aL.texParameteri(aL.TEXTURE_2D,aL.TEXTURE_WRAP_S,aL.CLAMP_TO_EDGE);aL.texParameteri(aL.TEXTURE_2D,aL.TEXTURE_WRAP_T,aL.CLAMP_TO_EDGE);aL.framebufferTexture2D(aL.FRAMEBUFFER,aL.COLOR_ATTACHMENT0,aL.TEXTURE_2D,aI,0);aL.bindTexture(aL.TEXTURE_2D,null);aL.bindRenderbuffer(aL.RENDERBUFFER,null);aL.bindFramebuffer(aL.FRAMEBUFFER,null);Q.fTexture[this.glno]=aI;return{framebuffer:aJ,renderbuffer:aH,texture:Q.fTexture[this.glno]};};function K(aH){if(j){return;}this._$P=new Int8Array(8);this._$R0=new DataView(this._$P.buffer);this._$3i=new Int8Array(1000);this._$hL=0;this._$v0=0;this._$S2=0;this._$Ko=new Array();this._$T=aH;this._$F=0;}K.prototype._$fP=function(){var aK=this._$ST();var aJ,aI,aH;if((aK&128)==0){return aK&255;}else{if(((aJ=this._$ST())&128)==0){return((aK&127)<<7)|(aJ&127);}else{if(((aI=this._$ST())&128)==0){return((aK&127)<<14)|((aJ&127)<<7)|(aI&255);}else{if(((aH=this._$ST())&128)==0){return((aK&127)<<21)|((aJ&127)<<14)|((aI&127)<<7)|(aH&255);}else{throw new J(\"_$L _$0P  _\");}}}}};K.prototype.getFormatVersion=function(){return this._$S2;};K.prototype._$gr=function(aH){this._$S2=aH;};K.prototype._$3L=function(){return this._$fP();};K.prototype._$mP=function(){this._$zT();this._$F+=8;return this._$T.getFloat64(this._$F-8);};K.prototype._$_T=function(){this._$zT();this._$F+=4;return this._$T.getFloat32(this._$F-4);};K.prototype._$6L=function(){this._$zT();this._$F+=4;return this._$T.getInt32(this._$F-4);};K.prototype._$ST=function(){this._$zT();return this._$T.getInt8(this._$F++);};K.prototype._$9T=function(){this._$zT();this._$F+=2;return this._$T.getInt16(this._$F-2);};K.prototype._$2T=function(){this._$zT();this._$F+=8;throw new J(\"_$L _$q read long\");};K.prototype._$po=function(){this._$zT();return this._$T.getInt8(this._$F++)!=0;};var O=true;K.prototype._$bT=function(){this._$zT();var aH=this._$3L();var aK=null;if(O){try{var aM=new ArrayBuffer(aH*2);aK=new Uint16Array(aM);for(var aJ=0;aJ<aH;++aJ){aK[aJ]=this._$T.getUint8(this._$F++);}return String.fromCharCode.apply(null,aK);}catch(aL){O=false;}}try{var aI=new Array();if(aK==null){for(var aJ=0;aJ<aH;++aJ){aI[aJ]=this._$T.getUint8(this._$F++);}}else{for(var aJ=0;aJ<aH;++aJ){aI[aJ]=aK[aJ];}}return String.fromCharCode.apply(null,aI);}catch(aL){console.log(\"read utf8 / _$rT _$L0 !! : \"+aL);}};K.prototype._$cS=function(){this._$zT();var aI=this._$3L();var aH=new Int32Array(aI);for(var aJ=0;aJ<aI;aJ++){aH[aJ]=this._$T.getInt32(this._$F);this._$F+=4;}return aH;};K.prototype._$Tb=function(){this._$zT();var aI=this._$3L();var aH=new Float32Array(aI);for(var aJ=0;aJ<aI;aJ++){aH[aJ]=this._$T.getFloat32(this._$F);this._$F+=4;}return aH;};K.prototype._$5b=function(){this._$zT();var aI=this._$3L();var aH=new Float64Array(aI);for(var aJ=0;aJ<aI;aJ++){aH[aJ]=this._$T.getFloat64(this._$F);this._$F+=8;}return aH;};K.prototype._$nP=function(){return this._$Jb(-1);};K.prototype._$Jb=function(aJ){this._$zT();if(aJ<0){aJ=this._$3L();}if(aJ==ay._$7P){var aH=this._$6L();if(0<=aH&&aH<this._$Ko.length){return this._$Ko[aH];}else{throw new J(\"_$sL _$4i @_$m0\");}}else{var aI=this._$4b(aJ);this._$Ko.push(aI);return aI;}};K.prototype._$4b=function(aN){if(aN==0){return null;}if(aN==50){var aK=this._$bT();var aI=Z.getID(aK);return aI;}else{if(aN==51){var aK=this._$bT();var aI=n.getID(aK);return aI;}else{if(aN==134){var aK=this._$bT();var aI=i.getID(aK);return aI;}else{if(aN==60){var aK=this._$bT();var aI=z.getID(aK);return aI;}}}}if(aN>=48){var aL=ay._$9o(aN);if(aL!=null){aL._$F0(this);return aL;}else{return null;}}switch(aN){case 1:return this._$bT();case 10:var aM=this._$6L();return new I(aM,true);case 11:return new av(this._$mP(),this._$mP(),this._$mP(),this._$mP());case 12:return new av(this._$_T(),this._$_T(),this._$_T(),this._$_T());case 13:return new e(this._$mP(),this._$mP());case 14:return new e(this._$_T(),this._$_T());case 15:var aH=this._$3L();var aI=new Array(aH);for(var aJ=0;aJ<aH;aJ++){aI[aJ]=this._$nP();}return aI;case 17:var aI=new aD(this._$mP(),this._$mP(),this._$mP(),this._$mP(),this._$mP(),this._$mP());return aI;case 21:return new F(this._$6L(),this._$6L(),this._$6L(),this._$6L());case 22:return new k(this._$6L(),this._$6L());case 23:throw new Error(\"_$L _$ro \");case 16:case 25:return this._$cS();case 26:return this._$5b();case 27:return this._$Tb();case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 18:case 19:case 20:case 24:case 28:throw new J(\"_$6 _$q : _$nP() of 2-9 ,18,19,20,24,28 : \"+aN);default:throw new J(\"_$6 _$q : _$nP() NO _$i : \"+aN);}};K.prototype._$8L=function(){if(this._$hL==0){this._$v0=this._$ST();}else{if(this._$hL==8){this._$v0=this._$ST();this._$hL=0;}}return((this._$v0>>(7-this._$hL++))&1)==1;};K.prototype._$zT=function(){if(this._$hL!=0){this._$hL=0;}};function ai(){}ai.prototype._$wP=function(aM,aI,aK){for(var aL=0;aL<aK;aL++){for(var aH=0;aH<aI;aH++){var aJ=2*(aH+aL*aI);console.log(\"(% 7.3f , % 7.3f) , \",aM[aJ],aM[aJ+1]);}console.log(\"\\n\");}console.log(\"\\n\");};function aC(){}aC._$2S=Math.PI/180;aC._$bS=(Math.PI/180);aC._$wS=180/Math.PI;aC._$NS=(180/Math.PI);aC.PI_F=Math.PI;aC._$kT=[0,0.012368,0.024734,0.037097,0.049454,0.061803,0.074143,0.086471,0.098786,0.111087,0.12337,0.135634,0.147877,0.160098,0.172295,0.184465,0.196606,0.208718,0.220798,0.232844,0.244854,0.256827,0.268761,0.280654,0.292503,0.304308,0.316066,0.327776,0.339436,0.351044,0.362598,0.374097,0.385538,0.396921,0.408243,0.419502,0.430697,0.441826,0.452888,0.463881,0.474802,0.485651,0.496425,0.507124,0.517745,0.528287,0.538748,0.549126,0.559421,0.56963,0.579752,0.589785,0.599728,0.609579,0.619337,0.629,0.638567,0.648036,0.657406,0.666676,0.675843,0.684908,0.693867,0.70272,0.711466,0.720103,0.72863,0.737045,0.745348,0.753536,0.76161,0.769566,0.777405,0.785125,0.792725,0.800204,0.807561,0.814793,0.821901,0.828884,0.835739,0.842467,0.849066,0.855535,0.861873,0.868079,0.874153,0.880093,0.885898,0.891567,0.897101,0.902497,0.907754,0.912873,0.917853,0.922692,0.92739,0.931946,0.936359,0.940629,0.944755,0.948737,0.952574,0.956265,0.959809,0.963207,0.966457,0.96956,0.972514,0.97532,0.977976,0.980482,0.982839,0.985045,0.987101,0.989006,0.990759,0.992361,0.993811,0.995109,0.996254,0.997248,0.998088,0.998776,0.999312,0.999694,0.999924,1];aC._$92=function(aK,aI){var aH=Math.atan2(aK[1],aK[0]);var aJ=Math.atan2(aI[1],aI[0]);return aC._$tS(aH,aJ);};aC._$tS=function(aI,aH){var aJ=aI-aH;while(aJ<-Math.PI){aJ+=2*Math.PI;}while(aJ>Math.PI){aJ-=2*Math.PI;}return aJ;};aC._$9=function(aH){return Math.sin(aH);};aC.fcos=function(aH){return Math.cos(aH);};function aB(aH){if(j){return;}this._$e0=null;this._$IP=null;this._$Us=null;this._$7s=null;this._$IS=[false];this._$VS=null;this._$AT=true;this.baseOpacity=1;this.clipBufPre_clipContext=null;this._$e0=aH;}aB.prototype._$u2=function(){return this._$IS[0];};aB.prototype._$yo=function(){return this._$AT&&!this._$IS[0];};aB.prototype._$GT=function(){return this._$e0;};function r(){}r._$W2=0;r.SYSTEM_INFO=null;r.USER_AGENT=navigator.userAgent;r.isIPhone=function(){if(!r.SYSTEM_INFO){r.setup();}return r.SYSTEM_INFO._isIPhone;};r.isIOS=function(){if(!r.SYSTEM_INFO){r.setup();}return r.SYSTEM_INFO._isIPhone||r.SYSTEM_INFO._isIPad;};r.isAndroid=function(){if(!r.SYSTEM_INFO){r.setup();}return r.SYSTEM_INFO._isAndroid;};r.getOSVersion=function(){if(!r.SYSTEM_INFO){r.setup();}return r.SYSTEM_INFO.version;};r.getOS=function(){if(!r.SYSTEM_INFO){r.setup();}if(r.SYSTEM_INFO._isIPhone||r.SYSTEM_INFO._isIPad){return\"iOS\";}if(r.SYSTEM_INFO._isAndroid){return\"Android\";}else{return\"_$Q0 OS\";}};r.setup=function(){var aK=r.USER_AGENT;function aI(aO,aR){var aN=aO.substring(aR).split(/[ _,;\\.]/);var aQ=0;for(var aM=0;aM<=2;aM++){if(isNaN(aN[aM])){break;}var aP=parseInt(aN[aM]);if(aP<0||aP>999){q._$li(\"err : \"+aP+\" @UtHtml5.setup()\");aQ=0;break;}aQ+=aP*Math.pow(1000,(2-aM));}return aQ;}var aL;var aH;var aJ=r.SYSTEM_INFO={userAgent:aK};if((aL=aK.indexOf(\"iPhone OS \"))>=0){aJ.os=\"iPhone\";aJ._isIPhone=true;aJ.version=aI(aK,aL+\"iPhone OS \".length);}else{if((aL=aK.indexOf(\"iPad\"))>=0){aL=aK.indexOf(\"CPU OS\");if(aL<0){q._$li(\" err : \"+aK+\" @UtHtml5.setup()\");return;}aJ.os=\"iPad\";aJ._isIPad=true;aJ.version=aI(aK,aL+\"CPU OS \".length);}else{if((aL=aK.indexOf(\"Android\"))>=0){aJ.os=\"Android\";aJ._isAndroid=true;aJ.version=aI(aK,aL+\"Android \".length);}else{aJ.os=\"-\";aJ.version=-1;}}}};window.UtSystem=P;window.UtDebug=q;window.LDTransform=am;window.LDGL=au;window.Live2D=Q;window.Live2DModelWebGL=l;window.Live2DModelJS=v;window.Live2DMotion=ao;window.MotionQueueManager=V;window.PhysicsHair=u;window.AMotion=ah;window.PartsDataID=i;window.DrawDataID=Z;window.BaseDataID=n;window.ParamID=z;Q.init();var j=false;})();","import Dexie,{ Table } from 'dexie';\r\n\r\nexport interface MocJson {\r\n    id?: number;\r\n    name :string;\r\n    key: string;\r\n    value: ArrayBuffer;\r\n}\r\n\r\nexport class DbCache extends Dexie {\r\n    mocJson! :Table<MocJson>\r\n    constructor(){\r\n        super('Live2D-JWF');\r\n        this.version(1).stores({\r\n            mocJson: '++id, [name+key]' // Primary key and indexed props\r\n        });\r\n    }\r\n}\r\n\r\nexport function ClearDb(){\r\n    db.delete();\r\n}\r\n\r\nexport const db = new DbCache();","/**\r\n * Copyright(c) Live2D Inc. All rights reserved.\r\n *\r\n * Use of this source code is governed by the Live2D Open Software license\r\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\r\n */\r\n\r\n/**\r\n * @brief パラメータIDのデフォルト値を保持する定数<br>\r\n *         デフォルト値の仕様は以下のマニュアルに基づく<br>\r\n *         https://docs.live2d.com/cubism-editor-manual/standard-parametor-list/\r\n */\r\nexport const CubismDefaultParameterId = Object.freeze<Record<string, string>>({\r\n  // パーツID\r\n  HitAreaPrefix: 'HitArea',\r\n  HitAreaHead: 'Head',\r\n  HitAreaBody: 'Body',\r\n  PartsIdCore: 'Parts01Core',\r\n  PartsArmPrefix: 'Parts01Arm_',\r\n  PartsArmLPrefix: 'Parts01ArmL_',\r\n  PartsArmRPrefix: 'Parts01ArmR_',\r\n  // パラメータID\r\n  ParamAngleX: 'ParamAngleX',\r\n  ParamAngleY: 'ParamAngleY',\r\n  ParamAngleZ: 'ParamAngleZ',\r\n  ParamEyeLOpen: 'ParamEyeLOpen',\r\n  ParamEyeLSmile: 'ParamEyeLSmile',\r\n  ParamEyeROpen: 'ParamEyeROpen',\r\n  ParamEyeRSmile: 'ParamEyeRSmile',\r\n  ParamEyeBallX: 'ParamEyeBallX',\r\n  ParamEyeBallY: 'ParamEyeBallY',\r\n  ParamEyeBallForm: 'ParamEyeBallForm',\r\n  ParamBrowLY: 'ParamBrowLY',\r\n  ParamBrowRY: 'ParamBrowRY',\r\n  ParamBrowLX: 'ParamBrowLX',\r\n  ParamBrowRX: 'ParamBrowRX',\r\n  ParamBrowLAngle: 'ParamBrowLAngle',\r\n  ParamBrowRAngle: 'ParamBrowRAngle',\r\n  ParamBrowLForm: 'ParamBrowLForm',\r\n  ParamBrowRForm: 'ParamBrowRForm',\r\n  ParamMouthForm: 'ParamMouthForm',\r\n  ParamMouthOpenY: 'ParamMouthOpenY',\r\n  ParamCheek: 'ParamCheek',\r\n  ParamBodyAngleX: 'ParamBodyAngleX',\r\n  ParamBodyAngleY: 'ParamBodyAngleY',\r\n  ParamBodyAngleZ: 'ParamBodyAngleZ',\r\n  ParamBreath: 'ParamBreath',\r\n  ParamArmLA: 'ParamArmLA',\r\n  ParamArmRA: 'ParamArmRA',\r\n  ParamArmLB: 'ParamArmLB',\r\n  ParamArmRB: 'ParamArmRB',\r\n  ParamHandL: 'ParamHandL',\r\n  ParamHandR: 'ParamHandR',\r\n  ParamHairFront: 'ParamHairFront',\r\n  ParamHairSide: 'ParamHairSide',\r\n  ParamHairBack: 'ParamHairBack',\r\n  ParamHairFluffy: 'ParamHairFluffy',\r\n  ParamShoulderY: 'ParamShoulderY',\r\n  ParamBustX: 'ParamBustX',\r\n  ParamBustY: 'ParamBustY',\r\n  ParamBaseX: 'ParamBaseX',\r\n  ParamBaseY: 'ParamBaseY',\r\n  ParamNONE: 'NONE:',\r\n});\r\n\r\n// Namespace definition for compatibility.\r\nimport * as $ from './cubismdefaultparameterid';\r\n// eslint-disable-next-line @typescript-eslint/no-namespace\r\nexport namespace Live2DCubismFramework {\r\n  export const HitAreaBody = $.CubismDefaultParameterId.HitAreaBody;\r\n  export const HitAreaHead = $.CubismDefaultParameterId.HitAreaHead;\r\n  export const HitAreaPrefix = $.CubismDefaultParameterId.HitAreaPrefix;\r\n  export const ParamAngleX = $.CubismDefaultParameterId.ParamAngleX;\r\n  export const ParamAngleY = $.CubismDefaultParameterId.ParamAngleY;\r\n  export const ParamAngleZ = $.CubismDefaultParameterId.ParamAngleZ;\r\n  export const ParamArmLA = $.CubismDefaultParameterId.ParamArmLA;\r\n  export const ParamArmLB = $.CubismDefaultParameterId.ParamArmLB;\r\n  export const ParamArmRA = $.CubismDefaultParameterId.ParamArmRA;\r\n  export const ParamArmRB = $.CubismDefaultParameterId.ParamArmRB;\r\n  export const ParamBaseX = $.CubismDefaultParameterId.ParamBaseX;\r\n  export const ParamBaseY = $.CubismDefaultParameterId.ParamBaseY;\r\n  export const ParamBodyAngleX = $.CubismDefaultParameterId.ParamBodyAngleX;\r\n  export const ParamBodyAngleY = $.CubismDefaultParameterId.ParamBodyAngleY;\r\n  export const ParamBodyAngleZ = $.CubismDefaultParameterId.ParamBodyAngleZ;\r\n  export const ParamBreath = $.CubismDefaultParameterId.ParamBreath;\r\n  export const ParamBrowLAngle = $.CubismDefaultParameterId.ParamBrowLAngle;\r\n  export const ParamBrowLForm = $.CubismDefaultParameterId.ParamBrowLForm;\r\n  export const ParamBrowLX = $.CubismDefaultParameterId.ParamBrowLX;\r\n  export const ParamBrowLY = $.CubismDefaultParameterId.ParamBrowLY;\r\n  export const ParamBrowRAngle = $.CubismDefaultParameterId.ParamBrowRAngle;\r\n  export const ParamBrowRForm = $.CubismDefaultParameterId.ParamBrowRForm;\r\n  export const ParamBrowRX = $.CubismDefaultParameterId.ParamBrowRX;\r\n  export const ParamBrowRY = $.CubismDefaultParameterId.ParamBrowRY;\r\n  export const ParamBustX = $.CubismDefaultParameterId.ParamBustX;\r\n  export const ParamBustY = $.CubismDefaultParameterId.ParamBustY;\r\n  export const ParamCheek = $.CubismDefaultParameterId.ParamCheek;\r\n  export const ParamEyeBallForm = $.CubismDefaultParameterId.ParamEyeBallForm;\r\n  export const ParamEyeBallX = $.CubismDefaultParameterId.ParamEyeBallX;\r\n  export const ParamEyeBallY = $.CubismDefaultParameterId.ParamEyeBallY;\r\n  export const ParamEyeLOpen = $.CubismDefaultParameterId.ParamEyeLOpen;\r\n  export const ParamEyeLSmile = $.CubismDefaultParameterId.ParamEyeLSmile;\r\n  export const ParamEyeROpen = $.CubismDefaultParameterId.ParamEyeROpen;\r\n  export const ParamEyeRSmile = $.CubismDefaultParameterId.ParamEyeRSmile;\r\n  export const ParamHairBack = $.CubismDefaultParameterId.ParamHairBack;\r\n  export const ParamHairFluffy = $.CubismDefaultParameterId.ParamHairFluffy;\r\n  export const ParamHairFront = $.CubismDefaultParameterId.ParamHairFront;\r\n  export const ParamHairSide = $.CubismDefaultParameterId.ParamHairSide;\r\n  export const ParamHandL = $.CubismDefaultParameterId.ParamHandL;\r\n  export const ParamHandR = $.CubismDefaultParameterId.ParamHandR;\r\n  export const ParamMouthForm = $.CubismDefaultParameterId.ParamMouthForm;\r\n  export const ParamMouthOpenY = $.CubismDefaultParameterId.ParamMouthOpenY;\r\n  export const ParamNONE = $.CubismDefaultParameterId.ParamNONE;\r\n  export const ParamShoulderY = $.CubismDefaultParameterId.ParamShoulderY;\r\n  export const PartsArmLPrefix = $.CubismDefaultParameterId.PartsArmLPrefix;\r\n  export const PartsArmPrefix = $.CubismDefaultParameterId.PartsArmPrefix;\r\n  export const PartsArmRPrefix = $.CubismDefaultParameterId.PartsArmRPrefix;\r\n  export const PartsIdCore = $.CubismDefaultParameterId.PartsIdCore;\r\n}\r\n","/**\r\n * Copyright(c) Live2D Inc. All rights reserved.\r\n *\r\n * Use of this source code is governed by the Live2D Open Software license\r\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\r\n */\r\n\r\n//========================================================\r\n//  ログ出力関数の設定\r\n//========================================================\r\n\r\n//---------- ログ出力レベル 選択項目 定義 ----------\r\n// 詳細ログ出力設定\r\nexport const CSM_LOG_LEVEL_VERBOSE = 0;\r\n// デバッグログ出力設定\r\nexport const CSM_LOG_LEVEL_DEBUG = 1;\r\n// Infoログ出力設定\r\nexport const CSM_LOG_LEVEL_INFO = 2;\r\n// 警告ログ出力設定\r\nexport const CSM_LOG_LEVEL_WARNING = 3;\r\n// エラーログ出力設定\r\nexport const CSM_LOG_LEVEL_ERROR = 4;\r\n// ログ出力オフ設定\r\nexport const CSM_LOG_LEVEL_OFF = 5;\r\n\r\n/**\r\n * ログ出力レベル設定。\r\n *\r\n * 強制的にログ出力レベルを変える時に定義を有効にする。\r\n * CSM_LOG_LEVEL_VERBOSE ～ CSM_LOG_LEVEL_OFF を選択する。\r\n */\r\nexport const CSM_LOG_LEVEL: number = CSM_LOG_LEVEL_VERBOSE;\r\n","/**\r\n * Copyright(c) Live2D Inc. All rights reserved.\r\n *\r\n * Use of this source code is governed by the Live2D Open Software license\r\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\r\n */\r\n\r\nimport { ICubismModelSetting } from './icubismmodelsetting';\r\nimport { CubismIdHandle } from './id/cubismid';\r\nimport { CubismFramework } from './live2dcubismframework';\r\nimport { csmMap, iterator } from './type/csmmap';\r\nimport { csmVector } from './type/csmvector';\r\nimport { CubismJson, Value } from './utils/cubismjson';\r\n\r\n/**\r\n * Model3Jsonのキー文字列\r\n */\r\n\r\n// JSON Keys\r\nconst Version = 'Version';\r\nconst FileReferences = 'FileReferences';\r\nconst Groups = 'Groups';\r\nconst Layout = 'Layout';\r\nconst HitAreas = 'HitAreas';\r\n\r\nconst Moc = 'Moc';\r\nconst Textures = 'Textures';\r\nconst Physics = 'Physics';\r\nconst Pose = 'Pose';\r\nconst Expressions = 'Expressions';\r\nconst Motions = 'Motions';\r\n\r\nconst UserData = 'UserData';\r\nconst Name = 'Name';\r\nconst FilePath = 'File';\r\nconst Id = 'Id';\r\nconst Ids = 'Ids';\r\nconst Target = 'Target';\r\n\r\n// Motions\r\nconst Idle = 'Idle';\r\nconst TapBody = 'TapBody';\r\nconst PinchIn = 'PinchIn';\r\nconst PinchOut = 'PinchOut';\r\nconst Shake = 'Shake';\r\nconst FlickHead = 'FlickHead';\r\nconst Parameter = 'Parameter';\r\n\r\nconst SoundPath = 'Sound';\r\nconst FadeInTime = 'FadeInTime';\r\nconst FadeOutTime = 'FadeOutTime';\r\n\r\n// Layout\r\nconst CenterX = 'CenterX';\r\nconst CenterY = 'CenterY';\r\nconst X = 'X';\r\nconst Y = 'Y';\r\nconst Width = 'Width';\r\nconst Height = 'Height';\r\n\r\nconst LipSync = 'LipSync';\r\nconst EyeBlink = 'EyeBlink';\r\n\r\nconst InitParameter = 'init_param';\r\nconst InitPartsVisible = 'init_parts_visible';\r\nconst Val = 'val';\r\n\r\nenum FrequestNode {\r\n  FrequestNode_Groups, // getRoot().getValueByString(Groups)\r\n  FrequestNode_Moc, // getRoot().getValueByString(FileReferences).getValueByString(Moc)\r\n  FrequestNode_Motions, // getRoot().getValueByString(FileReferences).getValueByString(Motions)\r\n  FrequestNode_Expressions, // getRoot().getValueByString(FileReferences).getValueByString(Expressions)\r\n  FrequestNode_Textures, // getRoot().getValueByString(FileReferences).getValueByString(Textures)\r\n  FrequestNode_Physics, // getRoot().getValueByString(FileReferences).getValueByString(Physics)\r\n  FrequestNode_Pose, // getRoot().getValueByString(FileReferences).getValueByString(Pose)\r\n  FrequestNode_HitAreas, // getRoot().getValueByString(HitAreas)\r\n}\r\n\r\n/**\r\n * Model3Jsonパーサー\r\n *\r\n * model3.jsonファイルをパースして値を取得する\r\n */\r\nexport class CubismModelSettingJson extends ICubismModelSetting {\r\n  /**\r\n   * 引数付きコンストラクタ\r\n   *\r\n   * @param buffer    Model3Jsonをバイト配列として読み込んだデータバッファ\r\n   * @param size      Model3Jsonのデータサイズ\r\n   */\r\n  public constructor(buffer: ArrayBuffer, size: number) {\r\n    super();\r\n    this._json = CubismJson.create(buffer, size);\r\n\r\n    if (this._json) {\r\n      this._jsonValue = new csmVector<Value>();\r\n\r\n      // 順番はenum FrequestNodeと一致させる\r\n      this._jsonValue.pushBack(this._json.getRoot().getValueByString(Groups));\r\n      this._jsonValue.pushBack(\r\n        this._json\r\n          .getRoot()\r\n          .getValueByString(FileReferences)\r\n          .getValueByString(Moc)\r\n      );\r\n      this._jsonValue.pushBack(\r\n        this._json\r\n          .getRoot()\r\n          .getValueByString(FileReferences)\r\n          .getValueByString(Motions)\r\n      );\r\n      this._jsonValue.pushBack(\r\n        this._json\r\n          .getRoot()\r\n          .getValueByString(FileReferences)\r\n          .getValueByString(Expressions)\r\n      );\r\n      this._jsonValue.pushBack(\r\n        this._json\r\n          .getRoot()\r\n          .getValueByString(FileReferences)\r\n          .getValueByString(Textures)\r\n      );\r\n      this._jsonValue.pushBack(\r\n        this._json\r\n          .getRoot()\r\n          .getValueByString(FileReferences)\r\n          .getValueByString(Physics)\r\n      );\r\n      this._jsonValue.pushBack(\r\n        this._json\r\n          .getRoot()\r\n          .getValueByString(FileReferences)\r\n          .getValueByString(Pose)\r\n      );\r\n      this._jsonValue.pushBack(this._json.getRoot().getValueByString(HitAreas));\r\n    }\r\n  }\r\n\r\n  /**\r\n   * デストラクタ相当の処理\r\n   */\r\n  public release(): void {\r\n    CubismJson.delete(this._json);\r\n\r\n    this._jsonValue = null;\r\n  }\r\n\r\n  /**\r\n   * CubismJsonオブジェクトを取得する\r\n   *\r\n   * @return CubismJson\r\n   */\r\n  public GetJson(): CubismJson {\r\n    return this._json;\r\n  }\r\n\r\n  /**\r\n   * Mocファイルの名前を取得する\r\n   * @return Mocファイルの名前\r\n   */\r\n  public getModelFileName(): string {\r\n    if (!this.isExistModelFile()) {\r\n      return '';\r\n    }\r\n    return this._jsonValue.at(FrequestNode.FrequestNode_Moc).getRawString();\r\n  }\r\n\r\n  /**\r\n   * モデルが使用するテクスチャの数を取得する\r\n   * テクスチャの数\r\n   */\r\n  public getTextureCount(): number {\r\n    if (!this.isExistTextureFiles()) {\r\n      return 0;\r\n    }\r\n\r\n    return this._jsonValue.at(FrequestNode.FrequestNode_Textures).getSize();\r\n  }\r\n\r\n  /**\r\n   * テクスチャが配置されたディレクトリの名前を取得する\r\n   * @return テクスチャが配置されたディレクトリの名前\r\n   */\r\n  public getTextureDirectory(): string {\r\n    const texturePath = this._jsonValue\r\n      .at(FrequestNode.FrequestNode_Textures)\r\n      .getValueByIndex(0)\r\n      .getRawString();\r\n\r\n    const pathArray = texturePath.split('/');\r\n    // 最後の要素はテクスチャ名なので不要\r\n    const arrayLength = pathArray.length - 1;\r\n    let textureDirectoryStr = '';\r\n\r\n    // 分割したパスを結合\r\n    for (let i = 0; i < arrayLength; i++) {\r\n      textureDirectoryStr += pathArray[i];\r\n      if (i < arrayLength - 1) {\r\n        textureDirectoryStr += '/';\r\n      }\r\n    }\r\n\r\n    return textureDirectoryStr;\r\n  }\r\n\r\n  /**\r\n   * モデルが使用するテクスチャの名前を取得する\r\n   * @param index 配列のインデックス値\r\n   * @return テクスチャの名前\r\n   */\r\n  public getTextureFileName(index: number): string {\r\n    return this._jsonValue\r\n      .at(FrequestNode.FrequestNode_Textures)\r\n      .getValueByIndex(index)\r\n      .getRawString();\r\n  }\r\n\r\n  /**\r\n   * モデルに設定された当たり判定の数を取得する\r\n   * @return モデルに設定された当たり判定の数\r\n   */\r\n  public getHitAreasCount(): number {\r\n    if (!this.isExistHitAreas()) {\r\n      return 0;\r\n    }\r\n\r\n    return this._jsonValue.at(FrequestNode.FrequestNode_HitAreas).getSize();\r\n  }\r\n\r\n  /**\r\n   * 当たり判定に設定されたIDを取得する\r\n   *\r\n   * @param index 配列のindex\r\n   * @return 当たり判定に設定されたID\r\n   */\r\n  public getHitAreaId(index: number): CubismIdHandle {\r\n    return CubismFramework.getIdManager().getId(\r\n      this._jsonValue\r\n        .at(FrequestNode.FrequestNode_HitAreas)\r\n        .getValueByIndex(index)\r\n        .getValueByString(Id)\r\n        .getRawString()\r\n    );\r\n  }\r\n\r\n  /**\r\n   * 当たり判定に設定された名前を取得する\r\n   * @param index 配列のインデックス値\r\n   * @return 当たり判定に設定された名前\r\n   */\r\n  public getHitAreaName(index: number): string {\r\n    return this._jsonValue\r\n      .at(FrequestNode.FrequestNode_HitAreas)\r\n      .getValueByIndex(index)\r\n      .getValueByString(Name)\r\n      .getRawString();\r\n  }\r\n\r\n  /**\r\n   * 物理演算設定ファイルの名前を取得する\r\n   * @return 物理演算設定ファイルの名前\r\n   */\r\n  public getPhysicsFileName(): string {\r\n    if (!this.isExistPhysicsFile()) {\r\n      return '';\r\n    }\r\n\r\n    return this._jsonValue.at(FrequestNode.FrequestNode_Physics).getRawString();\r\n  }\r\n\r\n  /**\r\n   * パーツ切り替え設定ファイルの名前を取得する\r\n   * @return パーツ切り替え設定ファイルの名前\r\n   */\r\n  public getPoseFileName(): string {\r\n    if (!this.isExistPoseFile()) {\r\n      return '';\r\n    }\r\n\r\n    return this._jsonValue.at(FrequestNode.FrequestNode_Pose).getRawString();\r\n  }\r\n\r\n  /**\r\n   * 表情設定ファイルの数を取得する\r\n   * @return 表情設定ファイルの数\r\n   */\r\n  public getExpressionCount(): number {\r\n    if (!this.isExistExpressionFile()) {\r\n      return 0;\r\n    }\r\n\r\n    return this._jsonValue.at(FrequestNode.FrequestNode_Expressions).getSize();\r\n  }\r\n\r\n  /**\r\n   * 表情設定ファイルを識別する名前（別名）を取得する\r\n   * @param index 配列のインデックス値\r\n   * @return 表情の名前\r\n   */\r\n  public getExpressionName(index: number): string {\r\n    return this._jsonValue\r\n      .at(FrequestNode.FrequestNode_Expressions)\r\n      .getValueByIndex(index)\r\n      .getValueByString(Name)\r\n      .getRawString();\r\n  }\r\n\r\n  /**\r\n   * 表情設定ファイルの名前を取得する\r\n   * @param index 配列のインデックス値\r\n   * @return 表情設定ファイルの名前\r\n   */\r\n  public getExpressionFileName(index: number): string {\r\n    return this._jsonValue\r\n      .at(FrequestNode.FrequestNode_Expressions)\r\n      .getValueByIndex(index)\r\n      .getValueByString(FilePath)\r\n      .getRawString();\r\n  }\r\n\r\n  /**\r\n   * モーショングループの数を取得する\r\n   * @return モーショングループの数\r\n   */\r\n  public getMotionGroupCount(): number {\r\n    if (!this.isExistMotionGroups()) {\r\n      return 0;\r\n    }\r\n\r\n    return this._jsonValue\r\n      .at(FrequestNode.FrequestNode_Motions)\r\n      .getKeys()\r\n      .getSize();\r\n  }\r\n\r\n  /**\r\n   * モーショングループの名前を取得する\r\n   * @param index 配列のインデックス値\r\n   * @return モーショングループの名前\r\n   */\r\n  public getMotionGroupName(index: number): string {\r\n    if (!this.isExistMotionGroups()) {\r\n      return null;\r\n    }\r\n\r\n    return this._jsonValue\r\n      .at(FrequestNode.FrequestNode_Motions)\r\n      .getKeys()\r\n      .at(index);\r\n  }\r\n\r\n  /**\r\n   * モーショングループに含まれるモーションの数を取得する\r\n   * @param groupName モーショングループの名前\r\n   * @return モーショングループの数\r\n   */\r\n  public getMotionCount(groupName: string): number {\r\n    if (!this.isExistMotionGroupName(groupName)) {\r\n      return 0;\r\n    }\r\n\r\n    return this._jsonValue\r\n      .at(FrequestNode.FrequestNode_Motions)\r\n      .getValueByString(groupName)\r\n      .getSize();\r\n  }\r\n\r\n  /**\r\n   * グループ名とインデックス値からモーションファイル名を取得する\r\n   * @param groupName モーショングループの名前\r\n   * @param index     配列のインデックス値\r\n   * @return モーションファイルの名前\r\n   */\r\n  public getMotionFileName(groupName: string, index: number): string {\r\n    if (!this.isExistMotionGroupName(groupName)) {\r\n      return '';\r\n    }\r\n\r\n    return this._jsonValue\r\n      .at(FrequestNode.FrequestNode_Motions)\r\n      .getValueByString(groupName)\r\n      .getValueByIndex(index)\r\n      .getValueByString(FilePath)\r\n      .getRawString();\r\n  }\r\n\r\n  /**\r\n   * モーションに対応するサウンドファイルの名前を取得する\r\n   * @param groupName モーショングループの名前\r\n   * @param index 配列のインデックス値\r\n   * @return サウンドファイルの名前\r\n   */\r\n  public getMotionSoundFileName(groupName: string, index: number): string {\r\n    if (!this.isExistMotionSoundFile(groupName, index)) {\r\n      return '';\r\n    }\r\n\r\n    return this._jsonValue\r\n      .at(FrequestNode.FrequestNode_Motions)\r\n      .getValueByString(groupName)\r\n      .getValueByIndex(index)\r\n      .getValueByString(SoundPath)\r\n      .getRawString();\r\n  }\r\n\r\n  /**\r\n   * モーション開始時のフェードイン処理時間を取得する\r\n   * @param groupName モーショングループの名前\r\n   * @param index 配列のインデックス値\r\n   * @return フェードイン処理時間[秒]\r\n   */\r\n  public getMotionFadeInTimeValue(groupName: string, index: number): number {\r\n    if (!this.isExistMotionFadeIn(groupName, index)) {\r\n      return -1.0;\r\n    }\r\n\r\n    return this._jsonValue\r\n      .at(FrequestNode.FrequestNode_Motions)\r\n      .getValueByString(groupName)\r\n      .getValueByIndex(index)\r\n      .getValueByString(FadeInTime)\r\n      .toFloat();\r\n  }\r\n\r\n  /**\r\n   * モーション終了時のフェードアウト処理時間を取得する\r\n   * @param groupName モーショングループの名前\r\n   * @param index 配列のインデックス値\r\n   * @return フェードアウト処理時間[秒]\r\n   */\r\n  public getMotionFadeOutTimeValue(groupName: string, index: number): number {\r\n    if (!this.isExistMotionFadeOut(groupName, index)) {\r\n      return -1.0;\r\n    }\r\n\r\n    return this._jsonValue\r\n      .at(FrequestNode.FrequestNode_Motions)\r\n      .getValueByString(groupName)\r\n      .getValueByIndex(index)\r\n      .getValueByString(FadeOutTime)\r\n      .toFloat();\r\n  }\r\n\r\n  /**\r\n   * ユーザーデータのファイル名を取得する\r\n   * @return ユーザーデータのファイル名\r\n   */\r\n  public getUserDataFile(): string {\r\n    if (!this.isExistUserDataFile()) {\r\n      return '';\r\n    }\r\n\r\n    return this._json\r\n      .getRoot()\r\n      .getValueByString(FileReferences)\r\n      .getValueByString(UserData)\r\n      .getRawString();\r\n  }\r\n\r\n  /**\r\n   * レイアウト情報を取得する\r\n   * @param outLayoutMap csmMapクラスのインスタンス\r\n   * @return true レイアウト情報が存在する\r\n   * @return false レイアウト情報が存在しない\r\n   */\r\n  public getLayoutMap(outLayoutMap: csmMap<string, number>): boolean {\r\n    // 存在しない要素にアクセスするとエラーになるためValueがnullの場合はnullを代入する\r\n    const map: csmMap<string, Value> = this._json\r\n      .getRoot()\r\n      .getValueByString(Layout)\r\n      .getMap();\r\n\r\n    if (map == null) {\r\n      return false;\r\n    }\r\n\r\n    let ret = false;\r\n\r\n    for (\r\n      const ite: iterator<string, Value> = map.begin();\r\n      ite.notEqual(map.end());\r\n      ite.preIncrement()\r\n    ) {\r\n      outLayoutMap.setValue(ite.ptr().first, ite.ptr().second.toFloat());\r\n      ret = true;\r\n    }\r\n\r\n    return ret;\r\n  }\r\n\r\n  /**\r\n   * 目パチに関連付けられたパラメータの数を取得する\r\n   * @return 目パチに関連付けられたパラメータの数\r\n   */\r\n  public getEyeBlinkParameterCount(): number {\r\n    if (!this.isExistEyeBlinkParameters()) {\r\n      return 0;\r\n    }\r\n\r\n    let num = 0;\r\n    for (\r\n      let i = 0;\r\n      i < this._jsonValue.at(FrequestNode.FrequestNode_Groups).getSize();\r\n      i++\r\n    ) {\r\n      const refI: Value = this._jsonValue\r\n        .at(FrequestNode.FrequestNode_Groups)\r\n        .getValueByIndex(i);\r\n      if (refI.isNull() || refI.isError()) {\r\n        continue;\r\n      }\r\n\r\n      if (refI.getValueByString(Name).getRawString() == EyeBlink) {\r\n        num = refI.getValueByString(Ids).getVector().getSize();\r\n        break;\r\n      }\r\n    }\r\n\r\n    return num;\r\n  }\r\n\r\n  /**\r\n   * 目パチに関連付けられたパラメータのIDを取得する\r\n   * @param index 配列のインデックス値\r\n   * @return パラメータID\r\n   */\r\n  public getEyeBlinkParameterId(index: number): CubismIdHandle {\r\n    if (!this.isExistEyeBlinkParameters()) {\r\n      return null;\r\n    }\r\n\r\n    for (\r\n      let i = 0;\r\n      i < this._jsonValue.at(FrequestNode.FrequestNode_Groups).getSize();\r\n      i++\r\n    ) {\r\n      const refI: Value = this._jsonValue\r\n        .at(FrequestNode.FrequestNode_Groups)\r\n        .getValueByIndex(i);\r\n      if (refI.isNull() || refI.isError()) {\r\n        continue;\r\n      }\r\n\r\n      if (refI.getValueByString(Name).getRawString() == EyeBlink) {\r\n        return CubismFramework.getIdManager().getId(\r\n          refI.getValueByString(Ids).getValueByIndex(index).getRawString()\r\n        );\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * リップシンクに関連付けられたパラメータの数を取得する\r\n   * @return リップシンクに関連付けられたパラメータの数\r\n   */\r\n  public getLipSyncParameterCount(): number {\r\n    if (!this.isExistLipSyncParameters()) {\r\n      return 0;\r\n    }\r\n\r\n    let num = 0;\r\n    for (\r\n      let i = 0;\r\n      i < this._jsonValue.at(FrequestNode.FrequestNode_Groups).getSize();\r\n      i++\r\n    ) {\r\n      const refI: Value = this._jsonValue\r\n        .at(FrequestNode.FrequestNode_Groups)\r\n        .getValueByIndex(i);\r\n      if (refI.isNull() || refI.isError()) {\r\n        continue;\r\n      }\r\n\r\n      if (refI.getValueByString(Name).getRawString() == LipSync) {\r\n        num = refI.getValueByString(Ids).getVector().getSize();\r\n        break;\r\n      }\r\n    }\r\n\r\n    return num;\r\n  }\r\n\r\n  /**\r\n   * リップシンクに関連付けられたパラメータの数を取得する\r\n   * @param index 配列のインデックス値\r\n   * @return パラメータID\r\n   */\r\n  public getLipSyncParameterId(index: number): CubismIdHandle {\r\n    if (!this.isExistLipSyncParameters()) {\r\n      return null;\r\n    }\r\n\r\n    for (\r\n      let i = 0;\r\n      i < this._jsonValue.at(FrequestNode.FrequestNode_Groups).getSize();\r\n      i++\r\n    ) {\r\n      const refI: Value = this._jsonValue\r\n        .at(FrequestNode.FrequestNode_Groups)\r\n        .getValueByIndex(i);\r\n      if (refI.isNull() || refI.isError()) {\r\n        continue;\r\n      }\r\n\r\n      if (refI.getValueByString(Name).getRawString() == LipSync) {\r\n        return CubismFramework.getIdManager().getId(\r\n          refI.getValueByString(Ids).getValueByIndex(index).getRawString()\r\n        );\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * モデルファイルのキーが存在するかどうかを確認する\r\n   * @return true キーが存在する\r\n   * @return false キーが存在しない\r\n   */\r\n  private isExistModelFile(): boolean {\r\n    const node: Value = this._jsonValue.at(FrequestNode.FrequestNode_Moc);\r\n    return !node.isNull() && !node.isError();\r\n  }\r\n\r\n  /**\r\n   * テクスチャファイルのキーが存在するかどうかを確認する\r\n   * @return true キーが存在する\r\n   * @return false キーが存在しない\r\n   */\r\n  private isExistTextureFiles(): boolean {\r\n    const node: Value = this._jsonValue.at(FrequestNode.FrequestNode_Textures);\r\n    return !node.isNull() && !node.isError();\r\n  }\r\n\r\n  /**\r\n   * 当たり判定のキーが存在するかどうかを確認する\r\n   * @return true キーが存在する\r\n   * @return false キーが存在しない\r\n   */\r\n  private isExistHitAreas(): boolean {\r\n    const node: Value = this._jsonValue.at(FrequestNode.FrequestNode_HitAreas);\r\n    return !node.isNull() && !node.isError();\r\n  }\r\n\r\n  /**\r\n   * 物理演算ファイルのキーが存在するかどうかを確認する\r\n   * @return true キーが存在する\r\n   * @return false キーが存在しない\r\n   */\r\n  private isExistPhysicsFile(): boolean {\r\n    const node: Value = this._jsonValue.at(FrequestNode.FrequestNode_Physics);\r\n    return !node.isNull() && !node.isError();\r\n  }\r\n\r\n  /**\r\n   * ポーズ設定ファイルのキーが存在するかどうかを確認する\r\n   * @return true キーが存在する\r\n   * @return false キーが存在しない\r\n   */\r\n  private isExistPoseFile(): boolean {\r\n    const node: Value = this._jsonValue.at(FrequestNode.FrequestNode_Pose);\r\n    return !node.isNull() && !node.isError();\r\n  }\r\n\r\n  /**\r\n   * 表情設定ファイルのキーが存在するかどうかを確認する\r\n   * @return true キーが存在する\r\n   * @return false キーが存在しない\r\n   */\r\n  private isExistExpressionFile(): boolean {\r\n    const node: Value = this._jsonValue.at(\r\n      FrequestNode.FrequestNode_Expressions\r\n    );\r\n    return !node.isNull() && !node.isError();\r\n  }\r\n\r\n  /**\r\n   * モーショングループのキーが存在するかどうかを確認する\r\n   * @return true キーが存在する\r\n   * @return false キーが存在しない\r\n   */\r\n  private isExistMotionGroups(): boolean {\r\n    const node: Value = this._jsonValue.at(FrequestNode.FrequestNode_Motions);\r\n    return !node.isNull() && !node.isError();\r\n  }\r\n\r\n  /**\r\n   * 引数で指定したモーショングループのキーが存在するかどうかを確認する\r\n   * @param groupName  グループ名\r\n   * @return true キーが存在する\r\n   * @return false キーが存在しない\r\n   */\r\n  private isExistMotionGroupName(groupName: string): boolean {\r\n    const node: Value = this._jsonValue\r\n      .at(FrequestNode.FrequestNode_Motions)\r\n      .getValueByString(groupName);\r\n    return !node.isNull() && !node.isError();\r\n  }\r\n\r\n  /**\r\n   * 引数で指定したモーションに対応するサウンドファイルのキーが存在するかどうかを確認する\r\n   * @param groupName  グループ名\r\n   * @param index 配列のインデックス値\r\n   * @return true キーが存在する\r\n   * @return false キーが存在しない\r\n   */\r\n  private isExistMotionSoundFile(groupName: string, index: number): boolean {\r\n    const node: Value = this._jsonValue\r\n      .at(FrequestNode.FrequestNode_Motions)\r\n      .getValueByString(groupName)\r\n      .getValueByIndex(index)\r\n      .getValueByString(SoundPath);\r\n    return !node.isNull() && !node.isError();\r\n  }\r\n\r\n  /**\r\n   * 引数で指定したモーションに対応するフェードイン時間のキーが存在するかどうかを確認する\r\n   * @param groupName  グループ名\r\n   * @param index 配列のインデックス値\r\n   * @return true キーが存在する\r\n   * @return false キーが存在しない\r\n   */\r\n  private isExistMotionFadeIn(groupName: string, index: number): boolean {\r\n    const node: Value = this._jsonValue\r\n      .at(FrequestNode.FrequestNode_Motions)\r\n      .getValueByString(groupName)\r\n      .getValueByIndex(index)\r\n      .getValueByString(FadeInTime);\r\n    return !node.isNull() && !node.isError();\r\n  }\r\n\r\n  /**\r\n   * 引数で指定したモーションに対応するフェードアウト時間のキーが存在するかどうかを確認する\r\n   * @param groupName  グループ名\r\n   * @param index 配列のインデックス値\r\n   * @return true キーが存在する\r\n   * @return false キーが存在しない\r\n   */\r\n  private isExistMotionFadeOut(groupName: string, index: number): boolean {\r\n    const node: Value = this._jsonValue\r\n      .at(FrequestNode.FrequestNode_Motions)\r\n      .getValueByString(groupName)\r\n      .getValueByIndex(index)\r\n      .getValueByString(FadeOutTime);\r\n    return !node.isNull() && !node.isError();\r\n  }\r\n\r\n  /**\r\n   * UserDataのファイル名が存在するかどうかを確認する\r\n   * @return true キーが存在する\r\n   * @return false キーが存在しない\r\n   */\r\n  private isExistUserDataFile(): boolean {\r\n    const node: Value = this._json\r\n      .getRoot()\r\n      .getValueByString(FileReferences)\r\n      .getValueByString(UserData);\r\n    return !node.isNull() && !node.isError();\r\n  }\r\n\r\n  /**\r\n   * 目ぱちに対応付けられたパラメータが存在するかどうかを確認する\r\n   * @return true キーが存在する\r\n   * @return false キーが存在しない\r\n   */\r\n  private isExistEyeBlinkParameters(): boolean {\r\n    if (\r\n      this._jsonValue.at(FrequestNode.FrequestNode_Groups).isNull() ||\r\n      this._jsonValue.at(FrequestNode.FrequestNode_Groups).isError()\r\n    ) {\r\n      return false;\r\n    }\r\n\r\n    for (\r\n      let i = 0;\r\n      i < this._jsonValue.at(FrequestNode.FrequestNode_Groups).getSize();\r\n      ++i\r\n    ) {\r\n      if (\r\n        this._jsonValue\r\n          .at(FrequestNode.FrequestNode_Groups)\r\n          .getValueByIndex(i)\r\n          .getValueByString(Name)\r\n          .getRawString() == EyeBlink\r\n      ) {\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * リップシンクに対応付けられたパラメータが存在するかどうかを確認する\r\n   * @return true キーが存在する\r\n   * @return false キーが存在しない\r\n   */\r\n  private isExistLipSyncParameters(): boolean {\r\n    if (\r\n      this._jsonValue.at(FrequestNode.FrequestNode_Groups).isNull() ||\r\n      this._jsonValue.at(FrequestNode.FrequestNode_Groups).isError()\r\n    ) {\r\n      return false;\r\n    }\r\n    for (\r\n      let i = 0;\r\n      i < this._jsonValue.at(FrequestNode.FrequestNode_Groups).getSize();\r\n      ++i\r\n    ) {\r\n      if (\r\n        this._jsonValue\r\n          .at(FrequestNode.FrequestNode_Groups)\r\n          .getValueByIndex(i)\r\n          .getValueByString(Name)\r\n          .getRawString() == LipSync\r\n      ) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  private _json: CubismJson;\r\n  private _jsonValue: csmVector<Value>;\r\n}\r\n\r\n// Namespace definition for compatibility.\r\nimport * as $ from './cubismmodelsettingjson';\r\n// eslint-disable-next-line @typescript-eslint/no-namespace\r\nexport namespace Live2DCubismFramework {\r\n  export const CubismModelSettingJson = $.CubismModelSettingJson;\r\n  export type CubismModelSettingJson = $.CubismModelSettingJson;\r\n}\r\n","/**\r\n * Copyright(c) Live2D Inc. All rights reserved.\r\n *\r\n * Use of this source code is governed by the Live2D Open Software license\r\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\r\n */\r\n\r\nimport { CubismIdHandle } from '../id/cubismid';\r\nimport { CubismModel } from '../model/cubismmodel';\r\nimport { csmVector } from '../type/csmvector';\r\n\r\n/**\r\n * 呼吸機能\r\n *\r\n * 呼吸機能を提供する。\r\n */\r\nexport class CubismBreath {\r\n  /**\r\n   * インスタンスの作成\r\n   */\r\n  public static create(): CubismBreath {\r\n    return new CubismBreath();\r\n  }\r\n\r\n  /**\r\n   * インスタンスの破棄\r\n   * @param instance 対象のCubismBreath\r\n   */\r\n  public static delete(instance: CubismBreath): void {\r\n    if (instance != null) {\r\n      instance = null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 呼吸のパラメータの紐づけ\r\n   * @param breathParameters 呼吸を紐づけたいパラメータのリスト\r\n   */\r\n  public setParameters(breathParameters: csmVector<BreathParameterData>): void {\r\n    this._breathParameters = breathParameters;\r\n  }\r\n\r\n  /**\r\n   * 呼吸に紐づいているパラメータの取得\r\n   * @return 呼吸に紐づいているパラメータのリスト\r\n   */\r\n  public getParameters(): csmVector<BreathParameterData> {\r\n    return this._breathParameters;\r\n  }\r\n\r\n  /**\r\n   * モデルのパラメータの更新\r\n   * @param model 対象のモデル\r\n   * @param deltaTimeSeconds デルタ時間[秒]\r\n   */\r\n  public updateParameters(model: CubismModel, deltaTimeSeconds: number): void {\r\n    this._currentTime += deltaTimeSeconds;\r\n\r\n    const t: number = this._currentTime * 2.0 * 3.14159;\r\n\r\n    for (let i = 0; i < this._breathParameters.getSize(); ++i) {\r\n      const data: BreathParameterData = this._breathParameters.at(i);\r\n\r\n      model.addParameterValueById(\r\n        data.parameterId,\r\n        data.offset + data.peak * Math.sin(t / data.cycle),\r\n        data.weight\r\n      );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * コンストラクタ\r\n   */\r\n  public constructor() {\r\n    this._currentTime = 0.0;\r\n  }\r\n\r\n  _breathParameters: csmVector<BreathParameterData>; // 呼吸にひもづいているパラメータのリスト\r\n  _currentTime: number; // 積算時間[秒]\r\n}\r\n\r\n/**\r\n * 呼吸のパラメータ情報\r\n */\r\nexport class BreathParameterData {\r\n  /**\r\n   * コンストラクタ\r\n   * @param parameterId   呼吸をひもづけるパラメータID\r\n   * @param offset        呼吸を正弦波としたときの、波のオフセット\r\n   * @param peak          呼吸を正弦波としたときの、波の高さ\r\n   * @param cycle         呼吸を正弦波としたときの、波の周期\r\n   * @param weight        パラメータへの重み\r\n   */\r\n  constructor(\r\n    parameterId?: CubismIdHandle,\r\n    offset?: number,\r\n    peak?: number,\r\n    cycle?: number,\r\n    weight?: number\r\n  ) {\r\n    this.parameterId = parameterId == undefined ? null : parameterId;\r\n    this.offset = offset == undefined ? 0.0 : offset;\r\n    this.peak = peak == undefined ? 0.0 : peak;\r\n    this.cycle = cycle == undefined ? 0.0 : cycle;\r\n    this.weight = weight == undefined ? 0.0 : weight;\r\n  }\r\n\r\n  parameterId: CubismIdHandle; // 呼吸をひもづけるパラメータID\\\r\n  offset: number; // 呼吸を正弦波としたときの、波のオフセット\r\n  peak: number; // 呼吸を正弦波としたときの、波の高さ\r\n  cycle: number; // 呼吸を正弦波としたときの、波の周期\r\n  weight: number; // パラメータへの重み\r\n}\r\n\r\n// Namespace definition for compatibility.\r\nimport * as $ from './cubismbreath';\r\n// eslint-disable-next-line @typescript-eslint/no-namespace\r\nexport namespace Live2DCubismFramework {\r\n  export const BreathParameterData = $.BreathParameterData;\r\n  export type BreathParameterData = $.BreathParameterData;\r\n  export const CubismBreath = $.CubismBreath;\r\n  export type CubismBreath = $.CubismBreath;\r\n}\r\n","/**\r\n * Copyright(c) Live2D Inc. All rights reserved.\r\n *\r\n * Use of this source code is governed by the Live2D Open Software license\r\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\r\n */\r\n\r\nimport { ICubismModelSetting } from '../icubismmodelsetting';\r\nimport { CubismIdHandle } from '../id/cubismid';\r\nimport { CubismModel } from '../model/cubismmodel';\r\nimport { csmVector } from '../type/csmvector';\r\n\r\n/**\r\n * 自動まばたき機能\r\n *\r\n * 自動まばたき機能を提供する。\r\n */\r\nexport class CubismEyeBlink {\r\n  /**\r\n   * インスタンスを作成する\r\n   * @param modelSetting モデルの設定情報\r\n   * @return 作成されたインスタンス\r\n   * @note 引数がNULLの場合、パラメータIDが設定されていない空のインスタンスを作成する。\r\n   */\r\n  public static create(\r\n    modelSetting: ICubismModelSetting = null\r\n  ): CubismEyeBlink {\r\n    return new CubismEyeBlink(modelSetting);\r\n  }\r\n\r\n  /**\r\n   * インスタンスの破棄\r\n   * @param eyeBlink 対象のCubismEyeBlink\r\n   */\r\n  public static delete(eyeBlink: CubismEyeBlink): void {\r\n    if (eyeBlink != null) {\r\n      eyeBlink = null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * まばたきの間隔の設定\r\n   * @param blinkingInterval まばたきの間隔の時間[秒]\r\n   */\r\n  public setBlinkingInterval(blinkingInterval: number): void {\r\n    this._blinkingIntervalSeconds = blinkingInterval;\r\n  }\r\n\r\n  /**\r\n   * まばたきのモーションの詳細設定\r\n   * @param closing   まぶたを閉じる動作の所要時間[秒]\r\n   * @param closed    まぶたを閉じている動作の所要時間[秒]\r\n   * @param opening   まぶたを開く動作の所要時間[秒]\r\n   */\r\n  public setBlinkingSetting(\r\n    closing: number,\r\n    closed: number,\r\n    opening: number\r\n  ): void {\r\n    this._closingSeconds = closing;\r\n    this._closedSeconds = closed;\r\n    this._openingSeconds = opening;\r\n  }\r\n\r\n  /**\r\n   * まばたきさせるパラメータIDのリストの設定\r\n   * @param parameterIds パラメータのIDのリスト\r\n   */\r\n  public setParameterIds(parameterIds: csmVector<CubismIdHandle>): void {\r\n    this._parameterIds = parameterIds;\r\n  }\r\n\r\n  /**\r\n   * まばたきさせるパラメータIDのリストの取得\r\n   * @return パラメータIDのリスト\r\n   */\r\n  public getParameterIds(): csmVector<CubismIdHandle> {\r\n    return this._parameterIds;\r\n  }\r\n\r\n  /**\r\n   * モデルのパラメータの更新\r\n   * @param model 対象のモデル\r\n   * @param deltaTimeSeconds デルタ時間[秒]\r\n   */\r\n  public updateParameters(model: CubismModel, deltaTimeSeconds: number): void {\r\n    this._userTimeSeconds += deltaTimeSeconds;\r\n    let parameterValue: number;\r\n    let t = 0.0;\r\n\r\n    switch (this._blinkingState) {\r\n      case EyeState.EyeState_Closing:\r\n        t =\r\n          (this._userTimeSeconds - this._stateStartTimeSeconds) /\r\n          this._closingSeconds;\r\n\r\n        if (t >= 1.0) {\r\n          t = 1.0;\r\n          this._blinkingState = EyeState.EyeState_Closed;\r\n          this._stateStartTimeSeconds = this._userTimeSeconds;\r\n        }\r\n\r\n        parameterValue = 1.0 - t;\r\n\r\n        break;\r\n      case EyeState.EyeState_Closed:\r\n        t =\r\n          (this._userTimeSeconds - this._stateStartTimeSeconds) /\r\n          this._closedSeconds;\r\n\r\n        if (t >= 1.0) {\r\n          this._blinkingState = EyeState.EyeState_Opening;\r\n          this._stateStartTimeSeconds = this._userTimeSeconds;\r\n        }\r\n\r\n        parameterValue = 0.0;\r\n\r\n        break;\r\n      case EyeState.EyeState_Opening:\r\n        t =\r\n          (this._userTimeSeconds - this._stateStartTimeSeconds) /\r\n          this._openingSeconds;\r\n\r\n        if (t >= 1.0) {\r\n          t = 1.0;\r\n          this._blinkingState = EyeState.EyeState_Interval;\r\n          this._nextBlinkingTime = this.determinNextBlinkingTiming();\r\n        }\r\n\r\n        parameterValue = t;\r\n\r\n        break;\r\n      case EyeState.EyeState_Interval:\r\n        if (this._nextBlinkingTime < this._userTimeSeconds) {\r\n          this._blinkingState = EyeState.EyeState_Closing;\r\n          this._stateStartTimeSeconds = this._userTimeSeconds;\r\n        }\r\n\r\n        parameterValue = 1.0;\r\n\r\n        break;\r\n      case EyeState.EyeState_First:\r\n      default:\r\n        this._blinkingState = EyeState.EyeState_Interval;\r\n        this._nextBlinkingTime = this.determinNextBlinkingTiming();\r\n\r\n        parameterValue = 1.0;\r\n        break;\r\n    }\r\n\r\n    if (!CubismEyeBlink.CloseIfZero) {\r\n      parameterValue = -parameterValue;\r\n    }\r\n\r\n    for (let i = 0; i < this._parameterIds.getSize(); ++i) {\r\n      model.setParameterValueById(this._parameterIds.at(i), parameterValue);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * コンストラクタ\r\n   * @param modelSetting モデルの設定情報\r\n   */\r\n  public constructor(modelSetting: ICubismModelSetting) {\r\n    this._blinkingState = EyeState.EyeState_First;\r\n    this._nextBlinkingTime = 0.0;\r\n    this._stateStartTimeSeconds = 0.0;\r\n    this._blinkingIntervalSeconds = 4.0;\r\n    this._closingSeconds = 0.1;\r\n    this._closedSeconds = 0.05;\r\n    this._openingSeconds = 0.15;\r\n    this._userTimeSeconds = 0.0;\r\n    this._parameterIds = new csmVector<CubismIdHandle>();\r\n\r\n    if (modelSetting == null) {\r\n      return;\r\n    }\r\n\r\n    for (let i = 0; i < modelSetting.getEyeBlinkParameterCount(); ++i) {\r\n      this._parameterIds.pushBack(modelSetting.getEyeBlinkParameterId(i));\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 次の瞬きのタイミングの決定\r\n   *\r\n   * @return 次のまばたきを行う時刻[秒]\r\n   */\r\n  public determinNextBlinkingTiming(): number {\r\n    const r: number = Math.random();\r\n    return (\r\n      this._userTimeSeconds + r * (2.0 * this._blinkingIntervalSeconds - 1.0)\r\n    );\r\n  }\r\n\r\n  _blinkingState: number; // 現在の状態\r\n  _parameterIds: csmVector<CubismIdHandle>; // 操作対象のパラメータのIDのリスト\r\n  _nextBlinkingTime: number; // 次のまばたきの時刻[秒]\r\n  _stateStartTimeSeconds: number; // 現在の状態が開始した時刻[秒]\r\n  _blinkingIntervalSeconds: number; // まばたきの間隔[秒]\r\n  _closingSeconds: number; // まぶたを閉じる動作の所要時間[秒]\r\n  _closedSeconds: number; // まぶたを閉じている動作の所要時間[秒]\r\n  _openingSeconds: number; // まぶたを開く動作の所要時間[秒]\r\n  _userTimeSeconds: number; // デルタ時間の積算値[秒]\r\n\r\n  /**\r\n   * IDで指定された目のパラメータが、0のときに閉じるなら true 、1の時に閉じるなら false 。\r\n   */\r\n  static readonly CloseIfZero: boolean = true;\r\n}\r\n\r\n/**\r\n * まばたきの状態\r\n *\r\n * まばたきの状態を表す列挙型\r\n */\r\nexport enum EyeState {\r\n  EyeState_First = 0, // 初期状態\r\n  EyeState_Interval, // まばたきしていない状態\r\n  EyeState_Closing, // まぶたが閉じていく途中の状態\r\n  EyeState_Closed, // まぶたが閉じている状態\r\n  EyeState_Opening, // まぶたが開いていく途中の状態\r\n}\r\n\r\n// Namespace definition for compatibility.\r\nimport * as $ from './cubismeyeblink';\r\n// eslint-disable-next-line @typescript-eslint/no-namespace\r\nexport namespace Live2DCubismFramework {\r\n  export const CubismEyeBlink = $.CubismEyeBlink;\r\n  export type CubismEyeBlink = $.CubismEyeBlink;\r\n  export const EyeState = $.EyeState;\r\n  export type EyeState = $.EyeState;\r\n}\r\n","/**\r\n * Copyright(c) Live2D Inc. All rights reserved.\r\n *\r\n * Use of this source code is governed by the Live2D Open Software license\r\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\r\n */\r\n\r\nimport { CubismIdHandle } from '../id/cubismid';\r\nimport { CubismFramework } from '../live2dcubismframework';\r\nimport { CubismModel } from '../model/cubismmodel';\r\nimport { csmVector, iterator } from '../type/csmvector';\r\nimport { CubismJson, Value } from '../utils/cubismjson';\r\n\r\nconst Epsilon = 0.001;\r\nconst DefaultFadeInSeconds = 0.5;\r\n\r\n// Pose.jsonのタグ\r\nconst FadeIn = 'FadeInTime';\r\nconst Link = 'Link';\r\nconst Groups = 'Groups';\r\nconst Id = 'Id';\r\n\r\n/**\r\n * パーツの不透明度の設定\r\n *\r\n * パーツの不透明度の管理と設定を行う。\r\n */\r\nexport class CubismPose {\r\n  /**\r\n   * インスタンスの作成\r\n   * @param pose3json pose3.jsonのデータ\r\n   * @param size pose3.jsonのデータのサイズ[byte]\r\n   * @return 作成されたインスタンス\r\n   */\r\n  public static create(pose3json: ArrayBuffer, size: number): CubismPose {\r\n    const ret: CubismPose = new CubismPose();\r\n    const json: CubismJson = CubismJson.create(pose3json, size);\r\n    const root: Value = json.getRoot();\r\n\r\n    // フェード時間の指定\r\n    if (!root.getValueByString(FadeIn).isNull()) {\r\n      ret._fadeTimeSeconds = root\r\n        .getValueByString(FadeIn)\r\n        .toFloat(DefaultFadeInSeconds);\r\n\r\n      if (ret._fadeTimeSeconds <= 0.0) {\r\n        ret._fadeTimeSeconds = DefaultFadeInSeconds;\r\n      }\r\n    }\r\n\r\n    // パーツグループ\r\n    const poseListInfo: Value = root.getValueByString(Groups);\r\n    const poseCount: number = poseListInfo.getSize();\r\n\r\n    for (let poseIndex = 0; poseIndex < poseCount; ++poseIndex) {\r\n      const idListInfo: Value = poseListInfo.getValueByIndex(poseIndex);\r\n      const idCount: number = idListInfo.getSize();\r\n      let groupCount = 0;\r\n\r\n      for (let groupIndex = 0; groupIndex < idCount; ++groupIndex) {\r\n        const partInfo: Value = idListInfo.getValueByIndex(groupIndex);\r\n        const partData: PartData = new PartData();\r\n        const parameterId: CubismIdHandle =\r\n          CubismFramework.getIdManager().getId(\r\n            partInfo.getValueByString(Id).getRawString()\r\n          );\r\n\r\n        partData.partId = parameterId;\r\n\r\n        // リンクするパーツの設定\r\n        if (!partInfo.getValueByString(Link).isNull()) {\r\n          const linkListInfo: Value = partInfo.getValueByString(Link);\r\n          const linkCount: number = linkListInfo.getSize();\r\n\r\n          for (let linkIndex = 0; linkIndex < linkCount; ++linkIndex) {\r\n            const linkPart: PartData = new PartData();\r\n            const linkId: CubismIdHandle = CubismFramework.getIdManager().getId(\r\n              linkListInfo.getValueByIndex(linkIndex).getString()\r\n            );\r\n\r\n            linkPart.partId = linkId;\r\n\r\n            partData.link.pushBack(linkPart);\r\n          }\r\n        }\r\n\r\n        ret._partGroups.pushBack(partData.clone());\r\n\r\n        ++groupCount;\r\n      }\r\n\r\n      ret._partGroupCounts.pushBack(groupCount);\r\n    }\r\n\r\n    CubismJson.delete(json);\r\n\r\n    return ret;\r\n  }\r\n\r\n  /**\r\n   * インスタンスを破棄する\r\n   * @param pose 対象のCubismPose\r\n   */\r\n  public static delete(pose: CubismPose): void {\r\n    if (pose != null) {\r\n      pose = null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * モデルのパラメータの更新\r\n   * @param model 対象のモデル\r\n   * @param deltaTimeSeconds デルタ時間[秒]\r\n   */\r\n  public updateParameters(model: CubismModel, deltaTimeSeconds: number): void {\r\n    // 前回のモデルと同じでない場合は初期化が必要\r\n    if (model != this._lastModel) {\r\n      // パラメータインデックスの初期化\r\n      this.reset(model);\r\n    }\r\n\r\n    this._lastModel = model;\r\n\r\n    // 設定から時間を変更すると、経過時間がマイナスになる事があるので、経過時間0として対応\r\n    if (deltaTimeSeconds < 0.0) {\r\n      deltaTimeSeconds = 0.0;\r\n    }\r\n\r\n    let beginIndex = 0;\r\n\r\n    for (let i = 0; i < this._partGroupCounts.getSize(); i++) {\r\n      const partGroupCount: number = this._partGroupCounts.at(i);\r\n\r\n      this.doFade(model, deltaTimeSeconds, beginIndex, partGroupCount);\r\n\r\n      beginIndex += partGroupCount;\r\n    }\r\n\r\n    this.copyPartOpacities(model);\r\n  }\r\n\r\n  /**\r\n   * 表示を初期化\r\n   * @param model 対象のモデル\r\n   * @note 不透明度の初期値が0でないパラメータは、不透明度を１に設定する\r\n   */\r\n  public reset(model: CubismModel): void {\r\n    let beginIndex = 0;\r\n\r\n    for (let i = 0; i < this._partGroupCounts.getSize(); ++i) {\r\n      const groupCount: number = this._partGroupCounts.at(i);\r\n\r\n      for (let j: number = beginIndex; j < beginIndex + groupCount; ++j) {\r\n        this._partGroups.at(j).initialize(model);\r\n\r\n        const partsIndex: number = this._partGroups.at(j).partIndex;\r\n        const paramIndex: number = this._partGroups.at(j).parameterIndex;\r\n\r\n        if (partsIndex < 0) {\r\n          continue;\r\n        }\r\n\r\n        model.setPartOpacityByIndex(partsIndex, j == beginIndex ? 1.0 : 0.0);\r\n        model.setParameterValueByIndex(paramIndex, j == beginIndex ? 1.0 : 0.0);\r\n\r\n        for (let k = 0; k < this._partGroups.at(j).link.getSize(); ++k) {\r\n          this._partGroups.at(j).link.at(k).initialize(model);\r\n        }\r\n      }\r\n\r\n      beginIndex += groupCount;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * パーツの不透明度をコピー\r\n   *\r\n   * @param model 対象のモデル\r\n   */\r\n  public copyPartOpacities(model: CubismModel): void {\r\n    for (\r\n      let groupIndex = 0;\r\n      groupIndex < this._partGroups.getSize();\r\n      ++groupIndex\r\n    ) {\r\n      const partData: PartData = this._partGroups.at(groupIndex);\r\n\r\n      if (partData.link.getSize() == 0) {\r\n        continue; // 連動するパラメータはない\r\n      }\r\n\r\n      const partIndex: number = this._partGroups.at(groupIndex).partIndex;\r\n      const opacity: number = model.getPartOpacityByIndex(partIndex);\r\n\r\n      for (\r\n        let linkIndex = 0;\r\n        linkIndex < partData.link.getSize();\r\n        ++linkIndex\r\n      ) {\r\n        const linkPart: PartData = partData.link.at(linkIndex);\r\n        const linkPartIndex: number = linkPart.partIndex;\r\n\r\n        if (linkPartIndex < 0) {\r\n          continue;\r\n        }\r\n\r\n        model.setPartOpacityByIndex(linkPartIndex, opacity);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * パーツのフェード操作を行う。\r\n   * @param model 対象のモデル\r\n   * @param deltaTimeSeconds デルタ時間[秒]\r\n   * @param beginIndex フェード操作を行うパーツグループの先頭インデックス\r\n   * @param partGroupCount フェード操作を行うパーツグループの個数\r\n   */\r\n  public doFade(\r\n    model: CubismModel,\r\n    deltaTimeSeconds: number,\r\n    beginIndex: number,\r\n    partGroupCount: number\r\n  ): void {\r\n    let visiblePartIndex = -1;\r\n    let newOpacity = 1.0;\r\n\r\n    const phi = 0.5;\r\n    const backOpacityThreshold = 0.15;\r\n\r\n    // 現在、表示状態になっているパーツを取得\r\n    for (let i: number = beginIndex; i < beginIndex + partGroupCount; ++i) {\r\n      const partIndex: number = this._partGroups.at(i).partIndex;\r\n      const paramIndex: number = this._partGroups.at(i).parameterIndex;\r\n\r\n      if (model.getParameterValueByIndex(paramIndex) > Epsilon) {\r\n        if (visiblePartIndex >= 0) {\r\n          break;\r\n        }\r\n\r\n        visiblePartIndex = i;\r\n        newOpacity = model.getPartOpacityByIndex(partIndex);\r\n\r\n        // 新しい不透明度を計算\r\n        newOpacity += deltaTimeSeconds / this._fadeTimeSeconds;\r\n\r\n        if (newOpacity > 1.0) {\r\n          newOpacity = 1.0;\r\n        }\r\n      }\r\n    }\r\n\r\n    if (visiblePartIndex < 0) {\r\n      visiblePartIndex = 0;\r\n      newOpacity = 1.0;\r\n    }\r\n\r\n    // 表示パーツ、非表示パーツの不透明度を設定する\r\n    for (let i: number = beginIndex; i < beginIndex + partGroupCount; ++i) {\r\n      const partsIndex: number = this._partGroups.at(i).partIndex;\r\n\r\n      // 表示パーツの設定\r\n      if (visiblePartIndex == i) {\r\n        model.setPartOpacityByIndex(partsIndex, newOpacity); // 先に設定\r\n      }\r\n      // 非表示パーツの設定\r\n      else {\r\n        let opacity: number = model.getPartOpacityByIndex(partsIndex);\r\n        let a1: number; // 計算によって求められる不透明度\r\n\r\n        if (newOpacity < phi) {\r\n          a1 = (newOpacity * (phi - 1)) / phi + 1.0; // (0,1),(phi,phi)を通る直線式\r\n        } else {\r\n          a1 = ((1 - newOpacity) * phi) / (1.0 - phi); // (1,0),(phi,phi)を通る直線式\r\n        }\r\n\r\n        // 背景の見える割合を制限する場合\r\n        const backOpacity: number = (1.0 - a1) * (1.0 - newOpacity);\r\n\r\n        if (backOpacity > backOpacityThreshold) {\r\n          a1 = 1.0 - backOpacityThreshold / (1.0 - newOpacity);\r\n        }\r\n\r\n        if (opacity > a1) {\r\n          opacity = a1; // 計算の不透明度よりも大きければ（濃ければ）不透明度を上げる\r\n        }\r\n\r\n        model.setPartOpacityByIndex(partsIndex, opacity);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * コンストラクタ\r\n   */\r\n  public constructor() {\r\n    this._fadeTimeSeconds = DefaultFadeInSeconds;\r\n    this._lastModel = null;\r\n    this._partGroups = new csmVector<PartData>();\r\n    this._partGroupCounts = new csmVector<number>();\r\n  }\r\n\r\n  _partGroups: csmVector<PartData>; // パーツグループ\r\n  _partGroupCounts: csmVector<number>; // それぞれのパーツグループの個数\r\n  _fadeTimeSeconds: number; // フェード時間[秒]\r\n  _lastModel: CubismModel; // 前回操作したモデル\r\n}\r\n\r\n/**\r\n * パーツにまつわるデータを管理\r\n */\r\nexport class PartData {\r\n  /**\r\n   * コンストラクタ\r\n   */\r\n  constructor(v?: PartData) {\r\n    this.parameterIndex = 0;\r\n    this.partIndex = 0;\r\n    this.link = new csmVector<PartData>();\r\n\r\n    if (v != undefined) {\r\n      this.partId = v.partId;\r\n\r\n      for (\r\n        const ite: iterator<PartData> = v.link.begin();\r\n        ite.notEqual(v.link.end());\r\n        ite.preIncrement()\r\n      ) {\r\n        this.link.pushBack(ite.ptr().clone());\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * =演算子のオーバーロード\r\n   */\r\n  public assignment(v: PartData): PartData {\r\n    this.partId = v.partId;\r\n\r\n    for (\r\n      const ite: iterator<PartData> = v.link.begin();\r\n      ite.notEqual(v.link.end());\r\n      ite.preIncrement()\r\n    ) {\r\n      this.link.pushBack(ite.ptr().clone());\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * 初期化\r\n   * @param model 初期化に使用するモデル\r\n   */\r\n  public initialize(model: CubismModel): void {\r\n    this.parameterIndex = model.getParameterIndex(this.partId);\r\n    this.partIndex = model.getPartIndex(this.partId);\r\n\r\n    model.setParameterValueByIndex(this.parameterIndex, 1);\r\n  }\r\n\r\n  /**\r\n   * オブジェクトのコピーを生成する\r\n   */\r\n  public clone(): PartData {\r\n    const clonePartData: PartData = new PartData();\r\n\r\n    clonePartData.partId = this.partId;\r\n    clonePartData.parameterIndex = this.parameterIndex;\r\n    clonePartData.partIndex = this.partIndex;\r\n    clonePartData.link = new csmVector<PartData>();\r\n\r\n    for (\r\n      let ite: iterator<PartData> = this.link.begin();\r\n      ite.notEqual(this.link.end());\r\n      ite.increment()\r\n    ) {\r\n      clonePartData.link.pushBack(ite.ptr().clone());\r\n    }\r\n\r\n    return clonePartData;\r\n  }\r\n\r\n  partId: CubismIdHandle; // パーツID\r\n  parameterIndex: number; // パラメータのインデックス\r\n  partIndex: number; // パーツのインデックス\r\n  link: csmVector<PartData>; // 連動するパラメータ\r\n}\r\n\r\n// Namespace definition for compatibility.\r\nimport * as $ from './cubismpose';\r\n// eslint-disable-next-line @typescript-eslint/no-namespace\r\nexport namespace Live2DCubismFramework {\r\n  export const CubismPose = $.CubismPose;\r\n  export type CubismPose = $.CubismPose;\r\n  export const PartData = $.PartData;\r\n  export type PartData = $.PartData;\r\n}\r\n","/**\r\n * Copyright(c) Live2D Inc. All rights reserved.\r\n *\r\n * Use of this source code is governed by the Live2D Open Software license\r\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\r\n */\r\n\r\nimport { CubismIdHandle } from './id/cubismid';\r\nimport { csmMap } from './type/csmmap';\r\n\r\n/**\r\n * モデル設定情報を取り扱う関数を宣言した純粋仮想クラス。\r\n *\r\n * このクラスを継承することで、モデル設定情報を取り扱うクラスになる。\r\n */\r\nexport abstract class ICubismModelSetting {\r\n  /**\r\n   * Mocファイルの名前を取得する\r\n   * @return Mocファイルの名前\r\n   */\r\n  public abstract getModelFileName(): string;\r\n\r\n  /**\r\n   * モデルが使用するテクスチャの数を取得する\r\n   * テクスチャの数\r\n   */\r\n  public abstract getTextureCount(): number;\r\n\r\n  /**\r\n   * テクスチャが配置されたディレクトリの名前を取得する\r\n   * @return テクスチャが配置されたディレクトリの名前\r\n   */\r\n  public abstract getTextureDirectory(): string;\r\n\r\n  /**\r\n   * モデルが使用するテクスチャの名前を取得する\r\n   * @param index 配列のインデックス値\r\n   * @return テクスチャの名前\r\n   */\r\n  public abstract getTextureFileName(index: number): string;\r\n\r\n  /**\r\n   * モデルに設定された当たり判定の数を取得する\r\n   * @return モデルに設定された当たり判定の数\r\n   */\r\n  public abstract getHitAreasCount(): number;\r\n\r\n  /**\r\n   * 当たり判定に設定されたIDを取得する\r\n   *\r\n   * @param index 配列のindex\r\n   * @return 当たり判定に設定されたID\r\n   */\r\n  public abstract getHitAreaId(index: number): CubismIdHandle;\r\n\r\n  /**\r\n   * 当たり判定に設定された名前を取得する\r\n   * @param index 配列のインデックス値\r\n   * @return 当たり判定に設定された名前\r\n   */\r\n  public abstract getHitAreaName(index: number): string;\r\n\r\n  /**\r\n   * 物理演算設定ファイルの名前を取得する\r\n   * @return 物理演算設定ファイルの名前\r\n   */\r\n  public abstract getPhysicsFileName(): string;\r\n\r\n  /**\r\n   * パーツ切り替え設定ファイルの名前を取得する\r\n   * @return パーツ切り替え設定ファイルの名前\r\n   */\r\n  public abstract getPoseFileName(): string;\r\n\r\n  /**\r\n   * 表情設定ファイルの数を取得する\r\n   * @return 表情設定ファイルの数\r\n   */\r\n  public abstract getExpressionCount(): number;\r\n\r\n  /**\r\n   * 表情設定ファイルを識別する名前（別名）を取得する\r\n   * @param index 配列のインデックス値\r\n   * @return 表情の名前\r\n   */\r\n  public abstract getExpressionName(index: number): string;\r\n\r\n  /**\r\n   * 表情設定ファイルの名前を取得する\r\n   * @param index 配列のインデックス値\r\n   * @return 表情設定ファイルの名前\r\n   */\r\n  public abstract getExpressionFileName(index: number): string;\r\n\r\n  /**\r\n   * モーショングループの数を取得する\r\n   * @return モーショングループの数\r\n   */\r\n  public abstract getMotionGroupCount(): number;\r\n\r\n  /**\r\n   * モーショングループの名前を取得する\r\n   * @param index 配列のインデックス値\r\n   * @return モーショングループの名前\r\n   */\r\n  public abstract getMotionGroupName(index: number): string;\r\n\r\n  /**\r\n   * モーショングループに含まれるモーションの数を取得する\r\n   * @param groupName モーショングループの名前\r\n   * @return モーショングループの数\r\n   */\r\n  public abstract getMotionCount(groupName: string): number;\r\n\r\n  /**\r\n   * グループ名とインデックス値からモーションファイル名を取得する\r\n   * @param groupName モーショングループの名前\r\n   * @param index     配列のインデックス値\r\n   * @return モーションファイルの名前\r\n   */\r\n  public abstract getMotionFileName(groupName: string, index: number): string;\r\n\r\n  /**\r\n   * モーションに対応するサウンドファイルの名前を取得する\r\n   * @param groupName モーショングループの名前\r\n   * @param index 配列のインデックス値\r\n   * @return サウンドファイルの名前\r\n   */\r\n  public abstract getMotionSoundFileName(\r\n    groupName: string,\r\n    index: number\r\n  ): string;\r\n\r\n  /**\r\n   * モーション開始時のフェードイン処理時間を取得する\r\n   * @param groupName モーショングループの名前\r\n   * @param index 配列のインデックス値\r\n   * @return フェードイン処理時間[秒]\r\n   */\r\n  public abstract getMotionFadeInTimeValue(\r\n    groupName: string,\r\n    index: number\r\n  ): number;\r\n\r\n  /**\r\n   * モーション終了時のフェードアウト処理時間を取得する\r\n   * @param groupName モーショングループの名前\r\n   * @param index 配列のインデックス値\r\n   * @return フェードアウト処理時間[秒]\r\n   */\r\n  public abstract getMotionFadeOutTimeValue(\r\n    groupName: string,\r\n    index: number\r\n  ): number;\r\n\r\n  /**\r\n   * ユーザーデータのファイル名を取得する\r\n   * @return ユーザーデータのファイル名\r\n   */\r\n  public abstract getUserDataFile(): string;\r\n\r\n  /**\r\n   * レイアウト情報を取得する\r\n   * @param outLayoutMap csmMapクラスのインスタンス\r\n   * @return true レイアウト情報が存在する\r\n   * @return false レイアウト情報が存在しない\r\n   */\r\n  public abstract getLayoutMap(outLayoutMap: csmMap<string, number>): boolean;\r\n\r\n  /**\r\n   * 目パチに関連付けられたパラメータの数を取得する\r\n   * @return 目パチに関連付けられたパラメータの数\r\n   */\r\n  public abstract getEyeBlinkParameterCount(): number;\r\n\r\n  /**\r\n   * 目パチに関連付けられたパラメータのIDを取得する\r\n   * @param index 配列のインデックス値\r\n   * @return パラメータID\r\n   */\r\n  public abstract getEyeBlinkParameterId(index: number): CubismIdHandle;\r\n\r\n  /**\r\n   * リップシンクに関連付けられたパラメータの数を取得する\r\n   * @return リップシンクに関連付けられたパラメータの数\r\n   */\r\n  public abstract getLipSyncParameterCount(): number;\r\n\r\n  /**\r\n   * リップシンクに関連付けられたパラメータの数を取得する\r\n   * @param index 配列のインデックス値\r\n   * @return パラメータID\r\n   */\r\n  public abstract getLipSyncParameterId(index: number): CubismIdHandle;\r\n}\r\n\r\n// Namespace definition for compatibility.\r\nimport * as $ from './icubismmodelsetting';\r\n// eslint-disable-next-line @typescript-eslint/no-namespace\r\nexport namespace Live2DCubismFramework {\r\n  export const ICubismModelSetting = $.ICubismModelSetting;\r\n  export type ICubismModelSetting = $.ICubismModelSetting;\r\n}\r\n","/**\r\n * Copyright(c) Live2D Inc. All rights reserved.\r\n *\r\n * Use of this source code is governed by the Live2D Open Software license\r\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\r\n */\r\n\r\nimport { csmString } from '../type/csmstring';\r\n\r\n/**\r\n * パラメータ名・パーツ名・Drawable名を保持\r\n *\r\n * パラメータ名・パーツ名・Drawable名を保持するクラス。\r\n */\r\nexport class CubismId {\r\n  /**\r\n   * ID名を取得する\r\n   */\r\n  public getString(): csmString {\r\n    return this._id;\r\n  }\r\n\r\n  /**\r\n   * コンストラクタ\r\n   */\r\n  public constructor(id: string | csmString) {\r\n    if (typeof id === 'string') {\r\n      this._id = new csmString(id);\r\n      return;\r\n    }\r\n\r\n    this._id = id;\r\n  }\r\n\r\n  /**\r\n   * idを比較\r\n   * @param c 比較するid\r\n   * @return 同じならばtrue,異なっていればfalseを返す\r\n   */\r\n  public isEqual(c: string | csmString | CubismId): boolean {\r\n    if (typeof c === 'string') {\r\n      return this._id.isEqual(c);\r\n    } else if (c instanceof csmString) {\r\n      return this._id.isEqual(c.s);\r\n    } else if (c instanceof CubismId) {\r\n      return this._id.isEqual(c._id.s);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * idを比較\r\n   * @param c 比較するid\r\n   * @return 同じならばtrue,異なっていればfalseを返す\r\n   */\r\n  public isNotEqual(c: string | csmString | CubismId): boolean {\r\n    if (typeof c == 'string') {\r\n      return !this._id.isEqual(c);\r\n    } else if (c instanceof csmString) {\r\n      return !this._id.isEqual(c.s);\r\n    } else if (c instanceof CubismId) {\r\n      return !this._id.isEqual(c._id.s);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  private _id: csmString; // ID名\r\n}\r\n\r\nexport declare type CubismIdHandle = CubismId;\r\n\r\n// Namespace definition for compatibility.\r\nimport * as $ from './cubismid';\r\n// eslint-disable-next-line @typescript-eslint/no-namespace\r\nexport namespace Live2DCubismFramework {\r\n  export const CubismId = $.CubismId;\r\n  export type CubismId = $.CubismId;\r\n  export type CubismIdHandle = $.CubismIdHandle;\r\n}\r\n","/**\r\n * Copyright(c) Live2D Inc. All rights reserved.\r\n *\r\n * Use of this source code is governed by the Live2D Open Software license\r\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\r\n */\r\n\r\nimport { csmString } from '../type/csmstring';\r\nimport { csmVector } from '../type/csmvector';\r\nimport { CubismId } from './cubismid';\r\n\r\n/**\r\n * ID名の管理\r\n *\r\n * ID名を管理する。\r\n */\r\nexport class CubismIdManager {\r\n  /**\r\n   * コンストラクタ\r\n   */\r\n  public constructor() {\r\n    this._ids = new csmVector<CubismId>();\r\n  }\r\n\r\n  /**\r\n   * デストラクタ相当の処理\r\n   */\r\n  public release(): void {\r\n    for (let i = 0; i < this._ids.getSize(); ++i) {\r\n      this._ids.set(i, void 0);\r\n    }\r\n    this._ids = null;\r\n  }\r\n\r\n  /**\r\n   * ID名をリストから登録\r\n   *\r\n   * @param ids ID名リスト\r\n   * @param count IDの個数\r\n   */\r\n  public registerIds(ids: string[] | csmString[]): void {\r\n    for (let i = 0; i < ids.length; i++) {\r\n      this.registerId(ids[i]);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ID名を登録\r\n   *\r\n   * @param id ID名\r\n   */\r\n  public registerId(id: string | csmString): CubismId {\r\n    let result: CubismId = null;\r\n\r\n    if ('string' == typeof id) {\r\n      if ((result = this.findId(id)) != null) {\r\n        return result;\r\n      }\r\n\r\n      result = new CubismId(id);\r\n      this._ids.pushBack(result);\r\n    } else {\r\n      return this.registerId(id.s);\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * ID名からIDを取得する\r\n   *\r\n   * @param id ID名\r\n   */\r\n  public getId(id: csmString | string): CubismId {\r\n    return this.registerId(id);\r\n  }\r\n\r\n  /**\r\n   * ID名からIDの確認\r\n   *\r\n   * @return true 存在する\r\n   * @return false 存在しない\r\n   */\r\n  public isExist(id: csmString | string): boolean {\r\n    if ('string' == typeof id) {\r\n      return this.findId(id) != null;\r\n    }\r\n    return this.isExist(id.s);\r\n  }\r\n\r\n  /**\r\n   * ID名からIDを検索する。\r\n   *\r\n   * @param id ID名\r\n   * @return 登録されているID。なければNULL。\r\n   */\r\n  private findId(id: string): CubismId {\r\n    for (let i = 0; i < this._ids.getSize(); ++i) {\r\n      if (this._ids.at(i).getString().isEqual(id)) {\r\n        return this._ids.at(i);\r\n      }\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  private _ids: csmVector<CubismId>; // 登録されているIDのリスト\r\n}\r\n\r\n// Namespace definition for compatibility.\r\nimport * as $ from './cubismidmanager';\r\n// eslint-disable-next-line @typescript-eslint/no-namespace\r\nexport namespace Live2DCubismFramework {\r\n  export const CubismIdManager = $.CubismIdManager;\r\n  export type CubismIdManager = $.CubismIdManager;\r\n}\r\n","/**\r\n * Copyright(c) Live2D Inc. All rights reserved.\r\n *\r\n * Use of this source code is governed by the Live2D Open Software license\r\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\r\n */\r\n\r\nimport { CubismIdManager } from './id/cubismidmanager';\r\nimport { CubismRenderer } from './rendering/cubismrenderer';\r\nimport {\r\n  CSM_ASSERT,\r\n  CubismLogInfo,\r\n  CubismLogWarning,\r\n} from './utils/cubismdebug';\r\nimport { Value } from './utils/cubismjson';\r\n\r\nexport function strtod(s: string, endPtr: string[]): number {\r\n  let index = 0;\r\n  for (let i = 1; ; i++) {\r\n    const testC: string = s.slice(i - 1, i);\r\n\r\n    // 指数・マイナスの可能性があるのでスキップする\r\n    if (testC == 'e' || testC == '-' || testC == 'E') {\r\n      continue;\r\n    } // 文字列の範囲を広げていく\r\n\r\n    const test: string = s.substring(0, i);\r\n    const number = Number(test);\r\n    if (isNaN(number)) {\r\n      // 数値として認識できなくなったので終了\r\n      break;\r\n    } // 最後に数値としてできたindexを格納しておく\r\n\r\n    index = i;\r\n  }\r\n  let d = parseFloat(s); // パースした数値\r\n\r\n  if (isNaN(d)) {\r\n    // 数値として認識できなくなったので終了\r\n    d = NaN;\r\n  }\r\n\r\n  endPtr[0] = s.slice(index); // 後続の文字列\r\n  return d;\r\n}\r\n\r\n// ファイルスコープの変数を初期化\r\n\r\nlet s_isStarted = false;\r\nlet s_isInitialized = false;\r\nlet s_option: Option = null;\r\nlet s_cubismIdManager: CubismIdManager = null;\r\n\r\n/**\r\n * Framework内で使う定数の宣言\r\n */\r\nexport const Constant = Object.freeze<Record<string, number>>({\r\n  vertexOffset: 0, // メッシュ頂点のオフセット値\r\n  vertexStep: 2, // メッシュ頂点のステップ値\r\n});\r\n\r\nexport function csmDelete<T>(address: T): void {\r\n  if (!address) {\r\n    return;\r\n  }\r\n\r\n  address = void 0;\r\n}\r\n\r\n/**\r\n * Live2D Cubism SDK Original Workflow SDKのエントリポイント\r\n * 利用開始時はCubismFramework.initialize()を呼び、CubismFramework.dispose()で終了する。\r\n */\r\nexport class CubismFramework {\r\n  /**\r\n   * Cubism FrameworkのAPIを使用可能にする。\r\n   *  APIを実行する前に必ずこの関数を実行すること。\r\n   *  一度準備が完了して以降は、再び実行しても内部処理がスキップされます。\r\n   *\r\n   * @param    option      Optionクラスのインスタンス\r\n   *\r\n   * @return   準備処理が完了したらtrueが返ります。\r\n   */\r\n  public static startUp(option: Option = null): boolean {\r\n    if (s_isStarted) {\r\n      CubismLogInfo('CubismFramework.startUp() is already done.');\r\n      return s_isStarted;\r\n    }\r\n\r\n    s_option = option;\r\n\r\n    if (s_option != null) {\r\n      Live2DCubismCore.Logging.csmSetLogFunction(s_option.logFunction);\r\n    }\r\n\r\n    s_isStarted = true;\r\n\r\n    // Live2D Cubism Coreバージョン情報を表示\r\n    if (s_isStarted) {\r\n      const version: number = Live2DCubismCore.Version.csmGetVersion();\r\n      const major: number = (version & 0xff000000) >> 24;\r\n      const minor: number = (version & 0x00ff0000) >> 16;\r\n      const patch: number = version & 0x0000ffff;\r\n      const versionNumber: number = version;\r\n\r\n      CubismLogInfo(\r\n        `Live2D Cubism Core version: {0}.{1}.{2} ({3})`,\r\n        ('00' + major).slice(-2),\r\n        ('00' + minor).slice(-2),\r\n        ('0000' + patch).slice(-4),\r\n        versionNumber\r\n      );\r\n    }\r\n\r\n    CubismLogInfo('CubismFramework.startUp() is complete.');\r\n\r\n    return s_isStarted;\r\n  }\r\n\r\n  /**\r\n   * StartUp()で初期化したCubismFrameworkの各パラメータをクリアします。\r\n   * Dispose()したCubismFrameworkを再利用する際に利用してください。\r\n   */\r\n  public static cleanUp(): void {\r\n    s_isStarted = false;\r\n    s_isInitialized = false;\r\n    s_option = null;\r\n    s_cubismIdManager = null;\r\n  }\r\n\r\n  /**\r\n   * Cubism Framework内のリソースを初期化してモデルを表示可能な状態にします。<br>\r\n   *     再度Initialize()するには先にDispose()を実行する必要があります。\r\n   */\r\n  public static initialize(): void {\r\n    CSM_ASSERT(s_isStarted);\r\n    if (!s_isStarted) {\r\n      CubismLogWarning('CubismFramework is not started.');\r\n      return;\r\n    }\r\n\r\n    // --- s_isInitializedによる連続初期化ガード ---\r\n    // 連続してリソース確保が行われないようにする。\r\n    // 再度Initialize()するには先にDispose()を実行する必要がある。\r\n    if (s_isInitialized) {\r\n      CubismLogWarning(\r\n        'CubismFramework.initialize() skipped, already initialized.'\r\n      );\r\n      return;\r\n    }\r\n\r\n    //---- static 初期化 ----\r\n    Value.staticInitializeNotForClientCall();\r\n\r\n    s_cubismIdManager = new CubismIdManager();\r\n\r\n    s_isInitialized = true;\r\n\r\n    CubismLogInfo('CubismFramework.initialize() is complete.');\r\n  }\r\n\r\n  /**\r\n   * Cubism Framework内の全てのリソースを解放します。\r\n   *      ただし、外部で確保されたリソースについては解放しません。\r\n   *      外部で適切に破棄する必要があります。\r\n   */\r\n  public static dispose(): void {\r\n    CSM_ASSERT(s_isStarted);\r\n    if (!s_isStarted) {\r\n      CubismLogWarning('CubismFramework is not started.');\r\n      return;\r\n    }\r\n\r\n    // --- s_isInitializedによる未初期化解放ガード ---\r\n    // dispose()するには先にinitialize()を実行する必要がある。\r\n    if (!s_isInitialized) {\r\n      // false...リソース未確保の場合\r\n      CubismLogWarning('CubismFramework.dispose() skipped, not initialized.');\r\n      return;\r\n    }\r\n\r\n    Value.staticReleaseNotForClientCall();\r\n\r\n    s_cubismIdManager.release();\r\n    s_cubismIdManager = null;\r\n\r\n    // レンダラの静的リソース（シェーダプログラム他）を解放する\r\n    CubismRenderer.staticRelease();\r\n\r\n    s_isInitialized = false;\r\n\r\n    CubismLogInfo('CubismFramework.dispose() is complete.');\r\n  }\r\n\r\n  /**\r\n   * Cubism FrameworkのAPIを使用する準備が完了したかどうか\r\n   * @return APIを使用する準備が完了していればtrueが返ります。\r\n   */\r\n  public static isStarted(): boolean {\r\n    return s_isStarted;\r\n  }\r\n\r\n  /**\r\n   * Cubism Frameworkのリソース初期化がすでに行われているかどうか\r\n   * @return リソース確保が完了していればtrueが返ります\r\n   */\r\n  public static isInitialized(): boolean {\r\n    return s_isInitialized;\r\n  }\r\n\r\n  /**\r\n   * Core APIにバインドしたログ関数を実行する\r\n   *\r\n   * @praram message ログメッセージ\r\n   */\r\n  public static coreLogFunction(message: string): void {\r\n    // Return if logging not possible.\r\n    if (!Live2DCubismCore.Logging.csmGetLogFunction()) {\r\n      return;\r\n    }\r\n\r\n    Live2DCubismCore.Logging.csmGetLogFunction()(message);\r\n  }\r\n\r\n  /**\r\n   * 現在のログ出力レベル設定の値を返す。\r\n   *\r\n   * @return  現在のログ出力レベル設定の値\r\n   */\r\n  public static getLoggingLevel(): LogLevel {\r\n    if (s_option != null) {\r\n      return s_option.loggingLevel;\r\n    }\r\n    return LogLevel.LogLevel_Off;\r\n  }\r\n\r\n  /**\r\n   * IDマネージャのインスタンスを取得する\r\n   * @return CubismManagerクラスのインスタンス\r\n   */\r\n  public static getIdManager(): CubismIdManager {\r\n    return s_cubismIdManager;\r\n  }\r\n\r\n  /**\r\n   * 静的クラスとして使用する\r\n   * インスタンス化させない\r\n   */\r\n  private constructor() {}\r\n}\r\n\r\nexport class Option {\r\n  logFunction: Live2DCubismCore.csmLogFunction; // ログ出力の関数オブジェクト\r\n  loggingLevel: LogLevel; // ログ出力レベルの設定\r\n}\r\n\r\n/**\r\n * ログ出力のレベル\r\n */\r\nexport enum LogLevel {\r\n  LogLevel_Verbose = 0, // 詳細ログ\r\n  LogLevel_Debug, // デバッグログ\r\n  LogLevel_Info, // Infoログ\r\n  LogLevel_Warning, // 警告ログ\r\n  LogLevel_Error, // エラーログ\r\n  LogLevel_Off, // ログ出力無効\r\n}\r\n\r\n// Namespace definition for compatibility.\r\nimport * as $ from './live2dcubismframework';\r\n// eslint-disable-next-line @typescript-eslint/no-namespace\r\nexport namespace Live2DCubismFramework {\r\n  export const Constant = $.Constant;\r\n  export const csmDelete = $.csmDelete;\r\n  export const CubismFramework = $.CubismFramework;\r\n  export type CubismFramework = $.CubismFramework;\r\n}\r\n","/**\r\n * Copyright(c) Live2D Inc. All rights reserved.\r\n *\r\n * Use of this source code is governed by the Live2D Open Software license\r\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\r\n */\r\n\r\nimport { CubismVector2 } from './cubismvector2';\r\n\r\n/**\r\n * 数値計算などに使用するユーティリティクラス\r\n */\r\nexport class CubismMath {\r\n  static readonly Epsilon: number = 0.00001;\r\n\r\n  /**\r\n   * 第一引数の値を最小値と最大値の範囲に収めた値を返す\r\n   *\r\n   * @param value 収められる値\r\n   * @param min   範囲の最小値\r\n   * @param max   範囲の最大値\r\n   * @return 最小値と最大値の範囲に収めた値\r\n   */\r\n  static range(value: number, min: number, max: number): number {\r\n    if (value < min) {\r\n      value = min;\r\n    } else if (value > max) {\r\n      value = max;\r\n    }\r\n\r\n    return value;\r\n  }\r\n\r\n  /**\r\n   * サイン関数の値を求める\r\n   *\r\n   * @param x 角度値（ラジアン）\r\n   * @return サイン関数sin(x)の値\r\n   */\r\n  static sin(x: number): number {\r\n    return Math.sin(x);\r\n  }\r\n\r\n  /**\r\n   * コサイン関数の値を求める\r\n   *\r\n   * @param x 角度値(ラジアン)\r\n   * @return コサイン関数cos(x)の値\r\n   */\r\n  static cos(x: number): number {\r\n    return Math.cos(x);\r\n  }\r\n\r\n  /**\r\n   * 値の絶対値を求める\r\n   *\r\n   * @param x 絶対値を求める値\r\n   * @return 値の絶対値\r\n   */\r\n  static abs(x: number): number {\r\n    return Math.abs(x);\r\n  }\r\n\r\n  /**\r\n   * 平方根(ルート)を求める\r\n   * @param x -> 平方根を求める値\r\n   * @return 値の平方根\r\n   */\r\n  static sqrt(x: number): number {\r\n    return Math.sqrt(x);\r\n  }\r\n\r\n  /**\r\n   * 立方根を求める\r\n   * @param x -> 立方根を求める値\r\n   * @return 値の立方根\r\n   */\r\n  static cbrt(x: number): number {\r\n    if (x === 0) {\r\n      return x;\r\n    }\r\n\r\n    let cx: number = x;\r\n    const isNegativeNumber: boolean = cx < 0;\r\n\r\n    if (isNegativeNumber) {\r\n      cx = -cx;\r\n    }\r\n\r\n    let ret: number;\r\n    if (cx === Infinity) {\r\n      ret = Infinity;\r\n    } else {\r\n      ret = Math.exp(Math.log(cx) / 3);\r\n      ret = (cx / (ret * ret) + 2 * ret) / 3;\r\n    }\r\n    return isNegativeNumber ? -ret : ret;\r\n  }\r\n\r\n  /**\r\n   * イージング処理されたサインを求める\r\n   * フェードイン・アウト時のイージングに利用できる\r\n   *\r\n   * @param value イージングを行う値\r\n   * @return イージング処理されたサイン値\r\n   */\r\n  static getEasingSine(value: number): number {\r\n    if (value < 0.0) {\r\n      return 0.0;\r\n    } else if (value > 1.0) {\r\n      return 1.0;\r\n    }\r\n\r\n    return 0.5 - 0.5 * this.cos(value * Math.PI);\r\n  }\r\n\r\n  /**\r\n   * 大きい方の値を返す\r\n   *\r\n   * @param left 左辺の値\r\n   * @param right 右辺の値\r\n   * @return 大きい方の値\r\n   */\r\n  static max(left: number, right: number): number {\r\n    return left > right ? left : right;\r\n  }\r\n\r\n  /**\r\n   * 小さい方の値を返す\r\n   *\r\n   * @param left  左辺の値\r\n   * @param right 右辺の値\r\n   * @return 小さい方の値\r\n   */\r\n  static min(left: number, right: number): number {\r\n    return left > right ? right : left;\r\n  }\r\n\r\n  /**\r\n   * 角度値をラジアン値に変換する\r\n   *\r\n   * @param degrees   角度値\r\n   * @return 角度値から変換したラジアン値\r\n   */\r\n  static degreesToRadian(degrees: number): number {\r\n    return (degrees / 180.0) * Math.PI;\r\n  }\r\n\r\n  /**\r\n   * ラジアン値を角度値に変換する\r\n   *\r\n   * @param radian    ラジアン値\r\n   * @return ラジアン値から変換した角度値\r\n   */\r\n  static radianToDegrees(radian: number): number {\r\n    return (radian * 180.0) / Math.PI;\r\n  }\r\n\r\n  /**\r\n   * ２つのベクトルからラジアン値を求める\r\n   *\r\n   * @param from  始点ベクトル\r\n   * @param to    終点ベクトル\r\n   * @return ラジアン値から求めた方向ベクトル\r\n   */\r\n  static directionToRadian(from: CubismVector2, to: CubismVector2): number {\r\n    const q1: number = Math.atan2(to.y, to.x);\r\n    const q2: number = Math.atan2(from.y, from.x);\r\n\r\n    let ret: number = q1 - q2;\r\n\r\n    while (ret < -Math.PI) {\r\n      ret += Math.PI * 2.0;\r\n    }\r\n\r\n    while (ret > Math.PI) {\r\n      ret -= Math.PI * 2.0;\r\n    }\r\n\r\n    return ret;\r\n  }\r\n\r\n  /**\r\n   * ２つのベクトルから角度値を求める\r\n   *\r\n   * @param from  始点ベクトル\r\n   * @param to    終点ベクトル\r\n   * @return 角度値から求めた方向ベクトル\r\n   */\r\n  static directionToDegrees(from: CubismVector2, to: CubismVector2): number {\r\n    const radian: number = this.directionToRadian(from, to);\r\n    let degree: number = this.radianToDegrees(radian);\r\n\r\n    if (to.x - from.x > 0.0) {\r\n      degree = -degree;\r\n    }\r\n\r\n    return degree;\r\n  }\r\n\r\n  /**\r\n   * ラジアン値を方向ベクトルに変換する。\r\n   *\r\n   * @param totalAngle    ラジアン値\r\n   * @return ラジアン値から変換した方向ベクトル\r\n   */\r\n\r\n  static radianToDirection(totalAngle: number): CubismVector2 {\r\n    const ret: CubismVector2 = new CubismVector2();\r\n\r\n    ret.x = this.sin(totalAngle);\r\n    ret.y = this.cos(totalAngle);\r\n\r\n    return ret;\r\n  }\r\n\r\n  /**\r\n   * 三次方程式の三次項の係数が0になったときに補欠的に二次方程式の解をもとめる。\r\n   * a * x^2 + b * x + c = 0\r\n   *\r\n   * @param   a -> 二次項の係数値\r\n   * @param   b -> 一次項の係数値\r\n   * @param   c -> 定数項の値\r\n   * @return  二次方程式の解\r\n   */\r\n  static quadraticEquation(a: number, b: number, c: number): number {\r\n    if (this.abs(a) < CubismMath.Epsilon) {\r\n      if (this.abs(b) < CubismMath.Epsilon) {\r\n        return -c;\r\n      }\r\n      return -c / b;\r\n    }\r\n\r\n    return -(b + this.sqrt(b * b - 4.0 * a * c)) / (2.0 * a);\r\n  }\r\n\r\n  /**\r\n   * カルダノの公式によってベジェのt値に該当する３次方程式の解を求める。\r\n   * 重解になったときには0.0～1.0の値になる解を返す。\r\n   *\r\n   * a * x^3 + b * x^2 + c * x + d = 0\r\n   *\r\n   * @param   a -> 三次項の係数値\r\n   * @param   b -> 二次項の係数値\r\n   * @param   c -> 一次項の係数値\r\n   * @param   d -> 定数項の値\r\n   * @return  0.0～1.0の間にある解\r\n   */\r\n  static cardanoAlgorithmForBezier(\r\n    a: number,\r\n    b: number,\r\n    c: number,\r\n    d: number\r\n  ): number {\r\n    if (this.sqrt(a) < CubismMath.Epsilon) {\r\n      return this.range(this.quadraticEquation(b, c, d), 0.0, 1.0);\r\n    }\r\n\r\n    const ba: number = b / a;\r\n    const ca: number = c / a;\r\n    const da: number = d / a;\r\n\r\n    const p: number = (3.0 * ca - ba * ba) / 3.0;\r\n    const p3: number = p / 3.0;\r\n    const q: number = (2.0 * ba * ba * ba - 9.0 * ba * ca + 27.0 * da) / 27.0;\r\n    const q2: number = q / 2.0;\r\n    const discriminant: number = q2 * q2 + p3 * p3 * p3;\r\n\r\n    const center = 0.5;\r\n    const threshold: number = center + 0.01;\r\n\r\n    if (discriminant < 0.0) {\r\n      const mp3: number = -p / 3.0;\r\n      const mp33: number = mp3 * mp3 * mp3;\r\n      const r: number = this.sqrt(mp33);\r\n      const t: number = -q / (2.0 * r);\r\n      const cosphi: number = this.range(t, -1.0, 1.0);\r\n      const phi: number = Math.acos(cosphi);\r\n      const crtr: number = this.cbrt(r);\r\n      const t1: number = 2.0 * crtr;\r\n\r\n      const root1: number = t1 * this.cos(phi / 3.0) - ba / 3.0;\r\n      if (this.abs(root1 - center) < threshold) {\r\n        return this.range(root1, 0.0, 1.0);\r\n      }\r\n\r\n      const root2: number =\r\n        t1 * this.cos((phi + 2.0 * Math.PI) / 3.0) - ba / 3.0;\r\n      if (this.abs(root2 - center) < threshold) {\r\n        return this.range(root2, 0.0, 1.0);\r\n      }\r\n\r\n      const root3: number =\r\n        t1 * this.cos((phi + 4.0 * Math.PI) / 3.0) - ba / 3.0;\r\n      return this.range(root3, 0.0, 1.0);\r\n    }\r\n\r\n    if (discriminant == 0.0) {\r\n      let u1: number;\r\n      if (q2 < 0.0) {\r\n        u1 = this.cbrt(-q2);\r\n      } else {\r\n        u1 = -this.cbrt(q2);\r\n      }\r\n\r\n      const root1: number = 2.0 * u1 - ba / 3.0;\r\n      if (this.abs(root1 - center) < threshold) {\r\n        return this.range(root1, 0.0, 1.0);\r\n      }\r\n\r\n      const root2: number = -u1 - ba / 3.0;\r\n      return this.range(root2, 0.0, 1.0);\r\n    }\r\n\r\n    const sd: number = this.sqrt(discriminant);\r\n    const u1: number = this.cbrt(sd - q2);\r\n    const v1: number = this.cbrt(sd + q2);\r\n    const root1: number = u1 - v1 - ba / 3.0;\r\n    return this.range(root1, 0.0, 1.0);\r\n  }\r\n\r\n  /**\r\n   * コンストラクタ\r\n   */\r\n  private constructor() {}\r\n}\r\n\r\n// Namespace definition for compatibility.\r\nimport * as $ from './cubismmath';\r\n// eslint-disable-next-line @typescript-eslint/no-namespace\r\nexport namespace Live2DCubismFramework {\r\n  export const CubismMath = $.CubismMath;\r\n  export type CubismMath = $.CubismMath;\r\n}\r\n","/**\r\n * Copyright(c) Live2D Inc. All rights reserved.\r\n *\r\n * Use of this source code is governed by the Live2D Open Software license\r\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\r\n */\r\n\r\n/**\r\n * 4x4の行列\r\n *\r\n * 4x4行列の便利クラス。\r\n */\r\nexport class CubismMatrix44 {\r\n  /**\r\n   * コンストラクタ\r\n   */\r\n  public constructor() {\r\n    this._tr = new Float32Array(16); // 4 * 4のサイズ\r\n    this.loadIdentity();\r\n  }\r\n\r\n  /**\r\n   * 受け取った２つの行列の乗算を行う。\r\n   *\r\n   * @param a 行列a\r\n   * @param b 行列b\r\n   * @return 乗算結果の行列\r\n   */\r\n  public static multiply(\r\n    a: Float32Array,\r\n    b: Float32Array,\r\n    dst: Float32Array\r\n  ): void {\r\n    const c: Float32Array = new Float32Array([\r\n      0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0,\r\n      0.0,\r\n    ]);\r\n\r\n    const n = 4;\r\n\r\n    for (let i = 0; i < n; ++i) {\r\n      for (let j = 0; j < n; ++j) {\r\n        for (let k = 0; k < n; ++k) {\r\n          c[j + i * 4] += a[k + i * 4] * b[j + k * 4];\r\n        }\r\n      }\r\n    }\r\n\r\n    for (let i = 0; i < 16; ++i) {\r\n      dst[i] = c[i];\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 単位行列に初期化する\r\n   */\r\n  public loadIdentity(): void {\r\n    const c: Float32Array = new Float32Array([\r\n      1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0,\r\n      1.0,\r\n    ]);\r\n\r\n    this.setMatrix(c);\r\n  }\r\n\r\n  /**\r\n   * 行列を設定\r\n   *\r\n   * @param tr 16個の浮動小数点数で表される4x4の行列\r\n   */\r\n  public setMatrix(tr: Float32Array): void {\r\n    for (let i = 0; i < 16; ++i) {\r\n      this._tr[i] = tr[i];\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 行列を浮動小数点数の配列で取得\r\n   *\r\n   * @return 16個の浮動小数点数で表される4x4の行列\r\n   */\r\n  public getArray(): Float32Array {\r\n    return this._tr;\r\n  }\r\n\r\n  /**\r\n   * X軸の拡大率を取得\r\n   * @return X軸の拡大率\r\n   */\r\n  public getScaleX(): number {\r\n    return this._tr[0];\r\n  }\r\n\r\n  /**\r\n   * Y軸の拡大率を取得する\r\n   *\r\n   * @return Y軸の拡大率\r\n   */\r\n  public getScaleY(): number {\r\n    return this._tr[5];\r\n  }\r\n\r\n  /**\r\n   * X軸の移動量を取得\r\n   * @return X軸の移動量\r\n   */\r\n  public getTranslateX(): number {\r\n    return this._tr[12];\r\n  }\r\n\r\n  /**\r\n   * Y軸の移動量を取得\r\n   * @return Y軸の移動量\r\n   */\r\n  public getTranslateY(): number {\r\n    return this._tr[13];\r\n  }\r\n\r\n  /**\r\n   * X軸の値を現在の行列で計算\r\n   *\r\n   * @param src X軸の値\r\n   * @return 現在の行列で計算されたX軸の値\r\n   */\r\n  public transformX(src: number): number {\r\n    return this._tr[0] * src + this._tr[12];\r\n  }\r\n\r\n  /**\r\n   * Y軸の値を現在の行列で計算\r\n   *\r\n   * @param src Y軸の値\r\n   * @return 現在の行列で計算されたY軸の値\r\n   */\r\n  public transformY(src: number): number {\r\n    return this._tr[5] * src + this._tr[13];\r\n  }\r\n\r\n  /**\r\n   * X軸の値を現在の行列で逆計算\r\n   */\r\n  public invertTransformX(src: number): number {\r\n    return (src - this._tr[12]) / this._tr[0];\r\n  }\r\n\r\n  /**\r\n   * Y軸の値を現在の行列で逆計算\r\n   */\r\n  public invertTransformY(src: number): number {\r\n    return (src - this._tr[13]) / this._tr[5];\r\n  }\r\n\r\n  /**\r\n   * 現在の行列の位置を起点にして移動\r\n   *\r\n   * 現在の行列の位置を起点にして相対的に移動する。\r\n   *\r\n   * @param x X軸の移動量\r\n   * @param y Y軸の移動量\r\n   */\r\n  public translateRelative(x: number, y: number): void {\r\n    const tr1: Float32Array = new Float32Array([\r\n      1.0,\r\n      0.0,\r\n      0.0,\r\n      0.0,\r\n      0.0,\r\n      1.0,\r\n      0.0,\r\n      0.0,\r\n      0.0,\r\n      0.0,\r\n      1.0,\r\n      0.0,\r\n      x,\r\n      y,\r\n      0.0,\r\n      1.0,\r\n    ]);\r\n\r\n    CubismMatrix44.multiply(tr1, this._tr, this._tr);\r\n  }\r\n\r\n  /**\r\n   * 現在の行列の位置を移動\r\n   *\r\n   * 現在の行列の位置を指定した位置へ移動する\r\n   *\r\n   * @param x X軸の移動量\r\n   * @param y y軸の移動量\r\n   */\r\n  public translate(x: number, y: number): void {\r\n    this._tr[12] = x;\r\n    this._tr[13] = y;\r\n  }\r\n\r\n  /**\r\n   * 現在の行列のX軸の位置を指定した位置へ移動する\r\n   *\r\n   * @param x X軸の移動量\r\n   */\r\n  public translateX(x: number): void {\r\n    this._tr[12] = x;\r\n  }\r\n\r\n  /**\r\n   * 現在の行列のY軸の位置を指定した位置へ移動する\r\n   *\r\n   * @param y Y軸の移動量\r\n   */\r\n  public translateY(y: number): void {\r\n    this._tr[13] = y;\r\n  }\r\n\r\n  /**\r\n   * 現在の行列の拡大率を相対的に設定する\r\n   *\r\n   * @param x X軸の拡大率\r\n   * @param y Y軸の拡大率\r\n   */\r\n  public scaleRelative(x: number, y: number): void {\r\n    const tr1: Float32Array = new Float32Array([\r\n      x,\r\n      0.0,\r\n      0.0,\r\n      0.0,\r\n      0.0,\r\n      y,\r\n      0.0,\r\n      0.0,\r\n      0.0,\r\n      0.0,\r\n      1.0,\r\n      0.0,\r\n      0.0,\r\n      0.0,\r\n      0.0,\r\n      1.0,\r\n    ]);\r\n\r\n    CubismMatrix44.multiply(tr1, this._tr, this._tr);\r\n  }\r\n\r\n  /**\r\n   * 現在の行列の拡大率を指定した倍率に設定する\r\n   *\r\n   * @param x X軸の拡大率\r\n   * @param y Y軸の拡大率\r\n   */\r\n  public scale(x: number, y: number): void {\r\n    this._tr[0] = x;\r\n    this._tr[5] = y;\r\n  }\r\n\r\n  /**\r\n   * 現在の行列に行列を乗算\r\n   *\r\n   * @param m 行列\r\n   */\r\n  public multiplyByMatrix(m: CubismMatrix44): void {\r\n    CubismMatrix44.multiply(m.getArray(), this._tr, this._tr);\r\n  }\r\n\r\n  /**\r\n   * オブジェクトのコピーを生成する\r\n   */\r\n  public clone(): CubismMatrix44 {\r\n    const cloneMatrix: CubismMatrix44 = new CubismMatrix44();\r\n\r\n    for (let i = 0; i < this._tr.length; i++) {\r\n      cloneMatrix._tr[i] = this._tr[i];\r\n    }\r\n\r\n    return cloneMatrix;\r\n  }\r\n\r\n  protected _tr: Float32Array; // 4x4行列データ\r\n}\r\n\r\n// Namespace definition for compatibility.\r\nimport * as $ from './cubismmatrix44';\r\n// eslint-disable-next-line @typescript-eslint/no-namespace\r\nexport namespace Live2DCubismFramework {\r\n  export const CubismMatrix44 = $.CubismMatrix44;\r\n  export type CubismMatrix44 = $.CubismMatrix44;\r\n}\r\n","/**\r\n * Copyright(c) Live2D Inc. All rights reserved.\r\n *\r\n * Use of this source code is governed by the Live2D Open Software license\r\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\r\n */\r\n\r\nimport { csmMap, iterator } from '../type/csmmap';\r\nimport { CubismMatrix44 } from './cubismmatrix44';\r\n\r\n/**\r\n * モデル座標設定用の4x4行列\r\n *\r\n * モデル座標設定用の4x4行列クラス\r\n */\r\nexport class CubismModelMatrix extends CubismMatrix44 {\r\n  /**\r\n   * コンストラクタ\r\n   *\r\n   * @param w 横幅\r\n   * @param h 縦幅\r\n   */\r\n  constructor(w?: number, h?: number) {\r\n    super();\r\n\r\n    this._width = w !== undefined ? w : 0.0;\r\n    this._height = h !== undefined ? h : 0.0;\r\n\r\n    this.setHeight(2.0);\r\n  }\r\n\r\n  /**\r\n   * 横幅を設定\r\n   *\r\n   * @param w 横幅\r\n   */\r\n  public setWidth(w: number): void {\r\n    const scaleX: number = w / this._width;\r\n    const scaleY: number = scaleX;\r\n    this.scale(scaleX, scaleY);\r\n  }\r\n\r\n  /**\r\n   * 縦幅を設定\r\n   * @param h 縦幅\r\n   */\r\n  public setHeight(h: number): void {\r\n    const scaleX: number = h / this._height;\r\n    const scaleY: number = scaleX;\r\n    this.scale(scaleX, scaleY);\r\n  }\r\n\r\n  /**\r\n   * 位置を設定\r\n   *\r\n   * @param x X軸の位置\r\n   * @param y Y軸の位置\r\n   */\r\n  public setPosition(x: number, y: number): void {\r\n    this.translate(x, y);\r\n  }\r\n\r\n  /**\r\n   * 中心位置を設定\r\n   *\r\n   * @param x X軸の中心位置\r\n   * @param y Y軸の中心位置\r\n   *\r\n   * @note widthかheightを設定したあとでないと、拡大率が正しく取得できないためずれる。\r\n   */\r\n  public setCenterPosition(x: number, y: number) {\r\n    this.centerX(x);\r\n    this.centerY(y);\r\n  }\r\n\r\n  /**\r\n   * 上辺の位置を設定する\r\n   *\r\n   * @param y 上辺のY軸位置\r\n   */\r\n  public top(y: number): void {\r\n    this.setY(y);\r\n  }\r\n\r\n  /**\r\n   * 下辺の位置を設定する\r\n   *\r\n   * @param y 下辺のY軸位置\r\n   */\r\n  public bottom(y: number) {\r\n    const h: number = this._height * this.getScaleY();\r\n\r\n    this.translateY(y - h);\r\n  }\r\n\r\n  /**\r\n   * 左辺の位置を設定\r\n   *\r\n   * @param x 左辺のX軸位置\r\n   */\r\n  public left(x: number): void {\r\n    this.setX(x);\r\n  }\r\n\r\n  /**\r\n   * 右辺の位置を設定\r\n   *\r\n   * @param x 右辺のX軸位置\r\n   */\r\n  public right(x: number): void {\r\n    const w = this._width * this.getScaleX();\r\n\r\n    this.translateX(x - w);\r\n  }\r\n\r\n  /**\r\n   * X軸の中心位置を設定\r\n   *\r\n   * @param x X軸の中心位置\r\n   */\r\n  public centerX(x: number): void {\r\n    const w = this._width * this.getScaleX();\r\n\r\n    this.translateX(x - w / 2.0);\r\n  }\r\n\r\n  /**\r\n   * X軸の位置を設定\r\n   *\r\n   * @param x X軸の位置\r\n   */\r\n  public setX(x: number): void {\r\n    this.translateX(x);\r\n  }\r\n\r\n  /**\r\n   * Y軸の中心位置を設定\r\n   *\r\n   * @param y Y軸の中心位置\r\n   */\r\n  public centerY(y: number): void {\r\n    const h: number = this._height * this.getScaleY();\r\n\r\n    this.translateY(y - h / 2.0);\r\n  }\r\n\r\n  /**\r\n   * Y軸の位置を設定する\r\n   *\r\n   * @param y Y軸の位置\r\n   */\r\n  public setY(y: number): void {\r\n    this.translateY(y);\r\n  }\r\n\r\n  /**\r\n   * レイアウト情報から位置を設定\r\n   *\r\n   * @param layout レイアウト情報\r\n   */\r\n  public setupFromLayout(layout: csmMap<string, number>): void {\r\n    const keyWidth = 'width';\r\n    const keyHeight = 'height';\r\n    const keyX = 'x';\r\n    const keyY = 'y';\r\n    const keyCenterX = 'center_x';\r\n    const keyCenterY = 'center_y';\r\n    const keyTop = 'top';\r\n    const keyBottom = 'bottom';\r\n    const keyLeft = 'left';\r\n    const keyRight = 'right';\r\n\r\n    for (\r\n      const ite: iterator<string, number> = layout.begin();\r\n      ite.notEqual(layout.end());\r\n      ite.preIncrement()\r\n    ) {\r\n      const key: string = ite.ptr().first;\r\n      const value: number = ite.ptr().second;\r\n\r\n      if (key == keyWidth) {\r\n        this.setWidth(value);\r\n      } else if (key == keyHeight) {\r\n        this.setHeight(value);\r\n      }\r\n    }\r\n\r\n    for (\r\n      const ite: iterator<string, number> = layout.begin();\r\n      ite.notEqual(layout.end());\r\n      ite.preIncrement()\r\n    ) {\r\n      const key: string = ite.ptr().first;\r\n      const value: number = ite.ptr().second;\r\n\r\n      if (key == keyX) {\r\n        this.setX(value);\r\n      } else if (key == keyY) {\r\n        this.setY(value);\r\n      } else if (key == keyCenterX) {\r\n        this.centerX(value);\r\n      } else if (key == keyCenterY) {\r\n        this.centerY(value);\r\n      } else if (key == keyTop) {\r\n        this.top(value);\r\n      } else if (key == keyBottom) {\r\n        this.bottom(value);\r\n      } else if (key == keyLeft) {\r\n        this.left(value);\r\n      } else if (key == keyRight) {\r\n        this.right(value);\r\n      }\r\n    }\r\n  }\r\n\r\n  private _width: number; // 横幅\r\n  private _height: number; // 縦幅\r\n}\r\n\r\n// Namespace definition for compatibility.\r\nimport * as $ from './cubismmodelmatrix';\r\n// eslint-disable-next-line @typescript-eslint/no-namespace\r\nexport namespace Live2DCubismFramework {\r\n  export const CubismModelMatrix = $.CubismModelMatrix;\r\n  export type CubismModelMatrix = $.CubismModelMatrix;\r\n}\r\n","/**\r\n * Copyright(c) Live2D Inc. All rights reserved.\r\n *\r\n * Use of this source code is governed by the Live2D Open Software license\r\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\r\n */\r\n\r\nimport { CubismMath } from './cubismmath';\r\n\r\nconst FrameRate = 30;\r\nconst Epsilon = 0.01;\r\n\r\n/**\r\n * 顔の向きの制御機能\r\n *\r\n * 顔の向きの制御機能を提供するクラス。\r\n */\r\nexport class CubismTargetPoint {\r\n  /**\r\n   * コンストラクタ\r\n   */\r\n  public constructor() {\r\n    this._faceTargetX = 0.0;\r\n    this._faceTargetY = 0.0;\r\n    this._faceX = 0.0;\r\n    this._faceY = 0.0;\r\n    this._faceVX = 0.0;\r\n    this._faceVY = 0.0;\r\n    this._lastTimeSeconds = 0.0;\r\n    this._userTimeSeconds = 0.0;\r\n  }\r\n\r\n  /**\r\n   * 更新処理\r\n   */\r\n  public update(deltaTimeSeconds: number): void {\r\n    // デルタ時間を加算する\r\n    this._userTimeSeconds += deltaTimeSeconds;\r\n\r\n    // 首を中央から左右に振るときの平均的な速さは 秒速度。加速・減速を考慮して、その２倍を最高速度とする\r\n    // 顔の振り具合を、中央（0.0）から、左右は（+-1.0）とする\r\n    const faceParamMaxV: number = 40.0 / 10.0; // 7.5秒間に40分移動(5.3/sc)\r\n    const maxV: number = (faceParamMaxV * 1.0) / FrameRate; // 1frameあたりに変化できる速度の上限\r\n\r\n    if (this._lastTimeSeconds == 0.0) {\r\n      this._lastTimeSeconds = this._userTimeSeconds;\r\n      return;\r\n    }\r\n\r\n    const deltaTimeWeight: number =\r\n      (this._userTimeSeconds - this._lastTimeSeconds) * FrameRate;\r\n    this._lastTimeSeconds = this._userTimeSeconds;\r\n\r\n    // 最高速度になるまでの時間を\r\n    const timeToMaxSpeed = 0.15;\r\n    const frameToMaxSpeed: number = timeToMaxSpeed * FrameRate; // sec * frame/sec\r\n    const maxA: number = (deltaTimeWeight * maxV) / frameToMaxSpeed; // 1frameあたりの加速度\r\n\r\n    // 目指す向きは、（dx, dy）方向のベクトルとなる\r\n    const dx: number = this._faceTargetX - this._faceX;\r\n    const dy: number = this._faceTargetY - this._faceY;\r\n\r\n    if (CubismMath.abs(dx) <= Epsilon && CubismMath.abs(dy) <= Epsilon) {\r\n      return; // 変化なし\r\n    }\r\n\r\n    // 速度の最大よりも大きい場合は、速度を落とす\r\n    const d: number = CubismMath.sqrt(dx * dx + dy * dy);\r\n\r\n    // 進行方向の最大速度ベクトル\r\n    const vx: number = (maxV * dx) / d;\r\n    const vy: number = (maxV * dy) / d;\r\n\r\n    // 現在の速度から、新規速度への変化（加速度）を求める\r\n    let ax: number = vx - this._faceVX;\r\n    let ay: number = vy - this._faceVY;\r\n\r\n    const a: number = CubismMath.sqrt(ax * ax + ay * ay);\r\n\r\n    // 加速のとき\r\n    if (a < -maxA || a > maxA) {\r\n      ax *= maxA / a;\r\n      ay *= maxA / a;\r\n    }\r\n\r\n    // 加速度を元の速度に足して、新速度とする\r\n    this._faceVX += ax;\r\n    this._faceVY += ay;\r\n\r\n    // 目的の方向に近づいたとき、滑らかに減速するための処理\r\n    // 設定された加速度で止まる事の出来る距離と速度の関係から\r\n    // 現在とりうる最高速度を計算し、それ以上の時は速度を落とす\r\n    // ※本来、人間は筋力で力（加速度）を調整できるため、より自由度が高いが、簡単な処理で済ませている\r\n    {\r\n      // 加速度、速度、距離の関係式。\r\n      //            2  6           2               3\r\n      //      sqrt(a  t  + 16 a h t  - 8 a h) - a t\r\n      // v = --------------------------------------\r\n      //                    2\r\n      //                 4 t  - 2\r\n      // (t=1)\r\n      // \t時刻tは、あらかじめ加速度、速度を1/60(フレームレート、単位なし)で\r\n      // \t考えているので、t＝１として消してよい（※未検証）\r\n\r\n      const maxV: number =\r\n        0.5 *\r\n        (CubismMath.sqrt(maxA * maxA + 16.0 * maxA * d - 8.0 * maxA * d) -\r\n          maxA);\r\n      const curV: number = CubismMath.sqrt(\r\n        this._faceVX * this._faceVX + this._faceVY * this._faceVY\r\n      );\r\n\r\n      if (curV > maxV) {\r\n        // 現在の速度 > 最高速度のとき、最高速度まで減速\r\n        this._faceVX *= maxV / curV;\r\n        this._faceVY *= maxV / curV;\r\n      }\r\n    }\r\n\r\n    this._faceX += this._faceVX;\r\n    this._faceY += this._faceVY;\r\n  }\r\n\r\n  /**\r\n   * X軸の顔の向きの値を取得\r\n   *\r\n   * @return X軸の顔の向きの値（-1.0 ~ 1.0）\r\n   */\r\n  public getX(): number {\r\n    return this._faceX;\r\n  }\r\n\r\n  /**\r\n   * Y軸の顔の向きの値を取得\r\n   *\r\n   * @return Y軸の顔の向きの値（-1.0 ~ 1.0）\r\n   */\r\n  public getY(): number {\r\n    return this._faceY;\r\n  }\r\n\r\n  /**\r\n   * 顔の向きの目標値を設定\r\n   *\r\n   * @param x X軸の顔の向きの値（-1.0 ~ 1.0）\r\n   * @param y Y軸の顔の向きの値（-1.0 ~ 1.0）\r\n   */\r\n  public set(x: number, y: number): void {\r\n    this._faceTargetX = x;\r\n    this._faceTargetY = y;\r\n  }\r\n\r\n  private _faceTargetX: number; // 顔の向きのX目標値（この値に近づいていく）\r\n  private _faceTargetY: number; // 顔の向きのY目標値（この値に近づいていく）\r\n  private _faceX: number; // 顔の向きX（-1.0 ~ 1.0）\r\n  private _faceY: number; // 顔の向きY（-1.0 ~ 1.0）\r\n  private _faceVX: number; // 顔の向きの変化速度X\r\n  private _faceVY: number; // 顔の向きの変化速度Y\r\n  private _lastTimeSeconds: number; // 最後の実行時間[秒]\r\n  private _userTimeSeconds: number; // デルタ時間の積算値[秒]\r\n}\r\n\r\n// Namespace definition for compatibility.\r\nimport * as $ from './cubismtargetpoint';\r\n// eslint-disable-next-line @typescript-eslint/no-namespace\r\nexport namespace Live2DCubismFramework {\r\n  export const CubismTargetPoint = $.CubismTargetPoint;\r\n  export type CubismTargetPoint = $.CubismTargetPoint;\r\n}\r\n","/**\r\n * Copyright(c) Live2D Inc. All rights reserved.\r\n *\r\n * Use of this source code is governed by the Live2D Open Software license\r\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\r\n */\r\n\r\n/**\r\n * 2次元ベクトル型\r\n *\r\n * 2次元ベクトル型の機能を提供する。\r\n */\r\nexport class CubismVector2 {\r\n  /**\r\n   * コンストラクタ\r\n   */\r\n  public constructor(public x?: number, public y?: number) {\r\n    this.x = x == undefined ? 0.0 : x;\r\n\r\n    this.y = y == undefined ? 0.0 : y;\r\n  }\r\n\r\n  /**\r\n   * ベクトルの加算\r\n   *\r\n   * @param vector2 加算するベクトル値\r\n   * @return 加算結果 ベクトル値\r\n   */\r\n  public add(vector2: CubismVector2): CubismVector2 {\r\n    const ret: CubismVector2 = new CubismVector2(0.0, 0.0);\r\n    ret.x = this.x + vector2.x;\r\n    ret.y = this.y + vector2.y;\r\n    return ret;\r\n  }\r\n\r\n  /**\r\n   * ベクトルの減算\r\n   *\r\n   * @param vector2 減算するベクトル値\r\n   * @return 減算結果 ベクトル値\r\n   */\r\n  public substract(vector2: CubismVector2): CubismVector2 {\r\n    const ret: CubismVector2 = new CubismVector2(0.0, 0.0);\r\n    ret.x = this.x - vector2.x;\r\n    ret.y = this.y - vector2.y;\r\n    return ret;\r\n  }\r\n\r\n  /**\r\n   * ベクトルの乗算\r\n   *\r\n   * @param vector2 乗算するベクトル値\r\n   * @return 乗算結果 ベクトル値\r\n   */\r\n  public multiply(vector2: CubismVector2): CubismVector2 {\r\n    const ret: CubismVector2 = new CubismVector2(0.0, 0.0);\r\n    ret.x = this.x * vector2.x;\r\n    ret.y = this.y * vector2.y;\r\n    return ret;\r\n  }\r\n\r\n  /**\r\n   * ベクトルの乗算(スカラー)\r\n   *\r\n   * @param scalar 乗算するスカラー値\r\n   * @return 乗算結果 ベクトル値\r\n   */\r\n  public multiplyByScaler(scalar: number): CubismVector2 {\r\n    return this.multiply(new CubismVector2(scalar, scalar));\r\n  }\r\n\r\n  /**\r\n   * ベクトルの除算\r\n   *\r\n   * @param vector2 除算するベクトル値\r\n   * @return 除算結果 ベクトル値\r\n   */\r\n  public division(vector2: CubismVector2): CubismVector2 {\r\n    const ret: CubismVector2 = new CubismVector2(0.0, 0.0);\r\n    ret.x = this.x / vector2.x;\r\n    ret.y = this.y / vector2.y;\r\n    return ret;\r\n  }\r\n\r\n  /**\r\n   * ベクトルの除算(スカラー)\r\n   *\r\n   * @param scalar 除算するスカラー値\r\n   * @return 除算結果 ベクトル値\r\n   */\r\n  public divisionByScalar(scalar: number): CubismVector2 {\r\n    return this.division(new CubismVector2(scalar, scalar));\r\n  }\r\n\r\n  /**\r\n   * ベクトルの長さを取得する\r\n   *\r\n   * @return ベクトルの長さ\r\n   */\r\n  public getLength(): number {\r\n    return Math.sqrt(this.x * this.x + this.y * this.y);\r\n  }\r\n\r\n  /**\r\n   * ベクトルの距離の取得\r\n   *\r\n   * @param a 点\r\n   * @return ベクトルの距離\r\n   */\r\n  public getDistanceWith(a: CubismVector2): number {\r\n    return Math.sqrt(\r\n      (this.x - a.x) * (this.x - a.x) + (this.y - a.y) * (this.y - a.y)\r\n    );\r\n  }\r\n\r\n  /**\r\n   * ドット積の計算\r\n   *\r\n   * @param a 値\r\n   * @return 結果\r\n   */\r\n  public dot(a: CubismVector2): number {\r\n    return this.x * a.x + this.y * a.y;\r\n  }\r\n\r\n  /**\r\n   * 正規化の適用\r\n   */\r\n  public normalize(): void {\r\n    const length: number = Math.pow(this.x * this.x + this.y * this.y, 0.5);\r\n\r\n    this.x = this.x / length;\r\n    this.y = this.y / length;\r\n  }\r\n\r\n  /**\r\n   * 等しさの確認（等しいか？）\r\n   *\r\n   * 値が等しいか？\r\n   *\r\n   * @param rhs 確認する値\r\n   * @return true 値は等しい\r\n   * @return false 値は等しくない\r\n   */\r\n  public isEqual(rhs: CubismVector2): boolean {\r\n    return this.x == rhs.x && this.y == rhs.y;\r\n  }\r\n\r\n  /**\r\n   * 等しさの確認（等しくないか？）\r\n   *\r\n   * 値が等しくないか？\r\n   *\r\n   * @param rhs 確認する値\r\n   * @return true 値は等しくない\r\n   * @return false 値は等しい\r\n   */\r\n  public isNotEqual(rhs: CubismVector2): boolean {\r\n    return !this.isEqual(rhs);\r\n  }\r\n}\r\n\r\n// Namespace definition for compatibility.\r\nimport * as $ from './cubismvector2';\r\n// eslint-disable-next-line @typescript-eslint/no-namespace\r\nexport namespace Live2DCubismFramework {\r\n  export const CubismVector2 = $.CubismVector2;\r\n  export type CubismVector2 = $.CubismVector2;\r\n}\r\n","/**\r\n * Copyright(c) Live2D Inc. All rights reserved.\r\n *\r\n * Use of this source code is governed by the Live2D Open Software license\r\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\r\n */\r\n\r\nimport { CubismMatrix44 } from './cubismmatrix44';\r\n\r\n/**\r\n * カメラの位置変更に使うと便利な4x4行列\r\n *\r\n * カメラの位置変更に使うと便利な4x4行列のクラス。\r\n */\r\nexport class CubismViewMatrix extends CubismMatrix44 {\r\n  /**\r\n   * コンストラクタ\r\n   */\r\n  public constructor() {\r\n    super();\r\n    this._screenLeft = 0.0;\r\n    this._screenRight = 0.0;\r\n    this._screenTop = 0.0;\r\n    this._screenBottom = 0.0;\r\n    this._maxLeft = 0.0;\r\n    this._maxRight = 0.0;\r\n    this._maxTop = 0.0;\r\n    this._maxBottom = 0.0;\r\n    this._maxScale = 0.0;\r\n    this._minScale = 0.0;\r\n  }\r\n\r\n  /**\r\n   * 移動を調整\r\n   *\r\n   * @param x X軸の移動量\r\n   * @param y Y軸の移動量\r\n   */\r\n  public adjustTranslate(x: number, y: number): void {\r\n    if (this._tr[0] * this._maxLeft + (this._tr[12] + x) > this._screenLeft) {\r\n      x = this._screenLeft - this._tr[0] * this._maxLeft - this._tr[12];\r\n    }\r\n\r\n    if (this._tr[0] * this._maxRight + (this._tr[12] + x) < this._screenRight) {\r\n      x = this._screenRight - this._tr[0] * this._maxRight - this._tr[12];\r\n    }\r\n\r\n    if (this._tr[5] * this._maxTop + (this._tr[13] + y) < this._screenTop) {\r\n      y = this._screenTop - this._tr[5] * this._maxTop - this._tr[13];\r\n    }\r\n\r\n    if (\r\n      this._tr[5] * this._maxBottom + (this._tr[13] + y) >\r\n      this._screenBottom\r\n    ) {\r\n      y = this._screenBottom - this._tr[5] * this._maxBottom - this._tr[13];\r\n    }\r\n\r\n    const tr1: Float32Array = new Float32Array([\r\n      1.0,\r\n      0.0,\r\n      0.0,\r\n      0.0,\r\n      0.0,\r\n      1.0,\r\n      0.0,\r\n      0.0,\r\n      0.0,\r\n      0.0,\r\n      1.0,\r\n      0.0,\r\n      x,\r\n      y,\r\n      0.0,\r\n      1.0,\r\n    ]);\r\n\r\n    CubismMatrix44.multiply(tr1, this._tr, this._tr);\r\n  }\r\n\r\n  /**\r\n   * 拡大率を調整\r\n   *\r\n   * @param cx 拡大を行うX軸の中心位置\r\n   * @param cy 拡大を行うY軸の中心位置\r\n   * @param scale 拡大率\r\n   */\r\n  public adjustScale(cx: number, cy: number, scale: number): void {\r\n    const maxScale: number = this.getMaxScale();\r\n    const minScale: number = this.getMinScale();\r\n\r\n    const targetScale = scale * this._tr[0];\r\n\r\n    if (targetScale < minScale) {\r\n      if (this._tr[0] > 0.0) {\r\n        scale = minScale / this._tr[0];\r\n      }\r\n    } else if (targetScale > maxScale) {\r\n      if (this._tr[0] > 0.0) {\r\n        scale = maxScale / this._tr[0];\r\n      }\r\n    }\r\n\r\n    const tr1: Float32Array = new Float32Array([\r\n      1.0,\r\n      0.0,\r\n      0.0,\r\n      0.0,\r\n      0.0,\r\n      1.0,\r\n      0.0,\r\n      0.0,\r\n      0.0,\r\n      0.0,\r\n      1.0,\r\n      0.0,\r\n      cx,\r\n      cy,\r\n      0.0,\r\n      1.0,\r\n    ]);\r\n\r\n    const tr2: Float32Array = new Float32Array([\r\n      scale,\r\n      0.0,\r\n      0.0,\r\n      0.0,\r\n      0.0,\r\n      scale,\r\n      0.0,\r\n      0.0,\r\n      0.0,\r\n      0.0,\r\n      1.0,\r\n      0.0,\r\n      0.0,\r\n      0.0,\r\n      0.0,\r\n      1.0,\r\n    ]);\r\n\r\n    const tr3: Float32Array = new Float32Array([\r\n      1.0,\r\n      0.0,\r\n      0.0,\r\n      0.0,\r\n      0.0,\r\n      1.0,\r\n      0.0,\r\n      0.0,\r\n      0.0,\r\n      0.0,\r\n      1.0,\r\n      0.0,\r\n      -cx,\r\n      -cy,\r\n      0.0,\r\n      1.0,\r\n    ]);\r\n\r\n    CubismMatrix44.multiply(tr3, this._tr, this._tr);\r\n    CubismMatrix44.multiply(tr2, this._tr, this._tr);\r\n    CubismMatrix44.multiply(tr1, this._tr, this._tr);\r\n  }\r\n\r\n  /**\r\n   * デバイスに対応する論理座養生の範囲の設定\r\n   *\r\n   * @param left      左辺のX軸の位置\r\n   * @param right     右辺のX軸の位置\r\n   * @param bottom    下辺のY軸の位置\r\n   * @param top       上辺のY軸の位置\r\n   */\r\n  public setScreenRect(\r\n    left: number,\r\n    right: number,\r\n    bottom: number,\r\n    top: number\r\n  ): void {\r\n    this._screenLeft = left;\r\n    this._screenRight = right;\r\n    this._screenBottom = bottom;\r\n    this._screenTop = top;\r\n  }\r\n\r\n  /**\r\n   * デバイスに対応する論理座標上の移動可能範囲の設定\r\n   * @param left      左辺のX軸の位置\r\n   * @param right     右辺のX軸の位置\r\n   * @param bottom    下辺のY軸の位置\r\n   * @param top       上辺のY軸の位置\r\n   */\r\n  public setMaxScreenRect(\r\n    left: number,\r\n    right: number,\r\n    bottom: number,\r\n    top: number\r\n  ): void {\r\n    this._maxLeft = left;\r\n    this._maxRight = right;\r\n    this._maxTop = top;\r\n    this._maxBottom = bottom;\r\n  }\r\n\r\n  /**\r\n   * 最大拡大率の設定\r\n   * @param maxScale 最大拡大率\r\n   */\r\n  public setMaxScale(maxScale: number): void {\r\n    this._maxScale = maxScale;\r\n  }\r\n\r\n  /**\r\n   * 最小拡大率の設定\r\n   * @param minScale 最小拡大率\r\n   */\r\n  public setMinScale(minScale: number): void {\r\n    this._minScale = minScale;\r\n  }\r\n\r\n  /**\r\n   * 最大拡大率の取得\r\n   * @return 最大拡大率\r\n   */\r\n  public getMaxScale(): number {\r\n    return this._maxScale;\r\n  }\r\n\r\n  /**\r\n   * 最小拡大率の取得\r\n   * @return 最小拡大率\r\n   */\r\n  public getMinScale(): number {\r\n    return this._minScale;\r\n  }\r\n\r\n  /**\r\n   * 拡大率が最大になっているかを確認する\r\n   *\r\n   * @return true 拡大率は最大\r\n   * @return false 拡大率は最大ではない\r\n   */\r\n  public isMaxScale(): boolean {\r\n    return this.getScaleX() >= this._maxScale;\r\n  }\r\n\r\n  /**\r\n   * 拡大率が最小になっているかを確認する\r\n   *\r\n   * @return true 拡大率は最小\r\n   * @return false 拡大率は最小ではない\r\n   */\r\n  public isMinScale(): boolean {\r\n    return this.getScaleX() <= this._minScale;\r\n  }\r\n\r\n  /**\r\n   * デバイスに対応する論理座標の左辺のＸ軸位置を取得する\r\n   * @return デバイスに対応する論理座標の左辺のX軸位置\r\n   */\r\n  public getScreenLeft(): number {\r\n    return this._screenLeft;\r\n  }\r\n\r\n  /**\r\n   * デバイスに対応する論理座標の右辺のＸ軸位置を取得する\r\n   * @return デバイスに対応する論理座標の右辺のX軸位置\r\n   */\r\n  public getScreenRight(): number {\r\n    return this._screenRight;\r\n  }\r\n\r\n  /**\r\n   * デバイスに対応する論理座標の下辺のY軸位置を取得する\r\n   * @return デバイスに対応する論理座標の下辺のY軸位置\r\n   */\r\n  public getScreenBottom(): number {\r\n    return this._screenBottom;\r\n  }\r\n\r\n  /**\r\n   * デバイスに対応する論理座標の上辺のY軸位置を取得する\r\n   * @return デバイスに対応する論理座標の上辺のY軸位置\r\n   */\r\n  public getScreenTop(): number {\r\n    return this._screenTop;\r\n  }\r\n\r\n  /**\r\n   * 左辺のX軸位置の最大値の取得\r\n   * @return 左辺のX軸位置の最大値\r\n   */\r\n  public getMaxLeft(): number {\r\n    return this._maxLeft;\r\n  }\r\n\r\n  /**\r\n   * 右辺のX軸位置の最大値の取得\r\n   * @return 右辺のX軸位置の最大値\r\n   */\r\n  public getMaxRight(): number {\r\n    return this._maxRight;\r\n  }\r\n\r\n  /**\r\n   * 下辺のY軸位置の最大値の取得\r\n   * @return 下辺のY軸位置の最大値\r\n   */\r\n  public getMaxBottom(): number {\r\n    return this._maxBottom;\r\n  }\r\n\r\n  /**\r\n   * 上辺のY軸位置の最大値の取得\r\n   * @return 上辺のY軸位置の最大値\r\n   */\r\n  public getMaxTop(): number {\r\n    return this._maxTop;\r\n  }\r\n\r\n  private _screenLeft: number; // デバイスに対応する論理座標上の範囲（左辺X軸位置）\r\n  private _screenRight: number; // デバイスに対応する論理座標上の範囲（右辺X軸位置）\r\n  private _screenTop: number; // デバイスに対応する論理座標上の範囲（上辺Y軸位置）\r\n  private _screenBottom: number; // デバイスに対応する論理座標上の範囲（下辺Y軸位置）\r\n  private _maxLeft: number; // 論理座標上の移動可能範囲（左辺X軸位置）\r\n  private _maxRight: number; // 論理座標上の移動可能範囲（右辺X軸位置）\r\n  private _maxTop: number; // 論理座標上の移動可能範囲（上辺Y軸位置）\r\n  private _maxBottom: number; // 論理座標上の移動可能範囲（下辺Y軸位置）\r\n  private _maxScale: number; // 拡大率の最大値\r\n  private _minScale: number; // 拡大率の最小値\r\n}\r\n\r\n// Namespace definition for compatibility.\r\nimport * as $ from './cubismviewmatrix';\r\n// eslint-disable-next-line @typescript-eslint/no-namespace\r\nexport namespace Live2DCubismFramework {\r\n  export const CubismViewMatrix = $.CubismViewMatrix;\r\n  export type CubismViewMatrix = $.CubismViewMatrix;\r\n}\r\n","/**\r\n * Copyright(c) Live2D Inc. All rights reserved.\r\n *\r\n * Use of this source code is governed by the Live2D Open Software license\r\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\r\n */\r\n\r\nimport { CSM_ASSERT } from '../utils/cubismdebug';\r\nimport { CubismModel } from './cubismmodel';\r\n\r\n/**\r\n * Mocデータの管理\r\n *\r\n * Mocデータの管理を行うクラス。\r\n */\r\nexport class CubismMoc {\r\n  /**\r\n   * Mocデータの作成\r\n   */\r\n  public static create(mocBytes: ArrayBuffer): CubismMoc {\r\n    let cubismMoc: CubismMoc = null;\r\n    const moc: Live2DCubismCore.Moc =\r\n      Live2DCubismCore.Moc.fromArrayBuffer(mocBytes);\r\n\r\n    if (moc) {\r\n      cubismMoc = new CubismMoc(moc);\r\n      cubismMoc._mocVersion = Live2DCubismCore.Version.csmGetMocVersion(\r\n        moc,\r\n        mocBytes\r\n      );\r\n    }\r\n\r\n    return cubismMoc;\r\n  }\r\n\r\n  /**\r\n   * Mocデータを削除\r\n   *\r\n   * Mocデータを削除する\r\n   */\r\n  public static delete(moc: CubismMoc): void {\r\n    moc._moc._release();\r\n    moc._moc = null;\r\n    moc = null;\r\n  }\r\n\r\n  /**\r\n   * モデルを作成する\r\n   *\r\n   * @return Mocデータから作成されたモデル\r\n   */\r\n  createModel(): CubismModel {\r\n    let cubismModel: CubismModel = null;\r\n\r\n    const model: Live2DCubismCore.Model = Live2DCubismCore.Model.fromMoc(\r\n      this._moc\r\n    );\r\n\r\n    if (model) {\r\n      cubismModel = new CubismModel(model);\r\n      cubismModel.initialize();\r\n\r\n      ++this._modelCount;\r\n    }\r\n\r\n    return cubismModel;\r\n  }\r\n\r\n  /**\r\n   * モデルを削除する\r\n   */\r\n  deleteModel(model: CubismModel): void {\r\n    if (model != null) {\r\n      model.release();\r\n      model = null;\r\n      --this._modelCount;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * コンストラクタ\r\n   */\r\n  private constructor(moc: Live2DCubismCore.Moc) {\r\n    this._moc = moc;\r\n    this._modelCount = 0;\r\n    this._mocVersion = 0;\r\n  }\r\n\r\n  /**\r\n   * デストラクタ相当の処理\r\n   */\r\n  public release(): void {\r\n    CSM_ASSERT(this._modelCount == 0);\r\n\r\n    this._moc._release();\r\n    this._moc = null;\r\n  }\r\n\r\n  /**\r\n   * 最新の.moc3 Versionを取得\r\n   */\r\n  public getLatestMocVersion(): number {\r\n    return Live2DCubismCore.Version.csmGetLatestMocVersion();\r\n  }\r\n\r\n  /**\r\n   * 読み込んだモデルの.moc3 Versionを取得\r\n   */\r\n  public getMocVersion(): number {\r\n    return this._mocVersion;\r\n  }\r\n\r\n  _moc: Live2DCubismCore.Moc; // Mocデータ\r\n  _modelCount: number; // Mocデータから作られたモデルの個数\r\n  _mocVersion: number; // 読み込んだモデルの.moc3 Version\r\n}\r\n\r\n// Namespace definition for compatibility.\r\nimport * as $ from './cubismmoc';\r\n// eslint-disable-next-line @typescript-eslint/no-namespace\r\nexport namespace Live2DCubismFramework {\r\n  export const CubismMoc = $.CubismMoc;\r\n  export type CubismMoc = $.CubismMoc;\r\n}\r\n","/**\r\n * Copyright(c) Live2D Inc. All rights reserved.\r\n *\r\n * Use of this source code is governed by the Live2D Open Software license\r\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\r\n */\r\n\r\nimport { CubismIdHandle } from '../id/cubismid';\r\nimport { CubismFramework } from '../live2dcubismframework';\r\nimport {\r\n  CubismBlendMode,\r\n  CubismTextureColor,\r\n} from '../rendering/cubismrenderer';\r\nimport { csmMap } from '../type/csmmap';\r\nimport { csmVector } from '../type/csmvector';\r\nimport { CSM_ASSERT } from '../utils/cubismdebug';\r\n\r\n/**\r\n * SDK側から与えられたDrawableの乗算色・スクリーン色上書きフラグと\r\n * その色を保持する構造体\r\n */\r\nexport class DrawableColorData {\r\n  isOverwritten = false;\r\n  Color: CubismTextureColor = new CubismTextureColor();\r\n}\r\n\r\n/**\r\n * モデル\r\n *\r\n * Mocデータから生成されるモデルのクラス。\r\n */\r\nexport class CubismModel {\r\n  /**\r\n   * モデルのパラメータの更新\r\n   */\r\n  public update(): void {\r\n    // Update model\r\n    this._model.update();\r\n\r\n    this._model.drawables.resetDynamicFlags();\r\n  }\r\n\r\n  /**\r\n   * キャンバスの幅を取得する\r\n   */\r\n  public getCanvasWidth(): number {\r\n    if (this._model == null) {\r\n      return 0.0;\r\n    }\r\n\r\n    return (\r\n      this._model.canvasinfo.CanvasWidth / this._model.canvasinfo.PixelsPerUnit\r\n    );\r\n  }\r\n\r\n  /**\r\n   * キャンバスの高さを取得する\r\n   */\r\n  public getCanvasHeight(): number {\r\n    if (this._model == null) {\r\n      return 0.0;\r\n    }\r\n\r\n    return (\r\n      this._model.canvasinfo.CanvasHeight / this._model.canvasinfo.PixelsPerUnit\r\n    );\r\n  }\r\n\r\n  /**\r\n   * パラメータを保存する\r\n   */\r\n  public saveParameters(): void {\r\n    const parameterCount: number = this._model.parameters.count;\r\n    const savedParameterCount: number = this._savedParameters.getSize();\r\n\r\n    for (let i = 0; i < parameterCount; ++i) {\r\n      if (i < savedParameterCount) {\r\n        this._savedParameters.set(i, this._parameterValues[i]);\r\n      } else {\r\n        this._savedParameters.pushBack(this._parameterValues[i]);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 乗算色を取得する\r\n   * @param index Drawablesのインデックス\r\n   * @returns 指定したdrawableの乗算色(RGBA)\r\n   */\r\n  public getMultiplyColor(index: number): CubismTextureColor {\r\n    // Drawableとモデル全体の乗算色上書きフラグがどちらもtrueな場合、モデル全体の上書きフラグが優先される\r\n    if (\r\n      this.getOverwriteFlagForModelMultiplyColors() ||\r\n      this.getOverwriteFlagForDrawableMultiplyColors(index)\r\n    ) {\r\n      return this._userMultiplyColors.at(index).Color;\r\n    }\r\n\r\n    const color = this.getDrawableMultiplyColor(index);\r\n    return color;\r\n  }\r\n\r\n  /**\r\n   * スクリーン色を取得する\r\n   * @param index Drawablesのインデックス\r\n   * @returns 指定したdrawableのスクリーン色(RGBA)\r\n   */\r\n  public getScreenColor(index: number): CubismTextureColor {\r\n    // Drawableとモデル全体のスクリーン色上書きフラグがどちらもtrueな場合、モデル全体の上書きフラグが優先される\r\n    if (\r\n      this.getOverwriteFlagForModelScreenColors() ||\r\n      this.getOverwriteFlagForDrawableScreenColors(index)\r\n    ) {\r\n      return this._userScreenColors.at(index).Color;\r\n    }\r\n\r\n    const color = this.getDrawableScreenColor(index);\r\n    return color;\r\n  }\r\n\r\n  /**\r\n   * 乗算色をセットする\r\n   * @param index Drawablesのインデックス\r\n   * @param color 設定する乗算色(CubismTextureColor)\r\n   */\r\n  public setMultiplyColorByTextureColor(\r\n    index: number,\r\n    color: CubismTextureColor\r\n  ) {\r\n    this.setMultiplyColorByRGBA(index, color.R, color.G, color.B, color.A);\r\n  }\r\n\r\n  /**\r\n   * 乗算色をセットする\r\n   * @param index Drawablesのインデックス\r\n   * @param r 設定する乗算色のR値\r\n   * @param g 設定する乗算色のG値\r\n   * @param b 設定する乗算色のB値\r\n   * @param a 設定する乗算色のA値\r\n   */\r\n  public setMultiplyColorByRGBA(\r\n    index: number,\r\n    r: number,\r\n    g: number,\r\n    b: number,\r\n    a = 1.0\r\n  ) {\r\n    this._userMultiplyColors.at(index).Color.R = r;\r\n    this._userMultiplyColors.at(index).Color.G = g;\r\n    this._userMultiplyColors.at(index).Color.B = b;\r\n    this._userMultiplyColors.at(index).Color.A = a;\r\n  }\r\n\r\n  /**\r\n   * スクリーン色をセットする\r\n   * @param index Drawablesのインデックス\r\n   * @param color 設定するスクリーン色(CubismTextureColor)\r\n   */\r\n  public setScreenColorByTextureColor(\r\n    index: number,\r\n    color: CubismTextureColor\r\n  ) {\r\n    this.setScreenColorByRGBA(index, color.R, color.G, color.B, color.A);\r\n  }\r\n\r\n  /**\r\n   * スクリーン色をセットする\r\n   * @param index Drawablesのインデックス\r\n   * @param r 設定するスクリーン色のR値\r\n   * @param g 設定するスクリーン色のG値\r\n   * @param b 設定するスクリーン色のB値\r\n   * @param a 設定するスクリーン色のA値\r\n   */\r\n  public setScreenColorByRGBA(\r\n    index: number,\r\n    r: number,\r\n    g: number,\r\n    b: number,\r\n    a = 1.0\r\n  ) {\r\n    this._userScreenColors.at(index).Color.R = r;\r\n    this._userScreenColors.at(index).Color.G = g;\r\n    this._userScreenColors.at(index).Color.B = b;\r\n    this._userScreenColors.at(index).Color.A = a;\r\n  }\r\n\r\n  /**\r\n   * SDKから指定したモデルの乗算色を上書きするか\r\n   * @returns true -> SDKからの情報を優先する\r\n   *          false -> モデルに設定されている色情報を使用\r\n   */\r\n  public getOverwriteFlagForModelMultiplyColors(): boolean {\r\n    return this._isOverwrittenModelMultiplyColors;\r\n  }\r\n\r\n  /**\r\n   * SDKから指定したモデルのスクリーン色を上書きするか\r\n   * @returns true -> SDKからの情報を優先する\r\n   *          false -> モデルに設定されている色情報を使用\r\n   */\r\n  public getOverwriteFlagForModelScreenColors(): boolean {\r\n    return this._isOverwrittenModelScreenColors;\r\n  }\r\n\r\n  /**\r\n   * SDKから指定したモデルの乗算色を上書きするかセットする\r\n   * @param value true -> SDKからの情報を優先する\r\n   *              false -> モデルに設定されている色情報を使用\r\n   */\r\n  public setOverwriteFlagForModelMultiplyColors(value: boolean) {\r\n    this._isOverwrittenModelMultiplyColors = value;\r\n  }\r\n\r\n  /**\r\n   * SDKから指定したモデルのスクリーン色を上書きするかセットする\r\n   * @param value true -> SDKからの情報を優先する\r\n   *              false -> モデルに設定されている色情報を使用\r\n   */\r\n  public setOverwriteFlagForModelScreenColors(value: boolean) {\r\n    this._isOverwrittenModelScreenColors = value;\r\n  }\r\n\r\n  /**\r\n   * SDKから指定したDrawableIndexの乗算色を上書きするか\r\n   * @returns true -> SDKからの情報を優先する\r\n   *          false -> モデルに設定されている色情報を使用\r\n   */\r\n  public getOverwriteFlagForDrawableMultiplyColors(\r\n    drawableindex: number\r\n  ): boolean {\r\n    return this._userMultiplyColors.at(drawableindex).isOverwritten;\r\n  }\r\n\r\n  /**\r\n   * SDKから指定したDrawableIndexのスクリーン色を上書きするか\r\n   * @returns true -> SDKからの情報を優先する\r\n   *          false -> モデルに設定されている色情報を使用\r\n   */\r\n  public getOverwriteFlagForDrawableScreenColors(\r\n    drawableindex: number\r\n  ): boolean {\r\n    return this._userMultiplyColors.at(drawableindex).isOverwritten;\r\n  }\r\n\r\n  /**\r\n   * SDKから指定したDrawableIndexの乗算色を上書きするかセットする\r\n   * @param value true -> SDKからの情報を優先する\r\n   *              false -> モデルに設定されている色情報を使用\r\n   */\r\n  public setOverwriteFlagForDrawableMultiplyColors(\r\n    drawableindex: number,\r\n    value: boolean\r\n  ) {\r\n    this._userMultiplyColors.at(drawableindex).isOverwritten = value;\r\n  }\r\n\r\n  /**\r\n   * SDKから指定したDrawableIndexのスクリーン色を上書きするかセットする\r\n   * @param value true -> SDKからの情報を優先する\r\n   *              false -> モデルに設定されている色情報を使用\r\n   */\r\n  public setOverwriteFlagForDrawableScreenColors(\r\n    drawableindex: number,\r\n    value: boolean\r\n  ) {\r\n    this._userScreenColors.at(drawableindex).isOverwritten = value;\r\n  }\r\n\r\n  /**\r\n   * モデルを取得\r\n   */\r\n  public getModel(): Live2DCubismCore.Model {\r\n    return this._model;\r\n  }\r\n\r\n  /**\r\n   * パーツのインデックスを取得\r\n   * @param partId パーツのID\r\n   * @return パーツのインデックス\r\n   */\r\n  public getPartIndex(partId: CubismIdHandle): number {\r\n    let partIndex: number;\r\n    const partCount: number = this._model.parts.count;\r\n\r\n    for (partIndex = 0; partIndex < partCount; ++partIndex) {\r\n      if (partId == this._partIds.at(partIndex)) {\r\n        return partIndex;\r\n      }\r\n    }\r\n\r\n    // モデルに存在していない場合、非存在パーツIDリスト内にあるかを検索し、そのインデックスを返す\r\n    if (this._notExistPartId.isExist(partId)) {\r\n      return this._notExistPartId.getValue(partId);\r\n    }\r\n\r\n    // 非存在パーツIDリストにない場合、新しく要素を追加する\r\n    partIndex = partCount + this._notExistPartId.getSize();\r\n    this._notExistPartId.setValue(partId, partIndex);\r\n    this._notExistPartOpacities.appendKey(partIndex);\r\n\r\n    return partIndex;\r\n  }\r\n\r\n  /**\r\n   * パーツの個数の取得\r\n   * @return パーツの個数\r\n   */\r\n  public getPartCount(): number {\r\n    const partCount: number = this._model.parts.count;\r\n    return partCount;\r\n  }\r\n\r\n  /**\r\n   * パーツの不透明度の設定(Index)\r\n   * @param partIndex パーツのインデックス\r\n   * @param opacity 不透明度\r\n   */\r\n  public setPartOpacityByIndex(partIndex: number, opacity: number): void {\r\n    if (this._notExistPartOpacities.isExist(partIndex)) {\r\n      this._notExistPartOpacities.setValue(partIndex, opacity);\r\n      return;\r\n    }\r\n\r\n    // インデックスの範囲内検知\r\n    CSM_ASSERT(0 <= partIndex && partIndex < this.getPartCount());\r\n\r\n    this._partOpacities[partIndex] = opacity;\r\n  }\r\n\r\n  /**\r\n   * パーツの不透明度の設定(Id)\r\n   * @param partId パーツのID\r\n   * @param opacity パーツの不透明度\r\n   */\r\n  public setPartOpacityById(partId: CubismIdHandle, opacity: number): void {\r\n    // 高速化のためにPartIndexを取得できる機構になっているが、外部からの設定の時は呼び出し頻度が低いため不要\r\n    const index: number = this.getPartIndex(partId);\r\n\r\n    if (index < 0) {\r\n      return; // パーツがないのでスキップ\r\n    }\r\n\r\n    this.setPartOpacityByIndex(index, opacity);\r\n  }\r\n\r\n  /**\r\n   * パーツの不透明度の取得(index)\r\n   * @param partIndex パーツのインデックス\r\n   * @return パーツの不透明度\r\n   */\r\n  public getPartOpacityByIndex(partIndex: number): number {\r\n    if (this._notExistPartOpacities.isExist(partIndex)) {\r\n      // モデルに存在しないパーツIDの場合、非存在パーツリストから不透明度を返す。\r\n      return this._notExistPartOpacities.getValue(partIndex);\r\n    }\r\n\r\n    // インデックスの範囲内検知\r\n    CSM_ASSERT(0 <= partIndex && partIndex < this.getPartCount());\r\n\r\n    return this._partOpacities[partIndex];\r\n  }\r\n\r\n  /**\r\n   * パーツの不透明度の取得(id)\r\n   * @param partId パーツのＩｄ\r\n   * @return パーツの不透明度\r\n   */\r\n  public getPartOpacityById(partId: CubismIdHandle): number {\r\n    // 高速化のためにPartIndexを取得できる機構になっているが、外部からの設定の時は呼び出し頻度が低いため不要\r\n    const index: number = this.getPartIndex(partId);\r\n\r\n    if (index < 0) {\r\n      return 0; // パーツが無いのでスキップ\r\n    }\r\n\r\n    return this.getPartOpacityByIndex(index);\r\n  }\r\n\r\n  /**\r\n   * パラメータのインデックスの取得\r\n   * @param パラメータID\r\n   * @return パラメータのインデックス\r\n   */\r\n  public getParameterIndex(parameterId: CubismIdHandle): number {\r\n    let parameterIndex: number;\r\n    const idCount: number = this._model.parameters.count;\r\n\r\n    for (parameterIndex = 0; parameterIndex < idCount; ++parameterIndex) {\r\n      if (parameterId != this._parameterIds.at(parameterIndex)) {\r\n        continue;\r\n      }\r\n\r\n      return parameterIndex;\r\n    }\r\n\r\n    // モデルに存在していない場合、非存在パラメータIDリスト内を検索し、そのインデックスを返す\r\n    if (this._notExistParameterId.isExist(parameterId)) {\r\n      return this._notExistParameterId.getValue(parameterId);\r\n    }\r\n\r\n    // 非存在パラメータIDリストにない場合新しく要素を追加する\r\n    parameterIndex =\r\n      this._model.parameters.count + this._notExistParameterId.getSize();\r\n\r\n    this._notExistParameterId.setValue(parameterId, parameterIndex);\r\n    this._notExistParameterValues.appendKey(parameterIndex);\r\n\r\n    return parameterIndex;\r\n  }\r\n\r\n  /**\r\n   * パラメータの個数の取得\r\n   * @return パラメータの個数\r\n   */\r\n  public getParameterCount(): number {\r\n    return this._model.parameters.count;\r\n  }\r\n\r\n  /**\r\n   * パラメータの種類の取得\r\n   * @param parameterIndex パラメータのインデックス\r\n   * @return csmParameterType_Normal -> 通常のパラメータ\r\n   *          csmParameterType_BlendShape -> ブレンドシェイプパラメータ\r\n   */\r\n  public getParameterType(\r\n    parameterIndex: number\r\n  ): Live2DCubismCore.csmParameterType {\r\n    return this._model.parameters.types[parameterIndex];\r\n  }\r\n\r\n  /**\r\n   * パラメータの最大値の取得\r\n   * @param parameterIndex パラメータのインデックス\r\n   * @return パラメータの最大値\r\n   */\r\n  public getParameterMaximumValue(parameterIndex: number): number {\r\n    return this._model.parameters.maximumValues[parameterIndex];\r\n  }\r\n\r\n  /**\r\n   * パラメータの最小値の取得\r\n   * @param parameterIndex パラメータのインデックス\r\n   * @return パラメータの最小値\r\n   */\r\n  public getParameterMinimumValue(parameterIndex: number): number {\r\n    return this._model.parameters.minimumValues[parameterIndex];\r\n  }\r\n\r\n  /**\r\n   * パラメータのデフォルト値の取得\r\n   * @param parameterIndex パラメータのインデックス\r\n   * @return パラメータのデフォルト値\r\n   */\r\n  public getParameterDefaultValue(parameterIndex: number): number {\r\n    return this._model.parameters.defaultValues[parameterIndex];\r\n  }\r\n\r\n  /**\r\n   * パラメータの値の取得\r\n   * @param parameterIndex    パラメータのインデックス\r\n   * @return パラメータの値\r\n   */\r\n  public getParameterValueByIndex(parameterIndex: number): number {\r\n    if (this._notExistParameterValues.isExist(parameterIndex)) {\r\n      return this._notExistParameterValues.getValue(parameterIndex);\r\n    }\r\n\r\n    // インデックスの範囲内検知\r\n    CSM_ASSERT(\r\n      0 <= parameterIndex && parameterIndex < this.getParameterCount()\r\n    );\r\n\r\n    return this._parameterValues[parameterIndex];\r\n  }\r\n\r\n  /**\r\n   * パラメータの値の取得\r\n   * @param parameterId    パラメータのID\r\n   * @return パラメータの値\r\n   */\r\n  public getParameterValueById(parameterId: CubismIdHandle): number {\r\n    // 高速化のためにparameterIndexを取得できる機構になっているが、外部からの設定の時は呼び出し頻度が低いため不要\r\n    const parameterIndex: number = this.getParameterIndex(parameterId);\r\n    return this.getParameterValueByIndex(parameterIndex);\r\n  }\r\n\r\n  /**\r\n   * パラメータの値の設定\r\n   * @param parameterIndex パラメータのインデックス\r\n   * @param value パラメータの値\r\n   * @param weight 重み\r\n   */\r\n  public setParameterValueByIndex(\r\n    parameterIndex: number,\r\n    value: number,\r\n    weight = 1.0\r\n  ): void {\r\n    if (this._notExistParameterValues.isExist(parameterIndex)) {\r\n      this._notExistParameterValues.setValue(\r\n        parameterIndex,\r\n        weight == 1\r\n          ? value\r\n          : this._notExistParameterValues.getValue(parameterIndex) *\r\n              (1 - weight) +\r\n              value * weight\r\n      );\r\n\r\n      return;\r\n    }\r\n\r\n    // インデックスの範囲内検知\r\n    CSM_ASSERT(\r\n      0 <= parameterIndex && parameterIndex < this.getParameterCount()\r\n    );\r\n\r\n    if (this._model.parameters.maximumValues[parameterIndex] < value) {\r\n      value = this._model.parameters.maximumValues[parameterIndex];\r\n    }\r\n    if (this._model.parameters.minimumValues[parameterIndex] > value) {\r\n      value = this._model.parameters.minimumValues[parameterIndex];\r\n    }\r\n\r\n    this._parameterValues[parameterIndex] =\r\n      weight == 1\r\n        ? value\r\n        : (this._parameterValues[parameterIndex] =\r\n            this._parameterValues[parameterIndex] * (1 - weight) +\r\n            value * weight);\r\n  }\r\n\r\n  /**\r\n   * パラメータの値の設定\r\n   * @param parameterId パラメータのID\r\n   * @param value パラメータの値\r\n   * @param weight 重み\r\n   */\r\n  public setParameterValueById(\r\n    parameterId: CubismIdHandle,\r\n    value: number,\r\n    weight = 1.0\r\n  ): void {\r\n    const index: number = this.getParameterIndex(parameterId);\r\n    this.setParameterValueByIndex(index, value, weight);\r\n  }\r\n\r\n  /**\r\n   * パラメータの値の加算(index)\r\n   * @param parameterIndex パラメータインデックス\r\n   * @param value 加算する値\r\n   * @param weight 重み\r\n   */\r\n  public addParameterValueByIndex(\r\n    parameterIndex: number,\r\n    value: number,\r\n    weight = 1.0\r\n  ): void {\r\n    this.setParameterValueByIndex(\r\n      parameterIndex,\r\n      this.getParameterValueByIndex(parameterIndex) + value * weight\r\n    );\r\n  }\r\n\r\n  /**\r\n   * パラメータの値の加算(id)\r\n   * @param parameterId パラメータＩＤ\r\n   * @param value 加算する値\r\n   * @param weight 重み\r\n   */\r\n  public addParameterValueById(\r\n    parameterId: any,\r\n    value: number,\r\n    weight = 1.0\r\n  ): void {\r\n    const index: number = this.getParameterIndex(parameterId);\r\n    this.addParameterValueByIndex(index, value, weight);\r\n  }\r\n\r\n  /**\r\n   * パラメータの値の乗算\r\n   * @param parameterId パラメータのID\r\n   * @param value 乗算する値\r\n   * @param weight 重み\r\n   */\r\n  public multiplyParameterValueById(\r\n    parameterId: CubismIdHandle,\r\n    value: number,\r\n    weight = 1.0\r\n  ): void {\r\n    const index: number = this.getParameterIndex(parameterId);\r\n    this.multiplyParameterValueByIndex(index, value, weight);\r\n  }\r\n\r\n  /**\r\n   * パラメータの値の乗算\r\n   * @param parameterIndex パラメータのインデックス\r\n   * @param value 乗算する値\r\n   * @param weight 重み\r\n   */\r\n  public multiplyParameterValueByIndex(\r\n    parameterIndex: number,\r\n    value: number,\r\n    weight = 1.0\r\n  ): void {\r\n    this.setParameterValueByIndex(\r\n      parameterIndex,\r\n      this.getParameterValueByIndex(parameterIndex) *\r\n        (1.0 + (value - 1.0) * weight)\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Drawableのインデックスの取得\r\n   * @param drawableId DrawableのID\r\n   * @return Drawableのインデックス\r\n   */\r\n  public getDrawableIndex(drawableId: CubismIdHandle): number {\r\n    const drawableCount = this._model.drawables.count;\r\n\r\n    for (\r\n      let drawableIndex = 0;\r\n      drawableIndex < drawableCount;\r\n      ++drawableIndex\r\n    ) {\r\n      if (this._drawableIds.at(drawableIndex) == drawableId) {\r\n        return drawableIndex;\r\n      }\r\n    }\r\n\r\n    return -1;\r\n  }\r\n\r\n  /**\r\n   * Drawableの個数の取得\r\n   * @return drawableの個数\r\n   */\r\n  public getDrawableCount(): number {\r\n    const drawableCount = this._model.drawables.count;\r\n    return drawableCount;\r\n  }\r\n\r\n  /**\r\n   * DrawableのIDを取得する\r\n   * @param drawableIndex Drawableのインデックス\r\n   * @return drawableのID\r\n   */\r\n  public getDrawableId(drawableIndex: number): CubismIdHandle {\r\n    const parameterIds: string[] = this._model.drawables.ids;\r\n    return CubismFramework.getIdManager().getId(parameterIds[drawableIndex]);\r\n  }\r\n\r\n  /**\r\n   * Drawableの描画順リストの取得\r\n   * @return Drawableの描画順リスト\r\n   */\r\n  public getDrawableRenderOrders(): Int32Array {\r\n    const renderOrders: Int32Array = this._model.drawables.renderOrders;\r\n    return renderOrders;\r\n  }\r\n\r\n  /**\r\n   * @deprecated\r\n   * 関数名が誤っていたため、代替となる getDrawableTextureIndex を追加し、この関数は非推奨となりました。\r\n   *\r\n   * Drawableのテクスチャインデックスリストの取得\r\n   * @param drawableIndex Drawableのインデックス\r\n   * @return drawableのテクスチャインデックスリスト\r\n   */\r\n  public getDrawableTextureIndices(drawableIndex: number): number {\r\n    return this.getDrawableTextureIndex(drawableIndex);\r\n  }\r\n\r\n  /**\r\n   * Drawableのテクスチャインデックスの取得\r\n   * @param drawableIndex Drawableのインデックス\r\n   * @return drawableのテクスチャインデックス\r\n   */\r\n  public getDrawableTextureIndex(drawableIndex: number): number {\r\n    const textureIndices: Int32Array = this._model.drawables.textureIndices;\r\n    return textureIndices[drawableIndex];\r\n  }\r\n\r\n  /**\r\n   * DrawableのVertexPositionsの変化情報の取得\r\n   *\r\n   * 直近のCubismModel.update関数でDrawableの頂点情報が変化したかを取得する。\r\n   *\r\n   * @param   drawableIndex   Drawableのインデックス\r\n   * @retval  true    Drawableの頂点情報が直近のCubismModel.update関数で変化した\r\n   * @retval  false   Drawableの頂点情報が直近のCubismModel.update関数で変化していない\r\n   */\r\n  public getDrawableDynamicFlagVertexPositionsDidChange(\r\n    drawableIndex: number\r\n  ): boolean {\r\n    const dynamicFlags: Uint8Array = this._model.drawables.dynamicFlags;\r\n    return Live2DCubismCore.Utils.hasVertexPositionsDidChangeBit(\r\n      dynamicFlags[drawableIndex]\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Drawableの頂点インデックスの個数の取得\r\n   * @param drawableIndex Drawableのインデックス\r\n   * @return drawableの頂点インデックスの個数\r\n   */\r\n  public getDrawableVertexIndexCount(drawableIndex: number): number {\r\n    const indexCounts: Int32Array = this._model.drawables.indexCounts;\r\n    return indexCounts[drawableIndex];\r\n  }\r\n\r\n  /**\r\n   * Drawableの頂点の個数の取得\r\n   * @param drawableIndex Drawableのインデックス\r\n   * @return drawableの頂点の個数\r\n   */\r\n  public getDrawableVertexCount(drawableIndex: number): number {\r\n    const vertexCounts = this._model.drawables.vertexCounts;\r\n    return vertexCounts[drawableIndex];\r\n  }\r\n\r\n  /**\r\n   * Drawableの頂点リストの取得\r\n   * @param drawableIndex drawableのインデックス\r\n   * @return drawableの頂点リスト\r\n   */\r\n  public getDrawableVertices(drawableIndex: number): Float32Array {\r\n    return this.getDrawableVertexPositions(drawableIndex);\r\n  }\r\n\r\n  /**\r\n   * Drawableの頂点インデックスリストの取得\r\n   * @param drarableIndex Drawableのインデックス\r\n   * @return drawableの頂点インデックスリスト\r\n   */\r\n  public getDrawableVertexIndices(drawableIndex: number): Uint16Array {\r\n    const indicesArray: Uint16Array[] = this._model.drawables.indices;\r\n    return indicesArray[drawableIndex];\r\n  }\r\n\r\n  /**\r\n   * Drawableの頂点リストの取得\r\n   * @param drawableIndex Drawableのインデックス\r\n   * @return drawableの頂点リスト\r\n   */\r\n  public getDrawableVertexPositions(drawableIndex: number): Float32Array {\r\n    const verticesArray: Float32Array[] = this._model.drawables.vertexPositions;\r\n    return verticesArray[drawableIndex];\r\n  }\r\n\r\n  /**\r\n   * Drawableの頂点のUVリストの取得\r\n   * @param drawableIndex Drawableのインデックス\r\n   * @return drawableの頂点UVリスト\r\n   */\r\n  public getDrawableVertexUvs(drawableIndex: number): Float32Array {\r\n    const uvsArray: Float32Array[] = this._model.drawables.vertexUvs;\r\n    return uvsArray[drawableIndex];\r\n  }\r\n\r\n  /**\r\n   * Drawableの不透明度の取得\r\n   * @param drawableIndex Drawableのインデックス\r\n   * @return drawableの不透明度\r\n   */\r\n  public getDrawableOpacity(drawableIndex: number): number {\r\n    const opacities: Float32Array = this._model.drawables.opacities;\r\n    return opacities[drawableIndex];\r\n  }\r\n\r\n  /**\r\n   * Drawableの乗算色の取得\r\n   * @param drawableIndex Drawableのインデックス\r\n   * @return drawableの乗算色(RGBA)\r\n   * スクリーン色はRGBAで取得されるが、Aは必ず0\r\n   */\r\n  public getDrawableMultiplyColor(drawableIndex: number): CubismTextureColor {\r\n    const multiplyColors: Float32Array = this._model.drawables.multiplyColors;\r\n    const index = drawableIndex * 4;\r\n    const multiplyColor: CubismTextureColor = new CubismTextureColor();\r\n    multiplyColor.R = multiplyColors[index];\r\n    multiplyColor.G = multiplyColors[index + 1];\r\n    multiplyColor.B = multiplyColors[index + 2];\r\n    multiplyColor.A = multiplyColors[index + 3];\r\n    return multiplyColor;\r\n  }\r\n\r\n  /**\r\n   * Drawableのスクリーン色の取得\r\n   * @param drawableIndex Drawableのインデックス\r\n   * @return drawableのスクリーン色(RGBA)\r\n   * スクリーン色はRGBAで取得されるが、Aは必ず0\r\n   */\r\n  public getDrawableScreenColor(drawableIndex: number): CubismTextureColor {\r\n    const screenColors: Float32Array = this._model.drawables.screenColors;\r\n    const index = drawableIndex * 4;\r\n    const screenColor: CubismTextureColor = new CubismTextureColor();\r\n    screenColor.R = screenColors[index];\r\n    screenColor.G = screenColors[index + 1];\r\n    screenColor.B = screenColors[index + 2];\r\n    screenColor.A = screenColors[index + 3];\r\n    return screenColor;\r\n  }\r\n\r\n  /**\r\n   * Drawableの親パーツのインデックスの取得\r\n   * @param drawableIndex Drawableのインデックス\r\n   * @return drawableの親パーツのインデックス\r\n   */\r\n  public getDrawableParentPartIndex(drawableIndex: number): number {\r\n    return this._model.drawables.parentPartIndices[drawableIndex];\r\n  }\r\n\r\n  /**\r\n   * Drawableのカリング情報の取得\r\n   * @param drawableIndex Drawableのインデックス\r\n   * @return drawableのカリング情報\r\n   */\r\n  public getDrawableCulling(drawableIndex: number): boolean {\r\n    const constantFlags = this._model.drawables.constantFlags;\r\n\r\n    return !Live2DCubismCore.Utils.hasIsDoubleSidedBit(\r\n      constantFlags[drawableIndex]\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Drawableのブレンドモードを取得\r\n   * @param drawableIndex Drawableのインデックス\r\n   * @return drawableのブレンドモード\r\n   */\r\n  public getDrawableBlendMode(drawableIndex: number): CubismBlendMode {\r\n    const constantFlags = this._model.drawables.constantFlags;\r\n\r\n    return Live2DCubismCore.Utils.hasBlendAdditiveBit(\r\n      constantFlags[drawableIndex]\r\n    )\r\n      ? CubismBlendMode.CubismBlendMode_Additive\r\n      : Live2DCubismCore.Utils.hasBlendMultiplicativeBit(\r\n          constantFlags[drawableIndex]\r\n        )\r\n      ? CubismBlendMode.CubismBlendMode_Multiplicative\r\n      : CubismBlendMode.CubismBlendMode_Normal;\r\n  }\r\n\r\n  /**\r\n   * Drawableのマスクの反転使用の取得\r\n   *\r\n   * Drawableのマスク使用時の反転設定を取得する。\r\n   * マスクを使用しない場合は無視される。\r\n   *\r\n   * @param drawableIndex Drawableのインデックス\r\n   * @return Drawableの反転設定\r\n   */\r\n  public getDrawableInvertedMaskBit(drawableIndex: number): boolean {\r\n    const constantFlags: Uint8Array = this._model.drawables.constantFlags;\r\n\r\n    return Live2DCubismCore.Utils.hasIsInvertedMaskBit(\r\n      constantFlags[drawableIndex]\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Drawableのクリッピングマスクリストの取得\r\n   * @return Drawableのクリッピングマスクリスト\r\n   */\r\n  public getDrawableMasks(): Int32Array[] {\r\n    const masks: Int32Array[] = this._model.drawables.masks;\r\n    return masks;\r\n  }\r\n\r\n  /**\r\n   * Drawableのクリッピングマスクの個数リストの取得\r\n   * @return Drawableのクリッピングマスクの個数リスト\r\n   */\r\n  public getDrawableMaskCounts(): Int32Array {\r\n    const maskCounts: Int32Array = this._model.drawables.maskCounts;\r\n    return maskCounts;\r\n  }\r\n\r\n  /**\r\n   * クリッピングマスクの使用状態\r\n   *\r\n   * @return true クリッピングマスクを使用している\r\n   * @return false クリッピングマスクを使用していない\r\n   */\r\n  public isUsingMasking(): boolean {\r\n    for (let d = 0; d < this._model.drawables.count; ++d) {\r\n      if (this._model.drawables.maskCounts[d] <= 0) {\r\n        continue;\r\n      }\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Drawableの表示情報を取得する\r\n   *\r\n   * @param drawableIndex Drawableのインデックス\r\n   * @return true Drawableが表示\r\n   * @return false Drawableが非表示\r\n   */\r\n  public getDrawableDynamicFlagIsVisible(drawableIndex: number): boolean {\r\n    const dynamicFlags: Uint8Array = this._model.drawables.dynamicFlags;\r\n    return Live2DCubismCore.Utils.hasIsVisibleBit(dynamicFlags[drawableIndex]);\r\n  }\r\n\r\n  /**\r\n   * DrawableのDrawOrderの変化情報の取得\r\n   *\r\n   * 直近のCubismModel.update関数でdrawableのdrawOrderが変化したかを取得する。\r\n   * drawOrderはartMesh上で指定する0から1000の情報\r\n   * @param drawableIndex drawableのインデックス\r\n   * @return true drawableの不透明度が直近のCubismModel.update関数で変化した\r\n   * @return false drawableの不透明度が直近のCubismModel.update関数で変化している\r\n   */\r\n  public getDrawableDynamicFlagVisibilityDidChange(\r\n    drawableIndex: number\r\n  ): boolean {\r\n    const dynamicFlags: Uint8Array = this._model.drawables.dynamicFlags;\r\n    return Live2DCubismCore.Utils.hasVisibilityDidChangeBit(\r\n      dynamicFlags[drawableIndex]\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Drawableの不透明度の変化情報の取得\r\n   *\r\n   * 直近のCubismModel.update関数でdrawableの不透明度が変化したかを取得する。\r\n   *\r\n   * @param drawableIndex drawableのインデックス\r\n   * @return true Drawableの不透明度が直近のCubismModel.update関数で変化した\r\n   * @return false Drawableの不透明度が直近のCubismModel.update関数で変化してない\r\n   */\r\n  public getDrawableDynamicFlagOpacityDidChange(\r\n    drawableIndex: number\r\n  ): boolean {\r\n    const dynamicFlags: Uint8Array = this._model.drawables.dynamicFlags;\r\n    return Live2DCubismCore.Utils.hasOpacityDidChangeBit(\r\n      dynamicFlags[drawableIndex]\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Drawableの描画順序の変化情報の取得\r\n   *\r\n   * 直近のCubismModel.update関数でDrawableの描画の順序が変化したかを取得する。\r\n   *\r\n   * @param drawableIndex Drawableのインデックス\r\n   * @return true Drawableの描画の順序が直近のCubismModel.update関数で変化した\r\n   * @return false Drawableの描画の順序が直近のCubismModel.update関数で変化してない\r\n   */\r\n  public getDrawableDynamicFlagRenderOrderDidChange(\r\n    drawableIndex: number\r\n  ): boolean {\r\n    const dynamicFlags: Uint8Array = this._model.drawables.dynamicFlags;\r\n    return Live2DCubismCore.Utils.hasRenderOrderDidChangeBit(\r\n      dynamicFlags[drawableIndex]\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Drawableの乗算色・スクリーン色の変化情報の取得\r\n   *\r\n   * 直近のCubismModel.update関数でDrawableの乗算色・スクリーン色が変化したかを取得する。\r\n   *\r\n   * @param drawableIndex Drawableのインデックス\r\n   * @return true Drawableの乗算色・スクリーン色が直近のCubismModel.update関数で変化した\r\n   * @return false Drawableの乗算色・スクリーン色が直近のCubismModel.update関数で変化してない\r\n   */\r\n  public getDrawableDynamicFlagBlendColorDidChange(\r\n    drawableIndex: number\r\n  ): boolean {\r\n    const dynamicFlags: Uint8Array = this._model.drawables.dynamicFlags;\r\n    return Live2DCubismCore.Utils.hasBlendColorDidChangeBit(\r\n      dynamicFlags[drawableIndex]\r\n    );\r\n  }\r\n\r\n  /**\r\n   * 保存されたパラメータの読み込み\r\n   */\r\n  public loadParameters(): void {\r\n    let parameterCount: number = this._model.parameters.count;\r\n    const savedParameterCount: number = this._savedParameters.getSize();\r\n\r\n    if (parameterCount > savedParameterCount) {\r\n      parameterCount = savedParameterCount;\r\n    }\r\n\r\n    for (let i = 0; i < parameterCount; ++i) {\r\n      this._parameterValues[i] = this._savedParameters.at(i);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 初期化する\r\n   */\r\n  public initialize(): void {\r\n    CSM_ASSERT(this._model);\r\n\r\n    this._parameterValues = this._model.parameters.values;\r\n    this._partOpacities = this._model.parts.opacities;\r\n    this._parameterMaximumValues = this._model.parameters.maximumValues;\r\n    this._parameterMinimumValues = this._model.parameters.minimumValues;\r\n\r\n    {\r\n      const parameterIds: string[] = this._model.parameters.ids;\r\n      const parameterCount: number = this._model.parameters.count;\r\n\r\n      this._parameterIds.prepareCapacity(parameterCount);\r\n      for (let i = 0; i < parameterCount; ++i) {\r\n        this._parameterIds.pushBack(\r\n          CubismFramework.getIdManager().getId(parameterIds[i])\r\n        );\r\n      }\r\n    }\r\n\r\n    {\r\n      const partIds: string[] = this._model.parts.ids;\r\n      const partCount: number = this._model.parts.count;\r\n\r\n      this._partIds.prepareCapacity(partCount);\r\n      for (let i = 0; i < partCount; ++i) {\r\n        this._partIds.pushBack(\r\n          CubismFramework.getIdManager().getId(partIds[i])\r\n        );\r\n      }\r\n    }\r\n\r\n    {\r\n      const drawableIds: string[] = this._model.drawables.ids;\r\n      const drawableCount: number = this._model.drawables.count;\r\n\r\n      this._userMultiplyColors = new csmVector<DrawableColorData>();\r\n      this._userMultiplyColors.updateSize(\r\n        drawableCount,\r\n        DrawableColorData,\r\n        true\r\n      );\r\n\r\n      this._userScreenColors = new csmVector<DrawableColorData>();\r\n      this._userScreenColors.updateSize(drawableCount, DrawableColorData, true);\r\n\r\n      this._drawableIds.prepareCapacity(drawableCount);\r\n      for (let i = 0; i < drawableCount; ++i) {\r\n        this._drawableIds.pushBack(\r\n          CubismFramework.getIdManager().getId(drawableIds[i])\r\n        );\r\n\r\n        // shaderに影響しない色で初期化\r\n        this.setMultiplyColorByRGBA(i, 1.0, 1.0, 1.0, 1.0);\r\n        this.setScreenColorByRGBA(i, 0.0, 0.0, 0.0, 1.0);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * コンストラクタ\r\n   * @param model モデル\r\n   */\r\n  public constructor(model: Live2DCubismCore.Model) {\r\n    this._model = model;\r\n    this._parameterValues = null;\r\n    this._parameterMaximumValues = null;\r\n    this._parameterMinimumValues = null;\r\n    this._partOpacities = null;\r\n    this._savedParameters = new csmVector<number>();\r\n    this._parameterIds = new csmVector<CubismIdHandle>();\r\n    this._drawableIds = new csmVector<CubismIdHandle>();\r\n    this._partIds = new csmVector<CubismIdHandle>();\r\n    this._isOverwrittenModelMultiplyColors = false;\r\n    this._isOverwrittenModelScreenColors = false;\r\n    this._userMultiplyColors = null;\r\n    this._userScreenColors = null;\r\n\r\n    this._notExistPartId = new csmMap<CubismIdHandle, number>();\r\n    this._notExistParameterId = new csmMap<CubismIdHandle, number>();\r\n    this._notExistParameterValues = new csmMap<number, number>();\r\n    this._notExistPartOpacities = new csmMap<number, number>();\r\n  }\r\n\r\n  /**\r\n   * デストラクタ相当の処理\r\n   */\r\n  public release(): void {\r\n    this._model.release();\r\n    this._model = null;\r\n  }\r\n\r\n  private _notExistPartOpacities: csmMap<number, number>; // 存在していないパーツの不透明度のリスト\r\n  private _notExistPartId: csmMap<CubismIdHandle, number>; // 存在していないパーツIDのリスト\r\n\r\n  private _notExistParameterValues: csmMap<number, number>; // 存在していないパラメータの値のリスト\r\n  private _notExistParameterId: csmMap<CubismIdHandle, number>; // 存在していないパラメータIDのリスト\r\n\r\n  private _savedParameters: csmVector<number>; // 保存されたパラメータ\r\n\r\n  private _isOverwrittenModelMultiplyColors: boolean; // SDK上でモデル全体の乗算色を上書きするか判定するフラグ\r\n  private _isOverwrittenModelScreenColors: boolean; // SDK上でモデル全体のスクリーン色を上書きするか判定するフラグ\r\n  private _userMultiplyColors: csmVector<DrawableColorData>; // Drawableごとに設定する乗算色と上書きフラグを管理するリスト\r\n  private _userScreenColors: csmVector<DrawableColorData>; // Drawableごとに設定するスクリーン色と上書きフラグを管理するリスト\r\n\r\n  private _model: Live2DCubismCore.Model; // モデル\r\n\r\n  private _parameterValues: Float32Array; // パラメータの値のリスト\r\n  private _parameterMaximumValues: Float32Array; // パラメータの最大値のリスト\r\n  private _parameterMinimumValues: Float32Array; // パラメータの最小値のリスト\r\n\r\n  private _partOpacities: Float32Array; // パーツの不透明度のリスト\r\n\r\n  private _parameterIds: csmVector<CubismIdHandle>;\r\n  private _partIds: csmVector<CubismIdHandle>;\r\n  private _drawableIds: csmVector<CubismIdHandle>;\r\n}\r\n\r\n// Namespace definition for compatibility.\r\nimport * as $ from './cubismmodel';\r\n// eslint-disable-next-line @typescript-eslint/no-namespace\r\nexport namespace Live2DCubismFramework {\r\n  export const CubismModel = $.CubismModel;\r\n  export type CubismModel = $.CubismModel;\r\n}\r\n","/**\r\n * Copyright(c) Live2D Inc. All rights reserved.\r\n *\r\n * Use of this source code is governed by the Live2D Open Software license\r\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\r\n */\r\n\r\nimport { CubismIdHandle } from '../id/cubismid';\r\nimport { CubismFramework } from '../live2dcubismframework';\r\nimport { csmString } from '../type/csmstring';\r\nimport { csmVector } from '../type/csmvector';\r\nimport { CubismModelUserDataJson } from './cubismmodeluserdatajson';\r\n\r\nconst ArtMesh = 'ArtMesh';\r\n\r\n/**\r\n * ユーザーデータインターフェース\r\n *\r\n * Jsonから読み込んだユーザーデータを記録しておくための構造体\r\n */\r\nexport class CubismModelUserDataNode {\r\n  targetType: CubismIdHandle; // ユーザーデータターゲットタイプ\r\n  targetId: CubismIdHandle; // ユーザーデータターゲットのID\r\n  value: csmString; // ユーザーデータ\r\n}\r\n\r\n/**\r\n * ユーザデータの管理クラス\r\n *\r\n * ユーザデータをロード、管理、検索インターフェイス、解放までを行う。\r\n */\r\nexport class CubismModelUserData {\r\n  /**\r\n   * インスタンスの作成\r\n   *\r\n   * @param buffer    userdata3.jsonが読み込まれているバッファ\r\n   * @param size      バッファのサイズ\r\n   * @return 作成されたインスタンス\r\n   */\r\n  public static create(buffer: ArrayBuffer, size: number): CubismModelUserData {\r\n    const ret: CubismModelUserData = new CubismModelUserData();\r\n\r\n    ret.parseUserData(buffer, size);\r\n\r\n    return ret;\r\n  }\r\n\r\n  /**\r\n   * インスタンスを破棄する\r\n   *\r\n   * @param modelUserData 破棄するインスタンス\r\n   */\r\n  public static delete(modelUserData: CubismModelUserData): void {\r\n    if (modelUserData != null) {\r\n      modelUserData.release();\r\n      modelUserData = null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ArtMeshのユーザーデータのリストの取得\r\n   *\r\n   * @return ユーザーデータリスト\r\n   */\r\n  public getArtMeshUserDatas(): csmVector<CubismModelUserDataNode> {\r\n    return this._artMeshUserDataNode;\r\n  }\r\n\r\n  /**\r\n   * userdata3.jsonのパース\r\n   *\r\n   * @param buffer    userdata3.jsonが読み込まれているバッファ\r\n   * @param size      バッファのサイズ\r\n   */\r\n  public parseUserData(buffer: ArrayBuffer, size: number): void {\r\n    let json: CubismModelUserDataJson = new CubismModelUserDataJson(\r\n      buffer,\r\n      size\r\n    );\r\n\r\n    const typeOfArtMesh = CubismFramework.getIdManager().getId(ArtMesh);\r\n    const nodeCount: number = json.getUserDataCount();\r\n\r\n    for (let i = 0; i < nodeCount; i++) {\r\n      const addNode: CubismModelUserDataNode = new CubismModelUserDataNode();\r\n\r\n      addNode.targetId = json.getUserDataId(i);\r\n      addNode.targetType = CubismFramework.getIdManager().getId(\r\n        json.getUserDataTargetType(i)\r\n      );\r\n      addNode.value = new csmString(json.getUserDataValue(i));\r\n      this._userDataNodes.pushBack(addNode);\r\n\r\n      if (addNode.targetType == typeOfArtMesh) {\r\n        this._artMeshUserDataNode.pushBack(addNode);\r\n      }\r\n    }\r\n\r\n    json.release();\r\n    json = void 0;\r\n  }\r\n\r\n  /**\r\n   * コンストラクタ\r\n   */\r\n  public constructor() {\r\n    this._userDataNodes = new csmVector<CubismModelUserDataNode>();\r\n    this._artMeshUserDataNode = new csmVector<CubismModelUserDataNode>();\r\n  }\r\n\r\n  /**\r\n   * デストラクタ相当の処理\r\n   *\r\n   * ユーザーデータ構造体配列を解放する\r\n   */\r\n  public release(): void {\r\n    for (let i = 0; i < this._userDataNodes.getSize(); ++i) {\r\n      this._userDataNodes.set(i, null);\r\n    }\r\n\r\n    this._userDataNodes = null;\r\n  }\r\n\r\n  private _userDataNodes: csmVector<CubismModelUserDataNode>; // ユーザーデータ構造体配列\r\n  private _artMeshUserDataNode: csmVector<CubismModelUserDataNode>; // 閲覧リストの保持\r\n}\r\n\r\n// Namespace definition for compatibility.\r\nimport * as $ from './cubismmodeluserdata';\r\n// eslint-disable-next-line @typescript-eslint/no-namespace\r\nexport namespace Live2DCubismFramework {\r\n  export const CubismModelUserData = $.CubismModelUserData;\r\n  export type CubismModelUserData = $.CubismModelUserData;\r\n  export const CubismModelUserDataNode = $.CubismModelUserDataNode;\r\n  export type CubismModelUserDataNode = $.CubismModelUserDataNode;\r\n}\r\n","/**\r\n * Copyright(c) Live2D Inc. All rights reserved.\r\n *\r\n * Use of this source code is governed by the Live2D Open Software license\r\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\r\n */\r\n\r\nimport { CubismIdHandle } from '../id/cubismid';\r\nimport { CubismFramework } from '../live2dcubismframework';\r\nimport { CubismJson } from '../utils/cubismjson';\r\n\r\nconst Meta = 'Meta';\r\nconst UserDataCount = 'UserDataCount';\r\nconst TotalUserDataSize = 'TotalUserDataSize';\r\nconst UserData = 'UserData';\r\nconst Target = 'Target';\r\nconst Id = 'Id';\r\nconst Value = 'Value';\r\n\r\nexport class CubismModelUserDataJson {\r\n  /**\r\n   * コンストラクタ\r\n   * @param buffer    userdata3.jsonが読み込まれているバッファ\r\n   * @param size      バッファのサイズ\r\n   */\r\n  public constructor(buffer: ArrayBuffer, size: number) {\r\n    this._json = CubismJson.create(buffer, size);\r\n  }\r\n\r\n  /**\r\n   * デストラクタ相当の処理\r\n   */\r\n  public release(): void {\r\n    CubismJson.delete(this._json);\r\n  }\r\n\r\n  /**\r\n   * ユーザーデータ個数の取得\r\n   * @return ユーザーデータの個数\r\n   */\r\n  public getUserDataCount(): number {\r\n    return this._json\r\n      .getRoot()\r\n      .getValueByString(Meta)\r\n      .getValueByString(UserDataCount)\r\n      .toInt();\r\n  }\r\n\r\n  /**\r\n   * ユーザーデータ総文字列数の取得\r\n   *\r\n   * @return ユーザーデータ総文字列数\r\n   */\r\n  public getTotalUserDataSize(): number {\r\n    return this._json\r\n      .getRoot()\r\n      .getValueByString(Meta)\r\n      .getValueByString(TotalUserDataSize)\r\n      .toInt();\r\n  }\r\n\r\n  /**\r\n   * ユーザーデータのタイプの取得\r\n   *\r\n   * @return ユーザーデータのタイプ\r\n   */\r\n  public getUserDataTargetType(i: number): string {\r\n    return this._json\r\n      .getRoot()\r\n      .getValueByString(UserData)\r\n      .getValueByIndex(i)\r\n      .getValueByString(Target)\r\n      .getRawString();\r\n  }\r\n\r\n  /**\r\n   * ユーザーデータのターゲットIDの取得\r\n   *\r\n   * @param i インデックス\r\n   * @return ユーザーデータターゲットID\r\n   */\r\n  public getUserDataId(i: number): CubismIdHandle {\r\n    return CubismFramework.getIdManager().getId(\r\n      this._json\r\n        .getRoot()\r\n        .getValueByString(UserData)\r\n        .getValueByIndex(i)\r\n        .getValueByString(Id)\r\n        .getRawString()\r\n    );\r\n  }\r\n\r\n  /**\r\n   * ユーザーデータの文字列の取得\r\n   *\r\n   * @param i インデックス\r\n   * @return ユーザーデータ\r\n   */\r\n  public getUserDataValue(i: number): string {\r\n    return this._json\r\n      .getRoot()\r\n      .getValueByString(UserData)\r\n      .getValueByIndex(i)\r\n      .getValueByString(Value)\r\n      .getRawString();\r\n  }\r\n\r\n  private _json: CubismJson;\r\n}\r\n\r\n// Namespace definition for compatibility.\r\nimport * as $ from './cubismmodeluserdatajson';\r\n// eslint-disable-next-line @typescript-eslint/no-namespace\r\nexport namespace Live2DCubismFramework {\r\n  export const CubismModelUserDataJson = $.CubismModelUserDataJson;\r\n  export type CubismModelUserDataJson = $.CubismModelUserDataJson;\r\n}\r\n","/**\r\n * Copyright(c) Live2D Inc. All rights reserved.\r\n *\r\n * Use of this source code is governed by the Live2D Open Software license\r\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\r\n */\r\n\r\nimport { CubismBreath } from '../effect/cubismbreath';\r\nimport { CubismEyeBlink } from '../effect/cubismeyeblink';\r\nimport { CubismPose } from '../effect/cubismpose';\r\nimport { CubismIdHandle } from '../id/cubismid';\r\nimport { Constant } from '../live2dcubismframework';\r\nimport { CubismModelMatrix } from '../math/cubismmodelmatrix';\r\nimport { CubismTargetPoint } from '../math/cubismtargetpoint';\r\nimport { ACubismMotion, FinishedMotionCallback } from '../motion/acubismmotion';\r\nimport { CubismExpressionMotion } from '../motion/cubismexpressionmotion';\r\nimport { CubismMotion } from '../motion/cubismmotion';\r\nimport { CubismMotionManager } from '../motion/cubismmotionmanager';\r\nimport { CubismMotionQueueManager } from '../motion/cubismmotionqueuemanager';\r\nimport { CubismPhysics } from '../physics/cubismphysics';\r\nimport { CubismRenderer_WebGL } from '../rendering/cubismrenderer_webgl';\r\nimport { csmString } from '../type/csmstring';\r\nimport { CubismLogError, CubismLogInfo } from '../utils/cubismdebug';\r\nimport { CubismMoc } from './cubismmoc';\r\nimport { CubismModel } from './cubismmodel';\r\nimport { CubismModelUserData } from './cubismmodeluserdata';\r\n\r\n/**\r\n * ユーザーが実際に使用するモデル\r\n *\r\n * ユーザーが実際に使用するモデルの基底クラス。これを継承してユーザーが実装する。\r\n */\r\nexport class CubismUserModel {\r\n  /**\r\n   * 初期化状態の取得\r\n   *\r\n   * 初期化されている状態か？\r\n   *\r\n   * @return true     初期化されている\r\n   * @return false    初期化されていない\r\n   */\r\n  public isInitialized(): boolean {\r\n    return this._initialized;\r\n  }\r\n\r\n  /**\r\n   * 初期化状態の設定\r\n   *\r\n   * 初期化状態を設定する。\r\n   *\r\n   * @param v 初期化状態\r\n   */\r\n  public setInitialized(v: boolean): void {\r\n    this._initialized = v;\r\n  }\r\n\r\n  /**\r\n   * 更新状態の取得\r\n   *\r\n   * 更新されている状態か？\r\n   *\r\n   * @return true     更新されている\r\n   * @return false    更新されていない\r\n   */\r\n  public isUpdating(): boolean {\r\n    return this._updating;\r\n  }\r\n\r\n  /**\r\n   * 更新状態の設定\r\n   *\r\n   * 更新状態を設定する\r\n   *\r\n   * @param v 更新状態\r\n   */\r\n  public setUpdating(v: boolean): void {\r\n    this._updating = v;\r\n  }\r\n\r\n  /**\r\n   * マウスドラッグ情報の設定\r\n   * @param ドラッグしているカーソルのX位置\r\n   * @param ドラッグしているカーソルのY位置\r\n   */\r\n  public setDragging(x: number, y: number): void {\r\n    this._dragManager.set(x, y);\r\n  }\r\n\r\n  /**\r\n   * 加速度の情報を設定する\r\n   * @param x X軸方向の加速度\r\n   * @param y Y軸方向の加速度\r\n   * @param z Z軸方向の加速度\r\n   */\r\n  public setAcceleration(x: number, y: number, z: number): void {\r\n    this._accelerationX = x;\r\n    this._accelerationY = y;\r\n    this._accelerationZ = z;\r\n  }\r\n\r\n  /**\r\n   * モデル行列を取得する\r\n   * @return モデル行列\r\n   */\r\n  public getModelMatrix(): CubismModelMatrix {\r\n    return this._modelMatrix;\r\n  }\r\n\r\n  /**\r\n   * 不透明度の設定\r\n   * @param a 不透明度\r\n   */\r\n  public setOpacity(a: number): void {\r\n    this._opacity = a;\r\n  }\r\n\r\n  /**\r\n   * 不透明度の取得\r\n   * @return 不透明度\r\n   */\r\n  public getOpacity(): number {\r\n    return this._opacity;\r\n  }\r\n\r\n  /**\r\n   * モデルデータを読み込む\r\n   *\r\n   * @param buffer    moc3ファイルが読み込まれているバッファ\r\n   */\r\n  public loadModel(buffer: ArrayBuffer) {\r\n    this._moc = CubismMoc.create(buffer);\r\n\r\n    if (this._moc == null) {\r\n      CubismLogError('Failed to CubismMoc.create().');\r\n      return;\r\n    }\r\n\r\n    this._model = this._moc.createModel();\r\n\r\n    if (this._model == null) {\r\n      CubismLogError('Failed to CreateModel().');\r\n      return;\r\n    }\r\n\r\n    this._model.saveParameters();\r\n    this._modelMatrix = new CubismModelMatrix(\r\n      this._model.getCanvasWidth(),\r\n      this._model.getCanvasHeight()\r\n    );\r\n  }\r\n\r\n  /**\r\n   * モーションデータを読み込む\r\n   * @param buffer motion3.jsonファイルが読み込まれているバッファ\r\n   * @param size バッファのサイズ\r\n   * @param name モーションの名前\r\n   * @param onFinishedMotionHandler モーション再生終了時に呼び出されるコールバック関数\r\n   * @return モーションクラス\r\n   */\r\n  public loadMotion = (\r\n    buffer: ArrayBuffer,\r\n    size: number,\r\n    name: string,\r\n    onFinishedMotionHandler?: FinishedMotionCallback\r\n  ) => CubismMotion.create(buffer, size, onFinishedMotionHandler);\r\n\r\n  /**\r\n   * 表情データの読み込み\r\n   * @param buffer expファイルが読み込まれているバッファ\r\n   * @param size バッファのサイズ\r\n   * @param name 表情の名前\r\n   */\r\n  public loadExpression(\r\n    buffer: ArrayBuffer,\r\n    size: number,\r\n    name: string\r\n  ): ACubismMotion {\r\n    return CubismExpressionMotion.create(buffer, size);\r\n  }\r\n\r\n  /**\r\n   * ポーズデータの読み込み\r\n   * @param buffer pose3.jsonが読み込まれているバッファ\r\n   * @param size バッファのサイズ\r\n   */\r\n  public loadPose(buffer: ArrayBuffer, size: number): void {\r\n    this._pose = CubismPose.create(buffer, size);\r\n  }\r\n\r\n  /**\r\n   * モデルに付属するユーザーデータを読み込む\r\n   * @param buffer userdata3.jsonが読み込まれているバッファ\r\n   * @param size バッファのサイズ\r\n   */\r\n  public loadUserData(buffer: ArrayBuffer, size: number): void {\r\n    this._modelUserData = CubismModelUserData.create(buffer, size);\r\n  }\r\n\r\n  /**\r\n   * 物理演算データの読み込み\r\n   * @param buffer  physics3.jsonが読み込まれているバッファ\r\n   * @param size    バッファのサイズ\r\n   */\r\n  public loadPhysics(buffer: ArrayBuffer, size: number): void {\r\n    this._physics = CubismPhysics.create(buffer, size);\r\n  }\r\n\r\n  /**\r\n   * 当たり判定の取得\r\n   * @param drawableId 検証したいDrawableのID\r\n   * @param pointX X位置\r\n   * @param pointY Y位置\r\n   * @return true ヒットしている\r\n   * @return false ヒットしていない\r\n   */\r\n  public isHit(\r\n    drawableId: CubismIdHandle,\r\n    pointX: number,\r\n    pointY: number\r\n  ): boolean {\r\n    const drawIndex: number = this._model.getDrawableIndex(drawableId);\r\n\r\n    if (drawIndex < 0) {\r\n      return false; // 存在しない場合はfalse\r\n    }\r\n\r\n    const count: number = this._model.getDrawableVertexCount(drawIndex);\r\n    const vertices: Float32Array = this._model.getDrawableVertices(drawIndex);\r\n\r\n    let left: number = vertices[0];\r\n    let right: number = vertices[0];\r\n    let top: number = vertices[1];\r\n    let bottom: number = vertices[1];\r\n\r\n    for (let j = 1; j < count; ++j) {\r\n      const x = vertices[Constant.vertexOffset + j * Constant.vertexStep];\r\n      const y = vertices[Constant.vertexOffset + j * Constant.vertexStep + 1];\r\n\r\n      if (x < left) {\r\n        left = x; // Min x\r\n      }\r\n\r\n      if (x > right) {\r\n        right = x; // Max x\r\n      }\r\n\r\n      if (y < top) {\r\n        top = y; // Min y\r\n      }\r\n\r\n      if (y > bottom) {\r\n        bottom = y; // Max y\r\n      }\r\n    }\r\n\r\n    const tx: number = this._modelMatrix.invertTransformX(pointX);\r\n    const ty: number = this._modelMatrix.invertTransformY(pointY);\r\n\r\n    return left <= tx && tx <= right && top <= ty && ty <= bottom;\r\n  }\r\n\r\n  /**\r\n   * モデルの取得\r\n   * @return モデル\r\n   */\r\n  public getModel(): CubismModel {\r\n    return this._model;\r\n  }\r\n\r\n  /**\r\n   * レンダラの取得\r\n   * @return レンダラ\r\n   */\r\n  public getRenderer(): CubismRenderer_WebGL {\r\n    return this._renderer;\r\n  }\r\n\r\n  /**\r\n   * レンダラを作成して初期化を実行する\r\n   */\r\n  public createRenderer(): void {\r\n    if (this._renderer) {\r\n      this.deleteRenderer();\r\n    }\r\n\r\n    this._renderer = new CubismRenderer_WebGL();\r\n    this._renderer.initialize(this._model);\r\n  }\r\n\r\n  /**\r\n   * レンダラの解放\r\n   */\r\n  public deleteRenderer(): void {\r\n    if (this._renderer != null) {\r\n      this._renderer.release();\r\n      this._renderer = null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * イベント発火時の標準処理\r\n   *\r\n   * Eventが再生処理時にあった場合の処理をする。\r\n   * 継承で上書きすることを想定している。\r\n   * 上書きしない場合はログ出力をする。\r\n   *\r\n   * @param eventValue 発火したイベントの文字列データ\r\n   */\r\n  public motionEventFired(eventValue: csmString): void {\r\n    CubismLogInfo('{0}', eventValue.s);\r\n  }\r\n\r\n  /**\r\n   * イベント用のコールバック\r\n   *\r\n   * CubismMotionQueueManagerにイベント用に登録するためのCallback。\r\n   * CubismUserModelの継承先のEventFiredを呼ぶ。\r\n   *\r\n   * @param caller 発火したイベントを管理していたモーションマネージャー、比較用\r\n   * @param eventValue 発火したイベントの文字列データ\r\n   * @param customData CubismUserModelを継承したインスタンスを想定\r\n   */\r\n  public static cubismDefaultMotionEventCallback(\r\n    caller: CubismMotionQueueManager,\r\n    eventValue: csmString,\r\n    customData: CubismUserModel\r\n  ): void {\r\n    const model: CubismUserModel = customData;\r\n\r\n    if (model != null) {\r\n      model.motionEventFired(eventValue);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * コンストラクタ\r\n   */\r\n  public constructor() {\r\n    // 各変数初期化\r\n    this._moc = null;\r\n    this._model = null;\r\n    this._motionManager = null;\r\n    this._expressionManager = null;\r\n    this._eyeBlink = null;\r\n    this._breath = null;\r\n    this._modelMatrix = null;\r\n    this._pose = null;\r\n    this._dragManager = null;\r\n    this._physics = null;\r\n    this._modelUserData = null;\r\n    this._initialized = false;\r\n    this._updating = false;\r\n    this._opacity = 1.0;\r\n    this._lipsync = true;\r\n    this._lastLipSyncValue = 0.0;\r\n    this._dragX = 0.0;\r\n    this._dragY = 0.0;\r\n    this._accelerationX = 0.0;\r\n    this._accelerationY = 0.0;\r\n    this._accelerationZ = 0.0;\r\n    this._debugMode = false;\r\n    this._renderer = null;\r\n\r\n    // モーションマネージャーを作成\r\n    this._motionManager = new CubismMotionManager();\r\n    this._motionManager.setEventCallback(\r\n      CubismUserModel.cubismDefaultMotionEventCallback,\r\n      this\r\n    );\r\n\r\n    // 表情マネージャーを作成\r\n    this._expressionManager = new CubismMotionManager();\r\n\r\n    // ドラッグによるアニメーション\r\n    this._dragManager = new CubismTargetPoint();\r\n  }\r\n\r\n  /**\r\n   * デストラクタに相当する処理\r\n   */\r\n  public release() {\r\n    if (this._motionManager != null) {\r\n      this._motionManager.release();\r\n      this._motionManager = null;\r\n    }\r\n\r\n    if (this._expressionManager != null) {\r\n      this._expressionManager.release();\r\n      this._expressionManager = null;\r\n    }\r\n\r\n    if (this._moc != null) {\r\n      this._moc.deleteModel(this._model);\r\n      this._moc.release();\r\n      this._moc = null;\r\n    }\r\n\r\n    this._modelMatrix = null;\r\n\r\n    CubismPose.delete(this._pose);\r\n    CubismEyeBlink.delete(this._eyeBlink);\r\n    CubismBreath.delete(this._breath);\r\n\r\n    this._dragManager = null;\r\n\r\n    CubismPhysics.delete(this._physics);\r\n    CubismModelUserData.delete(this._modelUserData);\r\n\r\n    this.deleteRenderer();\r\n  }\r\n\r\n  protected _moc: CubismMoc; // Mocデータ\r\n  protected _model: CubismModel; // Modelインスタンス\r\n\r\n  protected _motionManager: CubismMotionManager; // モーション管理\r\n  protected _expressionManager: CubismMotionManager; // 表情管理\r\n  protected _eyeBlink: CubismEyeBlink; // 自動まばたき\r\n  protected _breath: CubismBreath; // 呼吸\r\n  protected _modelMatrix: CubismModelMatrix; // モデル行列\r\n  protected _pose: CubismPose; // ポーズ管理\r\n  protected _dragManager: CubismTargetPoint; // マウスドラッグ\r\n  protected _physics: CubismPhysics; // 物理演算\r\n  protected _modelUserData: CubismModelUserData; // ユーザーデータ\r\n\r\n  protected _initialized: boolean; // 初期化されたかどうか\r\n  protected _updating: boolean; // 更新されたかどうか\r\n  protected _opacity: number; // 不透明度\r\n  protected _lipsync: boolean; // リップシンクするかどうか\r\n  protected _lastLipSyncValue: number; // 最後のリップシンクの制御地\r\n  protected _dragX: number; // マウスドラッグのX位置\r\n  protected _dragY: number; // マウスドラッグのY位置\r\n  protected _accelerationX: number; // X軸方向の加速度\r\n  protected _accelerationY: number; // Y軸方向の加速度\r\n  protected _accelerationZ: number; // Z軸方向の加速度\r\n  protected _debugMode: boolean; // デバッグモードかどうか\r\n\r\n  private _renderer: CubismRenderer_WebGL; // レンダラ\r\n}\r\n\r\n// Namespace definition for compatibility.\r\nimport * as $ from './cubismusermodel';\r\n// eslint-disable-next-line @typescript-eslint/no-namespace\r\nexport namespace Live2DCubismFramework {\r\n  export const CubismUserModel = $.CubismUserModel;\r\n  export type CubismUserModel = $.CubismUserModel;\r\n}\r\n","/**\r\n * Copyright(c) Live2D Inc. All rights reserved.\r\n *\r\n * Use of this source code is governed by the Live2D Open Software license\r\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\r\n */\r\n\r\nimport { CubismMath } from '../math/cubismmath';\r\nimport { CubismModel } from '../model/cubismmodel';\r\nimport { csmString } from '../type/csmstring';\r\nimport { csmVector } from '../type/csmvector';\r\nimport { CSM_ASSERT } from '../utils/cubismdebug';\r\nimport { CubismMotionQueueEntry } from './cubismmotionqueueentry';\r\n\r\n/** モーション再生終了コールバック関数定義 */\r\nexport type FinishedMotionCallback = (self: ACubismMotion) => void;\r\n\r\n/**\r\n * モーションの抽象基底クラス\r\n *\r\n * モーションの抽象基底クラス。MotionQueueManagerによってモーションの再生を管理する。\r\n */\r\nexport abstract class ACubismMotion {\r\n  /**\r\n   * インスタンスの破棄\r\n   */\r\n  public static delete(motion: ACubismMotion): void {\r\n    motion.release();\r\n    motion = null;\r\n  }\r\n\r\n  /**\r\n   * コンストラクタ\r\n   */\r\n  public constructor() {\r\n    this._fadeInSeconds = -1.0;\r\n    this._fadeOutSeconds = -1.0;\r\n    this._weight = 1.0;\r\n    this._offsetSeconds = 0.0; // 再生の開始時刻\r\n    this._firedEventValues = new csmVector<csmString>();\r\n  }\r\n\r\n  /**\r\n   * デストラクタ相当の処理\r\n   */\r\n  public release(): void {\r\n    this._weight = 0.0;\r\n  }\r\n\r\n  /**\r\n   * モデルのパラメータ\r\n   * @param model 対象のモデル\r\n   * @param motionQueueEntry CubismMotionQueueManagerで管理されているモーション\r\n   * @param userTimeSeconds デルタ時間の積算値[秒]\r\n   */\r\n  public updateParameters(\r\n    model: CubismModel,\r\n    motionQueueEntry: CubismMotionQueueEntry,\r\n    userTimeSeconds: number\r\n  ): void {\r\n    if (!motionQueueEntry.isAvailable() || motionQueueEntry.isFinished()) {\r\n      return;\r\n    }\r\n\r\n    if (!motionQueueEntry.isStarted()) {\r\n      motionQueueEntry.setIsStarted(true);\r\n      motionQueueEntry.setStartTime(userTimeSeconds - this._offsetSeconds); // モーションの開始時刻を記録\r\n      motionQueueEntry.setFadeInStartTime(userTimeSeconds); // フェードインの開始時刻\r\n\r\n      const duration: number = this.getDuration();\r\n\r\n      if (motionQueueEntry.getEndTime() < 0) {\r\n        // 開始していないうちに終了設定している場合がある。\r\n        motionQueueEntry.setEndTime(\r\n          duration <= 0 ? -1 : motionQueueEntry.getStartTime() + duration\r\n        );\r\n        // duration == -1 の場合はループする\r\n      }\r\n    }\r\n\r\n    let fadeWeight: number = this._weight; // 現在の値と掛け合わせる割合\r\n\r\n    //---- フェードイン・アウトの処理 ----\r\n    // 単純なサイン関数でイージングする\r\n    const fadeIn: number =\r\n      this._fadeInSeconds == 0.0\r\n        ? 1.0\r\n        : CubismMath.getEasingSine(\r\n            (userTimeSeconds - motionQueueEntry.getFadeInStartTime()) /\r\n              this._fadeInSeconds\r\n          );\r\n\r\n    const fadeOut: number =\r\n      this._fadeOutSeconds == 0.0 || motionQueueEntry.getEndTime() < 0.0\r\n        ? 1.0\r\n        : CubismMath.getEasingSine(\r\n            (motionQueueEntry.getEndTime() - userTimeSeconds) /\r\n              this._fadeOutSeconds\r\n          );\r\n\r\n    fadeWeight = fadeWeight * fadeIn * fadeOut;\r\n\r\n    motionQueueEntry.setState(userTimeSeconds, fadeWeight);\r\n\r\n    CSM_ASSERT(0.0 <= fadeWeight && fadeWeight <= 1.0);\r\n\r\n    //---- 全てのパラメータIDをループする ----\r\n    this.doUpdateParameters(\r\n      model,\r\n      userTimeSeconds,\r\n      fadeWeight,\r\n      motionQueueEntry\r\n    );\r\n\r\n    // 後処理\r\n    // 終了時刻を過ぎたら終了フラグを立てる(CubismMotionQueueManager)\r\n    if (\r\n      motionQueueEntry.getEndTime() > 0 &&\r\n      motionQueueEntry.getEndTime() < userTimeSeconds\r\n    ) {\r\n      motionQueueEntry.setIsFinished(true); // 終了\r\n    }\r\n  }\r\n\r\n  /**\r\n   * フェードインの時間を設定する\r\n   * @param fadeInSeconds フェードインにかかる時間[秒]\r\n   */\r\n  public setFadeInTime(fadeInSeconds: number): void {\r\n    this._fadeInSeconds = fadeInSeconds;\r\n  }\r\n\r\n  /**\r\n   * フェードアウトの時間を設定する\r\n   * @param fadeOutSeconds フェードアウトにかかる時間[秒]\r\n   */\r\n  public setFadeOutTime(fadeOutSeconds: number): void {\r\n    this._fadeOutSeconds = fadeOutSeconds;\r\n  }\r\n\r\n  /**\r\n   * フェードアウトにかかる時間の取得\r\n   * @return フェードアウトにかかる時間[秒]\r\n   */\r\n  public getFadeOutTime(): number {\r\n    return this._fadeOutSeconds;\r\n  }\r\n\r\n  /**\r\n   * フェードインにかかる時間の取得\r\n   * @return フェードインにかかる時間[秒]\r\n   */\r\n  public getFadeInTime(): number {\r\n    return this._fadeInSeconds;\r\n  }\r\n\r\n  /**\r\n   * モーション適用の重みの設定\r\n   * @param weight 重み（0.0 - 1.0）\r\n   */\r\n  public setWeight(weight: number): void {\r\n    this._weight = weight;\r\n  }\r\n\r\n  /**\r\n   * モーション適用の重みの取得\r\n   * @return 重み（0.0 - 1.0）\r\n   */\r\n  public getWeight(): number {\r\n    return this._weight;\r\n  }\r\n\r\n  /**\r\n   * モーションの長さの取得\r\n   * @return モーションの長さ[秒]\r\n   *\r\n   * @note ループの時は「-1」。\r\n   *       ループでない場合は、オーバーライドする。\r\n   *       正の値の時は取得される時間で終了する。\r\n   *       「-1」の時は外部から停止命令がない限り終わらない処理となる。\r\n   */\r\n  public getDuration(): number {\r\n    return -1.0;\r\n  }\r\n\r\n  /**\r\n   * モーションのループ1回分の長さの取得\r\n   * @return モーションのループ一回分の長さ[秒]\r\n   *\r\n   * @note ループしない場合は、getDuration()と同じ値を返す\r\n   *       ループ一回分の長さが定義できない場合(プログラム的に動き続けるサブクラスなど)の場合は「-1」を返す\r\n   */\r\n  public getLoopDuration(): number {\r\n    return -1.0;\r\n  }\r\n\r\n  /**\r\n   * モーション再生の開始時刻の設定\r\n   * @param offsetSeconds モーション再生の開始時刻[秒]\r\n   */\r\n  public setOffsetTime(offsetSeconds: number): void {\r\n    this._offsetSeconds = offsetSeconds;\r\n  }\r\n\r\n  /**\r\n   * モデルのパラメータ更新\r\n   *\r\n   * イベント発火のチェック。\r\n   * 入力する時間は呼ばれるモーションタイミングを０とした秒数で行う。\r\n   *\r\n   * @param beforeCheckTimeSeconds 前回のイベントチェック時間[秒]\r\n   * @param motionTimeSeconds 今回の再生時間[秒]\r\n   */\r\n  public getFiredEvent(\r\n    beforeCheckTimeSeconds: number,\r\n    motionTimeSeconds: number\r\n  ): csmVector<csmString> {\r\n    return this._firedEventValues;\r\n  }\r\n\r\n  /**\r\n   * モーションを更新して、モデルにパラメータ値を反映する\r\n   * @param model 対象のモデル\r\n   * @param userTimeSeconds デルタ時間の積算値[秒]\r\n   * @param weight モーションの重み\r\n   * @param motionQueueEntry CubismMotionQueueManagerで管理されているモーション\r\n   * @return true モデルへパラメータ値の反映あり\r\n   * @return false モデルへのパラメータ値の反映なし（モーションの変化なし）\r\n   */\r\n  public abstract doUpdateParameters(\r\n    model: CubismModel,\r\n    userTimeSeconds: number,\r\n    weight: number,\r\n    motionQueueEntry: CubismMotionQueueEntry\r\n  ): void;\r\n\r\n  /**\r\n   * モーション再生終了コールバックの登録\r\n   *\r\n   * モーション再生終了コールバックを登録する。\r\n   * isFinishedフラグを設定するタイミングで呼び出される。\r\n   * 以下の状態の際には呼び出されない:\r\n   *   1. 再生中のモーションが「ループ」として設定されているとき\r\n   *   2. コールバックが登録されていない時\r\n   *\r\n   * @param onFinishedMotionHandler モーション再生終了コールバック関数\r\n   */\r\n  public setFinishedMotionHandler = (\r\n    onFinishedMotionHandler: FinishedMotionCallback\r\n  ) => (this._onFinishedMotion = onFinishedMotionHandler);\r\n\r\n  /**\r\n   * モーション再生終了コールバックの取得\r\n   *\r\n   * モーション再生終了コールバックを取得する。\r\n   *\r\n   * @return 登録されているモーション再生終了コールバック関数\r\n   */\r\n  public getFinishedMotionHandler = () => this._onFinishedMotion;\r\n\r\n  public _fadeInSeconds: number; // フェードインにかかる時間[秒]\r\n  public _fadeOutSeconds: number; // フェードアウトにかかる時間[秒]\r\n  public _weight: number; // モーションの重み\r\n  public _offsetSeconds: number; // モーション再生の開始時間[秒]\r\n\r\n  public _firedEventValues: csmVector<csmString>;\r\n\r\n  // モーション再生終了コールバック関数\r\n  public _onFinishedMotion?: FinishedMotionCallback;\r\n}\r\n\r\n// Namespace definition for compatibility.\r\nimport * as $ from './acubismmotion';\r\n// eslint-disable-next-line @typescript-eslint/no-namespace\r\nexport namespace Live2DCubismFramework {\r\n  export const ACubismMotion = $.ACubismMotion;\r\n  export type ACubismMotion = $.ACubismMotion;\r\n  export type FinishedMotionCallback = $.FinishedMotionCallback;\r\n}\r\n","/**\r\n * Copyright(c) Live2D Inc. All rights reserved.\r\n *\r\n * Use of this source code is governed by the Live2D Open Software license\r\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\r\n */\r\n\r\nimport { CubismIdHandle } from '../id/cubismid';\r\nimport { CubismFramework } from '../live2dcubismframework';\r\nimport { CubismModel } from '../model/cubismmodel';\r\nimport { csmVector } from '../type/csmvector';\r\nimport { CubismJson, Value } from '../utils/cubismjson';\r\nimport { ACubismMotion } from './acubismmotion';\r\nimport { CubismMotionQueueEntry } from './cubismmotionqueueentry';\r\n\r\n// exp3.jsonのキーとデフォルト\r\nconst ExpressionKeyFadeIn = 'FadeInTime';\r\nconst ExpressionKeyFadeOut = 'FadeOutTime';\r\nconst ExpressionKeyParameters = 'Parameters';\r\nconst ExpressionKeyId = 'Id';\r\nconst ExpressionKeyValue = 'Value';\r\nconst ExpressionKeyBlend = 'Blend';\r\nconst BlendValueAdd = 'Add';\r\nconst BlendValueMultiply = 'Multiply';\r\nconst BlendValueOverwrite = 'Overwrite';\r\nconst DefaultFadeTime = 1.0;\r\n\r\n/**\r\n * 表情のモーション\r\n *\r\n * 表情のモーションクラス。\r\n */\r\nexport class CubismExpressionMotion extends ACubismMotion {\r\n  /**\r\n   * インスタンスを作成する。\r\n   * @param buffer expファイルが読み込まれているバッファ\r\n   * @param size バッファのサイズ\r\n   * @return 作成されたインスタンス\r\n   */\r\n  public static create(\r\n    buffer: ArrayBuffer,\r\n    size: number\r\n  ): CubismExpressionMotion {\r\n    const expression: CubismExpressionMotion = new CubismExpressionMotion();\r\n\r\n    const json: CubismJson = CubismJson.create(buffer, size);\r\n    const root: Value = json.getRoot();\r\n\r\n    expression.setFadeInTime(\r\n      root.getValueByString(ExpressionKeyFadeIn).toFloat(DefaultFadeTime)\r\n    ); // フェードイン\r\n    expression.setFadeOutTime(\r\n      root.getValueByString(ExpressionKeyFadeOut).toFloat(DefaultFadeTime)\r\n    ); // フェードアウト\r\n\r\n    // 各パラメータについて\r\n    const parameterCount = root\r\n      .getValueByString(ExpressionKeyParameters)\r\n      .getSize();\r\n    expression._parameters.prepareCapacity(parameterCount);\r\n\r\n    for (let i = 0; i < parameterCount; ++i) {\r\n      const param: Value = root\r\n        .getValueByString(ExpressionKeyParameters)\r\n        .getValueByIndex(i);\r\n      const parameterId: CubismIdHandle = CubismFramework.getIdManager().getId(\r\n        param.getValueByString(ExpressionKeyId).getRawString()\r\n      ); // パラメータID\r\n\r\n      const value: number = param\r\n        .getValueByString(ExpressionKeyValue)\r\n        .toFloat(); // 値\r\n\r\n      // 計算方法の設定\r\n      let blendType: ExpressionBlendType;\r\n\r\n      if (\r\n        param.getValueByString(ExpressionKeyBlend).isNull() ||\r\n        param.getValueByString(ExpressionKeyBlend).getString() == BlendValueAdd\r\n      ) {\r\n        blendType = ExpressionBlendType.ExpressionBlendType_Add;\r\n      } else if (\r\n        param.getValueByString(ExpressionKeyBlend).getString() ==\r\n        BlendValueMultiply\r\n      ) {\r\n        blendType = ExpressionBlendType.ExpressionBlendType_Multiply;\r\n      } else if (\r\n        param.getValueByString(ExpressionKeyBlend).getString() ==\r\n        BlendValueOverwrite\r\n      ) {\r\n        blendType = ExpressionBlendType.ExpressionBlendType_Overwrite;\r\n      } else {\r\n        // その他 仕様にない値を設定した時は加算モードにすることで復旧\r\n        blendType = ExpressionBlendType.ExpressionBlendType_Add;\r\n      }\r\n\r\n      // 設定オブジェクトを作成してリストに追加する\r\n      const item: ExpressionParameter = new ExpressionParameter();\r\n\r\n      item.parameterId = parameterId;\r\n      item.blendType = blendType;\r\n      item.value = value;\r\n\r\n      expression._parameters.pushBack(item);\r\n    }\r\n\r\n    CubismJson.delete(json); // JSONデータは不要になったら削除する\r\n    return expression;\r\n  }\r\n\r\n  /**\r\n   * モデルのパラメータの更新の実行\r\n   * @param model 対象のモデル\r\n   * @param userTimeSeconds デルタ時間の積算値[秒]\r\n   * @param weight モーションの重み\r\n   * @param motionQueueEntry CubismMotionQueueManagerで管理されているモーション\r\n   */\r\n  public doUpdateParameters(\r\n    model: CubismModel,\r\n    userTimeSeconds: number,\r\n    weight: number,\r\n    motionQueueEntry: CubismMotionQueueEntry\r\n  ): void {\r\n    for (let i = 0; i < this._parameters.getSize(); ++i) {\r\n      const parameter: ExpressionParameter = this._parameters.at(i);\r\n\r\n      switch (parameter.blendType) {\r\n        case ExpressionBlendType.ExpressionBlendType_Add: {\r\n          model.addParameterValueById(\r\n            parameter.parameterId,\r\n            parameter.value,\r\n            weight\r\n          );\r\n          break;\r\n        }\r\n        case ExpressionBlendType.ExpressionBlendType_Multiply: {\r\n          model.multiplyParameterValueById(\r\n            parameter.parameterId,\r\n            parameter.value,\r\n            weight\r\n          );\r\n          break;\r\n        }\r\n        case ExpressionBlendType.ExpressionBlendType_Overwrite: {\r\n          model.setParameterValueById(\r\n            parameter.parameterId,\r\n            parameter.value,\r\n            weight\r\n          );\r\n          break;\r\n        }\r\n        default:\r\n          // 仕様にない値を設定した時はすでに加算モードになっている\r\n          break;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * コンストラクタ\r\n   */\r\n  constructor() {\r\n    super();\r\n\r\n    this._parameters = new csmVector<ExpressionParameter>();\r\n  }\r\n\r\n  _parameters: csmVector<ExpressionParameter>; // 表情のパラメータ情報リスト\r\n}\r\n\r\n/**\r\n * 表情パラメータ値の計算方式\r\n */\r\nexport enum ExpressionBlendType {\r\n  ExpressionBlendType_Add = 0, // 加算\r\n  ExpressionBlendType_Multiply = 1, // 乗算\r\n  ExpressionBlendType_Overwrite = 2, // 上書き\r\n}\r\n\r\n/**\r\n * 表情のパラメータ情報\r\n */\r\nexport class ExpressionParameter {\r\n  parameterId: CubismIdHandle; // パラメータID\r\n  blendType: ExpressionBlendType; // パラメータの演算種類\r\n  value: number; // 値\r\n}\r\n\r\n// Namespace definition for compatibility.\r\nimport * as $ from './cubismexpressionmotion';\r\n// eslint-disable-next-line @typescript-eslint/no-namespace\r\nexport namespace Live2DCubismFramework {\r\n  export const CubismExpressionMotion = $.CubismExpressionMotion;\r\n  export type CubismExpressionMotion = $.CubismExpressionMotion;\r\n  export const ExpressionBlendType = $.ExpressionBlendType;\r\n  export type ExpressionBlendType = $.ExpressionBlendType;\r\n  export const ExpressionParameter = $.ExpressionParameter;\r\n  export type ExpressionParameter = $.ExpressionParameter;\r\n}\r\n","/**\r\n * Copyright(c) Live2D Inc. All rights reserved.\r\n *\r\n * Use of this source code is governed by the Live2D Open Software license\r\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\r\n */\r\n\r\nimport { CubismIdHandle } from '../id/cubismid';\r\nimport { CubismFramework } from '../live2dcubismframework';\r\nimport { CubismMath } from '../math/cubismmath';\r\nimport { CubismModel } from '../model/cubismmodel';\r\nimport { csmString } from '../type/csmstring';\r\nimport { csmVector } from '../type/csmvector';\r\nimport {\r\n  CSM_ASSERT,\r\n  CubismLogDebug,\r\n  CubismLogWarning,\r\n} from '../utils/cubismdebug';\r\nimport { ACubismMotion, FinishedMotionCallback } from './acubismmotion';\r\nimport {\r\n  CubismMotionCurve,\r\n  CubismMotionCurveTarget,\r\n  CubismMotionData,\r\n  CubismMotionEvent,\r\n  CubismMotionPoint,\r\n  CubismMotionSegment,\r\n  CubismMotionSegmentType,\r\n} from './cubismmotioninternal';\r\nimport { CubismMotionJson, EvaluationOptionFlag } from './cubismmotionjson';\r\nimport { CubismMotionQueueEntry } from './cubismmotionqueueentry';\r\n\r\nconst EffectNameEyeBlink = 'EyeBlink';\r\nconst EffectNameLipSync = 'LipSync';\r\nconst TargetNameModel = 'Model';\r\nconst TargetNameParameter = 'Parameter';\r\nconst TargetNamePartOpacity = 'PartOpacity';\r\n\r\n/**\r\n * Cubism SDK R2 以前のモーションを再現させるなら true 、アニメータのモーションを正しく再現するなら false 。\r\n */\r\nconst UseOldBeziersCurveMotion = false;\r\n\r\nfunction lerpPoints(\r\n  a: CubismMotionPoint,\r\n  b: CubismMotionPoint,\r\n  t: number\r\n): CubismMotionPoint {\r\n  const result: CubismMotionPoint = new CubismMotionPoint();\r\n\r\n  result.time = a.time + (b.time - a.time) * t;\r\n  result.value = a.value + (b.value - a.value) * t;\r\n\r\n  return result;\r\n}\r\n\r\nfunction linearEvaluate(points: CubismMotionPoint[], time: number): number {\r\n  let t: number = (time - points[0].time) / (points[1].time - points[0].time);\r\n\r\n  if (t < 0.0) {\r\n    t = 0.0;\r\n  }\r\n\r\n  return points[0].value + (points[1].value - points[0].value) * t;\r\n}\r\n\r\nfunction bezierEvaluate(points: CubismMotionPoint[], time: number): number {\r\n  let t: number = (time - points[0].time) / (points[3].time - points[0].time);\r\n\r\n  if (t < 0.0) {\r\n    t = 0.0;\r\n  }\r\n\r\n  const p01: CubismMotionPoint = lerpPoints(points[0], points[1], t);\r\n  const p12: CubismMotionPoint = lerpPoints(points[1], points[2], t);\r\n  const p23: CubismMotionPoint = lerpPoints(points[2], points[3], t);\r\n\r\n  const p012: CubismMotionPoint = lerpPoints(p01, p12, t);\r\n  const p123: CubismMotionPoint = lerpPoints(p12, p23, t);\r\n\r\n  return lerpPoints(p012, p123, t).value;\r\n}\r\n\r\nfunction bezierEvaluateBinarySearch(\r\n  points: CubismMotionPoint[],\r\n  time: number\r\n): number {\r\n  const x_error = 0.01;\r\n\r\n  const x: number = time;\r\n  let x1: number = points[0].time;\r\n  let x2: number = points[3].time;\r\n  let cx1: number = points[1].time;\r\n  let cx2: number = points[2].time;\r\n\r\n  let ta = 0.0;\r\n  let tb = 1.0;\r\n  let t = 0.0;\r\n  let i = 0;\r\n\r\n  for (let var33 = true; i < 20; ++i) {\r\n    if (x < x1 + x_error) {\r\n      t = ta;\r\n      break;\r\n    }\r\n\r\n    if (x2 - x_error < x) {\r\n      t = tb;\r\n      break;\r\n    }\r\n\r\n    let centerx: number = (cx1 + cx2) * 0.5;\r\n    cx1 = (x1 + cx1) * 0.5;\r\n    cx2 = (x2 + cx2) * 0.5;\r\n    const ctrlx12: number = (cx1 + centerx) * 0.5;\r\n    const ctrlx21: number = (cx2 + centerx) * 0.5;\r\n    centerx = (ctrlx12 + ctrlx21) * 0.5;\r\n    if (x < centerx) {\r\n      tb = (ta + tb) * 0.5;\r\n      if (centerx - x_error < x) {\r\n        t = tb;\r\n        break;\r\n      }\r\n\r\n      x2 = centerx;\r\n      cx2 = ctrlx12;\r\n    } else {\r\n      ta = (ta + tb) * 0.5;\r\n      if (x < centerx + x_error) {\r\n        t = ta;\r\n        break;\r\n      }\r\n\r\n      x1 = centerx;\r\n      cx1 = ctrlx21;\r\n    }\r\n  }\r\n\r\n  if (i == 20) {\r\n    t = (ta + tb) * 0.5;\r\n  }\r\n\r\n  if (t < 0.0) {\r\n    t = 0.0;\r\n  }\r\n  if (t > 1.0) {\r\n    t = 1.0;\r\n  }\r\n\r\n  const p01: CubismMotionPoint = lerpPoints(points[0], points[1], t);\r\n  const p12: CubismMotionPoint = lerpPoints(points[1], points[2], t);\r\n  const p23: CubismMotionPoint = lerpPoints(points[2], points[3], t);\r\n\r\n  const p012: CubismMotionPoint = lerpPoints(p01, p12, t);\r\n  const p123: CubismMotionPoint = lerpPoints(p12, p23, t);\r\n\r\n  return lerpPoints(p012, p123, t).value;\r\n}\r\n\r\nfunction bezierEvaluateCardanoInterpretation(\r\n  points: CubismMotionPoint[],\r\n  time: number\r\n): number {\r\n  const x: number = time;\r\n  const x1: number = points[0].time;\r\n  const x2: number = points[3].time;\r\n  const cx1: number = points[1].time;\r\n  const cx2: number = points[2].time;\r\n\r\n  const a: number = x2 - 3.0 * cx2 + 3.0 * cx1 - x1;\r\n  const b: number = 3.0 * cx2 - 6.0 * cx1 + 3.0 * x1;\r\n  const c: number = 3.0 * cx1 - 3.0 * x1;\r\n  const d: number = x1 - x;\r\n\r\n  const t: number = CubismMath.cardanoAlgorithmForBezier(a, b, c, d);\r\n\r\n  const p01: CubismMotionPoint = lerpPoints(points[0], points[1], t);\r\n  const p12: CubismMotionPoint = lerpPoints(points[1], points[2], t);\r\n  const p23: CubismMotionPoint = lerpPoints(points[2], points[3], t);\r\n\r\n  const p012: CubismMotionPoint = lerpPoints(p01, p12, t);\r\n  const p123: CubismMotionPoint = lerpPoints(p12, p23, t);\r\n\r\n  return lerpPoints(p012, p123, t).value;\r\n}\r\n\r\nfunction steppedEvaluate(points: CubismMotionPoint[], time: number): number {\r\n  return points[0].value;\r\n}\r\n\r\nfunction inverseSteppedEvaluate(\r\n  points: CubismMotionPoint[],\r\n  time: number\r\n): number {\r\n  return points[1].value;\r\n}\r\n\r\nfunction evaluateCurve(\r\n  motionData: CubismMotionData,\r\n  index: number,\r\n  time: number\r\n): number {\r\n  // Find segment to evaluate.\r\n  const curve: CubismMotionCurve = motionData.curves.at(index);\r\n\r\n  let target = -1;\r\n  const totalSegmentCount: number = curve.baseSegmentIndex + curve.segmentCount;\r\n  let pointPosition = 0;\r\n  for (let i: number = curve.baseSegmentIndex; i < totalSegmentCount; ++i) {\r\n    // Get first point of next segment.\r\n    pointPosition =\r\n      motionData.segments.at(i).basePointIndex +\r\n      (motionData.segments.at(i).segmentType ==\r\n      CubismMotionSegmentType.CubismMotionSegmentType_Bezier\r\n        ? 3\r\n        : 1);\r\n\r\n    // Break if time lies within current segment.\r\n    if (motionData.points.at(pointPosition).time > time) {\r\n      target = i;\r\n      break;\r\n    }\r\n  }\r\n\r\n  if (target == -1) {\r\n    return motionData.points.at(pointPosition).value;\r\n  }\r\n\r\n  const segment: CubismMotionSegment = motionData.segments.at(target);\r\n\r\n  return segment.evaluate(motionData.points.get(segment.basePointIndex), time);\r\n}\r\n\r\n/**\r\n * モーションクラス\r\n *\r\n * モーションのクラス。\r\n */\r\nexport class CubismMotion extends ACubismMotion {\r\n  /**\r\n   * インスタンスを作成する\r\n   *\r\n   * @param buffer motion3.jsonが読み込まれているバッファ\r\n   * @param size バッファのサイズ\r\n   * @param onFinishedMotionHandler モーション再生終了時に呼び出されるコールバック関数\r\n   * @return 作成されたインスタンス\r\n   */\r\n  public static create(\r\n    buffer: ArrayBuffer,\r\n    size: number,\r\n    onFinishedMotionHandler?: FinishedMotionCallback\r\n  ): CubismMotion {\r\n    const ret = new CubismMotion();\r\n\r\n    ret.parse(buffer, size);\r\n    ret._sourceFrameRate = ret._motionData.fps;\r\n    ret._loopDurationSeconds = ret._motionData.duration;\r\n    ret._onFinishedMotion = onFinishedMotionHandler;\r\n\r\n    // NOTE: Editorではループありのモーション書き出しは非対応\r\n    // ret->_loop = (ret->_motionData->Loop > 0);\r\n    return ret;\r\n  }\r\n\r\n  /**\r\n   * モデルのパラメータの更新の実行\r\n   * @param model             対象のモデル\r\n   * @param userTimeSeconds   現在の時刻[秒]\r\n   * @param fadeWeight        モーションの重み\r\n   * @param motionQueueEntry  CubismMotionQueueManagerで管理されているモーション\r\n   */\r\n  public doUpdateParameters(\r\n    model: CubismModel,\r\n    userTimeSeconds: number,\r\n    fadeWeight: number,\r\n    motionQueueEntry: CubismMotionQueueEntry\r\n  ): void {\r\n    if (this._modelCurveIdEyeBlink == null) {\r\n      this._modelCurveIdEyeBlink =\r\n        CubismFramework.getIdManager().getId(EffectNameEyeBlink);\r\n    }\r\n\r\n    if (this._modelCurveIdLipSync == null) {\r\n      this._modelCurveIdLipSync =\r\n        CubismFramework.getIdManager().getId(EffectNameLipSync);\r\n    }\r\n\r\n    let timeOffsetSeconds: number =\r\n      userTimeSeconds - motionQueueEntry.getStartTime();\r\n\r\n    if (timeOffsetSeconds < 0.0) {\r\n      timeOffsetSeconds = 0.0; // エラー回避\r\n    }\r\n\r\n    let lipSyncValue: number = Number.MAX_VALUE;\r\n    let eyeBlinkValue: number = Number.MAX_VALUE;\r\n\r\n    //まばたき、リップシンクのうちモーションの適用を検出するためのビット（maxFlagCount個まで\r\n    const MaxTargetSize = 64;\r\n    let lipSyncFlags = 0;\r\n    let eyeBlinkFlags = 0;\r\n\r\n    //瞬き、リップシンクのターゲット数が上限を超えている場合\r\n    if (this._eyeBlinkParameterIds.getSize() > MaxTargetSize) {\r\n      CubismLogDebug(\r\n        'too many eye blink targets : {0}',\r\n        this._eyeBlinkParameterIds.getSize()\r\n      );\r\n    }\r\n    if (this._lipSyncParameterIds.getSize() > MaxTargetSize) {\r\n      CubismLogDebug(\r\n        'too many lip sync targets : {0}',\r\n        this._lipSyncParameterIds.getSize()\r\n      );\r\n    }\r\n\r\n    const tmpFadeIn: number =\r\n      this._fadeInSeconds <= 0.0\r\n        ? 1.0\r\n        : CubismMath.getEasingSine(\r\n            (userTimeSeconds - motionQueueEntry.getFadeInStartTime()) /\r\n              this._fadeInSeconds\r\n          );\r\n\r\n    const tmpFadeOut: number =\r\n      this._fadeOutSeconds <= 0.0 || motionQueueEntry.getEndTime() < 0.0\r\n        ? 1.0\r\n        : CubismMath.getEasingSine(\r\n            (motionQueueEntry.getEndTime() - userTimeSeconds) /\r\n              this._fadeOutSeconds\r\n          );\r\n    let value: number;\r\n    let c: number, parameterIndex: number;\r\n\r\n    // 'Repeat' time as necessary.\r\n    let time: number = timeOffsetSeconds;\r\n\r\n    if (this._isLoop) {\r\n      while (time > this._motionData.duration) {\r\n        time -= this._motionData.duration;\r\n      }\r\n    }\r\n\r\n    const curves: csmVector<CubismMotionCurve> = this._motionData.curves;\r\n\r\n    // Evaluate model curves.\r\n    for (\r\n      c = 0;\r\n      c < this._motionData.curveCount &&\r\n      curves.at(c).type ==\r\n        CubismMotionCurveTarget.CubismMotionCurveTarget_Model;\r\n      ++c\r\n    ) {\r\n      // Evaluate curve and call handler.\r\n      value = evaluateCurve(this._motionData, c, time);\r\n\r\n      if (curves.at(c).id == this._modelCurveIdEyeBlink) {\r\n        eyeBlinkValue = value;\r\n      } else if (curves.at(c).id == this._modelCurveIdLipSync) {\r\n        lipSyncValue = value;\r\n      }\r\n    }\r\n\r\n    let parameterMotionCurveCount = 0;\r\n\r\n    for (\r\n      ;\r\n      c < this._motionData.curveCount &&\r\n      curves.at(c).type ==\r\n        CubismMotionCurveTarget.CubismMotionCurveTarget_Parameter;\r\n      ++c\r\n    ) {\r\n      parameterMotionCurveCount++;\r\n\r\n      // Find parameter index.\r\n      parameterIndex = model.getParameterIndex(curves.at(c).id);\r\n\r\n      // Skip curve evaluation if no value in sink.\r\n      if (parameterIndex == -1) {\r\n        continue;\r\n      }\r\n\r\n      const sourceValue: number =\r\n        model.getParameterValueByIndex(parameterIndex);\r\n\r\n      // Evaluate curve and apply value.\r\n      value = evaluateCurve(this._motionData, c, time);\r\n\r\n      if (eyeBlinkValue != Number.MAX_VALUE) {\r\n        for (\r\n          let i = 0;\r\n          i < this._eyeBlinkParameterIds.getSize() && i < MaxTargetSize;\r\n          ++i\r\n        ) {\r\n          if (this._eyeBlinkParameterIds.at(i) == curves.at(c).id) {\r\n            value *= eyeBlinkValue;\r\n            eyeBlinkFlags |= 1 << i;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n\r\n      if (lipSyncValue != Number.MAX_VALUE) {\r\n        for (\r\n          let i = 0;\r\n          i < this._lipSyncParameterIds.getSize() && i < MaxTargetSize;\r\n          ++i\r\n        ) {\r\n          if (this._lipSyncParameterIds.at(i) == curves.at(c).id) {\r\n            value += lipSyncValue;\r\n            lipSyncFlags |= 1 << i;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n\r\n      let v: number;\r\n\r\n      // パラメータごとのフェード\r\n      if (curves.at(c).fadeInTime < 0.0 && curves.at(c).fadeOutTime < 0.0) {\r\n        // モーションのフェードを適用\r\n        v = sourceValue + (value - sourceValue) * fadeWeight;\r\n      } else {\r\n        // パラメータに対してフェードインかフェードアウトが設定してある場合はそちらを適用\r\n        let fin: number;\r\n        let fout: number;\r\n\r\n        if (curves.at(c).fadeInTime < 0.0) {\r\n          fin = tmpFadeIn;\r\n        } else {\r\n          fin =\r\n            curves.at(c).fadeInTime == 0.0\r\n              ? 1.0\r\n              : CubismMath.getEasingSine(\r\n                  (userTimeSeconds - motionQueueEntry.getFadeInStartTime()) /\r\n                    curves.at(c).fadeInTime\r\n                );\r\n        }\r\n\r\n        if (curves.at(c).fadeOutTime < 0.0) {\r\n          fout = tmpFadeOut;\r\n        } else {\r\n          fout =\r\n            curves.at(c).fadeOutTime == 0.0 ||\r\n            motionQueueEntry.getEndTime() < 0.0\r\n              ? 1.0\r\n              : CubismMath.getEasingSine(\r\n                  (motionQueueEntry.getEndTime() - userTimeSeconds) /\r\n                    curves.at(c).fadeOutTime\r\n                );\r\n        }\r\n\r\n        const paramWeight: number = this._weight * fin * fout;\r\n\r\n        // パラメータごとのフェードを適用\r\n        v = sourceValue + (value - sourceValue) * paramWeight;\r\n      }\r\n\r\n      model.setParameterValueByIndex(parameterIndex, v, 1.0);\r\n    }\r\n\r\n    {\r\n      if (eyeBlinkValue != Number.MAX_VALUE) {\r\n        for (\r\n          let i = 0;\r\n          i < this._eyeBlinkParameterIds.getSize() && i < MaxTargetSize;\r\n          ++i\r\n        ) {\r\n          const sourceValue: number = model.getParameterValueById(\r\n            this._eyeBlinkParameterIds.at(i)\r\n          );\r\n\r\n          // モーションでの上書きがあった時にはまばたきは適用しない\r\n          if ((eyeBlinkFlags >> i) & 0x01) {\r\n            continue;\r\n          }\r\n\r\n          const v: number =\r\n            sourceValue + (eyeBlinkValue - sourceValue) * fadeWeight;\r\n\r\n          model.setParameterValueById(this._eyeBlinkParameterIds.at(i), v);\r\n        }\r\n      }\r\n\r\n      if (lipSyncValue != Number.MAX_VALUE) {\r\n        for (\r\n          let i = 0;\r\n          i < this._lipSyncParameterIds.getSize() && i < MaxTargetSize;\r\n          ++i\r\n        ) {\r\n          const sourceValue: number = model.getParameterValueById(\r\n            this._lipSyncParameterIds.at(i)\r\n          );\r\n\r\n          // モーションでの上書きがあった時にはリップシンクは適用しない\r\n          if ((lipSyncFlags >> i) & 0x01) {\r\n            continue;\r\n          }\r\n\r\n          const v: number =\r\n            sourceValue + (lipSyncValue - sourceValue) * fadeWeight;\r\n\r\n          model.setParameterValueById(this._lipSyncParameterIds.at(i), v);\r\n        }\r\n      }\r\n    }\r\n\r\n    for (\r\n      ;\r\n      c < this._motionData.curveCount &&\r\n      curves.at(c).type ==\r\n        CubismMotionCurveTarget.CubismMotionCurveTarget_PartOpacity;\r\n      ++c\r\n    ) {\r\n      // Find parameter index.\r\n      parameterIndex = model.getParameterIndex(curves.at(c).id);\r\n\r\n      // Skip curve evaluation if no value in sink.\r\n      if (parameterIndex == -1) {\r\n        continue;\r\n      }\r\n\r\n      // Evaluate curve and apply value.\r\n      value = evaluateCurve(this._motionData, c, time);\r\n\r\n      model.setParameterValueByIndex(parameterIndex, value);\r\n    }\r\n\r\n    if (timeOffsetSeconds >= this._motionData.duration) {\r\n      if (this._isLoop) {\r\n        motionQueueEntry.setStartTime(userTimeSeconds); // 最初の状態へ\r\n        if (this._isLoopFadeIn) {\r\n          // ループ内でループ用フェードインが有効の時は、フェードイン設定し直し\r\n          motionQueueEntry.setFadeInStartTime(userTimeSeconds);\r\n        }\r\n      } else {\r\n        if (this._onFinishedMotion) {\r\n          this._onFinishedMotion(this);\r\n        }\r\n\r\n        motionQueueEntry.setIsFinished(true);\r\n      }\r\n    }\r\n    this._lastWeight = fadeWeight;\r\n  }\r\n\r\n  /**\r\n   * ループ情報の設定\r\n   * @param loop ループ情報\r\n   */\r\n  public setIsLoop(loop: boolean): void {\r\n    this._isLoop = loop;\r\n  }\r\n\r\n  /**\r\n   * ループ情報の取得\r\n   * @return true ループする\r\n   * @return false ループしない\r\n   */\r\n  public isLoop(): boolean {\r\n    return this._isLoop;\r\n  }\r\n\r\n  /**\r\n   * ループ時のフェードイン情報の設定\r\n   * @param loopFadeIn  ループ時のフェードイン情報\r\n   */\r\n  public setIsLoopFadeIn(loopFadeIn: boolean): void {\r\n    this._isLoopFadeIn = loopFadeIn;\r\n  }\r\n\r\n  /**\r\n   * ループ時のフェードイン情報の取得\r\n   *\r\n   * @return  true    する\r\n   * @return  false   しない\r\n   */\r\n  public isLoopFadeIn(): boolean {\r\n    return this._isLoopFadeIn;\r\n  }\r\n\r\n  /**\r\n   * モーションの長さを取得する。\r\n   *\r\n   * @return  モーションの長さ[秒]\r\n   */\r\n  public getDuration(): number {\r\n    return this._isLoop ? -1.0 : this._loopDurationSeconds;\r\n  }\r\n\r\n  /**\r\n   * モーションのループ時の長さを取得する。\r\n   *\r\n   * @return  モーションのループ時の長さ[秒]\r\n   */\r\n  public getLoopDuration(): number {\r\n    return this._loopDurationSeconds;\r\n  }\r\n\r\n  /**\r\n   * パラメータに対するフェードインの時間を設定する。\r\n   *\r\n   * @param parameterId     パラメータID\r\n   * @param value           フェードインにかかる時間[秒]\r\n   */\r\n  public setParameterFadeInTime(\r\n    parameterId: CubismIdHandle,\r\n    value: number\r\n  ): void {\r\n    const curves: csmVector<CubismMotionCurve> = this._motionData.curves;\r\n\r\n    for (let i = 0; i < this._motionData.curveCount; ++i) {\r\n      if (parameterId == curves.at(i).id) {\r\n        curves.at(i).fadeInTime = value;\r\n        return;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * パラメータに対するフェードアウトの時間の設定\r\n   * @param parameterId     パラメータID\r\n   * @param value           フェードアウトにかかる時間[秒]\r\n   */\r\n  public setParameterFadeOutTime(\r\n    parameterId: CubismIdHandle,\r\n    value: number\r\n  ): void {\r\n    const curves: csmVector<CubismMotionCurve> = this._motionData.curves;\r\n\r\n    for (let i = 0; i < this._motionData.curveCount; ++i) {\r\n      if (parameterId == curves.at(i).id) {\r\n        curves.at(i).fadeOutTime = value;\r\n        return;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * パラメータに対するフェードインの時間の取得\r\n   * @param    parameterId     パラメータID\r\n   * @return   フェードインにかかる時間[秒]\r\n   */\r\n  public getParameterFadeInTime(parameterId: CubismIdHandle): number {\r\n    const curves: csmVector<CubismMotionCurve> = this._motionData.curves;\r\n\r\n    for (let i = 0; i < this._motionData.curveCount; ++i) {\r\n      if (parameterId == curves.at(i).id) {\r\n        return curves.at(i).fadeInTime;\r\n      }\r\n    }\r\n\r\n    return -1;\r\n  }\r\n\r\n  /**\r\n   * パラメータに対するフェードアウトの時間を取得\r\n   *\r\n   * @param   parameterId     パラメータID\r\n   * @return   フェードアウトにかかる時間[秒]\r\n   */\r\n  public getParameterFadeOutTime(parameterId: CubismIdHandle): number {\r\n    const curves: csmVector<CubismMotionCurve> = this._motionData.curves;\r\n\r\n    for (let i = 0; i < this._motionData.curveCount; ++i) {\r\n      if (parameterId == curves.at(i).id) {\r\n        return curves.at(i).fadeOutTime;\r\n      }\r\n    }\r\n\r\n    return -1;\r\n  }\r\n\r\n  /**\r\n   * 自動エフェクトがかかっているパラメータIDリストの設定\r\n   * @param eyeBlinkParameterIds    自動まばたきがかかっているパラメータIDのリスト\r\n   * @param lipSyncParameterIds     リップシンクがかかっているパラメータIDのリスト\r\n   */\r\n  public setEffectIds(\r\n    eyeBlinkParameterIds: csmVector<CubismIdHandle>,\r\n    lipSyncParameterIds: csmVector<CubismIdHandle>\r\n  ): void {\r\n    this._eyeBlinkParameterIds = eyeBlinkParameterIds;\r\n    this._lipSyncParameterIds = lipSyncParameterIds;\r\n  }\r\n\r\n  /**\r\n   * コンストラクタ\r\n   */\r\n  public constructor() {\r\n    super();\r\n    this._sourceFrameRate = 30.0;\r\n    this._loopDurationSeconds = -1.0;\r\n    this._isLoop = false; // trueから false へデフォルトを変更\r\n    this._isLoopFadeIn = true; // ループ時にフェードインが有効かどうかのフラグ\r\n    this._lastWeight = 0.0;\r\n    this._motionData = null;\r\n    this._modelCurveIdEyeBlink = null;\r\n    this._modelCurveIdLipSync = null;\r\n    this._eyeBlinkParameterIds = null;\r\n    this._lipSyncParameterIds = null;\r\n  }\r\n\r\n  /**\r\n   * デストラクタ相当の処理\r\n   */\r\n  public release(): void {\r\n    this._motionData = void 0;\r\n    this._motionData = null;\r\n  }\r\n\r\n  /**\r\n   * motion3.jsonをパースする。\r\n   *\r\n   * @param motionJson  motion3.jsonが読み込まれているバッファ\r\n   * @param size        バッファのサイズ\r\n   */\r\n  public parse(motionJson: ArrayBuffer, size: number): void {\r\n    this._motionData = new CubismMotionData();\r\n\r\n    let json: CubismMotionJson = new CubismMotionJson(motionJson, size);\r\n\r\n    this._motionData.duration = json.getMotionDuration();\r\n    this._motionData.loop = json.isMotionLoop();\r\n    this._motionData.curveCount = json.getMotionCurveCount();\r\n    this._motionData.fps = json.getMotionFps();\r\n    this._motionData.eventCount = json.getEventCount();\r\n\r\n    const areBeziersRestructed: boolean = json.getEvaluationOptionFlag(\r\n      EvaluationOptionFlag.EvaluationOptionFlag_AreBeziersRistricted\r\n    );\r\n\r\n    if (json.isExistMotionFadeInTime()) {\r\n      this._fadeInSeconds =\r\n        json.getMotionFadeInTime() < 0.0 ? 1.0 : json.getMotionFadeInTime();\r\n    } else {\r\n      this._fadeInSeconds = 1.0;\r\n    }\r\n\r\n    if (json.isExistMotionFadeOutTime()) {\r\n      this._fadeOutSeconds =\r\n        json.getMotionFadeOutTime() < 0.0 ? 1.0 : json.getMotionFadeOutTime();\r\n    } else {\r\n      this._fadeOutSeconds = 1.0;\r\n    }\r\n\r\n    this._motionData.curves.updateSize(\r\n      this._motionData.curveCount,\r\n      CubismMotionCurve,\r\n      true\r\n    );\r\n    this._motionData.segments.updateSize(\r\n      json.getMotionTotalSegmentCount(),\r\n      CubismMotionSegment,\r\n      true\r\n    );\r\n    this._motionData.points.updateSize(\r\n      json.getMotionTotalPointCount(),\r\n      CubismMotionPoint,\r\n      true\r\n    );\r\n    this._motionData.events.updateSize(\r\n      this._motionData.eventCount,\r\n      CubismMotionEvent,\r\n      true\r\n    );\r\n\r\n    let totalPointCount = 0;\r\n    let totalSegmentCount = 0;\r\n\r\n    // Curves\r\n    for (\r\n      let curveCount = 0;\r\n      curveCount < this._motionData.curveCount;\r\n      ++curveCount\r\n    ) {\r\n      if (json.getMotionCurveTarget(curveCount) == TargetNameModel) {\r\n        this._motionData.curves.at(curveCount).type =\r\n          CubismMotionCurveTarget.CubismMotionCurveTarget_Model;\r\n      } else if (json.getMotionCurveTarget(curveCount) == TargetNameParameter) {\r\n        this._motionData.curves.at(curveCount).type =\r\n          CubismMotionCurveTarget.CubismMotionCurveTarget_Parameter;\r\n      } else if (\r\n        json.getMotionCurveTarget(curveCount) == TargetNamePartOpacity\r\n      ) {\r\n        this._motionData.curves.at(curveCount).type =\r\n          CubismMotionCurveTarget.CubismMotionCurveTarget_PartOpacity;\r\n      } else {\r\n        CubismLogWarning(\r\n          'Warning : Unable to get segment type from Curve! The number of \"CurveCount\" may be incorrect!'\r\n        );\r\n      }\r\n\r\n      this._motionData.curves.at(curveCount).id =\r\n        json.getMotionCurveId(curveCount);\r\n\r\n      this._motionData.curves.at(curveCount).baseSegmentIndex =\r\n        totalSegmentCount;\r\n\r\n      this._motionData.curves.at(curveCount).fadeInTime =\r\n        json.isExistMotionCurveFadeInTime(curveCount)\r\n          ? json.getMotionCurveFadeInTime(curveCount)\r\n          : -1.0;\r\n      this._motionData.curves.at(curveCount).fadeOutTime =\r\n        json.isExistMotionCurveFadeOutTime(curveCount)\r\n          ? json.getMotionCurveFadeOutTime(curveCount)\r\n          : -1.0;\r\n\r\n      // Segments\r\n      for (\r\n        let segmentPosition = 0;\r\n        segmentPosition < json.getMotionCurveSegmentCount(curveCount);\r\n\r\n      ) {\r\n        if (segmentPosition == 0) {\r\n          this._motionData.segments.at(totalSegmentCount).basePointIndex =\r\n            totalPointCount;\r\n\r\n          this._motionData.points.at(totalPointCount).time =\r\n            json.getMotionCurveSegment(curveCount, segmentPosition);\r\n          this._motionData.points.at(totalPointCount).value =\r\n            json.getMotionCurveSegment(curveCount, segmentPosition + 1);\r\n\r\n          totalPointCount += 1;\r\n          segmentPosition += 2;\r\n        } else {\r\n          this._motionData.segments.at(totalSegmentCount).basePointIndex =\r\n            totalPointCount - 1;\r\n        }\r\n\r\n        const segment: number = json.getMotionCurveSegment(\r\n          curveCount,\r\n          segmentPosition\r\n        );\r\n        switch (segment) {\r\n          case CubismMotionSegmentType.CubismMotionSegmentType_Linear: {\r\n            this._motionData.segments.at(totalSegmentCount).segmentType =\r\n              CubismMotionSegmentType.CubismMotionSegmentType_Linear;\r\n            this._motionData.segments.at(totalSegmentCount).evaluate =\r\n              linearEvaluate;\r\n\r\n            this._motionData.points.at(totalPointCount).time =\r\n              json.getMotionCurveSegment(curveCount, segmentPosition + 1);\r\n            this._motionData.points.at(totalPointCount).value =\r\n              json.getMotionCurveSegment(curveCount, segmentPosition + 2);\r\n\r\n            totalPointCount += 1;\r\n            segmentPosition += 3;\r\n\r\n            break;\r\n          }\r\n          case CubismMotionSegmentType.CubismMotionSegmentType_Bezier: {\r\n            this._motionData.segments.at(totalSegmentCount).segmentType =\r\n              CubismMotionSegmentType.CubismMotionSegmentType_Bezier;\r\n\r\n            if (areBeziersRestructed || UseOldBeziersCurveMotion) {\r\n              this._motionData.segments.at(totalSegmentCount).evaluate =\r\n                bezierEvaluate;\r\n            } else {\r\n              this._motionData.segments.at(totalSegmentCount).evaluate =\r\n                bezierEvaluateCardanoInterpretation;\r\n            }\r\n\r\n            this._motionData.points.at(totalPointCount).time =\r\n              json.getMotionCurveSegment(curveCount, segmentPosition + 1);\r\n            this._motionData.points.at(totalPointCount).value =\r\n              json.getMotionCurveSegment(curveCount, segmentPosition + 2);\r\n\r\n            this._motionData.points.at(totalPointCount + 1).time =\r\n              json.getMotionCurveSegment(curveCount, segmentPosition + 3);\r\n            this._motionData.points.at(totalPointCount + 1).value =\r\n              json.getMotionCurveSegment(curveCount, segmentPosition + 4);\r\n\r\n            this._motionData.points.at(totalPointCount + 2).time =\r\n              json.getMotionCurveSegment(curveCount, segmentPosition + 5);\r\n            this._motionData.points.at(totalPointCount + 2).value =\r\n              json.getMotionCurveSegment(curveCount, segmentPosition + 6);\r\n\r\n            totalPointCount += 3;\r\n            segmentPosition += 7;\r\n\r\n            break;\r\n          }\r\n\r\n          case CubismMotionSegmentType.CubismMotionSegmentType_Stepped: {\r\n            this._motionData.segments.at(totalSegmentCount).segmentType =\r\n              CubismMotionSegmentType.CubismMotionSegmentType_Stepped;\r\n            this._motionData.segments.at(totalSegmentCount).evaluate =\r\n              steppedEvaluate;\r\n\r\n            this._motionData.points.at(totalPointCount).time =\r\n              json.getMotionCurveSegment(curveCount, segmentPosition + 1);\r\n            this._motionData.points.at(totalPointCount).value =\r\n              json.getMotionCurveSegment(curveCount, segmentPosition + 2);\r\n\r\n            totalPointCount += 1;\r\n            segmentPosition += 3;\r\n\r\n            break;\r\n          }\r\n\r\n          case CubismMotionSegmentType.CubismMotionSegmentType_InverseStepped: {\r\n            this._motionData.segments.at(totalSegmentCount).segmentType =\r\n              CubismMotionSegmentType.CubismMotionSegmentType_InverseStepped;\r\n            this._motionData.segments.at(totalSegmentCount).evaluate =\r\n              inverseSteppedEvaluate;\r\n\r\n            this._motionData.points.at(totalPointCount).time =\r\n              json.getMotionCurveSegment(curveCount, segmentPosition + 1);\r\n            this._motionData.points.at(totalPointCount).value =\r\n              json.getMotionCurveSegment(curveCount, segmentPosition + 2);\r\n\r\n            totalPointCount += 1;\r\n            segmentPosition += 3;\r\n\r\n            break;\r\n          }\r\n          default: {\r\n            CSM_ASSERT(0);\r\n            break;\r\n          }\r\n        }\r\n\r\n        ++this._motionData.curves.at(curveCount).segmentCount;\r\n        ++totalSegmentCount;\r\n      }\r\n    }\r\n\r\n    for (\r\n      let userdatacount = 0;\r\n      userdatacount < json.getEventCount();\r\n      ++userdatacount\r\n    ) {\r\n      this._motionData.events.at(userdatacount).fireTime =\r\n        json.getEventTime(userdatacount);\r\n      this._motionData.events.at(userdatacount).value =\r\n        json.getEventValue(userdatacount);\r\n    }\r\n\r\n    json.release();\r\n    json = void 0;\r\n    json = null;\r\n  }\r\n\r\n  /**\r\n   * モデルのパラメータ更新\r\n   *\r\n   * イベント発火のチェック。\r\n   * 入力する時間は呼ばれるモーションタイミングを０とした秒数で行う。\r\n   *\r\n   * @param beforeCheckTimeSeconds   前回のイベントチェック時間[秒]\r\n   * @param motionTimeSeconds        今回の再生時間[秒]\r\n   */\r\n  public getFiredEvent(\r\n    beforeCheckTimeSeconds: number,\r\n    motionTimeSeconds: number\r\n  ): csmVector<csmString> {\r\n    this._firedEventValues.updateSize(0);\r\n\r\n    // イベントの発火チェック\r\n    for (let u = 0; u < this._motionData.eventCount; ++u) {\r\n      if (\r\n        this._motionData.events.at(u).fireTime > beforeCheckTimeSeconds &&\r\n        this._motionData.events.at(u).fireTime <= motionTimeSeconds\r\n      ) {\r\n        this._firedEventValues.pushBack(\r\n          new csmString(this._motionData.events.at(u).value.s)\r\n        );\r\n      }\r\n    }\r\n\r\n    return this._firedEventValues;\r\n  }\r\n\r\n  public _sourceFrameRate: number; // ロードしたファイルのFPS。記述が無ければデフォルト値15fpsとなる\r\n  public _loopDurationSeconds: number; // mtnファイルで定義される一連のモーションの長さ\r\n  public _isLoop: boolean; // ループするか?\r\n  public _isLoopFadeIn: boolean; // ループ時にフェードインが有効かどうかのフラグ。初期値では有効。\r\n  public _lastWeight: number; // 最後に設定された重み\r\n\r\n  public _motionData: CubismMotionData; // 実際のモーションデータ本体\r\n\r\n  public _eyeBlinkParameterIds: csmVector<CubismIdHandle>; // 自動まばたきを適用するパラメータIDハンドルのリスト。  モデル（モデルセッティング）とパラメータを対応付ける。\r\n  public _lipSyncParameterIds: csmVector<CubismIdHandle>; // リップシンクを適用するパラメータIDハンドルのリスト。  モデル（モデルセッティング）とパラメータを対応付ける。\r\n\r\n  public _modelCurveIdEyeBlink: CubismIdHandle; // モデルが持つ自動まばたき用パラメータIDのハンドル。  モデルとモーションを対応付ける。\r\n  public _modelCurveIdLipSync: CubismIdHandle; // モデルが持つリップシンク用パラメータIDのハンドル。  モデルとモーションを対応付ける。\r\n}\r\n\r\n// Namespace definition for compatibility.\r\nimport * as $ from './cubismmotion';\r\n// eslint-disable-next-line @typescript-eslint/no-namespace\r\nexport namespace Live2DCubismFramework {\r\n  export const CubismMotion = $.CubismMotion;\r\n  export type CubismMotion = $.CubismMotion;\r\n}\r\n","/**\r\n * Copyright(c) Live2D Inc. All rights reserved.\r\n *\r\n * Use of this source code is governed by the Live2D Open Software license\r\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\r\n */\r\n\r\nimport { CubismIdHandle } from '../id/cubismid';\r\nimport { csmString } from '../type/csmstring';\r\nimport { csmVector } from '../type/csmvector';\r\n\r\n/**\r\n * @brief モーションカーブの種類\r\n *\r\n * モーションカーブの種類。\r\n */\r\nexport enum CubismMotionCurveTarget {\r\n  CubismMotionCurveTarget_Model, // モデルに対して\r\n  CubismMotionCurveTarget_Parameter, // パラメータに対して\r\n  CubismMotionCurveTarget_PartOpacity, // パーツの不透明度に対して\r\n}\r\n\r\n/**\r\n * @brief モーションカーブのセグメントの種類\r\n *\r\n * モーションカーブのセグメントの種類。\r\n */\r\nexport enum CubismMotionSegmentType {\r\n  CubismMotionSegmentType_Linear = 0, // リニア\r\n  CubismMotionSegmentType_Bezier = 1, // ベジェ曲線\r\n  CubismMotionSegmentType_Stepped = 2, // ステップ\r\n  CubismMotionSegmentType_InverseStepped = 3, // インバースステップ\r\n}\r\n\r\n/**\r\n * @brief モーションカーブの制御点\r\n *\r\n * モーションカーブの制御点。\r\n */\r\nexport class CubismMotionPoint {\r\n  time = 0.0; // 時間[秒]\r\n  value = 0.0; // 値\r\n}\r\n\r\n/**\r\n * モーションカーブのセグメントの評価関数\r\n *\r\n * @param   points      モーションカーブの制御点リスト\r\n * @param   time        評価する時間[秒]\r\n */\r\nexport interface csmMotionSegmentEvaluationFunction {\r\n  (points: CubismMotionPoint[], time: number): number;\r\n}\r\n\r\n/**\r\n * @brief モーションカーブのセグメント\r\n *\r\n * モーションカーブのセグメント。\r\n */\r\nexport class CubismMotionSegment {\r\n  /**\r\n   * @brief コンストラクタ\r\n   *\r\n   * コンストラクタ。\r\n   */\r\n  public constructor() {\r\n    this.evaluate = null;\r\n    this.basePointIndex = 0;\r\n    this.segmentType = 0;\r\n  }\r\n\r\n  evaluate: csmMotionSegmentEvaluationFunction; // 使用する評価関数\r\n  basePointIndex: number; // 最初のセグメントへのインデックス\r\n  segmentType: number; // セグメントの種類\r\n}\r\n\r\n/**\r\n * @brief モーションカーブ\r\n *\r\n * モーションカーブ。\r\n */\r\nexport class CubismMotionCurve {\r\n  public constructor() {\r\n    this.type = CubismMotionCurveTarget.CubismMotionCurveTarget_Model;\r\n    this.segmentCount = 0;\r\n    this.baseSegmentIndex = 0;\r\n    this.fadeInTime = 0.0;\r\n    this.fadeOutTime = 0.0;\r\n  }\r\n\r\n  type: CubismMotionCurveTarget; // カーブの種類\r\n  id: CubismIdHandle; // カーブのID\r\n  segmentCount: number; // セグメントの個数\r\n  baseSegmentIndex: number; // 最初のセグメントのインデックス\r\n  fadeInTime: number; // フェードインにかかる時間[秒]\r\n  fadeOutTime: number; // フェードアウトにかかる時間[秒]\r\n}\r\n\r\n/**\r\n * イベント。\r\n */\r\nexport class CubismMotionEvent {\r\n  fireTime = 0.0;\r\n  value: csmString;\r\n}\r\n\r\n/**\r\n * @brief モーションデータ\r\n *\r\n * モーションデータ。\r\n */\r\nexport class CubismMotionData {\r\n  public constructor() {\r\n    this.duration = 0.0;\r\n    this.loop = false;\r\n    this.curveCount = 0;\r\n    this.eventCount = 0;\r\n    this.fps = 0.0;\r\n\r\n    this.curves = new csmVector<CubismMotionCurve>();\r\n    this.segments = new csmVector<CubismMotionSegment>();\r\n    this.points = new csmVector<CubismMotionPoint>();\r\n    this.events = new csmVector<CubismMotionEvent>();\r\n  }\r\n\r\n  duration: number; // モーションの長さ[秒]\r\n  loop: boolean; // ループするかどうか\r\n  curveCount: number; // カーブの個数\r\n  eventCount: number; // UserDataの個数\r\n  fps: number; // フレームレート\r\n  curves: csmVector<CubismMotionCurve>; // カーブのリスト\r\n  segments: csmVector<CubismMotionSegment>; // セグメントのリスト\r\n  points: csmVector<CubismMotionPoint>; // ポイントのリスト\r\n  events: csmVector<CubismMotionEvent>; // イベントのリスト\r\n}\r\n\r\n// Namespace definition for compatibility.\r\nimport * as $ from './cubismmotioninternal';\r\n// eslint-disable-next-line @typescript-eslint/no-namespace\r\nexport namespace Live2DCubismFramework {\r\n  export const CubismMotionCurve = $.CubismMotionCurve;\r\n  export type CubismMotionCurve = $.CubismMotionCurve;\r\n  export const CubismMotionCurveTarget = $.CubismMotionCurveTarget;\r\n  export type CubismMotionCurveTarget = $.CubismMotionCurveTarget;\r\n  export const CubismMotionData = $.CubismMotionData;\r\n  export type CubismMotionData = $.CubismMotionData;\r\n  export const CubismMotionEvent = $.CubismMotionEvent;\r\n  export type CubismMotionEvent = $.CubismMotionEvent;\r\n  export const CubismMotionPoint = $.CubismMotionPoint;\r\n  export type CubismMotionPoint = $.CubismMotionPoint;\r\n  export const CubismMotionSegment = $.CubismMotionSegment;\r\n  export type CubismMotionSegment = $.CubismMotionSegment;\r\n  export const CubismMotionSegmentType = $.CubismMotionSegmentType;\r\n  export type CubismMotionSegmentType = $.CubismMotionSegmentType;\r\n  export type csmMotionSegmentEvaluationFunction =\r\n    $.csmMotionSegmentEvaluationFunction;\r\n}\r\n","/**\r\n * Copyright(c) Live2D Inc. All rights reserved.\r\n *\r\n * Use of this source code is governed by the Live2D Open Software license\r\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\r\n */\r\n\r\nimport { CubismIdHandle } from '../id/cubismid';\r\nimport { CubismFramework } from '../live2dcubismframework';\r\nimport { csmString } from '../type/csmstring';\r\nimport { CubismJson, JsonMap } from '../utils/cubismjson';\r\n\r\n// JSON keys\r\nconst Meta = 'Meta';\r\nconst Duration = 'Duration';\r\nconst Loop = 'Loop';\r\nconst AreBeziersRestricted = 'AreBeziersRestricted';\r\nconst CurveCount = 'CurveCount';\r\nconst Fps = 'Fps';\r\nconst TotalSegmentCount = 'TotalSegmentCount';\r\nconst TotalPointCount = 'TotalPointCount';\r\nconst Curves = 'Curves';\r\nconst Target = 'Target';\r\nconst Id = 'Id';\r\nconst FadeInTime = 'FadeInTime';\r\nconst FadeOutTime = 'FadeOutTime';\r\nconst Segments = 'Segments';\r\nconst UserData = 'UserData';\r\nconst UserDataCount = 'UserDataCount';\r\nconst TotalUserDataSize = 'TotalUserDataSize';\r\nconst Time = 'Time';\r\nconst Value = 'Value';\r\n\r\n/**\r\n * motion3.jsonのコンテナ。\r\n */\r\nexport class CubismMotionJson {\r\n  /**\r\n   * コンストラクタ\r\n   * @param buffer motion3.jsonが読み込まれているバッファ\r\n   * @param size バッファのサイズ\r\n   */\r\n  public constructor(buffer: ArrayBuffer, size: number) {\r\n    this._json = CubismJson.create(buffer, size);\r\n  }\r\n\r\n  /**\r\n   * デストラクタ相当の処理\r\n   */\r\n  public release(): void {\r\n    CubismJson.delete(this._json);\r\n  }\r\n\r\n  /**\r\n   * モーションの長さを取得する\r\n   * @return モーションの長さ[秒]\r\n   */\r\n  public getMotionDuration(): number {\r\n    return this._json\r\n      .getRoot()\r\n      .getValueByString(Meta)\r\n      .getValueByString(Duration)\r\n      .toFloat();\r\n  }\r\n\r\n  /**\r\n   * モーションのループ情報の取得\r\n   * @return true ループする\r\n   * @return false ループしない\r\n   */\r\n  public isMotionLoop(): boolean {\r\n    return this._json\r\n      .getRoot()\r\n      .getValueByString(Meta)\r\n      .getValueByString(Loop)\r\n      .toBoolean();\r\n  }\r\n\r\n  public getEvaluationOptionFlag(flagType: number): boolean {\r\n    if (\r\n      EvaluationOptionFlag.EvaluationOptionFlag_AreBeziersRistricted == flagType\r\n    ) {\r\n      return this._json\r\n        .getRoot()\r\n        .getValueByString(Meta)\r\n        .getValueByString(AreBeziersRestricted)\r\n        .toBoolean();\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * モーションカーブの個数の取得\r\n   * @return モーションカーブの個数\r\n   */\r\n  public getMotionCurveCount(): number {\r\n    return this._json\r\n      .getRoot()\r\n      .getValueByString(Meta)\r\n      .getValueByString(CurveCount)\r\n      .toInt();\r\n  }\r\n\r\n  /**\r\n   * モーションのフレームレートの取得\r\n   * @return フレームレート[FPS]\r\n   */\r\n  public getMotionFps(): number {\r\n    return this._json\r\n      .getRoot()\r\n      .getValueByString(Meta)\r\n      .getValueByString(Fps)\r\n      .toFloat();\r\n  }\r\n\r\n  /**\r\n   * モーションのセグメントの総合計の取得\r\n   * @return モーションのセグメントの取得\r\n   */\r\n  public getMotionTotalSegmentCount(): number {\r\n    return this._json\r\n      .getRoot()\r\n      .getValueByString(Meta)\r\n      .getValueByString(TotalSegmentCount)\r\n      .toInt();\r\n  }\r\n\r\n  /**\r\n   * モーションのカーブの制御店の総合計の取得\r\n   * @return モーションのカーブの制御点の総合計\r\n   */\r\n  public getMotionTotalPointCount(): number {\r\n    return this._json\r\n      .getRoot()\r\n      .getValueByString(Meta)\r\n      .getValueByString(TotalPointCount)\r\n      .toInt();\r\n  }\r\n\r\n  /**\r\n   * モーションのフェードイン時間の存在\r\n   * @return true 存在する\r\n   * @return false 存在しない\r\n   */\r\n  public isExistMotionFadeInTime(): boolean {\r\n    return !this._json\r\n      .getRoot()\r\n      .getValueByString(Meta)\r\n      .getValueByString(FadeInTime)\r\n      .isNull();\r\n  }\r\n\r\n  /**\r\n   * モーションのフェードアウト時間の存在\r\n   * @return true 存在する\r\n   * @return false 存在しない\r\n   */\r\n  public isExistMotionFadeOutTime(): boolean {\r\n    return !this._json\r\n      .getRoot()\r\n      .getValueByString(Meta)\r\n      .getValueByString(FadeOutTime)\r\n      .isNull();\r\n  }\r\n\r\n  /**\r\n   * モーションのフェードイン時間の取得\r\n   * @return フェードイン時間[秒]\r\n   */\r\n  public getMotionFadeInTime(): number {\r\n    return this._json\r\n      .getRoot()\r\n      .getValueByString(Meta)\r\n      .getValueByString(FadeInTime)\r\n      .toFloat();\r\n  }\r\n\r\n  /**\r\n   * モーションのフェードアウト時間の取得\r\n   * @return フェードアウト時間[秒]\r\n   */\r\n  public getMotionFadeOutTime(): number {\r\n    return this._json\r\n      .getRoot()\r\n      .getValueByString(Meta)\r\n      .getValueByString(FadeOutTime)\r\n      .toFloat();\r\n  }\r\n\r\n  /**\r\n   * モーションのカーブの種類の取得\r\n   * @param curveIndex カーブのインデックス\r\n   * @return カーブの種類\r\n   */\r\n  public getMotionCurveTarget(curveIndex: number): string {\r\n    return this._json\r\n      .getRoot()\r\n      .getValueByString(Curves)\r\n      .getValueByIndex(curveIndex)\r\n      .getValueByString(Target)\r\n      .getRawString();\r\n  }\r\n\r\n  /**\r\n   * モーションのカーブのIDの取得\r\n   * @param curveIndex カーブのインデックス\r\n   * @return カーブのID\r\n   */\r\n  public getMotionCurveId(curveIndex: number): CubismIdHandle {\r\n    return CubismFramework.getIdManager().getId(\r\n      this._json\r\n        .getRoot()\r\n        .getValueByString(Curves)\r\n        .getValueByIndex(curveIndex)\r\n        .getValueByString(Id)\r\n        .getRawString()\r\n    );\r\n  }\r\n\r\n  /**\r\n   * モーションのカーブのフェードイン時間の存在\r\n   * @param curveIndex カーブのインデックス\r\n   * @return true 存在する\r\n   * @return false 存在しない\r\n   */\r\n  public isExistMotionCurveFadeInTime(curveIndex: number): boolean {\r\n    return !this._json\r\n      .getRoot()\r\n      .getValueByString(Curves)\r\n      .getValueByIndex(curveIndex)\r\n      .getValueByString(FadeInTime)\r\n      .isNull();\r\n  }\r\n\r\n  /**\r\n   * モーションのカーブのフェードアウト時間の存在\r\n   * @param curveIndex カーブのインデックス\r\n   * @return true 存在する\r\n   * @return false 存在しない\r\n   */\r\n  public isExistMotionCurveFadeOutTime(curveIndex: number): boolean {\r\n    return !this._json\r\n      .getRoot()\r\n      .getValueByString(Curves)\r\n      .getValueByIndex(curveIndex)\r\n      .getValueByString(FadeOutTime)\r\n      .isNull();\r\n  }\r\n\r\n  /**\r\n   * モーションのカーブのフェードイン時間の取得\r\n   * @param curveIndex カーブのインデックス\r\n   * @return フェードイン時間[秒]\r\n   */\r\n  public getMotionCurveFadeInTime(curveIndex: number): number {\r\n    return this._json\r\n      .getRoot()\r\n      .getValueByString(Curves)\r\n      .getValueByIndex(curveIndex)\r\n      .getValueByString(FadeInTime)\r\n      .toFloat();\r\n  }\r\n\r\n  /**\r\n   * モーションのカーブのフェードアウト時間の取得\r\n   * @param curveIndex カーブのインデックス\r\n   * @return フェードアウト時間[秒]\r\n   */\r\n  public getMotionCurveFadeOutTime(curveIndex: number): number {\r\n    return this._json\r\n      .getRoot()\r\n      .getValueByString(Curves)\r\n      .getValueByIndex(curveIndex)\r\n      .getValueByString(FadeOutTime)\r\n      .toFloat();\r\n  }\r\n\r\n  /**\r\n   * モーションのカーブのセグメントの個数を取得する\r\n   * @param curveIndex カーブのインデックス\r\n   * @return モーションのカーブのセグメントの個数\r\n   */\r\n  public getMotionCurveSegmentCount(curveIndex: number): number {\r\n    return this._json\r\n      .getRoot()\r\n      .getValueByString(Curves)\r\n      .getValueByIndex(curveIndex)\r\n      .getValueByString(Segments)\r\n      .getVector()\r\n      .getSize();\r\n  }\r\n\r\n  /**\r\n   * モーションのカーブのセグメントの値の取得\r\n   * @param curveIndex カーブのインデックス\r\n   * @param segmentIndex セグメントのインデックス\r\n   * @return セグメントの値\r\n   */\r\n  public getMotionCurveSegment(\r\n    curveIndex: number,\r\n    segmentIndex: number\r\n  ): number {\r\n    return this._json\r\n      .getRoot()\r\n      .getValueByString(Curves)\r\n      .getValueByIndex(curveIndex)\r\n      .getValueByString(Segments)\r\n      .getValueByIndex(segmentIndex)\r\n      .toFloat();\r\n  }\r\n\r\n  /**\r\n   * イベントの個数の取得\r\n   * @return イベントの個数\r\n   */\r\n  public getEventCount(): number {\r\n    return this._json\r\n      .getRoot()\r\n      .getValueByString(Meta)\r\n      .getValueByString(UserDataCount)\r\n      .toInt();\r\n  }\r\n\r\n  /**\r\n   *  イベントの総文字数の取得\r\n   * @return イベントの総文字数\r\n   */\r\n  public getTotalEventValueSize(): number {\r\n    return this._json\r\n      .getRoot()\r\n      .getValueByString(Meta)\r\n      .getValueByString(TotalUserDataSize)\r\n      .toInt();\r\n  }\r\n\r\n  /**\r\n   * イベントの時間の取得\r\n   * @param userDataIndex イベントのインデックス\r\n   * @return イベントの時間[秒]\r\n   */\r\n  public getEventTime(userDataIndex: number): number {\r\n    return this._json\r\n      .getRoot()\r\n      .getValueByString(UserData)\r\n      .getValueByIndex(userDataIndex)\r\n      .getValueByString(Time)\r\n      .toFloat();\r\n  }\r\n\r\n  /**\r\n   * イベントの取得\r\n   * @param userDataIndex イベントのインデックス\r\n   * @return イベントの文字列\r\n   */\r\n  public getEventValue(userDataIndex: number): csmString {\r\n    return new csmString(\r\n      this._json\r\n        .getRoot()\r\n        .getValueByString(UserData)\r\n        .getValueByIndex(userDataIndex)\r\n        .getValueByString(Value)\r\n        .getRawString()\r\n    );\r\n  }\r\n\r\n  _json: CubismJson; // motion3.jsonのデータ\r\n}\r\n\r\n/**\r\n * @brief ベジェカーブの解釈方法のフラグタイプ\r\n */\r\nexport enum EvaluationOptionFlag {\r\n  EvaluationOptionFlag_AreBeziersRistricted = 0, ///< ベジェハンドルの規制状態\r\n}\r\n\r\n// Namespace definition for compatibility.\r\nimport * as $ from './cubismmotionjson';\r\n// eslint-disable-next-line @typescript-eslint/no-namespace\r\nexport namespace Live2DCubismFramework {\r\n  export const CubismMotionJson = $.CubismMotionJson;\r\n  export type CubismMotionJson = $.CubismMotionJson;\r\n}\r\n","/**\r\n * Copyright(c) Live2D Inc. All rights reserved.\r\n *\r\n * Use of this source code is governed by the Live2D Open Software license\r\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\r\n */\r\n\r\nimport { CubismModel } from '../model/cubismmodel';\r\nimport { ACubismMotion } from './acubismmotion';\r\nimport {\r\n  CubismMotionQueueEntryHandle,\r\n  CubismMotionQueueManager,\r\n} from './cubismmotionqueuemanager';\r\n\r\n/**\r\n * モーションの管理\r\n *\r\n * モーションの管理を行うクラス\r\n */\r\nexport class CubismMotionManager extends CubismMotionQueueManager {\r\n  /**\r\n   * コンストラクタ\r\n   */\r\n  public constructor() {\r\n    super();\r\n    this._currentPriority = 0;\r\n    this._reservePriority = 0;\r\n  }\r\n\r\n  /**\r\n   * 再生中のモーションの優先度の取得\r\n   * @return  モーションの優先度\r\n   */\r\n  public getCurrentPriority(): number {\r\n    return this._currentPriority;\r\n  }\r\n\r\n  /**\r\n   * 予約中のモーションの優先度を取得する。\r\n   * @return  モーションの優先度\r\n   */\r\n  public getReservePriority(): number {\r\n    return this._reservePriority;\r\n  }\r\n\r\n  /**\r\n   * 予約中のモーションの優先度を設定する。\r\n   * @param   val     優先度\r\n   */\r\n  public setReservePriority(val: number): void {\r\n    this._reservePriority = val;\r\n  }\r\n\r\n  /**\r\n   * 優先度を設定してモーションを開始する。\r\n   *\r\n   * @param motion          モーション\r\n   * @param autoDelete      再生が狩猟したモーションのインスタンスを削除するならtrue\r\n   * @param priority        優先度\r\n   * @return                開始したモーションの識別番号を返す。個別のモーションが終了したか否かを判定するIsFinished()の引数で使用する。開始できない時は「-1」\r\n   */\r\n  public startMotionPriority(\r\n    motion: ACubismMotion,\r\n    autoDelete: boolean,\r\n    priority: number\r\n  ): CubismMotionQueueEntryHandle {\r\n    if (priority == this._reservePriority) {\r\n      this._reservePriority = 0; // 予約を解除\r\n    }\r\n\r\n    this._currentPriority = priority; // 再生中モーションの優先度を設定\r\n\r\n    return super.startMotion(motion, autoDelete, this._userTimeSeconds);\r\n  }\r\n\r\n  /**\r\n   * モーションを更新して、モデルにパラメータ値を反映する。\r\n   *\r\n   * @param model   対象のモデル\r\n   * @param deltaTimeSeconds    デルタ時間[秒]\r\n   * @return  true    更新されている\r\n   * @return  false   更新されていない\r\n   */\r\n  public updateMotion(model: CubismModel, deltaTimeSeconds: number): boolean {\r\n    this._userTimeSeconds += deltaTimeSeconds;\r\n\r\n    const updated: boolean = super.doUpdateMotion(model, this._userTimeSeconds);\r\n\r\n    if (this.isFinished()) {\r\n      this._currentPriority = 0; // 再生中のモーションの優先度を解除\r\n    }\r\n\r\n    return updated;\r\n  }\r\n\r\n  /**\r\n   * モーションを予約する。\r\n   *\r\n   * @param   priority    優先度\r\n   * @return  true    予約できた\r\n   * @return  false   予約できなかった\r\n   */\r\n  public reserveMotion(priority: number): boolean {\r\n    if (\r\n      priority <= this._reservePriority ||\r\n      priority <= this._currentPriority\r\n    ) {\r\n      return false;\r\n    }\r\n\r\n    this._reservePriority = priority;\r\n\r\n    return true;\r\n  }\r\n\r\n  _currentPriority: number; // 現在再生中のモーションの優先度\r\n  _reservePriority: number; // 再生予定のモーションの優先度。再生中は0になる。モーションファイルを別スレッドで読み込むときの機能。\r\n}\r\n\r\n// Namespace definition for compatibility.\r\nimport * as $ from './cubismmotionmanager';\r\n// eslint-disable-next-line @typescript-eslint/no-namespace\r\nexport namespace Live2DCubismFramework {\r\n  export const CubismMotionManager = $.CubismMotionManager;\r\n  export type CubismMotionManager = $.CubismMotionManager;\r\n}\r\n","/**\r\n * Copyright(c) Live2D Inc. All rights reserved.\r\n *\r\n * Use of this source code is governed by the Live2D Open Software license\r\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\r\n */\r\n\r\nimport { ACubismMotion } from './acubismmotion';\r\nimport { CubismMotionQueueEntryHandle } from './cubismmotionqueuemanager';\r\n\r\n/**\r\n * CubismMotionQueueManagerで再生している各モーションの管理クラス。\r\n */\r\nexport class CubismMotionQueueEntry {\r\n  /**\r\n   * コンストラクタ\r\n   */\r\n  public constructor() {\r\n    this._autoDelete = false;\r\n    this._motion = null;\r\n    this._available = true;\r\n    this._finished = false;\r\n    this._started = false;\r\n    this._startTimeSeconds = -1.0;\r\n    this._fadeInStartTimeSeconds = 0.0;\r\n    this._endTimeSeconds = -1.0;\r\n    this._stateTimeSeconds = 0.0;\r\n    this._stateWeight = 0.0;\r\n    this._lastEventCheckSeconds = 0.0;\r\n    this._motionQueueEntryHandle = this;\r\n    this._fadeOutSeconds = 0.0;\r\n    this._isTriggeredFadeOut = false;\r\n  }\r\n\r\n  /**\r\n   * デストラクタ相当の処理\r\n   */\r\n  public release(): void {\r\n    if (this._autoDelete && this._motion) {\r\n      ACubismMotion.delete(this._motion); //\r\n    }\r\n  }\r\n\r\n  /**\r\n   * フェードアウト時間と開始判定の設定\r\n   * @param fadeOutSeconds フェードアウトにかかる時間[秒]\r\n   */\r\n  public setFadeOut(fadeOutSeconds: number): void {\r\n    this._fadeOutSeconds = fadeOutSeconds;\r\n    this._isTriggeredFadeOut = true;\r\n  }\r\n\r\n  /**\r\n   * フェードアウトの開始\r\n   * @param fadeOutSeconds フェードアウトにかかる時間[秒]\r\n   * @param userTimeSeconds デルタ時間の積算値[秒]\r\n   */\r\n  public startFadeOut(fadeOutSeconds: number, userTimeSeconds: number): void {\r\n    const newEndTimeSeconds: number = userTimeSeconds + fadeOutSeconds;\r\n    this._isTriggeredFadeOut = true;\r\n\r\n    if (\r\n      this._endTimeSeconds < 0.0 ||\r\n      newEndTimeSeconds < this._endTimeSeconds\r\n    ) {\r\n      this._endTimeSeconds = newEndTimeSeconds;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * モーションの終了の確認\r\n   *\r\n   * @return true モーションが終了した\r\n   * @return false 終了していない\r\n   */\r\n  public isFinished(): boolean {\r\n    return this._finished;\r\n  }\r\n\r\n  /**\r\n   * モーションの開始の確認\r\n   * @return true モーションが開始した\r\n   * @return false 開始していない\r\n   */\r\n  public isStarted(): boolean {\r\n    return this._started;\r\n  }\r\n\r\n  /**\r\n   * モーションの開始時刻の取得\r\n   * @return モーションの開始時刻[秒]\r\n   */\r\n  public getStartTime(): number {\r\n    return this._startTimeSeconds;\r\n  }\r\n\r\n  /**\r\n   * フェードインの開始時刻の取得\r\n   * @return フェードインの開始時刻[秒]\r\n   */\r\n  public getFadeInStartTime(): number {\r\n    return this._fadeInStartTimeSeconds;\r\n  }\r\n\r\n  /**\r\n   * フェードインの終了時刻の取得\r\n   * @return フェードインの終了時刻の取得\r\n   */\r\n  public getEndTime(): number {\r\n    return this._endTimeSeconds;\r\n  }\r\n\r\n  /**\r\n   * モーションの開始時刻の設定\r\n   * @param startTime モーションの開始時刻\r\n   */\r\n  public setStartTime(startTime: number): void {\r\n    this._startTimeSeconds = startTime;\r\n  }\r\n\r\n  /**\r\n   * フェードインの開始時刻の設定\r\n   * @param startTime フェードインの開始時刻[秒]\r\n   */\r\n  public setFadeInStartTime(startTime: number): void {\r\n    this._fadeInStartTimeSeconds = startTime;\r\n  }\r\n\r\n  /**\r\n   * フェードインの終了時刻の設定\r\n   * @param endTime フェードインの終了時刻[秒]\r\n   */\r\n  public setEndTime(endTime: number): void {\r\n    this._endTimeSeconds = endTime;\r\n  }\r\n\r\n  /**\r\n   * モーションの終了の設定\r\n   * @param f trueならモーションの終了\r\n   */\r\n  public setIsFinished(f: boolean): void {\r\n    this._finished = f;\r\n  }\r\n\r\n  /**\r\n   * モーション開始の設定\r\n   * @param f trueならモーションの開始\r\n   */\r\n  public setIsStarted(f: boolean): void {\r\n    this._started = f;\r\n  }\r\n\r\n  /**\r\n   * モーションの有効性の確認\r\n   * @return true モーションは有効\r\n   * @return false モーションは無効\r\n   */\r\n  public isAvailable(): boolean {\r\n    return this._available;\r\n  }\r\n\r\n  /**\r\n   * モーションの有効性の設定\r\n   * @param v trueならモーションは有効\r\n   */\r\n  public setIsAvailable(v: boolean): void {\r\n    this._available = v;\r\n  }\r\n\r\n  /**\r\n   * モーションの状態の設定\r\n   * @param timeSeconds 現在時刻[秒]\r\n   * @param weight モーション尾重み\r\n   */\r\n  public setState(timeSeconds: number, weight: number): void {\r\n    this._stateTimeSeconds = timeSeconds;\r\n    this._stateWeight = weight;\r\n  }\r\n\r\n  /**\r\n   * モーションの現在時刻の取得\r\n   * @return モーションの現在時刻[秒]\r\n   */\r\n  public getStateTime(): number {\r\n    return this._stateTimeSeconds;\r\n  }\r\n\r\n  /**\r\n   * モーションの重みの取得\r\n   * @return モーションの重み\r\n   */\r\n  public getStateWeight(): number {\r\n    return this._stateWeight;\r\n  }\r\n\r\n  /**\r\n   * 最後にイベントの発火をチェックした時間を取得\r\n   *\r\n   * @return 最後にイベントの発火をチェックした時間[秒]\r\n   */\r\n  public getLastCheckEventSeconds(): number {\r\n    return this._lastEventCheckSeconds;\r\n  }\r\n\r\n  /**\r\n   * 最後にイベントをチェックした時間を設定\r\n   * @param checkSeconds 最後にイベントをチェックした時間[秒]\r\n   */\r\n  public setLastCheckEventSeconds(checkSeconds: number): void {\r\n    this._lastEventCheckSeconds = checkSeconds;\r\n  }\r\n\r\n  /**\r\n   * フェードアウト開始判定の取得\r\n   * @return フェードアウト開始するかどうか\r\n   */\r\n  public isTriggeredFadeOut(): boolean {\r\n    return this._isTriggeredFadeOut;\r\n  }\r\n\r\n  /**\r\n   * フェードアウト時間の取得\r\n   * @return フェードアウト時間[秒]\r\n   */\r\n  public getFadeOutSeconds(): number {\r\n    return this._fadeOutSeconds;\r\n  }\r\n\r\n  _autoDelete: boolean; // 自動削除\r\n  _motion: ACubismMotion; // モーション\r\n\r\n  _available: boolean; // 有効化フラグ\r\n  _finished: boolean; // 終了フラグ\r\n  _started: boolean; // 開始フラグ\r\n  _startTimeSeconds: number; // モーション再生開始時刻[秒]\r\n  _fadeInStartTimeSeconds: number; // フェードイン開始時刻（ループの時は初回のみ）[秒]\r\n  _endTimeSeconds: number; // 終了予定時刻[秒]\r\n  _stateTimeSeconds: number; // 時刻の状態[秒]\r\n  _stateWeight: number; // 重みの状態\r\n  _lastEventCheckSeconds: number; // 最終のMotion側のチェックした時間\r\n  private _fadeOutSeconds: number; // フェードアウト時間[秒]\r\n  private _isTriggeredFadeOut: boolean; // フェードアウト開始フラグ\r\n\r\n  _motionQueueEntryHandle: CubismMotionQueueEntryHandle; // インスタンスごとに一意の値を持つ識別番号\r\n}\r\n\r\n// Namespace definition for compatibility.\r\nimport * as $ from './cubismmotionqueueentry';\r\n// eslint-disable-next-line @typescript-eslint/no-namespace\r\nexport namespace Live2DCubismFramework {\r\n  export const CubismMotionQueueEntry = $.CubismMotionQueueEntry;\r\n  export type CubismMotionQueueEntry = $.CubismMotionQueueEntry;\r\n}\r\n","/**\r\n * Copyright(c) Live2D Inc. All rights reserved.\r\n *\r\n * Use of this source code is governed by the Live2D Open Software license\r\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\r\n */\r\n\r\nimport { ACubismMotion } from './acubismmotion';\r\nimport { CubismMotionQueueEntry } from './cubismmotionqueueentry';\r\nimport { csmVector, iterator } from '../type/csmvector';\r\nimport { CubismModel } from '../model/cubismmodel';\r\nimport { csmString } from '../type/csmstring';\r\n\r\n/**\r\n * モーション再生の管理\r\n *\r\n * モーション再生の管理用クラス。CubismMotionモーションなどACubismMotionのサブクラスを再生するために使用する。\r\n *\r\n * @note 再生中に別のモーションが StartMotion()された場合は、新しいモーションに滑らかに変化し旧モーションは中断する。\r\n *       表情用モーション、体用モーションなどを分けてモーション化した場合など、\r\n *       複数のモーションを同時に再生させる場合は、複数のCubismMotionQueueManagerインスタンスを使用する。\r\n */\r\nexport class CubismMotionQueueManager {\r\n  /**\r\n   * コンストラクタ\r\n   */\r\n  public constructor() {\r\n    this._userTimeSeconds = 0.0;\r\n    this._eventCallBack = null;\r\n    this._eventCustomData = null;\r\n    this._motions = new csmVector<CubismMotionQueueEntry>();\r\n  }\r\n\r\n  /**\r\n   * デストラクタ\r\n   */\r\n  public release(): void {\r\n    for (let i = 0; i < this._motions.getSize(); ++i) {\r\n      if (this._motions.at(i)) {\r\n        this._motions.at(i).release();\r\n        this._motions.set(i, null);\r\n      }\r\n    }\r\n\r\n    this._motions = null;\r\n  }\r\n\r\n  /**\r\n   * 指定したモーションの開始\r\n   *\r\n   * 指定したモーションを開始する。同じタイプのモーションが既にある場合は、既存のモーションに終了フラグを立て、フェードアウトを開始させる。\r\n   *\r\n   * @param   motion          開始するモーション\r\n   * @param   autoDelete      再生が終了したモーションのインスタンスを削除するなら true\r\n   * @param   userTimeSeconds デルタ時間の積算値[秒]\r\n   * @return                      開始したモーションの識別番号を返す。個別のモーションが終了したか否かを判定するIsFinished()の引数で使用する。開始できない時は「-1」\r\n   */\r\n  public startMotion(\r\n    motion: ACubismMotion,\r\n    autoDelete: boolean,\r\n    userTimeSeconds: number\r\n  ): CubismMotionQueueEntryHandle {\r\n    if (motion == null) {\r\n      return InvalidMotionQueueEntryHandleValue;\r\n    }\r\n\r\n    let motionQueueEntry: CubismMotionQueueEntry = null;\r\n\r\n    // 既にモーションがあれば終了フラグを立てる\r\n    for (let i = 0; i < this._motions.getSize(); ++i) {\r\n      motionQueueEntry = this._motions.at(i);\r\n      if (motionQueueEntry == null) {\r\n        continue;\r\n      }\r\n\r\n      motionQueueEntry.setFadeOut(motionQueueEntry._motion.getFadeOutTime()); // フェードアウト設定\r\n    }\r\n\r\n    motionQueueEntry = new CubismMotionQueueEntry(); // 終了時に破棄する\r\n    motionQueueEntry._autoDelete = autoDelete;\r\n    motionQueueEntry._motion = motion;\r\n\r\n    this._motions.pushBack(motionQueueEntry);\r\n\r\n    return motionQueueEntry._motionQueueEntryHandle;\r\n  }\r\n\r\n  /**\r\n   * 全てのモーションの終了の確認\r\n   * @return true 全て終了している\r\n   * @return false 終了していない\r\n   */\r\n  public isFinished(): boolean {\r\n    // ------- 処理を行う -------\r\n    // 既にモーションがあれば終了フラグを立てる\r\n\r\n    for (\r\n      let ite: iterator<CubismMotionQueueEntry> = this._motions.begin();\r\n      ite.notEqual(this._motions.end());\r\n\r\n    ) {\r\n      let motionQueueEntry: CubismMotionQueueEntry = ite.ptr();\r\n\r\n      if (motionQueueEntry == null) {\r\n        ite = this._motions.erase(ite); // 削除\r\n        continue;\r\n      }\r\n\r\n      const motion: ACubismMotion = motionQueueEntry._motion;\r\n\r\n      if (motion == null) {\r\n        motionQueueEntry.release();\r\n        motionQueueEntry = null;\r\n        ite = this._motions.erase(ite); // 削除\r\n        continue;\r\n      }\r\n\r\n      // ----- 終了済みの処理があれば削除する ------\r\n      if (!motionQueueEntry.isFinished()) {\r\n        return false;\r\n      } else {\r\n        ite.preIncrement();\r\n      }\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * 指定したモーションの終了の確認\r\n   * @param motionQueueEntryNumber モーションの識別番号\r\n   * @return true 全て終了している\r\n   * @return false 終了していない\r\n   */\r\n  public isFinishedByHandle(\r\n    motionQueueEntryNumber: CubismMotionQueueEntryHandle\r\n  ): boolean {\r\n    for (\r\n      let ite: iterator<CubismMotionQueueEntry> = this._motions.begin();\r\n      ite.notEqual(this._motions.end());\r\n      ite.increment()\r\n    ) {\r\n      const motionQueueEntry: CubismMotionQueueEntry = ite.ptr();\r\n\r\n      if (motionQueueEntry == null) {\r\n        continue;\r\n      }\r\n\r\n      if (\r\n        motionQueueEntry._motionQueueEntryHandle == motionQueueEntryNumber &&\r\n        !motionQueueEntry.isFinished()\r\n      ) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * 全てのモーションを停止する\r\n   */\r\n  public stopAllMotions(): void {\r\n    // ------- 処理を行う -------\r\n    // 既にモーションがあれば終了フラグを立てる\r\n\r\n    for (\r\n      let ite: iterator<CubismMotionQueueEntry> = this._motions.begin();\r\n      ite.notEqual(this._motions.end());\r\n\r\n    ) {\r\n      let motionQueueEntry: CubismMotionQueueEntry = ite.ptr();\r\n\r\n      if (motionQueueEntry == null) {\r\n        ite = this._motions.erase(ite);\r\n\r\n        continue;\r\n      }\r\n\r\n      // ----- 終了済みの処理があれば削除する ------\r\n      motionQueueEntry.release();\r\n      motionQueueEntry = null;\r\n      ite = this._motions.erase(ite); // 削除\r\n    }\r\n  }\r\n\r\n  /**\r\n       * 指定したCubismMotionQueueEntryの取得\r\n\r\n        * @param   motionQueueEntryNumber  モーションの識別番号\r\n        * @return  指定したCubismMotionQueueEntry\r\n        * @return  null   見つからなかった\r\n        */\r\n  public getCubismMotionQueueEntry(\r\n    motionQueueEntryNumber: any\r\n  ): CubismMotionQueueEntry {\r\n    //------- 処理を行う -------\r\n    for (\r\n      let ite: iterator<CubismMotionQueueEntry> = this._motions.begin();\r\n      ite.notEqual(this._motions.end());\r\n      ite.preIncrement()\r\n    ) {\r\n      const motionQueueEntry: CubismMotionQueueEntry = ite.ptr();\r\n\r\n      if (motionQueueEntry == null) {\r\n        continue;\r\n      }\r\n\r\n      if (motionQueueEntry._motionQueueEntryHandle == motionQueueEntryNumber) {\r\n        return motionQueueEntry;\r\n      }\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * イベントを受け取るCallbackの登録\r\n   *\r\n   * @param callback コールバック関数\r\n   * @param customData コールバックに返されるデータ\r\n   */\r\n  public setEventCallback(\r\n    callback: CubismMotionEventFunction,\r\n    customData: any = null\r\n  ): void {\r\n    this._eventCallBack = callback;\r\n    this._eventCustomData = customData;\r\n  }\r\n\r\n  /**\r\n   * モーションを更新して、モデルにパラメータ値を反映する。\r\n   *\r\n   * @param   model   対象のモデル\r\n   * @param   userTimeSeconds   デルタ時間の積算値[秒]\r\n   * @return  true    モデルへパラメータ値の反映あり\r\n   * @return  false   モデルへパラメータ値の反映なし(モーションの変化なし)\r\n   */\r\n  public doUpdateMotion(model: CubismModel, userTimeSeconds: number): boolean {\r\n    let updated = false;\r\n\r\n    // ------- 処理を行う --------\r\n    // 既にモーションがあれば終了フラグを立てる\r\n\r\n    for (\r\n      let ite: iterator<CubismMotionQueueEntry> = this._motions.begin();\r\n      ite.notEqual(this._motions.end());\r\n\r\n    ) {\r\n      let motionQueueEntry: CubismMotionQueueEntry = ite.ptr();\r\n\r\n      if (motionQueueEntry == null) {\r\n        ite = this._motions.erase(ite); // 削除\r\n        continue;\r\n      }\r\n\r\n      const motion: ACubismMotion = motionQueueEntry._motion;\r\n\r\n      if (motion == null) {\r\n        motionQueueEntry.release();\r\n        motionQueueEntry = null;\r\n        ite = this._motions.erase(ite); // 削除\r\n\r\n        continue;\r\n      }\r\n\r\n      // ------ 値を反映する ------\r\n      motion.updateParameters(model, motionQueueEntry, userTimeSeconds);\r\n      updated = true;\r\n\r\n      // ------ ユーザトリガーイベントを検査する ----\r\n      const firedList: csmVector<csmString> = motion.getFiredEvent(\r\n        motionQueueEntry.getLastCheckEventSeconds() -\r\n          motionQueueEntry.getStartTime(),\r\n        userTimeSeconds - motionQueueEntry.getStartTime()\r\n      );\r\n\r\n      for (let i = 0; i < firedList.getSize(); ++i) {\r\n        this._eventCallBack(this, firedList.at(i), this._eventCustomData);\r\n      }\r\n\r\n      motionQueueEntry.setLastCheckEventSeconds(userTimeSeconds);\r\n\r\n      // ------ 終了済みの処理があれば削除する ------\r\n      if (motionQueueEntry.isFinished()) {\r\n        motionQueueEntry.release();\r\n        motionQueueEntry = null;\r\n        ite = this._motions.erase(ite); // 削除\r\n      } else {\r\n        if (motionQueueEntry.isTriggeredFadeOut()) {\r\n          motionQueueEntry.startFadeOut(\r\n            motionQueueEntry.getFadeOutSeconds(),\r\n            userTimeSeconds\r\n          );\r\n        }\r\n        ite.preIncrement();\r\n      }\r\n    }\r\n\r\n    return updated;\r\n  }\r\n  _userTimeSeconds: number; // デルタ時間の積算値[秒]\r\n\r\n  _motions: csmVector<CubismMotionQueueEntry>; // モーション\r\n  _eventCallBack: CubismMotionEventFunction; // コールバック関数\r\n  _eventCustomData: any; // コールバックに戻されるデータ\r\n}\r\n\r\n/**\r\n * イベントのコールバック関数を定義\r\n *\r\n * イベントのコールバックに登録できる関数の型情報\r\n * @param caller        発火したイベントを再生させたCubismMotionQueueManager\r\n * @param eventValue    発火したイベントの文字列データ\r\n * @param customData   コールバックに返される登録時に指定されたデータ\r\n */\r\nexport interface CubismMotionEventFunction {\r\n  (\r\n    caller: CubismMotionQueueManager,\r\n    eventValue: csmString,\r\n    customData: any\r\n  ): void;\r\n}\r\n\r\n/**\r\n * モーションの識別番号\r\n *\r\n * モーションの識別番号の定義\r\n */\r\nexport declare type CubismMotionQueueEntryHandle = any;\r\nexport const InvalidMotionQueueEntryHandleValue: CubismMotionQueueEntryHandle =\r\n  -1;\r\n\r\n// Namespace definition for compatibility.\r\nimport * as $ from './cubismmotionqueuemanager';\r\n// eslint-disable-next-line @typescript-eslint/no-namespace\r\nexport namespace Live2DCubismFramework {\r\n  export const CubismMotionQueueManager = $.CubismMotionQueueManager;\r\n  export type CubismMotionQueueManager = $.CubismMotionQueueManager;\r\n  export const InvalidMotionQueueEntryHandleValue =\r\n    $.InvalidMotionQueueEntryHandleValue;\r\n  export type CubismMotionQueueEntryHandle = $.CubismMotionQueueEntryHandle;\r\n  export type CubismMotionEventFunction = $.CubismMotionEventFunction;\r\n}\r\n","/**\r\n * Copyright(c) Live2D Inc. All rights reserved.\r\n *\r\n * Use of this source code is governed by the Live2D Open Software license\r\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\r\n */\r\n\r\nimport { CubismMath } from '../math/cubismmath';\r\nimport { CubismVector2 } from '../math/cubismvector2';\r\nimport { csmVector } from '../type/csmvector';\r\nimport { CubismModel } from '../model/cubismmodel';\r\nimport {\r\n  CubismPhysicsInput,\r\n  CubismPhysicsNormalization,\r\n  CubismPhysicsOutput,\r\n  CubismPhysicsParticle,\r\n  CubismPhysicsRig,\r\n  CubismPhysicsSource,\r\n  CubismPhysicsSubRig,\r\n  CubismPhysicsTargetType,\r\n} from './cubismphysicsinternal';\r\nimport { CubismPhysicsJson } from './cubismphysicsjson';\r\n\r\n// physics types tags.\r\nconst PhysicsTypeTagX = 'X';\r\nconst PhysicsTypeTagY = 'Y';\r\nconst PhysicsTypeTagAngle = 'Angle';\r\n\r\n// Constant of air resistance.\r\nconst AirResistance = 5.0;\r\n\r\n// Constant of maximum weight of input and output ratio.\r\nconst MaximumWeight = 100.0;\r\n\r\n// Constant of threshold of movement.\r\nconst MovementThreshold = 0.001;\r\n\r\n// Constant of maximum allowed delta time\r\nconst MaxDeltaTime = 5.0;\r\n\r\n/**\r\n * 物理演算クラス\r\n */\r\nexport class CubismPhysics {\r\n  /**\r\n   * インスタンスの作成\r\n   * @param buffer    physics3.jsonが読み込まれているバッファ\r\n   * @param size      バッファのサイズ\r\n   * @return 作成されたインスタンス\r\n   */\r\n  public static create(buffer: ArrayBuffer, size: number): CubismPhysics {\r\n    const ret: CubismPhysics = new CubismPhysics();\r\n\r\n    ret.parse(buffer, size);\r\n    ret._physicsRig.gravity.y = 0;\r\n\r\n    return ret;\r\n  }\r\n\r\n  /**\r\n   * インスタンスを破棄する\r\n   * @param physics 破棄するインスタンス\r\n   */\r\n  public static delete(physics: CubismPhysics): void {\r\n    if (physics != null) {\r\n      physics.release();\r\n      physics = null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * physics3.jsonをパースする。\r\n   * @param physicsJson physics3.jsonが読み込まれているバッファ\r\n   * @param size バッファのサイズ\r\n   */\r\n  public parse(physicsJson: ArrayBuffer, size: number): void {\r\n    this._physicsRig = new CubismPhysicsRig();\r\n\r\n    let json: CubismPhysicsJson = new CubismPhysicsJson(physicsJson, size);\r\n\r\n    this._physicsRig.gravity = json.getGravity();\r\n    this._physicsRig.wind = json.getWind();\r\n    this._physicsRig.subRigCount = json.getSubRigCount();\r\n\r\n    this._physicsRig.fps = json.getFps();\r\n\r\n    this._physicsRig.settings.updateSize(\r\n      this._physicsRig.subRigCount,\r\n      CubismPhysicsSubRig,\r\n      true\r\n    );\r\n    this._physicsRig.inputs.updateSize(\r\n      json.getTotalInputCount(),\r\n      CubismPhysicsInput,\r\n      true\r\n    );\r\n    this._physicsRig.outputs.updateSize(\r\n      json.getTotalOutputCount(),\r\n      CubismPhysicsOutput,\r\n      true\r\n    );\r\n    this._physicsRig.particles.updateSize(\r\n      json.getVertexCount(),\r\n      CubismPhysicsParticle,\r\n      true\r\n    );\r\n\r\n    this._currentRigOutputs.clear();\r\n    this._previousRigOutputs.clear();\r\n\r\n    let inputIndex = 0,\r\n      outputIndex = 0,\r\n      particleIndex = 0;\r\n\r\n    for (let i = 0; i < this._physicsRig.settings.getSize(); ++i) {\r\n      this._physicsRig.settings.at(i).normalizationPosition.minimum =\r\n        json.getNormalizationPositionMinimumValue(i);\r\n      this._physicsRig.settings.at(i).normalizationPosition.maximum =\r\n        json.getNormalizationPositionMaximumValue(i);\r\n      this._physicsRig.settings.at(i).normalizationPosition.defalut =\r\n        json.getNormalizationPositionDefaultValue(i);\r\n\r\n      this._physicsRig.settings.at(i).normalizationAngle.minimum =\r\n        json.getNormalizationAngleMinimumValue(i);\r\n      this._physicsRig.settings.at(i).normalizationAngle.maximum =\r\n        json.getNormalizationAngleMaximumValue(i);\r\n      this._physicsRig.settings.at(i).normalizationAngle.defalut =\r\n        json.getNormalizationAngleDefaultValue(i);\r\n\r\n      // Input\r\n      this._physicsRig.settings.at(i).inputCount = json.getInputCount(i);\r\n      this._physicsRig.settings.at(i).baseInputIndex = inputIndex;\r\n\r\n      for (let j = 0; j < this._physicsRig.settings.at(i).inputCount; ++j) {\r\n        this._physicsRig.inputs.at(inputIndex + j).sourceParameterIndex = -1;\r\n        this._physicsRig.inputs.at(inputIndex + j).weight = json.getInputWeight(\r\n          i,\r\n          j\r\n        );\r\n        this._physicsRig.inputs.at(inputIndex + j).reflect =\r\n          json.getInputReflect(i, j);\r\n\r\n        if (json.getInputType(i, j) == PhysicsTypeTagX) {\r\n          this._physicsRig.inputs.at(inputIndex + j).type =\r\n            CubismPhysicsSource.CubismPhysicsSource_X;\r\n          this._physicsRig.inputs.at(\r\n            inputIndex + j\r\n          ).getNormalizedParameterValue = getInputTranslationXFromNormalizedParameterValue;\r\n        } else if (json.getInputType(i, j) == PhysicsTypeTagY) {\r\n          this._physicsRig.inputs.at(inputIndex + j).type =\r\n            CubismPhysicsSource.CubismPhysicsSource_Y;\r\n          this._physicsRig.inputs.at(\r\n            inputIndex + j\r\n          ).getNormalizedParameterValue = getInputTranslationYFromNormalizedParamterValue;\r\n        } else if (json.getInputType(i, j) == PhysicsTypeTagAngle) {\r\n          this._physicsRig.inputs.at(inputIndex + j).type =\r\n            CubismPhysicsSource.CubismPhysicsSource_Angle;\r\n          this._physicsRig.inputs.at(\r\n            inputIndex + j\r\n          ).getNormalizedParameterValue = getInputAngleFromNormalizedParameterValue;\r\n        }\r\n\r\n        this._physicsRig.inputs.at(inputIndex + j).source.targetType =\r\n          CubismPhysicsTargetType.CubismPhysicsTargetType_Parameter;\r\n        this._physicsRig.inputs.at(inputIndex + j).source.id =\r\n          json.getInputSourceId(i, j);\r\n      }\r\n      inputIndex += this._physicsRig.settings.at(i).inputCount;\r\n\r\n      // Output\r\n      this._physicsRig.settings.at(i).outputCount = json.getOutputCount(i);\r\n      this._physicsRig.settings.at(i).baseOutputIndex = outputIndex;\r\n\r\n      const currentRigOutput = new PhysicsOutput();\r\n      currentRigOutput.outputs.resize(\r\n        this._physicsRig.settings.at(i).outputCount\r\n      );\r\n\r\n      const previousRigOutput = new PhysicsOutput();\r\n      previousRigOutput.outputs.resize(\r\n        this._physicsRig.settings.at(i).outputCount\r\n      );\r\n\r\n      for (let j = 0; j < this._physicsRig.settings.at(i).outputCount; ++j) {\r\n        // initialize\r\n        currentRigOutput.outputs[j] = 0.0;\r\n        previousRigOutput.outputs[j] = 0.0;\r\n\r\n        this._physicsRig.outputs.at(outputIndex + j).destinationParameterIndex =\r\n          -1;\r\n        this._physicsRig.outputs.at(outputIndex + j).vertexIndex =\r\n          json.getOutputVertexIndex(i, j);\r\n        this._physicsRig.outputs.at(outputIndex + j).angleScale =\r\n          json.getOutputAngleScale(i, j);\r\n        this._physicsRig.outputs.at(outputIndex + j).weight =\r\n          json.getOutputWeight(i, j);\r\n        this._physicsRig.outputs.at(outputIndex + j).destination.targetType =\r\n          CubismPhysicsTargetType.CubismPhysicsTargetType_Parameter;\r\n\r\n        this._physicsRig.outputs.at(outputIndex + j).destination.id =\r\n          json.getOutputDestinationId(i, j);\r\n\r\n        if (json.getOutputType(i, j) == PhysicsTypeTagX) {\r\n          this._physicsRig.outputs.at(outputIndex + j).type =\r\n            CubismPhysicsSource.CubismPhysicsSource_X;\r\n          this._physicsRig.outputs.at(outputIndex + j).getValue =\r\n            getOutputTranslationX;\r\n          this._physicsRig.outputs.at(outputIndex + j).getScale =\r\n            getOutputScaleTranslationX;\r\n        } else if (json.getOutputType(i, j) == PhysicsTypeTagY) {\r\n          this._physicsRig.outputs.at(outputIndex + j).type =\r\n            CubismPhysicsSource.CubismPhysicsSource_Y;\r\n          this._physicsRig.outputs.at(outputIndex + j).getValue =\r\n            getOutputTranslationY;\r\n          this._physicsRig.outputs.at(outputIndex + j).getScale =\r\n            getOutputScaleTranslationY;\r\n        } else if (json.getOutputType(i, j) == PhysicsTypeTagAngle) {\r\n          this._physicsRig.outputs.at(outputIndex + j).type =\r\n            CubismPhysicsSource.CubismPhysicsSource_Angle;\r\n          this._physicsRig.outputs.at(outputIndex + j).getValue =\r\n            getOutputAngle;\r\n          this._physicsRig.outputs.at(outputIndex + j).getScale =\r\n            getOutputScaleAngle;\r\n        }\r\n\r\n        this._physicsRig.outputs.at(outputIndex + j).reflect =\r\n          json.getOutputReflect(i, j);\r\n      }\r\n\r\n      this._currentRigOutputs.pushBack(currentRigOutput);\r\n      this._previousRigOutputs.pushBack(previousRigOutput);\r\n\r\n      outputIndex += this._physicsRig.settings.at(i).outputCount;\r\n\r\n      // Particle\r\n      this._physicsRig.settings.at(i).particleCount = json.getParticleCount(i);\r\n      this._physicsRig.settings.at(i).baseParticleIndex = particleIndex;\r\n\r\n      for (let j = 0; j < this._physicsRig.settings.at(i).particleCount; ++j) {\r\n        this._physicsRig.particles.at(particleIndex + j).mobility =\r\n          json.getParticleMobility(i, j);\r\n        this._physicsRig.particles.at(particleIndex + j).delay =\r\n          json.getParticleDelay(i, j);\r\n        this._physicsRig.particles.at(particleIndex + j).acceleration =\r\n          json.getParticleAcceleration(i, j);\r\n        this._physicsRig.particles.at(particleIndex + j).radius =\r\n          json.getParticleRadius(i, j);\r\n        this._physicsRig.particles.at(particleIndex + j).position =\r\n          json.getParticlePosition(i, j);\r\n      }\r\n\r\n      particleIndex += this._physicsRig.settings.at(i).particleCount;\r\n    }\r\n\r\n    this.initialize();\r\n\r\n    json.release();\r\n    json = void 0;\r\n    json = null;\r\n  }\r\n\r\n  /**\r\n   * 現在のパラメータ値で物理演算が安定化する状態を演算する。\r\n   * @param model 物理演算の結果を適用するモデル\r\n   */\r\n  public stabilization(model: CubismModel): void {\r\n    let totalAngle: { angle: number };\r\n    let weight: number;\r\n    let radAngle: number;\r\n    let outputValue: number;\r\n    const totalTranslation: CubismVector2 = new CubismVector2();\r\n    let currentSetting: CubismPhysicsSubRig;\r\n    let currentInputs: CubismPhysicsInput[];\r\n    let currentOutputs: CubismPhysicsOutput[];\r\n    let currentParticles: CubismPhysicsParticle[];\r\n\r\n    let parameterValues: Float32Array;\r\n    let parameterMaximumValues: Float32Array;\r\n    let parameterMinimumValues: Float32Array;\r\n    let parameterDefaultValues: Float32Array;\r\n\r\n    parameterValues = model.getModel().parameters.values;\r\n    parameterMaximumValues = model.getModel().parameters.maximumValues;\r\n    parameterMinimumValues = model.getModel().parameters.minimumValues;\r\n    parameterDefaultValues = model.getModel().parameters.defaultValues;\r\n\r\n    if ((this._parameterCaches?.length ?? 0) < model.getParameterCount()) {\r\n      this._parameterCaches = new Float32Array(model.getParameterCount());\r\n    }\r\n\r\n    if ((this._parameterInputCaches?.length ?? 0) < model.getParameterCount()) {\r\n      this._parameterInputCaches = new Float32Array(model.getParameterCount());\r\n    }\r\n\r\n    for (let j = 0; j < model.getParameterCount(); ++j) {\r\n      this._parameterCaches[j] = parameterValues[j];\r\n      this._parameterInputCaches[j] = parameterValues[j];\r\n    }\r\n\r\n    for (\r\n      let settingIndex = 0;\r\n      settingIndex < this._physicsRig.subRigCount;\r\n      ++settingIndex\r\n    ) {\r\n      totalAngle = { angle: 0.0 };\r\n      totalTranslation.x = 0.0;\r\n      totalTranslation.y = 0.0;\r\n      currentSetting = this._physicsRig.settings.at(settingIndex);\r\n      currentInputs = this._physicsRig.inputs.get(\r\n        currentSetting.baseInputIndex\r\n      );\r\n      currentOutputs = this._physicsRig.outputs.get(\r\n        currentSetting.baseOutputIndex\r\n      );\r\n      currentParticles = this._physicsRig.particles.get(\r\n        currentSetting.baseParticleIndex\r\n      );\r\n\r\n      // Load input parameters\r\n      for (let i = 0; i < currentSetting.inputCount; ++i) {\r\n        weight = currentInputs[i].weight / MaximumWeight;\r\n\r\n        if (currentInputs[i].sourceParameterIndex == -1) {\r\n          currentInputs[i].sourceParameterIndex = model.getParameterIndex(\r\n            currentInputs[i].source.id\r\n          );\r\n        }\r\n\r\n        currentInputs[i].getNormalizedParameterValue(\r\n          totalTranslation,\r\n          totalAngle,\r\n          parameterValues[currentInputs[i].sourceParameterIndex],\r\n          parameterMinimumValues[currentInputs[i].sourceParameterIndex],\r\n          parameterMaximumValues[currentInputs[i].sourceParameterIndex],\r\n          parameterDefaultValues[currentInputs[i].sourceParameterIndex],\r\n          currentSetting.normalizationPosition,\r\n          currentSetting.normalizationAngle,\r\n          currentInputs[i].reflect,\r\n          weight\r\n        );\r\n\r\n        this._parameterCaches[currentInputs[i].sourceParameterIndex] =\r\n          parameterValues[currentInputs[i].sourceParameterIndex];\r\n      }\r\n\r\n      radAngle = CubismMath.degreesToRadian(-totalAngle.angle);\r\n\r\n      totalTranslation.x =\r\n        totalTranslation.x * CubismMath.cos(radAngle) -\r\n        totalTranslation.y * CubismMath.sin(radAngle);\r\n      totalTranslation.y =\r\n        totalTranslation.x * CubismMath.sin(radAngle) +\r\n        totalTranslation.y * CubismMath.cos(radAngle);\r\n\r\n      // Calculate particles position.\r\n      updateParticlesForStabilization(\r\n        currentParticles,\r\n        currentSetting.particleCount,\r\n        totalTranslation,\r\n        totalAngle.angle,\r\n        this._options.wind,\r\n        MovementThreshold * currentSetting.normalizationPosition.maximum\r\n      );\r\n\r\n      // Update output parameters.\r\n      for (let i = 0; i < currentSetting.outputCount; ++i) {\r\n        const particleIndex = currentOutputs[i].vertexIndex;\r\n\r\n        if (currentOutputs[i].destinationParameterIndex == -1) {\r\n          currentOutputs[i].destinationParameterIndex = model.getParameterIndex(\r\n            currentOutputs[i].destination.id\r\n          );\r\n        }\r\n\r\n        if (\r\n          particleIndex < 1 ||\r\n          particleIndex >= currentSetting.particleCount\r\n        ) {\r\n          continue;\r\n        }\r\n\r\n        let translation: CubismVector2 = new CubismVector2();\r\n        translation = currentParticles[particleIndex].position.substract(\r\n          currentParticles[particleIndex - 1].position\r\n        );\r\n\r\n        outputValue = currentOutputs[i].getValue(\r\n          translation,\r\n          currentParticles,\r\n          particleIndex,\r\n          currentOutputs[i].reflect,\r\n          this._options.gravity\r\n        );\r\n\r\n        this._currentRigOutputs.at(settingIndex).outputs[i] = outputValue;\r\n        this._previousRigOutputs.at(settingIndex).outputs[i] = outputValue;\r\n\r\n        const destinationParameterIndex: number =\r\n          currentOutputs[i].destinationParameterIndex;\r\n\r\n        const outParameterCaches: Float32Array =\r\n          !Float32Array.prototype.slice && 'subarray' in Float32Array.prototype\r\n            ? JSON.parse(\r\n                JSON.stringify(\r\n                  parameterValues.subarray(destinationParameterIndex)\r\n                )\r\n              ) // 値渡しするため、JSON.parse, JSON.stringify\r\n            : parameterValues.slice(destinationParameterIndex);\r\n\r\n        updateOutputParameterValue(\r\n          outParameterCaches,\r\n          parameterMinimumValues[destinationParameterIndex],\r\n          parameterMaximumValues[destinationParameterIndex],\r\n          outputValue,\r\n          currentOutputs[i]\r\n        );\r\n\r\n        // 値を反映\r\n        for (\r\n          let offset: number = destinationParameterIndex, outParamIndex = 0;\r\n          offset < this._parameterCaches.length;\r\n          offset++, outParamIndex++\r\n        ) {\r\n          parameterValues[offset] = this._parameterCaches[offset] =\r\n            outParameterCaches[outParamIndex];\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 物理演算の評価\r\n   *\r\n   * Pendulum interpolation weights\r\n   *\r\n   * 振り子の計算結果は保存され、パラメータへの出力は保存された前回の結果で補間されます。\r\n   * The result of the pendulum calculation is saved and\r\n   * the output to the parameters is interpolated with the saved previous result of the pendulum calculation.\r\n   *\r\n   * 図で示すと[1]と[2]で補間されます。\r\n   * The figure shows the interpolation between [1] and [2].\r\n   *\r\n   * 補間の重みは最新の振り子計算タイミングと次回のタイミングの間で見た現在時間で決定する。\r\n   * The weight of the interpolation are determined by the current time seen between\r\n   * the latest pendulum calculation timing and the next timing.\r\n   *\r\n   * 図で示すと[2]と[4]の間でみた(3)の位置の重みになる。\r\n   * Figure shows the weight of position (3) as seen between [2] and [4].\r\n   *\r\n   * 解釈として振り子計算のタイミングと重み計算のタイミングがズレる。\r\n   * As an interpretation, the pendulum calculation and weights are misaligned.\r\n   *\r\n   * physics3.jsonにFPS情報が存在しない場合は常に前の振り子状態で設定される。\r\n   * If there is no FPS information in physics3.json, it is always set in the previous pendulum state.\r\n   *\r\n   * この仕様は補間範囲を逸脱したことが原因の震えたような見た目を回避を目的にしている。\r\n   * The purpose of this specification is to avoid the quivering appearance caused by deviations from the interpolation range.\r\n   *\r\n   * ------------ time -------------->\r\n   *\r\n   *                 |+++++|------| <- weight\r\n   * ==[1]====#=====[2]---(3)----(4)\r\n   *          ^ output contents\r\n   *\r\n   * 1:_previousRigOutputs\r\n   * 2:_currentRigOutputs\r\n   * 3:_currentRemainTime (now rendering)\r\n   * 4:next particles timing\r\n   * @param model 物理演算の結果を適用するモデル\r\n   * @param deltaTimeSeconds デルタ時間[秒]\r\n   */\r\n  public evaluate(model: CubismModel, deltaTimeSeconds: number): void {\r\n    let totalAngle: { angle: number };\r\n    let weight: number;\r\n    let radAngle: number;\r\n    let outputValue: number;\r\n    const totalTranslation: CubismVector2 = new CubismVector2();\r\n    let currentSetting: CubismPhysicsSubRig;\r\n    let currentInputs: CubismPhysicsInput[];\r\n    let currentOutputs: CubismPhysicsOutput[];\r\n    let currentParticles: CubismPhysicsParticle[];\r\n\r\n    if (0.0 >= deltaTimeSeconds) {\r\n      return;\r\n    }\r\n\r\n    let parameterValues: Float32Array;\r\n    let parameterMaximumValues: Float32Array;\r\n    let parameterMinimumValues: Float32Array;\r\n    let parameterDefaultValues: Float32Array;\r\n\r\n    let physicsDeltaTime: number;\r\n    this._currentRemainTime += deltaTimeSeconds;\r\n    if (this._currentRemainTime > MaxDeltaTime) {\r\n      this._currentRemainTime = 0.0;\r\n    }\r\n\r\n    parameterValues = model.getModel().parameters.values;\r\n    parameterMaximumValues = model.getModel().parameters.maximumValues;\r\n    parameterMinimumValues = model.getModel().parameters.minimumValues;\r\n    parameterDefaultValues = model.getModel().parameters.defaultValues;\r\n\r\n    if ((this._parameterCaches?.length ?? 0) < model.getParameterCount()) {\r\n      this._parameterCaches = new Float32Array(model.getParameterCount());\r\n    }\r\n\r\n    if ((this._parameterInputCaches?.length ?? 0) < model.getParameterCount()) {\r\n      this._parameterInputCaches = new Float32Array(model.getParameterCount());\r\n      for (let j = 0; j < model.getParameterCount(); ++j) {\r\n        this._parameterInputCaches[j] = parameterValues[j];\r\n      }\r\n    }\r\n\r\n    if (this._physicsRig.fps > 0.0) {\r\n      physicsDeltaTime = 1.0 / this._physicsRig.fps;\r\n    } else {\r\n      physicsDeltaTime = deltaTimeSeconds;\r\n    }\r\n\r\n    while (this._currentRemainTime >= physicsDeltaTime) {\r\n      // copyRigOutputs _currentRigOutputs to _previousRigOutputs\r\n      for (\r\n        let settingIndex = 0;\r\n        settingIndex < this._physicsRig.subRigCount;\r\n        ++settingIndex\r\n      ) {\r\n        currentSetting = this._physicsRig.settings.at(settingIndex);\r\n        currentOutputs = this._physicsRig.outputs.get(\r\n          currentSetting.baseOutputIndex\r\n        );\r\n        for (let i = 0; i < currentSetting.outputCount; ++i) {\r\n          this._previousRigOutputs.at(settingIndex).outputs[i] =\r\n            this._currentRigOutputs.at(settingIndex).outputs[i];\r\n        }\r\n      }\r\n\r\n      // 入力キャッシュとパラメータで線形補間してUpdateParticlesするタイミングでの入力を計算する。\r\n      // Calculate the input at the timing to UpdateParticles by linear interpolation with the _parameterInputCache and parameterValue.\r\n      // _parameterCacheはグループ間での値の伝搬の役割があるので_parameterInputCacheとの分離が必要。\r\n      // _parameterCache needs to be separated from _parameterInputCache because of its role in propagating values between groups.\r\n      const inputWeight = physicsDeltaTime / this._currentRemainTime;\r\n      for (let j = 0; j < model.getParameterCount(); ++j) {\r\n        this._parameterCaches[j] =\r\n          this._parameterInputCaches[j] * (1.0 - inputWeight) +\r\n          parameterValues[j] * inputWeight;\r\n        this._parameterInputCaches[j] = this._parameterCaches[j];\r\n      }\r\n\r\n      for (\r\n        let settingIndex = 0;\r\n        settingIndex < this._physicsRig.subRigCount;\r\n        ++settingIndex\r\n      ) {\r\n        totalAngle = { angle: 0.0 };\r\n        totalTranslation.x = 0.0;\r\n        totalTranslation.y = 0.0;\r\n        currentSetting = this._physicsRig.settings.at(settingIndex);\r\n        currentInputs = this._physicsRig.inputs.get(\r\n          currentSetting.baseInputIndex\r\n        );\r\n        currentOutputs = this._physicsRig.outputs.get(\r\n          currentSetting.baseOutputIndex\r\n        );\r\n        currentParticles = this._physicsRig.particles.get(\r\n          currentSetting.baseParticleIndex\r\n        );\r\n\r\n        // Load input parameters\r\n        for (let i = 0; i < currentSetting.inputCount; ++i) {\r\n          weight = currentInputs[i].weight / MaximumWeight;\r\n\r\n          if (currentInputs[i].sourceParameterIndex == -1) {\r\n            currentInputs[i].sourceParameterIndex = model.getParameterIndex(\r\n              currentInputs[i].source.id\r\n            );\r\n          }\r\n\r\n          currentInputs[i].getNormalizedParameterValue(\r\n            totalTranslation,\r\n            totalAngle,\r\n            this._parameterCaches[currentInputs[i].sourceParameterIndex],\r\n            parameterMinimumValues[currentInputs[i].sourceParameterIndex],\r\n            parameterMaximumValues[currentInputs[i].sourceParameterIndex],\r\n            parameterDefaultValues[currentInputs[i].sourceParameterIndex],\r\n            currentSetting.normalizationPosition,\r\n            currentSetting.normalizationAngle,\r\n            currentInputs[i].reflect,\r\n            weight\r\n          );\r\n        }\r\n\r\n        radAngle = CubismMath.degreesToRadian(-totalAngle.angle);\r\n\r\n        totalTranslation.x =\r\n          totalTranslation.x * CubismMath.cos(radAngle) -\r\n          totalTranslation.y * CubismMath.sin(radAngle);\r\n        totalTranslation.y =\r\n          totalTranslation.x * CubismMath.sin(radAngle) +\r\n          totalTranslation.y * CubismMath.cos(radAngle);\r\n\r\n        // Calculate particles position.\r\n        updateParticles(\r\n          currentParticles,\r\n          currentSetting.particleCount,\r\n          totalTranslation,\r\n          totalAngle.angle,\r\n          this._options.wind,\r\n          MovementThreshold * currentSetting.normalizationPosition.maximum,\r\n          physicsDeltaTime,\r\n          AirResistance\r\n        );\r\n\r\n        // Update output parameters.\r\n        for (let i = 0; i < currentSetting.outputCount; ++i) {\r\n          const particleIndex = currentOutputs[i].vertexIndex;\r\n\r\n          if (currentOutputs[i].destinationParameterIndex == -1) {\r\n            currentOutputs[i].destinationParameterIndex =\r\n              model.getParameterIndex(currentOutputs[i].destination.id);\r\n          }\r\n\r\n          if (\r\n            particleIndex < 1 ||\r\n            particleIndex >= currentSetting.particleCount\r\n          ) {\r\n            continue;\r\n          }\r\n\r\n          const translation: CubismVector2 = new CubismVector2();\r\n          translation.x =\r\n            currentParticles[particleIndex].position.x -\r\n            currentParticles[particleIndex - 1].position.x;\r\n          translation.y =\r\n            currentParticles[particleIndex].position.y -\r\n            currentParticles[particleIndex - 1].position.y;\r\n\r\n          outputValue = currentOutputs[i].getValue(\r\n            translation,\r\n            currentParticles,\r\n            particleIndex,\r\n            currentOutputs[i].reflect,\r\n            this._options.gravity\r\n          );\r\n\r\n          this._currentRigOutputs.at(settingIndex).outputs[i] = outputValue;\r\n\r\n          const destinationParameterIndex: number =\r\n            currentOutputs[i].destinationParameterIndex;\r\n          const outParameterCaches: Float32Array =\r\n            !Float32Array.prototype.slice &&\r\n            'subarray' in Float32Array.prototype\r\n              ? JSON.parse(\r\n                  JSON.stringify(\r\n                    this._parameterCaches.subarray(destinationParameterIndex)\r\n                  )\r\n                ) // 値渡しするため、JSON.parse, JSON.stringify\r\n              : this._parameterCaches.slice(destinationParameterIndex);\r\n\r\n          updateOutputParameterValue(\r\n            outParameterCaches,\r\n            parameterMinimumValues[destinationParameterIndex],\r\n            parameterMaximumValues[destinationParameterIndex],\r\n            outputValue,\r\n            currentOutputs[i]\r\n          );\r\n\r\n          // 値を反映\r\n          for (\r\n            let offset: number = destinationParameterIndex, outParamIndex = 0;\r\n            offset < this._parameterCaches.length;\r\n            offset++, outParamIndex++\r\n          ) {\r\n            this._parameterCaches[offset] = outParameterCaches[outParamIndex];\r\n          }\r\n        }\r\n      }\r\n      this._currentRemainTime -= physicsDeltaTime;\r\n    }\r\n\r\n    const alpha: number = this._currentRemainTime / physicsDeltaTime;\r\n    this.interpolate(model, alpha);\r\n  }\r\n\r\n  /**\r\n   * 物理演算結果の適用\r\n   * 振り子演算の最新の結果と一つ前の結果から指定した重みで適用する。\r\n   * @param model 物理演算の結果を適用するモデル\r\n   * @param weight 最新結果の重み\r\n   */\r\n  public interpolate(model: CubismModel, weight: number): void {\r\n    let currentOutputs: CubismPhysicsOutput[];\r\n    let currentSetting: CubismPhysicsSubRig;\r\n    let parameterValues: Float32Array;\r\n    let parameterMaximumValues: Float32Array;\r\n    let parameterMinimumValues: Float32Array;\r\n\r\n    parameterValues = model.getModel().parameters.values;\r\n    parameterMaximumValues = model.getModel().parameters.maximumValues;\r\n    parameterMinimumValues = model.getModel().parameters.minimumValues;\r\n\r\n    for (\r\n      let settingIndex = 0;\r\n      settingIndex < this._physicsRig.subRigCount;\r\n      ++settingIndex\r\n    ) {\r\n      currentSetting = this._physicsRig.settings.at(settingIndex);\r\n      currentOutputs = this._physicsRig.outputs.get(\r\n        currentSetting.baseOutputIndex\r\n      );\r\n\r\n      // Load input parameters.\r\n      for (let i = 0; i < currentSetting.outputCount; ++i) {\r\n        if (currentOutputs[i].destinationParameterIndex == -1) {\r\n          continue;\r\n        }\r\n\r\n        const destinationParameterIndex: number =\r\n          currentOutputs[i].destinationParameterIndex;\r\n        const outParameterValues: Float32Array =\r\n          !Float32Array.prototype.slice && 'subarray' in Float32Array.prototype\r\n            ? JSON.parse(\r\n                JSON.stringify(\r\n                  parameterValues.subarray(destinationParameterIndex)\r\n                )\r\n              ) // 値渡しするため、JSON.parse, JSON.stringify\r\n            : parameterValues.slice(destinationParameterIndex);\r\n\r\n        updateOutputParameterValue(\r\n          outParameterValues,\r\n          parameterMinimumValues[destinationParameterIndex],\r\n          parameterMaximumValues[destinationParameterIndex],\r\n          this._previousRigOutputs.at(settingIndex).outputs[i] * (1 - weight) +\r\n            this._currentRigOutputs.at(settingIndex).outputs[i] * weight,\r\n          currentOutputs[i]\r\n        );\r\n\r\n        // 値を反映\r\n        for (\r\n          let offset: number = destinationParameterIndex, outParamIndex = 0;\r\n          offset < parameterValues.length;\r\n          offset++, outParamIndex++\r\n        ) {\r\n          parameterValues[offset] = outParameterValues[outParamIndex];\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * オプションの設定\r\n   * @param options オプション\r\n   */\r\n  public setOptions(options: Options): void {\r\n    this._options = options;\r\n  }\r\n\r\n  /**\r\n   * オプションの取得\r\n   * @return オプション\r\n   */\r\n  public getOption(): Options {\r\n    return this._options;\r\n  }\r\n\r\n  /**\r\n   * コンストラクタ\r\n   */\r\n  public constructor() {\r\n    this._physicsRig = null;\r\n\r\n    // set default options\r\n    this._options = new Options();\r\n    this._options.gravity.y = -1.0;\r\n    this._options.gravity.x = 0.0;\r\n    this._options.wind.x = 0.0;\r\n    this._options.wind.y = 0.0;\r\n    this._currentRigOutputs = new csmVector<PhysicsOutput>();\r\n    this._previousRigOutputs = new csmVector<PhysicsOutput>();\r\n    this._currentRemainTime = 0.0;\r\n    this._parameterCaches = null;\r\n    this._parameterInputCaches = null;\r\n  }\r\n\r\n  /**\r\n   * デストラクタ相当の処理\r\n   */\r\n  public release(): void {\r\n    this._physicsRig = void 0;\r\n    this._physicsRig = null;\r\n  }\r\n\r\n  /**\r\n   * 初期化する\r\n   */\r\n  public initialize(): void {\r\n    let strand: CubismPhysicsParticle[];\r\n    let currentSetting: CubismPhysicsSubRig;\r\n    let radius: CubismVector2;\r\n\r\n    for (\r\n      let settingIndex = 0;\r\n      settingIndex < this._physicsRig.subRigCount;\r\n      ++settingIndex\r\n    ) {\r\n      currentSetting = this._physicsRig.settings.at(settingIndex);\r\n      strand = this._physicsRig.particles.get(currentSetting.baseParticleIndex);\r\n\r\n      // Initialize the top of particle.\r\n      strand[0].initialPosition = new CubismVector2(0.0, 0.0);\r\n      strand[0].lastPosition = new CubismVector2(\r\n        strand[0].initialPosition.x,\r\n        strand[0].initialPosition.y\r\n      );\r\n      strand[0].lastGravity = new CubismVector2(0.0, -1.0);\r\n      strand[0].lastGravity.y *= -1.0;\r\n      strand[0].velocity = new CubismVector2(0.0, 0.0);\r\n      strand[0].force = new CubismVector2(0.0, 0.0);\r\n\r\n      // Initialize particles.\r\n      for (let i = 1; i < currentSetting.particleCount; ++i) {\r\n        radius = new CubismVector2(0.0, 0.0);\r\n        radius.y = strand[i].radius;\r\n        strand[i].initialPosition = new CubismVector2(\r\n          strand[i - 1].initialPosition.x + radius.x,\r\n          strand[i - 1].initialPosition.y + radius.y\r\n        );\r\n        strand[i].position = new CubismVector2(\r\n          strand[i].initialPosition.x,\r\n          strand[i].initialPosition.y\r\n        );\r\n        strand[i].lastPosition = new CubismVector2(\r\n          strand[i].initialPosition.x,\r\n          strand[i].initialPosition.y\r\n        );\r\n        strand[i].lastGravity = new CubismVector2(0.0, -1.0);\r\n        strand[i].lastGravity.y *= -1.0;\r\n        strand[i].velocity = new CubismVector2(0.0, 0.0);\r\n        strand[i].force = new CubismVector2(0.0, 0.0);\r\n      }\r\n    }\r\n  }\r\n\r\n  _physicsRig: CubismPhysicsRig; // 物理演算のデータ\r\n  _options: Options; // オプション\r\n\r\n  _currentRigOutputs: csmVector<PhysicsOutput>; ///< 最新の振り子計算の結果\r\n  _previousRigOutputs: csmVector<PhysicsOutput>; ///< 一つ前の振り子計算の結果\r\n\r\n  _currentRemainTime: number; ///< 物理演算が処理していない時間\r\n\r\n  _parameterCaches: Float32Array; ///< Evaluateで利用するパラメータのキャッシュ\r\n  _parameterInputCaches: Float32Array; ///< UpdateParticlesが動くときの入力をキャッシュ\r\n}\r\n\r\n/**\r\n * 物理演算のオプション\r\n */\r\nexport class Options {\r\n  constructor() {\r\n    this.gravity = new CubismVector2(0, 0);\r\n    this.wind = new CubismVector2(0, 0);\r\n  }\r\n\r\n  gravity: CubismVector2; // 重力方向\r\n  wind: CubismVector2; // 風の方向\r\n}\r\n\r\n/**\r\n * パラメータに適用する前の物理演算の出力結果\r\n */\r\nexport class PhysicsOutput {\r\n  constructor() {\r\n    this.outputs = new csmVector<number>(0);\r\n  }\r\n\r\n  outputs: csmVector<number>; // 物理演算出力結果\r\n}\r\n\r\n/**\r\n * Gets sign.\r\n *\r\n * @param value Evaluation target value.\r\n *\r\n * @return Sign of value.\r\n */\r\nfunction sign(value: number): number {\r\n  let ret = 0;\r\n\r\n  if (value > 0.0) {\r\n    ret = 1;\r\n  } else if (value < 0.0) {\r\n    ret = -1;\r\n  }\r\n\r\n  return ret;\r\n}\r\n\r\nfunction getInputTranslationXFromNormalizedParameterValue(\r\n  targetTranslation: CubismVector2,\r\n  targetAngle: { angle: number },\r\n  value: number,\r\n  parameterMinimumValue: number,\r\n  parameterMaximumValue: number,\r\n  parameterDefaultValue: number,\r\n  normalizationPosition: CubismPhysicsNormalization,\r\n  normalizationAngle: CubismPhysicsNormalization,\r\n  isInverted: boolean,\r\n  weight: number\r\n): void {\r\n  targetTranslation.x +=\r\n    normalizeParameterValue(\r\n      value,\r\n      parameterMinimumValue,\r\n      parameterMaximumValue,\r\n      parameterDefaultValue,\r\n      normalizationPosition.minimum,\r\n      normalizationPosition.maximum,\r\n      normalizationPosition.defalut,\r\n      isInverted\r\n    ) * weight;\r\n}\r\n\r\nfunction getInputTranslationYFromNormalizedParamterValue(\r\n  targetTranslation: CubismVector2,\r\n  targetAngle: { angle: number },\r\n  value: number,\r\n  parameterMinimumValue: number,\r\n  parameterMaximumValue: number,\r\n  parameterDefaultValue: number,\r\n  normalizationPosition: CubismPhysicsNormalization,\r\n  normalizationAngle: CubismPhysicsNormalization,\r\n  isInverted: boolean,\r\n  weight: number\r\n): void {\r\n  targetTranslation.y +=\r\n    normalizeParameterValue(\r\n      value,\r\n      parameterMinimumValue,\r\n      parameterMaximumValue,\r\n      parameterDefaultValue,\r\n      normalizationPosition.minimum,\r\n      normalizationPosition.maximum,\r\n      normalizationPosition.defalut,\r\n      isInverted\r\n    ) * weight;\r\n}\r\n\r\nfunction getInputAngleFromNormalizedParameterValue(\r\n  targetTranslation: CubismVector2,\r\n  targetAngle: { angle: number },\r\n  value: number,\r\n  parameterMinimumValue: number,\r\n  parameterMaximumValue: number,\r\n  parameterDefaultValue: number,\r\n  normalizaitionPosition: CubismPhysicsNormalization,\r\n  normalizationAngle: CubismPhysicsNormalization,\r\n  isInverted: boolean,\r\n  weight: number\r\n): void {\r\n  targetAngle.angle +=\r\n    normalizeParameterValue(\r\n      value,\r\n      parameterMinimumValue,\r\n      parameterMaximumValue,\r\n      parameterDefaultValue,\r\n      normalizationAngle.minimum,\r\n      normalizationAngle.maximum,\r\n      normalizationAngle.defalut,\r\n      isInverted\r\n    ) * weight;\r\n}\r\n\r\nfunction getOutputTranslationX(\r\n  translation: CubismVector2,\r\n  particles: CubismPhysicsParticle[],\r\n  particleIndex: number,\r\n  isInverted: boolean,\r\n  parentGravity: CubismVector2\r\n): number {\r\n  let outputValue: number = translation.x;\r\n\r\n  if (isInverted) {\r\n    outputValue *= -1.0;\r\n  }\r\n\r\n  return outputValue;\r\n}\r\n\r\nfunction getOutputTranslationY(\r\n  translation: CubismVector2,\r\n  particles: CubismPhysicsParticle[],\r\n  particleIndex: number,\r\n  isInverted: boolean,\r\n  parentGravity: CubismVector2\r\n): number {\r\n  let outputValue: number = translation.y;\r\n\r\n  if (isInverted) {\r\n    outputValue *= -1.0;\r\n  }\r\n  return outputValue;\r\n}\r\n\r\nfunction getOutputAngle(\r\n  translation: CubismVector2,\r\n  particles: CubismPhysicsParticle[],\r\n  particleIndex: number,\r\n  isInverted: boolean,\r\n  parentGravity: CubismVector2\r\n): number {\r\n  let outputValue: number;\r\n\r\n  if (particleIndex >= 2) {\r\n    parentGravity = particles[particleIndex - 1].position.substract(\r\n      particles[particleIndex - 2].position\r\n    );\r\n  } else {\r\n    parentGravity = parentGravity.multiplyByScaler(-1.0);\r\n  }\r\n\r\n  outputValue = CubismMath.directionToRadian(parentGravity, translation);\r\n\r\n  if (isInverted) {\r\n    outputValue *= -1.0;\r\n  }\r\n\r\n  return outputValue;\r\n}\r\n\r\nfunction getRangeValue(min: number, max: number): number {\r\n  const maxValue: number = CubismMath.max(min, max);\r\n  const minValue: number = CubismMath.min(min, max);\r\n\r\n  return CubismMath.abs(maxValue - minValue);\r\n}\r\n\r\nfunction getDefaultValue(min: number, max: number): number {\r\n  const minValue: number = CubismMath.min(min, max);\r\n  return minValue + getRangeValue(min, max) / 2.0;\r\n}\r\n\r\nfunction getOutputScaleTranslationX(\r\n  translationScale: CubismVector2,\r\n  angleScale: number\r\n): number {\r\n  return JSON.parse(JSON.stringify(translationScale.x));\r\n}\r\n\r\nfunction getOutputScaleTranslationY(\r\n  translationScale: CubismVector2,\r\n  angleScale: number\r\n): number {\r\n  return JSON.parse(JSON.stringify(translationScale.y));\r\n}\r\n\r\nfunction getOutputScaleAngle(\r\n  translationScale: CubismVector2,\r\n  angleScale: number\r\n): number {\r\n  return JSON.parse(JSON.stringify(angleScale));\r\n}\r\n\r\n/**\r\n * Updates particles.\r\n *\r\n * @param strand                Target array of particle.\r\n * @param strandCount           Count of particle.\r\n * @param totalTranslation      Total translation value.\r\n * @param totalAngle            Total angle.\r\n * @param windDirection         Direction of Wind.\r\n * @param thresholdValue        Threshold of movement.\r\n * @param deltaTimeSeconds      Delta time.\r\n * @param airResistance         Air resistance.\r\n */\r\nfunction updateParticles(\r\n  strand: CubismPhysicsParticle[],\r\n  strandCount: number,\r\n  totalTranslation: CubismVector2,\r\n  totalAngle: number,\r\n  windDirection: CubismVector2,\r\n  thresholdValue: number,\r\n  deltaTimeSeconds: number,\r\n  airResistance: number\r\n) {\r\n  let totalRadian: number;\r\n  let delay: number;\r\n  let radian: number;\r\n  let currentGravity: CubismVector2;\r\n  let direction: CubismVector2 = new CubismVector2(0.0, 0.0);\r\n  let velocity: CubismVector2 = new CubismVector2(0.0, 0.0);\r\n  let force: CubismVector2 = new CubismVector2(0.0, 0.0);\r\n  let newDirection: CubismVector2 = new CubismVector2(0.0, 0.0);\r\n\r\n  strand[0].position = new CubismVector2(\r\n    totalTranslation.x,\r\n    totalTranslation.y\r\n  );\r\n\r\n  totalRadian = CubismMath.degreesToRadian(totalAngle);\r\n  currentGravity = CubismMath.radianToDirection(totalRadian);\r\n  currentGravity.normalize();\r\n\r\n  for (let i = 1; i < strandCount; ++i) {\r\n    strand[i].force = currentGravity\r\n      .multiplyByScaler(strand[i].acceleration)\r\n      .add(windDirection);\r\n\r\n    strand[i].lastPosition = new CubismVector2(\r\n      strand[i].position.x,\r\n      strand[i].position.y\r\n    );\r\n\r\n    delay = strand[i].delay * deltaTimeSeconds * 30.0;\r\n\r\n    direction = strand[i].position.substract(strand[i - 1].position);\r\n\r\n    radian =\r\n      CubismMath.directionToRadian(strand[i].lastGravity, currentGravity) /\r\n      airResistance;\r\n\r\n    direction.x =\r\n      CubismMath.cos(radian) * direction.x -\r\n      direction.y * CubismMath.sin(radian);\r\n    direction.y =\r\n      CubismMath.sin(radian) * direction.x +\r\n      direction.y * CubismMath.cos(radian);\r\n\r\n    strand[i].position = strand[i - 1].position.add(direction);\r\n\r\n    velocity = strand[i].velocity.multiplyByScaler(delay);\r\n    force = strand[i].force.multiplyByScaler(delay).multiplyByScaler(delay);\r\n\r\n    strand[i].position = strand[i].position.add(velocity).add(force);\r\n\r\n    newDirection = strand[i].position.substract(strand[i - 1].position);\r\n    newDirection.normalize();\r\n\r\n    strand[i].position = strand[i - 1].position.add(\r\n      newDirection.multiplyByScaler(strand[i].radius)\r\n    );\r\n\r\n    if (CubismMath.abs(strand[i].position.x) < thresholdValue) {\r\n      strand[i].position.x = 0.0;\r\n    }\r\n\r\n    if (delay != 0.0) {\r\n      strand[i].velocity = strand[i].position.substract(strand[i].lastPosition);\r\n      strand[i].velocity = strand[i].velocity.divisionByScalar(delay);\r\n      strand[i].velocity = strand[i].velocity.multiplyByScaler(\r\n        strand[i].mobility\r\n      );\r\n    }\r\n\r\n    strand[i].force = new CubismVector2(0.0, 0.0);\r\n    strand[i].lastGravity = new CubismVector2(\r\n      currentGravity.x,\r\n      currentGravity.y\r\n    );\r\n  }\r\n}\r\n\r\n/**\r\n * Updates particles for stabilization.\r\n *\r\n * @param strand                Target array of particle.\r\n * @param strandCount           Count of particle.\r\n * @param totalTranslation      Total translation value.\r\n * @param totalAngle            Total angle.\r\n * @param windDirection         Direction of Wind.\r\n * @param thresholdValue        Threshold of movement.\r\n */\r\nfunction updateParticlesForStabilization(\r\n  strand: CubismPhysicsParticle[],\r\n  strandCount: number,\r\n  totalTranslation: CubismVector2,\r\n  totalAngle: number,\r\n  windDirection: CubismVector2,\r\n  thresholdValue: number\r\n) {\r\n  let totalRadian: number;\r\n  let currentGravity: CubismVector2;\r\n  let force: CubismVector2 = new CubismVector2(0.0, 0.0);\r\n\r\n  strand[0].position = new CubismVector2(\r\n    totalTranslation.x,\r\n    totalTranslation.y\r\n  );\r\n\r\n  totalRadian = CubismMath.degreesToRadian(totalAngle);\r\n  currentGravity = CubismMath.radianToDirection(totalRadian);\r\n  currentGravity.normalize();\r\n\r\n  for (let i = 1; i < strandCount; ++i) {\r\n    strand[i].force = currentGravity\r\n      .multiplyByScaler(strand[i].acceleration)\r\n      .add(windDirection);\r\n\r\n    strand[i].lastPosition = new CubismVector2(\r\n      strand[i].position.x,\r\n      strand[i].position.y\r\n    );\r\n\r\n    strand[i].velocity = new CubismVector2(0.0, 0.0);\r\n    force = strand[i].force;\r\n    force.normalize();\r\n\r\n    force = force.multiplyByScaler(strand[i].radius);\r\n    strand[i].position = strand[i - 1].position.add(force);\r\n\r\n    if (CubismMath.abs(strand[i].position.x) < thresholdValue) {\r\n      strand[i].position.x = 0.0;\r\n    }\r\n\r\n    strand[i].force = new CubismVector2(0.0, 0.0);\r\n    strand[i].lastGravity = new CubismVector2(\r\n      currentGravity.x,\r\n      currentGravity.y\r\n    );\r\n  }\r\n}\r\n\r\n/**\r\n * Updates output parameter value.\r\n * @param parameterValue            Target parameter value.\r\n * @param parameterValueMinimum     Minimum of parameter value.\r\n * @param parameterValueMaximum     Maximum of parameter value.\r\n * @param translation               Translation value.\r\n */\r\nfunction updateOutputParameterValue(\r\n  parameterValue: Float32Array,\r\n  parameterValueMinimum: number,\r\n  parameterValueMaximum: number,\r\n  translation: number,\r\n  output: CubismPhysicsOutput\r\n): void {\r\n  let outputScale: number;\r\n  let value: number;\r\n  let weight: number;\r\n\r\n  outputScale = output.getScale(output.translationScale, output.angleScale);\r\n\r\n  value = translation * outputScale;\r\n\r\n  if (value < parameterValueMinimum) {\r\n    if (value < output.valueBelowMinimum) {\r\n      output.valueBelowMinimum = value;\r\n    }\r\n\r\n    value = parameterValueMinimum;\r\n  } else if (value > parameterValueMaximum) {\r\n    if (value > output.valueExceededMaximum) {\r\n      output.valueExceededMaximum = value;\r\n    }\r\n\r\n    value = parameterValueMaximum;\r\n  }\r\n\r\n  weight = output.weight / MaximumWeight;\r\n\r\n  if (weight >= 1.0) {\r\n    parameterValue[0] = value;\r\n  } else {\r\n    value = parameterValue[0] * (1.0 - weight) + value * weight;\r\n    parameterValue[0] = value;\r\n  }\r\n}\r\n\r\nfunction normalizeParameterValue(\r\n  value: number,\r\n  parameterMinimum: number,\r\n  parameterMaximum: number,\r\n  parameterDefault: number,\r\n  normalizedMinimum: number,\r\n  normalizedMaximum: number,\r\n  normalizedDefault: number,\r\n  isInverted: boolean\r\n) {\r\n  let result = 0.0;\r\n\r\n  const maxValue: number = CubismMath.max(parameterMaximum, parameterMinimum);\r\n\r\n  if (maxValue < value) {\r\n    value = maxValue;\r\n  }\r\n\r\n  const minValue: number = CubismMath.min(parameterMaximum, parameterMinimum);\r\n\r\n  if (minValue > value) {\r\n    value = minValue;\r\n  }\r\n\r\n  const minNormValue: number = CubismMath.min(\r\n    normalizedMinimum,\r\n    normalizedMaximum\r\n  );\r\n  const maxNormValue: number = CubismMath.max(\r\n    normalizedMinimum,\r\n    normalizedMaximum\r\n  );\r\n  const middleNormValue: number = normalizedDefault;\r\n\r\n  const middleValue: number = getDefaultValue(minValue, maxValue);\r\n  const paramValue: number = value - middleValue;\r\n\r\n  switch (sign(paramValue)) {\r\n    case 1: {\r\n      const nLength: number = maxNormValue - middleNormValue;\r\n      const pLength: number = maxValue - middleValue;\r\n\r\n      if (pLength != 0.0) {\r\n        result = paramValue * (nLength / pLength);\r\n        result += middleNormValue;\r\n      }\r\n\r\n      break;\r\n    }\r\n    case -1: {\r\n      const nLength: number = minNormValue - middleNormValue;\r\n      const pLength: number = minValue - middleValue;\r\n\r\n      if (pLength != 0.0) {\r\n        result = paramValue * (nLength / pLength);\r\n        result += middleNormValue;\r\n      }\r\n\r\n      break;\r\n    }\r\n    case 0: {\r\n      result = middleNormValue;\r\n\r\n      break;\r\n    }\r\n    default: {\r\n      break;\r\n    }\r\n  }\r\n\r\n  return isInverted ? result : result * -1.0;\r\n}\r\n\r\n// Namespace definition for compatibility.\r\nimport * as $ from './cubismphysics';\r\n// eslint-disable-next-line @typescript-eslint/no-namespace\r\nexport namespace Live2DCubismFramework {\r\n  export const CubismPhysics = $.CubismPhysics;\r\n  export type CubismPhysics = $.CubismPhysics;\r\n  export const Options = $.Options;\r\n  export type Options = $.Options;\r\n}\r\n","/**\r\n * Copyright(c) Live2D Inc. All rights reserved.\r\n *\r\n * Use of this source code is governed by the Live2D Open Software license\r\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\r\n */\r\n\r\nimport { CubismIdHandle } from '../id/cubismid';\r\nimport { CubismVector2 } from '../math/cubismvector2';\r\nimport { csmVector } from '../type/csmvector';\r\n\r\n/**\r\n * 物理演算の適用先の種類\r\n */\r\nexport enum CubismPhysicsTargetType {\r\n  CubismPhysicsTargetType_Parameter, // パラメータに対して適用\r\n}\r\n\r\n/**\r\n * 物理演算の入力の種類\r\n */\r\nexport enum CubismPhysicsSource {\r\n  CubismPhysicsSource_X, // X軸の位置から\r\n  CubismPhysicsSource_Y, // Y軸の位置から\r\n  CubismPhysicsSource_Angle, // 角度から\r\n}\r\n\r\n/**\r\n * @brief 物理演算で使用する外部の力\r\n *\r\n * 物理演算で使用する外部の力。\r\n */\r\nexport class PhysicsJsonEffectiveForces {\r\n  constructor() {\r\n    this.gravity = new CubismVector2(0, 0);\r\n    this.wind = new CubismVector2(0, 0);\r\n  }\r\n  gravity: CubismVector2; // 重力\r\n  wind: CubismVector2; // 風\r\n}\r\n\r\n/**\r\n * 物理演算のパラメータ情報\r\n */\r\nexport class CubismPhysicsParameter {\r\n  id: CubismIdHandle; // パラメータ\r\n  targetType: CubismPhysicsTargetType; // 適用先の種類\r\n}\r\n\r\n/**\r\n * 物理演算の正規化情報\r\n */\r\nexport class CubismPhysicsNormalization {\r\n  minimum: number; // 最大値\r\n  maximum: number; // 最小値\r\n  defalut: number; // デフォルト値\r\n}\r\n\r\n/**\r\n * 物理演算の演算委使用する物理点の情報\r\n */\r\nexport class CubismPhysicsParticle {\r\n  constructor() {\r\n    this.initialPosition = new CubismVector2(0, 0);\r\n    this.position = new CubismVector2(0, 0);\r\n    this.lastPosition = new CubismVector2(0, 0);\r\n    this.lastGravity = new CubismVector2(0, 0);\r\n    this.force = new CubismVector2(0, 0);\r\n    this.velocity = new CubismVector2(0, 0);\r\n  }\r\n\r\n  initialPosition: CubismVector2; // 初期位置\r\n  mobility: number; // 動きやすさ\r\n  delay: number; // 遅れ\r\n  acceleration: number; // 加速度\r\n  radius: number; // 距離\r\n  position: CubismVector2; // 現在の位置\r\n  lastPosition: CubismVector2; // 最後の位置\r\n  lastGravity: CubismVector2; // 最後の重力\r\n  force: CubismVector2; // 現在かかっている力\r\n  velocity: CubismVector2; // 現在の速度\r\n}\r\n\r\n/**\r\n * 物理演算の物理点の管理\r\n */\r\nexport class CubismPhysicsSubRig {\r\n  constructor() {\r\n    this.normalizationPosition = new CubismPhysicsNormalization();\r\n    this.normalizationAngle = new CubismPhysicsNormalization();\r\n  }\r\n  inputCount: number; // 入力の個数\r\n  outputCount: number; // 出力の個数\r\n  particleCount: number; // 物理点の個数\r\n  baseInputIndex: number; // 入力の最初のインデックス\r\n  baseOutputIndex: number; // 出力の最初のインデックス\r\n  baseParticleIndex: number; // 物理点の最初のインデックス\r\n  normalizationPosition: CubismPhysicsNormalization; // 正規化された位置\r\n  normalizationAngle: CubismPhysicsNormalization; // 正規化された角度\r\n}\r\n\r\n/**\r\n * 正規化されたパラメータの取得関数の宣言\r\n * @param targetTranslation     // 演算結果の移動値\r\n * @param targetAngle           // 演算結果の角度\r\n * @param value                 // パラメータの値\r\n * @param parameterMinimunValue // パラメータの最小値\r\n * @param parameterMaximumValue // パラメータの最大値\r\n * @param parameterDefaultValue // パラメータのデフォルト値\r\n * @param normalizationPosition // 正規化された位置\r\n * @param normalizationAngle    // 正規化された角度\r\n * @param isInverted            // 値が反転されているか？\r\n * @param weight                // 重み\r\n */\r\nexport interface normalizedPhysicsParameterValueGetter {\r\n  (\r\n    targetTranslation: CubismVector2,\r\n    targetAngle: { angle: number },\r\n    value: number,\r\n    parameterMinimunValue: number,\r\n    parameterMaximumValue: number,\r\n    parameterDefaultValue: number,\r\n    normalizationPosition: CubismPhysicsNormalization,\r\n    normalizationAngle: CubismPhysicsNormalization,\r\n    isInverted: boolean,\r\n    weight: number\r\n  ): void;\r\n}\r\n\r\n/**\r\n * 物理演算の値の取得関数の宣言\r\n * @param translation 移動値\r\n * @param particles 物理点のリスト\r\n * @param isInverted 値が反映されているか\r\n * @param parentGravity 重力\r\n * @return 値\r\n */\r\nexport interface physicsValueGetter {\r\n  (\r\n    translation: CubismVector2,\r\n    particles: CubismPhysicsParticle[],\r\n    particleIndex: number,\r\n    isInverted: boolean,\r\n    parentGravity: CubismVector2\r\n  ): number;\r\n}\r\n\r\n/**\r\n * 物理演算のスケールの取得関数の宣言\r\n * @param translationScale 移動値のスケール\r\n * @param angleScale    角度のスケール\r\n * @return スケール値\r\n */\r\nexport interface physicsScaleGetter {\r\n  (translationScale: CubismVector2, angleScale: number): number;\r\n}\r\n\r\n/**\r\n * 物理演算の入力情報\r\n */\r\nexport class CubismPhysicsInput {\r\n  constructor() {\r\n    this.source = new CubismPhysicsParameter();\r\n  }\r\n  source: CubismPhysicsParameter; // 入力元のパラメータ\r\n  sourceParameterIndex: number; // 入力元のパラメータのインデックス\r\n  weight: number; // 重み\r\n  type: number; // 入力の種類\r\n  reflect: boolean; // 値が反転されているかどうか\r\n  getNormalizedParameterValue: normalizedPhysicsParameterValueGetter; // 正規化されたパラメータ値の取得関数\r\n}\r\n\r\n/**\r\n * @brief 物理演算の出力情報\r\n *\r\n * 物理演算の出力情報。\r\n */\r\nexport class CubismPhysicsOutput {\r\n  constructor() {\r\n    this.destination = new CubismPhysicsParameter();\r\n    this.translationScale = new CubismVector2(0, 0);\r\n  }\r\n\r\n  destination: CubismPhysicsParameter; // 出力先のパラメータ\r\n  destinationParameterIndex: number; // 出力先のパラメータのインデックス\r\n  vertexIndex: number; // 振り子のインデックス\r\n  translationScale: CubismVector2; // 移動値のスケール\r\n  angleScale: number; // 角度のスケール\r\n  weight: number; // 重み\r\n  type: CubismPhysicsSource; // 出力の種類\r\n  reflect: boolean; // 値が反転されているかどうか\r\n  valueBelowMinimum: number; // 最小値を下回った時の値\r\n  valueExceededMaximum: number; // 最大値をこえた時の値\r\n  getValue: physicsValueGetter; // 物理演算の値の取得関数\r\n  getScale: physicsScaleGetter; // 物理演算のスケール値の取得関数\r\n}\r\n\r\n/**\r\n * @brief 物理演算のデータ\r\n *\r\n * 物理演算のデータ。\r\n */\r\nexport class CubismPhysicsRig {\r\n  constructor() {\r\n    this.settings = new csmVector<CubismPhysicsSubRig>();\r\n    this.inputs = new csmVector<CubismPhysicsInput>();\r\n    this.outputs = new csmVector<CubismPhysicsOutput>();\r\n    this.particles = new csmVector<CubismPhysicsParticle>();\r\n    this.gravity = new CubismVector2(0, 0);\r\n    this.wind = new CubismVector2(0, 0);\r\n    this.fps = 0.0;\r\n  }\r\n\r\n  subRigCount: number; // 物理演算の物理点の個数\r\n  settings: csmVector<CubismPhysicsSubRig>; // 物理演算の物理点の管理のリスト\r\n  inputs: csmVector<CubismPhysicsInput>; // 物理演算の入力のリスト\r\n  outputs: csmVector<CubismPhysicsOutput>; // 物理演算の出力のリスト\r\n  particles: csmVector<CubismPhysicsParticle>; // 物理演算の物理点のリスト\r\n  gravity: CubismVector2; // 重力\r\n  wind: CubismVector2; // 風\r\n  fps: number; //物理演算動作FPS\r\n}\r\n\r\n// Namespace definition for compatibility.\r\nimport * as $ from './cubismphysicsinternal';\r\n// eslint-disable-next-line @typescript-eslint/no-namespace\r\nexport namespace Live2DCubismFramework {\r\n  export const CubismPhysicsInput = $.CubismPhysicsInput;\r\n  export type CubismPhysicsInput = $.CubismPhysicsInput;\r\n  export const CubismPhysicsNormalization = $.CubismPhysicsNormalization;\r\n  export type CubismPhysicsNormalization = $.CubismPhysicsNormalization;\r\n  export const CubismPhysicsOutput = $.CubismPhysicsOutput;\r\n  export type CubismPhysicsOutput = $.CubismPhysicsOutput;\r\n  export const CubismPhysicsParameter = $.CubismPhysicsParameter;\r\n  export type CubismPhysicsParameter = $.CubismPhysicsParameter;\r\n  export const CubismPhysicsParticle = $.CubismPhysicsParticle;\r\n  export type CubismPhysicsParticle = $.CubismPhysicsParticle;\r\n  export const CubismPhysicsRig = $.CubismPhysicsRig;\r\n  export type CubismPhysicsRig = $.CubismPhysicsRig;\r\n  export const CubismPhysicsSource = $.CubismPhysicsSource;\r\n  export type CubismPhysicsSource = $.CubismPhysicsSource;\r\n  export const CubismPhysicsSubRig = $.CubismPhysicsSubRig;\r\n  export type CubismPhysicsSubRig = $.CubismPhysicsSubRig;\r\n  export const CubismPhysicsTargetType = $.CubismPhysicsTargetType;\r\n  export type CubismPhysicsTargetType = $.CubismPhysicsTargetType;\r\n  export const PhysicsJsonEffectiveForces = $.PhysicsJsonEffectiveForces;\r\n  export type PhysicsJsonEffectiveForces = $.PhysicsJsonEffectiveForces;\r\n  export type normalizedPhysicsParameterValueGetter =\r\n    $.normalizedPhysicsParameterValueGetter;\r\n  export type physicsScaleGetter = $.physicsScaleGetter;\r\n  export type physicsValueGetter = $.physicsValueGetter;\r\n}\r\n","/**\r\n * Copyright(c) Live2D Inc. All rights reserved.\r\n *\r\n * Use of this source code is governed by the Live2D Open Software license\r\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\r\n */\r\n\r\nimport { CubismIdHandle } from '../id/cubismid';\r\nimport { CubismFramework } from '../live2dcubismframework';\r\nimport { CubismVector2 } from '../math/cubismvector2';\r\nimport { CubismJson } from '../utils/cubismjson';\r\n\r\n// JSON keys\r\nconst Position = 'Position';\r\nconst X = 'X';\r\nconst Y = 'Y';\r\nconst Angle = 'Angle';\r\nconst Type = 'Type';\r\nconst Id = 'Id';\r\n\r\n// Meta\r\nconst Meta = 'Meta';\r\nconst EffectiveForces = 'EffectiveForces';\r\nconst TotalInputCount = 'TotalInputCount';\r\nconst TotalOutputCount = 'TotalOutputCount';\r\nconst PhysicsSettingCount = 'PhysicsSettingCount';\r\nconst Gravity = 'Gravity';\r\nconst Wind = 'Wind';\r\nconst VertexCount = 'VertexCount';\r\nconst Fps = 'Fps';\r\n\r\n// PhysicsSettings\r\nconst PhysicsSettings = 'PhysicsSettings';\r\nconst Normalization = 'Normalization';\r\nconst Minimum = 'Minimum';\r\nconst Maximum = 'Maximum';\r\nconst Default = 'Default';\r\nconst Reflect = 'Reflect';\r\nconst Weight = 'Weight';\r\n\r\n// Input\r\nconst Input = 'Input';\r\nconst Source = 'Source';\r\n\r\n// Output\r\nconst Output = 'Output';\r\nconst Scale = 'Scale';\r\nconst VertexIndex = 'VertexIndex';\r\nconst Destination = 'Destination';\r\n\r\n// Particle\r\nconst Vertices = 'Vertices';\r\nconst Mobility = 'Mobility';\r\nconst Delay = 'Delay';\r\nconst Radius = 'Radius';\r\nconst Acceleration = 'Acceleration';\r\n\r\n/**\r\n * physics3.jsonのコンテナ。\r\n */\r\nexport class CubismPhysicsJson {\r\n  /**\r\n   * コンストラクタ\r\n   * @param buffer physics3.jsonが読み込まれているバッファ\r\n   * @param size バッファのサイズ\r\n   */\r\n  public constructor(buffer: ArrayBuffer, size: number) {\r\n    this._json = CubismJson.create(buffer, size);\r\n  }\r\n\r\n  /**\r\n   * デストラクタ相当の処理\r\n   */\r\n  public release(): void {\r\n    CubismJson.delete(this._json);\r\n  }\r\n\r\n  /**\r\n   * 重力の取得\r\n   * @return 重力\r\n   */\r\n  public getGravity(): CubismVector2 {\r\n    const ret: CubismVector2 = new CubismVector2(0, 0);\r\n    ret.x = this._json\r\n      .getRoot()\r\n      .getValueByString(Meta)\r\n      .getValueByString(EffectiveForces)\r\n      .getValueByString(Gravity)\r\n      .getValueByString(X)\r\n      .toFloat();\r\n    ret.y = this._json\r\n      .getRoot()\r\n      .getValueByString(Meta)\r\n      .getValueByString(EffectiveForces)\r\n      .getValueByString(Gravity)\r\n      .getValueByString(Y)\r\n      .toFloat();\r\n    return ret;\r\n  }\r\n\r\n  /**\r\n   * 風の取得\r\n   * @return 風\r\n   */\r\n  public getWind(): CubismVector2 {\r\n    const ret: CubismVector2 = new CubismVector2(0, 0);\r\n    ret.x = this._json\r\n      .getRoot()\r\n      .getValueByString(Meta)\r\n      .getValueByString(EffectiveForces)\r\n      .getValueByString(Wind)\r\n      .getValueByString(X)\r\n      .toFloat();\r\n    ret.y = this._json\r\n      .getRoot()\r\n      .getValueByString(Meta)\r\n      .getValueByString(EffectiveForces)\r\n      .getValueByString(Wind)\r\n      .getValueByString(Y)\r\n      .toFloat();\r\n    return ret;\r\n  }\r\n\r\n  /**\r\n   * 物理演算設定FPSの取得\r\n   * @return 物理演算設定FPS\r\n   */\r\n  public getFps(): number {\r\n    return this._json\r\n      .getRoot()\r\n      .getValueByString(Meta)\r\n      .getValueByString(Fps)\r\n      .toFloat(0.0);\r\n  }\r\n\r\n  /**\r\n   * 物理店の管理の個数の取得\r\n   * @return 物理店の管理の個数\r\n   */\r\n  public getSubRigCount(): number {\r\n    return this._json\r\n      .getRoot()\r\n      .getValueByString(Meta)\r\n      .getValueByString(PhysicsSettingCount)\r\n      .toInt();\r\n  }\r\n\r\n  /**\r\n   * 入力の総合計の取得\r\n   * @return 入力の総合計\r\n   */\r\n  public getTotalInputCount(): number {\r\n    return this._json\r\n      .getRoot()\r\n      .getValueByString(Meta)\r\n      .getValueByString(TotalInputCount)\r\n      .toInt();\r\n  }\r\n\r\n  /**\r\n   * 出力の総合計の取得\r\n   * @return 出力の総合計\r\n   */\r\n  public getTotalOutputCount(): number {\r\n    return this._json\r\n      .getRoot()\r\n      .getValueByString(Meta)\r\n      .getValueByString(TotalOutputCount)\r\n      .toInt();\r\n  }\r\n\r\n  /**\r\n   * 物理点の個数の取得\r\n   * @return 物理点の個数\r\n   */\r\n  public getVertexCount(): number {\r\n    return this._json\r\n      .getRoot()\r\n      .getValueByString(Meta)\r\n      .getValueByString(VertexCount)\r\n      .toInt();\r\n  }\r\n\r\n  /**\r\n   * 正規化された位置の最小値の取得\r\n   * @param physicsSettingIndex 物理演算の設定のインデックス\r\n   * @return 正規化された位置の最小値\r\n   */\r\n  public getNormalizationPositionMinimumValue(\r\n    physicsSettingIndex: number\r\n  ): number {\r\n    return this._json\r\n      .getRoot()\r\n      .getValueByString(PhysicsSettings)\r\n      .getValueByIndex(physicsSettingIndex)\r\n      .getValueByString(Normalization)\r\n      .getValueByString(Position)\r\n      .getValueByString(Minimum)\r\n      .toFloat();\r\n  }\r\n\r\n  /**\r\n   * 正規化された位置の最大値の取得\r\n   * @param physicsSettingIndex 物理演算の設定のインデックス\r\n   * @return 正規化された位置の最大値\r\n   */\r\n  public getNormalizationPositionMaximumValue(\r\n    physicsSettingIndex: number\r\n  ): number {\r\n    return this._json\r\n      .getRoot()\r\n      .getValueByString(PhysicsSettings)\r\n      .getValueByIndex(physicsSettingIndex)\r\n      .getValueByString(Normalization)\r\n      .getValueByString(Position)\r\n      .getValueByString(Maximum)\r\n      .toFloat();\r\n  }\r\n\r\n  /**\r\n   * 正規化された位置のデフォルト値の取得\r\n   * @param physicsSettingIndex 物理演算の設定のインデックス\r\n   * @return 正規化された位置のデフォルト値\r\n   */\r\n  public getNormalizationPositionDefaultValue(\r\n    physicsSettingIndex: number\r\n  ): number {\r\n    return this._json\r\n      .getRoot()\r\n      .getValueByString(PhysicsSettings)\r\n      .getValueByIndex(physicsSettingIndex)\r\n      .getValueByString(Normalization)\r\n      .getValueByString(Position)\r\n      .getValueByString(Default)\r\n      .toFloat();\r\n  }\r\n\r\n  /**\r\n   * 正規化された角度の最小値の取得\r\n   * @param physicsSettingIndex 物理演算の設定のインデックス\r\n   * @return 正規化された角度の最小値\r\n   */\r\n  public getNormalizationAngleMinimumValue(\r\n    physicsSettingIndex: number\r\n  ): number {\r\n    return this._json\r\n      .getRoot()\r\n      .getValueByString(PhysicsSettings)\r\n      .getValueByIndex(physicsSettingIndex)\r\n      .getValueByString(Normalization)\r\n      .getValueByString(Angle)\r\n      .getValueByString(Minimum)\r\n      .toFloat();\r\n  }\r\n\r\n  /**\r\n   * 正規化された角度の最大値の取得\r\n   * @param physicsSettingIndex\r\n   * @return 正規化された角度の最大値\r\n   */\r\n  public getNormalizationAngleMaximumValue(\r\n    physicsSettingIndex: number\r\n  ): number {\r\n    return this._json\r\n      .getRoot()\r\n      .getValueByString(PhysicsSettings)\r\n      .getValueByIndex(physicsSettingIndex)\r\n      .getValueByString(Normalization)\r\n      .getValueByString(Angle)\r\n      .getValueByString(Maximum)\r\n      .toFloat();\r\n  }\r\n\r\n  /**\r\n   * 正規化された角度のデフォルト値の取得\r\n   * @param physicsSettingIndex 物理演算の設定のインデックス\r\n   * @return 正規化された角度のデフォルト値\r\n   */\r\n  public getNormalizationAngleDefaultValue(\r\n    physicsSettingIndex: number\r\n  ): number {\r\n    return this._json\r\n      .getRoot()\r\n      .getValueByString(PhysicsSettings)\r\n      .getValueByIndex(physicsSettingIndex)\r\n      .getValueByString(Normalization)\r\n      .getValueByString(Angle)\r\n      .getValueByString(Default)\r\n      .toFloat();\r\n  }\r\n\r\n  /**\r\n   * 入力の個数の取得\r\n   * @param physicsSettingIndex 物理演算の設定のインデックス\r\n   * @return 入力の個数\r\n   */\r\n  public getInputCount(physicsSettingIndex: number): number {\r\n    return this._json\r\n      .getRoot()\r\n      .getValueByString(PhysicsSettings)\r\n      .getValueByIndex(physicsSettingIndex)\r\n      .getValueByString(Input)\r\n      .getVector()\r\n      .getSize();\r\n  }\r\n\r\n  /**\r\n   * 入力の重みの取得\r\n   * @param physicsSettingIndex 物理演算の設定のインデックス\r\n   * @param inputIndex 入力のインデックス\r\n   * @return 入力の重み\r\n   */\r\n  public getInputWeight(\r\n    physicsSettingIndex: number,\r\n    inputIndex: number\r\n  ): number {\r\n    return this._json\r\n      .getRoot()\r\n      .getValueByString(PhysicsSettings)\r\n      .getValueByIndex(physicsSettingIndex)\r\n      .getValueByString(Input)\r\n      .getValueByIndex(inputIndex)\r\n      .getValueByString(Weight)\r\n      .toFloat();\r\n  }\r\n\r\n  /**\r\n   * 入力の反転の取得\r\n   * @param physicsSettingIndex 物理演算の設定のインデックス\r\n   * @param inputIndex 入力のインデックス\r\n   * @return 入力の反転\r\n   */\r\n  public getInputReflect(\r\n    physicsSettingIndex: number,\r\n    inputIndex: number\r\n  ): boolean {\r\n    return this._json\r\n      .getRoot()\r\n      .getValueByString(PhysicsSettings)\r\n      .getValueByIndex(physicsSettingIndex)\r\n      .getValueByString(Input)\r\n      .getValueByIndex(inputIndex)\r\n      .getValueByString(Reflect)\r\n      .toBoolean();\r\n  }\r\n\r\n  /**\r\n   * 入力の種類の取得\r\n   * @param physicsSettingIndex 物理演算の設定のインデックス\r\n   * @param inputIndex 入力のインデックス\r\n   * @return 入力の種類\r\n   */\r\n  public getInputType(physicsSettingIndex: number, inputIndex: number): string {\r\n    return this._json\r\n      .getRoot()\r\n      .getValueByString(PhysicsSettings)\r\n      .getValueByIndex(physicsSettingIndex)\r\n      .getValueByString(Input)\r\n      .getValueByIndex(inputIndex)\r\n      .getValueByString(Type)\r\n      .getRawString();\r\n  }\r\n\r\n  /**\r\n   * 入力元のIDの取得\r\n   * @param physicsSettingIndex 物理演算の設定のインデックス\r\n   * @param inputIndex 入力のインデックス\r\n   * @return 入力元のID\r\n   */\r\n  public getInputSourceId(\r\n    physicsSettingIndex: number,\r\n    inputIndex: number\r\n  ): CubismIdHandle {\r\n    return CubismFramework.getIdManager().getId(\r\n      this._json\r\n        .getRoot()\r\n        .getValueByString(PhysicsSettings)\r\n        .getValueByIndex(physicsSettingIndex)\r\n        .getValueByString(Input)\r\n        .getValueByIndex(inputIndex)\r\n        .getValueByString(Source)\r\n        .getValueByString(Id)\r\n        .getRawString()\r\n    );\r\n  }\r\n\r\n  /**\r\n   * 出力の個数の取得\r\n   * @param physicsSettingIndex 物理演算の設定のインデックス\r\n   * @return 出力の個数\r\n   */\r\n  public getOutputCount(physicsSettingIndex: number): number {\r\n    return this._json\r\n      .getRoot()\r\n      .getValueByString(PhysicsSettings)\r\n      .getValueByIndex(physicsSettingIndex)\r\n      .getValueByString(Output)\r\n      .getVector()\r\n      .getSize();\r\n  }\r\n\r\n  /**\r\n   * 出力の物理点のインデックスの取得\r\n   * @param physicsSettingIndex 物理演算の設定のインデックス\r\n   * @param outputIndex 出力のインデックス\r\n   * @return 出力の物理点のインデックス\r\n   */\r\n  public getOutputVertexIndex(\r\n    physicsSettingIndex: number,\r\n    outputIndex: number\r\n  ): number {\r\n    return this._json\r\n      .getRoot()\r\n      .getValueByString(PhysicsSettings)\r\n      .getValueByIndex(physicsSettingIndex)\r\n      .getValueByString(Output)\r\n      .getValueByIndex(outputIndex)\r\n      .getValueByString(VertexIndex)\r\n      .toInt();\r\n  }\r\n\r\n  /**\r\n   * 出力の角度のスケールを取得する\r\n   * @param physicsSettingIndex 物理演算の設定のインデックス\r\n   * @param outputIndex 出力のインデックス\r\n   * @return 出力の角度のスケール\r\n   */\r\n  public getOutputAngleScale(\r\n    physicsSettingIndex: number,\r\n    outputIndex: number\r\n  ): number {\r\n    return this._json\r\n      .getRoot()\r\n      .getValueByString(PhysicsSettings)\r\n      .getValueByIndex(physicsSettingIndex)\r\n      .getValueByString(Output)\r\n      .getValueByIndex(outputIndex)\r\n      .getValueByString(Scale)\r\n      .toFloat();\r\n  }\r\n\r\n  /**\r\n   * 出力の重みの取得\r\n   * @param physicsSettingIndex 物理演算の設定のインデックス\r\n   * @param outputIndex 出力のインデックス\r\n   * @return 出力の重み\r\n   */\r\n  public getOutputWeight(\r\n    physicsSettingIndex: number,\r\n    outputIndex: number\r\n  ): number {\r\n    return this._json\r\n      .getRoot()\r\n      .getValueByString(PhysicsSettings)\r\n      .getValueByIndex(physicsSettingIndex)\r\n      .getValueByString(Output)\r\n      .getValueByIndex(outputIndex)\r\n      .getValueByString(Weight)\r\n      .toFloat();\r\n  }\r\n\r\n  /**\r\n   * 出力先のIDの取得\r\n   * @param physicsSettingIndex 物理演算の設定のインデックス\r\n   * @param outputIndex 出力のインデックス\r\n   * @return 出力先のID\r\n   */\r\n  public getOutputDestinationId(\r\n    physicsSettingIndex: number,\r\n    outputIndex: number\r\n  ): CubismIdHandle {\r\n    return CubismFramework.getIdManager().getId(\r\n      this._json\r\n        .getRoot()\r\n        .getValueByString(PhysicsSettings)\r\n        .getValueByIndex(physicsSettingIndex)\r\n        .getValueByString(Output)\r\n        .getValueByIndex(outputIndex)\r\n        .getValueByString(Destination)\r\n        .getValueByString(Id)\r\n        .getRawString()\r\n    );\r\n  }\r\n\r\n  /**\r\n   * 出力の種類の取得\r\n   * @param physicsSettingIndex 物理演算の設定のインデックス\r\n   * @param outputIndex 出力のインデックス\r\n   * @return 出力の種類\r\n   */\r\n  public getOutputType(\r\n    physicsSettingIndex: number,\r\n    outputIndex: number\r\n  ): string {\r\n    return this._json\r\n      .getRoot()\r\n      .getValueByString(PhysicsSettings)\r\n      .getValueByIndex(physicsSettingIndex)\r\n      .getValueByString(Output)\r\n      .getValueByIndex(outputIndex)\r\n      .getValueByString(Type)\r\n      .getRawString();\r\n  }\r\n\r\n  /**\r\n   * 出力の反転の取得\r\n   * @param physicsSettingIndex 物理演算のインデックス\r\n   * @param outputIndex 出力のインデックス\r\n   * @return 出力の反転\r\n   */\r\n  public getOutputReflect(\r\n    physicsSettingIndex: number,\r\n    outputIndex: number\r\n  ): boolean {\r\n    return this._json\r\n      .getRoot()\r\n      .getValueByString(PhysicsSettings)\r\n      .getValueByIndex(physicsSettingIndex)\r\n      .getValueByString(Output)\r\n      .getValueByIndex(outputIndex)\r\n      .getValueByString(Reflect)\r\n      .toBoolean();\r\n  }\r\n\r\n  /**\r\n   * 物理点の個数の取得\r\n   * @param physicsSettingIndex 物理演算男設定のインデックス\r\n   * @return 物理点の個数\r\n   */\r\n  public getParticleCount(physicsSettingIndex: number): number {\r\n    return this._json\r\n      .getRoot()\r\n      .getValueByString(PhysicsSettings)\r\n      .getValueByIndex(physicsSettingIndex)\r\n      .getValueByString(Vertices)\r\n      .getVector()\r\n      .getSize();\r\n  }\r\n\r\n  /**\r\n   * 物理点の動きやすさの取得\r\n   * @param physicsSettingIndex 物理演算の設定のインデックス\r\n   * @param vertexIndex 物理点のインデックス\r\n   * @return 物理点の動きやすさ\r\n   */\r\n  public getParticleMobility(\r\n    physicsSettingIndex: number,\r\n    vertexIndex: number\r\n  ): number {\r\n    return this._json\r\n      .getRoot()\r\n      .getValueByString(PhysicsSettings)\r\n      .getValueByIndex(physicsSettingIndex)\r\n      .getValueByString(Vertices)\r\n      .getValueByIndex(vertexIndex)\r\n      .getValueByString(Mobility)\r\n      .toFloat();\r\n  }\r\n\r\n  /**\r\n   * 物理点の遅れの取得\r\n   * @param physicsSettingIndex 物理演算の設定のインデックス\r\n   * @param vertexIndex 物理点のインデックス\r\n   * @return 物理点の遅れ\r\n   */\r\n  public getParticleDelay(\r\n    physicsSettingIndex: number,\r\n    vertexIndex: number\r\n  ): number {\r\n    return this._json\r\n      .getRoot()\r\n      .getValueByString(PhysicsSettings)\r\n      .getValueByIndex(physicsSettingIndex)\r\n      .getValueByString(Vertices)\r\n      .getValueByIndex(vertexIndex)\r\n      .getValueByString(Delay)\r\n      .toFloat();\r\n  }\r\n\r\n  /**\r\n   * 物理点の加速度の取得\r\n   * @param physicsSettingIndex 物理演算の設定\r\n   * @param vertexIndex 物理点のインデックス\r\n   * @return 物理点の加速度\r\n   */\r\n  public getParticleAcceleration(\r\n    physicsSettingIndex: number,\r\n    vertexIndex: number\r\n  ): number {\r\n    return this._json\r\n      .getRoot()\r\n      .getValueByString(PhysicsSettings)\r\n      .getValueByIndex(physicsSettingIndex)\r\n      .getValueByString(Vertices)\r\n      .getValueByIndex(vertexIndex)\r\n      .getValueByString(Acceleration)\r\n      .toFloat();\r\n  }\r\n\r\n  /**\r\n   * 物理点の距離の取得\r\n   * @param physicsSettingIndex 物理演算の設定のインデックス\r\n   * @param vertexIndex 物理点のインデックス\r\n   * @return 物理点の距離\r\n   */\r\n  public getParticleRadius(\r\n    physicsSettingIndex: number,\r\n    vertexIndex: number\r\n  ): number {\r\n    return this._json\r\n      .getRoot()\r\n      .getValueByString(PhysicsSettings)\r\n      .getValueByIndex(physicsSettingIndex)\r\n      .getValueByString(Vertices)\r\n      .getValueByIndex(vertexIndex)\r\n      .getValueByString(Radius)\r\n      .toFloat();\r\n  }\r\n\r\n  /**\r\n   * 物理点の位置の取得\r\n   * @param physicsSettingIndex 物理演算の設定のインデックス\r\n   * @param vertexInde 物理点のインデックス\r\n   * @return 物理点の位置\r\n   */\r\n  public getParticlePosition(\r\n    physicsSettingIndex: number,\r\n    vertexIndex: number\r\n  ): CubismVector2 {\r\n    const ret: CubismVector2 = new CubismVector2(0, 0);\r\n    ret.x = this._json\r\n      .getRoot()\r\n      .getValueByString(PhysicsSettings)\r\n      .getValueByIndex(physicsSettingIndex)\r\n      .getValueByString(Vertices)\r\n      .getValueByIndex(vertexIndex)\r\n      .getValueByString(Position)\r\n      .getValueByString(X)\r\n      .toFloat();\r\n    ret.y = this._json\r\n      .getRoot()\r\n      .getValueByString(PhysicsSettings)\r\n      .getValueByIndex(physicsSettingIndex)\r\n      .getValueByString(Vertices)\r\n      .getValueByIndex(vertexIndex)\r\n      .getValueByString(Position)\r\n      .getValueByString(Y)\r\n      .toFloat();\r\n    return ret;\r\n  }\r\n\r\n  _json: CubismJson; // physics3.jsonデータ\r\n}\r\n\r\n// Namespace definition for compatibility.\r\nimport * as $ from './cubismphysicsjson';\r\n// eslint-disable-next-line @typescript-eslint/no-namespace\r\nexport namespace Live2DCubismFramework {\r\n  export const CubismPhysicsJson = $.CubismPhysicsJson;\r\n  export type CubismPhysicsJson = $.CubismPhysicsJson;\r\n}\r\n","/**\r\n * Copyright(c) Live2D Inc. All rights reserved.\r\n *\r\n * Use of this source code is governed by the Live2D Open Software license\r\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\r\n */\r\n\r\nimport { CubismMatrix44 } from '../math/cubismmatrix44';\r\nimport { CubismModel } from '../model/cubismmodel';\r\n\r\n/**\r\n * モデル描画を処理するレンダラ\r\n *\r\n * サブクラスに環境依存の描画命令を記述する。\r\n */\r\nexport abstract class CubismRenderer {\r\n  /**\r\n   * レンダラのインスタンスを生成して取得する\r\n   *\r\n   * @return レンダラのインスタンス\r\n   */\r\n  public static create(): CubismRenderer {\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * レンダラのインスタンスを解放する\r\n   */\r\n  public static delete(renderer: CubismRenderer): void {\r\n    renderer = null;\r\n  }\r\n\r\n  /**\r\n   * レンダラの初期化処理を実行する\r\n   * 引数に渡したモデルからレンダラの初期化処理に必要な情報を取り出すことができる\r\n   * @param model モデルのインスタンス\r\n   */\r\n  public initialize(model: CubismModel): void {\r\n    this._model = model;\r\n  }\r\n\r\n  /**\r\n   * モデルを描画する\r\n   */\r\n  public drawModel(): void {\r\n    if (this.getModel() == null) return;\r\n\r\n    this.doDrawModel();\r\n  }\r\n\r\n  /**\r\n   * Model-View-Projection 行列をセットする\r\n   * 配列は複製されるので、元の配列は外で破棄して良い\r\n   * @param matrix44 Model-View-Projection 行列\r\n   */\r\n  public setMvpMatrix(matrix44: CubismMatrix44): void {\r\n    this._mvpMatrix4x4.setMatrix(matrix44.getArray());\r\n  }\r\n\r\n  /**\r\n   * Model-View-Projection 行列を取得する\r\n   * @return Model-View-Projection 行列\r\n   */\r\n  public getMvpMatrix(): CubismMatrix44 {\r\n    return this._mvpMatrix4x4;\r\n  }\r\n\r\n  /**\r\n   * モデルの色をセットする\r\n   * 各色0.0~1.0の間で指定する（1.0が標準の状態）\r\n   * @param red 赤チャンネルの値\r\n   * @param green 緑チャンネルの値\r\n   * @param blue 青チャンネルの値\r\n   * @param alpha αチャンネルの値\r\n   */\r\n  public setModelColor(\r\n    red: number,\r\n    green: number,\r\n    blue: number,\r\n    alpha: number\r\n  ): void {\r\n    if (red < 0.0) {\r\n      red = 0.0;\r\n    } else if (red > 1.0) {\r\n      red = 1.0;\r\n    }\r\n\r\n    if (green < 0.0) {\r\n      green = 0.0;\r\n    } else if (green > 1.0) {\r\n      green = 1.0;\r\n    }\r\n\r\n    if (blue < 0.0) {\r\n      blue = 0.0;\r\n    } else if (blue > 1.0) {\r\n      blue = 1.0;\r\n    }\r\n\r\n    if (alpha < 0.0) {\r\n      alpha = 0.0;\r\n    } else if (alpha > 1.0) {\r\n      alpha = 1.0;\r\n    }\r\n\r\n    this._modelColor.R = red;\r\n    this._modelColor.G = green;\r\n    this._modelColor.B = blue;\r\n    this._modelColor.A = alpha;\r\n  }\r\n\r\n  /**\r\n   * モデルの色を取得する\r\n   * 各色0.0~1.0の間で指定する(1.0が標準の状態)\r\n   *\r\n   * @return RGBAのカラー情報\r\n   */\r\n  public getModelColor(): CubismTextureColor {\r\n    return JSON.parse(JSON.stringify(this._modelColor));\r\n  }\r\n\r\n  /**\r\n   * 乗算済みαの有効・無効をセットする\r\n   * 有効にするならtrue、無効にするならfalseをセットする\r\n   */\r\n  public setIsPremultipliedAlpha(enable: boolean): void {\r\n    this._isPremultipliedAlpha = enable;\r\n  }\r\n\r\n  /**\r\n   * 乗算済みαの有効・無効を取得する\r\n   * @return true 乗算済みのα有効\r\n   * @return false 乗算済みのα無効\r\n   */\r\n  public isPremultipliedAlpha(): boolean {\r\n    return this._isPremultipliedAlpha;\r\n  }\r\n\r\n  /**\r\n   * カリング（片面描画）の有効・無効をセットする。\r\n   * 有効にするならtrue、無効にするならfalseをセットする\r\n   */\r\n  public setIsCulling(culling: boolean): void {\r\n    this._isCulling = culling;\r\n  }\r\n\r\n  /**\r\n   * カリング（片面描画）の有効・無効を取得する。\r\n   * @return true カリング有効\r\n   * @return false カリング無効\r\n   */\r\n  public isCulling(): boolean {\r\n    return this._isCulling;\r\n  }\r\n\r\n  /**\r\n   * テクスチャの異方性フィルタリングのパラメータをセットする\r\n   * パラメータ値の影響度はレンダラの実装に依存する\r\n   * @param n パラメータの値\r\n   */\r\n  public setAnisotropy(n: number): void {\r\n    this._anisotropy = n;\r\n  }\r\n\r\n  /**\r\n   * テクスチャの異方性フィルタリングのパラメータをセットする\r\n   * @return 異方性フィルタリングのパラメータ\r\n   */\r\n  public getAnisotropy(): number {\r\n    return this._anisotropy;\r\n  }\r\n\r\n  /**\r\n   * レンダリングするモデルを取得する\r\n   * @return レンダリングするモデル\r\n   */\r\n  public getModel(): CubismModel {\r\n    return this._model;\r\n  }\r\n\r\n  /**\r\n   * コンストラクタ\r\n   */\r\n  protected constructor() {\r\n    this._isCulling = false;\r\n    this._isPremultipliedAlpha = false;\r\n    this._anisotropy = 0.0;\r\n    this._model = null;\r\n    this._modelColor = new CubismTextureColor();\r\n\r\n    // 単位行列に初期化\r\n    this._mvpMatrix4x4 = new CubismMatrix44();\r\n    this._mvpMatrix4x4.loadIdentity();\r\n  }\r\n\r\n  /**\r\n   * モデル描画の実装\r\n   */\r\n  public abstract doDrawModel(): void;\r\n\r\n  /**\r\n   * 描画オブジェクト（アートメッシュ）を描画する\r\n   * ポリゴンメッシュとテクスチャ番号をセットで渡す。\r\n   * @param textureNo 描画するテクスチャ番号\r\n   * @param indexCount 描画オブジェクトのインデックス値\r\n   * @param vertexCount ポリゴンメッシュの頂点数\r\n   * @param indexArray ポリゴンメッシュ頂点のインデックス配列\r\n   * @param vertexArray ポリゴンメッシュの頂点配列\r\n   * @param uvArray uv配列\r\n   * @param opacity 不透明度\r\n   * @param colorBlendMode カラーブレンディングのタイプ\r\n   * @param invertedMask マスク使用時のマスクの反転使用\r\n   */\r\n  public abstract drawMesh(\r\n    textureNo: number,\r\n    indexCount: number,\r\n    vertexCount: number,\r\n    indexArray: Uint16Array,\r\n    vertexArray: Float32Array,\r\n    uvArray: Float32Array,\r\n    multiplyColor: CubismTextureColor,\r\n    screenColor: CubismTextureColor,\r\n    opacity: number,\r\n    colorBlendMode: CubismBlendMode,\r\n    invertedMask: boolean\r\n  ): void;\r\n\r\n  /**\r\n   * レンダラが保持する静的なリソースを開放する\r\n   */\r\n  public static staticRelease: any;\r\n\r\n  protected _mvpMatrix4x4: CubismMatrix44; // Model-View-Projection 行列\r\n  protected _modelColor: CubismTextureColor; // モデル自体のカラー（RGBA）\r\n  protected _isCulling: boolean; // カリングが有効ならtrue\r\n  protected _isPremultipliedAlpha: boolean; // 乗算済みαならtrue\r\n  protected _anisotropy: any; // テクスチャの異方性フィルタリングのパラメータ\r\n  protected _model: CubismModel; // レンダリング対象のモデル\r\n}\r\n\r\nexport enum CubismBlendMode {\r\n  CubismBlendMode_Normal = 0, // 通常\r\n  CubismBlendMode_Additive = 1, // 加算\r\n  CubismBlendMode_Multiplicative = 2, // 乗算\r\n}\r\n\r\n/**\r\n * テクスチャの色をRGBAで扱うためのクラス\r\n */\r\nexport class CubismTextureColor {\r\n  /**\r\n   * コンストラクタ\r\n   */\r\n  constructor() {\r\n    this.R = 1.0;\r\n    this.G = 1.0;\r\n    this.B = 1.0;\r\n    this.A = 1.0;\r\n  }\r\n\r\n  R: number; // 赤チャンネル\r\n  G: number; // 緑チャンネル\r\n  B: number; // 青チャンネル\r\n  A: number; // αチャンネル\r\n}\r\n\r\n// Namespace definition for compatibility.\r\nimport * as $ from './cubismrenderer';\r\n// eslint-disable-next-line @typescript-eslint/no-namespace\r\nexport namespace Live2DCubismFramework {\r\n  export const CubismBlendMode = $.CubismBlendMode;\r\n  export type CubismBlendMode = $.CubismBlendMode;\r\n  export const CubismRenderer = $.CubismRenderer;\r\n  export type CubismRenderer = $.CubismRenderer;\r\n  export const CubismTextureColor = $.CubismTextureColor;\r\n  export type CubismTextureColor = $.CubismTextureColor;\r\n}\r\n","/**\r\n * Copyright(c) Live2D Inc. All rights reserved.\r\n *\r\n * Use of this source code is governed by the Live2D Open Software license\r\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\r\n */\r\n\r\nimport { Constant } from '../live2dcubismframework';\r\nimport { CubismMatrix44 } from '../math/cubismmatrix44';\r\nimport { CubismModel } from '../model/cubismmodel';\r\nimport { csmMap } from '../type/csmmap';\r\nimport { csmRect } from '../type/csmrectf';\r\nimport { csmVector } from '../type/csmvector';\r\nimport { CubismLogError } from '../utils/cubismdebug';\r\nimport {\r\n  CubismBlendMode,\r\n  CubismRenderer,\r\n  CubismTextureColor,\r\n} from './cubismrenderer';\r\n\r\nconst ColorChannelCount = 4; // 実験時に1チャンネルの場合は1、RGBだけの場合は3、アルファも含める場合は4\r\n\r\nconst shaderCount = 10; // シェーダーの数 = マスク生成用 + (通常用 + 加算 + 乗算) * (マスク無の乗算済アルファ対応版 + マスク有の乗算済アルファ対応版 + マスク有反転の乗算済アルファ対応版)\r\nlet s_instance: CubismShader_WebGL;\r\nlet s_viewport: number[];\r\nlet s_fbo: WebGLFramebuffer;\r\n\r\n/**\r\n * クリッピングマスクの処理を実行するクラス\r\n */\r\nexport class CubismClippingManager_WebGL {\r\n  /**\r\n   * カラーチャンネル（RGBA）のフラグを取得する\r\n   * @param channelNo カラーチャンネル（RGBA）の番号（0:R, 1:G, 2:B, 3:A）\r\n   */\r\n  public getChannelFlagAsColor(channelNo: number): CubismTextureColor {\r\n    return this._channelColors.at(channelNo);\r\n  }\r\n\r\n  /**\r\n   * テンポラリのレンダーテクスチャのアドレスを取得する\r\n   * FrameBufferObjectが存在しない場合、新しく生成する\r\n   *\r\n   * @return レンダーテクスチャのアドレス\r\n   */\r\n  public getMaskRenderTexture(): WebGLFramebuffer {\r\n    let ret: WebGLFramebuffer = 0;\r\n\r\n    // テンポラリのRenderTextureを取得する\r\n    if (this._maskTexture && this._maskTexture.texture != 0) {\r\n      // 前回使ったものを返す\r\n      this._maskTexture.frameNo = this._currentFrameNo;\r\n      ret = this._maskTexture.texture;\r\n    }\r\n\r\n    if (ret == 0) {\r\n      // FrameBufferObjectが存在しない場合、新しく生成する\r\n\r\n      // クリッピングバッファサイズを取得\r\n      const size: number = this._clippingMaskBufferSize;\r\n\r\n      this._colorBuffer = this.gl.createTexture();\r\n      this.gl.bindTexture(this.gl.TEXTURE_2D, this._colorBuffer);\r\n      this.gl.texImage2D(\r\n        this.gl.TEXTURE_2D,\r\n        0,\r\n        this.gl.RGBA,\r\n        size,\r\n        size,\r\n        0,\r\n        this.gl.RGBA,\r\n        this.gl.UNSIGNED_BYTE,\r\n        null\r\n      );\r\n      this.gl.texParameteri(\r\n        this.gl.TEXTURE_2D,\r\n        this.gl.TEXTURE_WRAP_S,\r\n        this.gl.CLAMP_TO_EDGE\r\n      );\r\n      this.gl.texParameteri(\r\n        this.gl.TEXTURE_2D,\r\n        this.gl.TEXTURE_WRAP_T,\r\n        this.gl.CLAMP_TO_EDGE\r\n      );\r\n      this.gl.texParameteri(\r\n        this.gl.TEXTURE_2D,\r\n        this.gl.TEXTURE_MIN_FILTER,\r\n        this.gl.LINEAR\r\n      );\r\n      this.gl.texParameteri(\r\n        this.gl.TEXTURE_2D,\r\n        this.gl.TEXTURE_MAG_FILTER,\r\n        this.gl.LINEAR\r\n      );\r\n      this.gl.bindTexture(this.gl.TEXTURE_2D, null);\r\n\r\n      ret = this.gl.createFramebuffer();\r\n      this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, ret);\r\n      this.gl.framebufferTexture2D(\r\n        this.gl.FRAMEBUFFER,\r\n        this.gl.COLOR_ATTACHMENT0,\r\n        this.gl.TEXTURE_2D,\r\n        this._colorBuffer,\r\n        0\r\n      );\r\n      this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, s_fbo);\r\n\r\n      this._maskTexture = new CubismRenderTextureResource(\r\n        this._currentFrameNo,\r\n        ret\r\n      );\r\n    }\r\n\r\n    return ret;\r\n  }\r\n\r\n  /**\r\n   * WebGLレンダリングコンテキストを設定する\r\n   * @param gl WebGLレンダリングコンテキスト\r\n   */\r\n  public setGL(gl: WebGLRenderingContext): void {\r\n    this.gl = gl;\r\n  }\r\n\r\n  /**\r\n   * マスクされる描画オブジェクト群全体を囲む矩形（モデル座標系）を計算する\r\n   * @param model モデルのインスタンス\r\n   * @param clippingContext クリッピングマスクのコンテキスト\r\n   */\r\n  public calcClippedDrawTotalBounds(\r\n    model: CubismModel,\r\n    clippingContext: CubismClippingContext\r\n  ): void {\r\n    // 被クリッピングマスク（マスクされる描画オブジェクト）の全体の矩形\r\n    let clippedDrawTotalMinX: number = Number.MAX_VALUE;\r\n    let clippedDrawTotalMinY: number = Number.MAX_VALUE;\r\n    let clippedDrawTotalMaxX: number = Number.MIN_VALUE;\r\n    let clippedDrawTotalMaxY: number = Number.MIN_VALUE;\r\n\r\n    // このマスクが実際に必要か判定する\r\n    // このクリッピングを利用する「描画オブジェクト」がひとつでも使用可能であればマスクを生成する必要がある\r\n    const clippedDrawCount: number =\r\n      clippingContext._clippedDrawableIndexList.length;\r\n\r\n    for (\r\n      let clippedDrawableIndex = 0;\r\n      clippedDrawableIndex < clippedDrawCount;\r\n      clippedDrawableIndex++\r\n    ) {\r\n      // マスクを使用する描画オブジェクトの描画される矩形を求める\r\n      const drawableIndex: number =\r\n        clippingContext._clippedDrawableIndexList[clippedDrawableIndex];\r\n\r\n      const drawableVertexCount: number =\r\n        model.getDrawableVertexCount(drawableIndex);\r\n      const drawableVertexes: Float32Array =\r\n        model.getDrawableVertices(drawableIndex);\r\n\r\n      let minX: number = Number.MAX_VALUE;\r\n      let minY: number = Number.MAX_VALUE;\r\n      let maxX: number = Number.MIN_VALUE;\r\n      let maxY: number = Number.MIN_VALUE;\r\n\r\n      const loop: number = drawableVertexCount * Constant.vertexStep;\r\n      for (\r\n        let pi: number = Constant.vertexOffset;\r\n        pi < loop;\r\n        pi += Constant.vertexStep\r\n      ) {\r\n        const x: number = drawableVertexes[pi];\r\n        const y: number = drawableVertexes[pi + 1];\r\n\r\n        if (x < minX) {\r\n          minX = x;\r\n        }\r\n        if (x > maxX) {\r\n          maxX = x;\r\n        }\r\n        if (y < minY) {\r\n          minY = y;\r\n        }\r\n        if (y > maxY) {\r\n          maxY = y;\r\n        }\r\n      }\r\n\r\n      // 有効な点が一つも取れなかったのでスキップ\r\n      if (minX == Number.MAX_VALUE) {\r\n        continue;\r\n      }\r\n\r\n      // 全体の矩形に反映\r\n      if (minX < clippedDrawTotalMinX) {\r\n        clippedDrawTotalMinX = minX;\r\n      }\r\n      if (minY < clippedDrawTotalMinY) {\r\n        clippedDrawTotalMinY = minY;\r\n      }\r\n      if (maxX > clippedDrawTotalMaxX) {\r\n        clippedDrawTotalMaxX = maxX;\r\n      }\r\n      if (maxY > clippedDrawTotalMaxY) {\r\n        clippedDrawTotalMaxY = maxY;\r\n      }\r\n\r\n      if (clippedDrawTotalMinX == Number.MAX_VALUE) {\r\n        clippingContext._allClippedDrawRect.x = 0.0;\r\n        clippingContext._allClippedDrawRect.y = 0.0;\r\n        clippingContext._allClippedDrawRect.width = 0.0;\r\n        clippingContext._allClippedDrawRect.height = 0.0;\r\n        clippingContext._isUsing = false;\r\n      } else {\r\n        clippingContext._isUsing = true;\r\n        const w: number = clippedDrawTotalMaxX - clippedDrawTotalMinX;\r\n        const h: number = clippedDrawTotalMaxY - clippedDrawTotalMinY;\r\n        clippingContext._allClippedDrawRect.x = clippedDrawTotalMinX;\r\n        clippingContext._allClippedDrawRect.y = clippedDrawTotalMinY;\r\n        clippingContext._allClippedDrawRect.width = w;\r\n        clippingContext._allClippedDrawRect.height = h;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * コンストラクタ\r\n   */\r\n  public constructor() {\r\n    this._maskRenderTexture = null;\r\n    this._colorBuffer = null;\r\n    this._currentFrameNo = 0;\r\n    this._clippingMaskBufferSize = 256;\r\n    this._clippingContextListForMask = new csmVector<CubismClippingContext>();\r\n    this._clippingContextListForDraw = new csmVector<CubismClippingContext>();\r\n    this._channelColors = new csmVector<CubismTextureColor>();\r\n    this._tmpBoundsOnModel = new csmRect();\r\n    this._tmpMatrix = new CubismMatrix44();\r\n    this._tmpMatrixForMask = new CubismMatrix44();\r\n    this._tmpMatrixForDraw = new CubismMatrix44();\r\n    this._maskTexture = null;\r\n\r\n    let tmp: CubismTextureColor = new CubismTextureColor();\r\n    tmp.R = 1.0;\r\n    tmp.G = 0.0;\r\n    tmp.B = 0.0;\r\n    tmp.A = 0.0;\r\n    this._channelColors.pushBack(tmp);\r\n\r\n    tmp = new CubismTextureColor();\r\n    tmp.R = 0.0;\r\n    tmp.G = 1.0;\r\n    tmp.B = 0.0;\r\n    tmp.A = 0.0;\r\n    this._channelColors.pushBack(tmp);\r\n\r\n    tmp = new CubismTextureColor();\r\n    tmp.R = 0.0;\r\n    tmp.G = 0.0;\r\n    tmp.B = 1.0;\r\n    tmp.A = 0.0;\r\n    this._channelColors.pushBack(tmp);\r\n\r\n    tmp = new CubismTextureColor();\r\n    tmp.R = 0.0;\r\n    tmp.G = 0.0;\r\n    tmp.B = 0.0;\r\n    tmp.A = 1.0;\r\n    this._channelColors.pushBack(tmp);\r\n  }\r\n\r\n  /**\r\n   * デストラクタ相当の処理\r\n   */\r\n  public release(): void {\r\n    for (let i = 0; i < this._clippingContextListForMask.getSize(); i++) {\r\n      if (this._clippingContextListForMask.at(i)) {\r\n        this._clippingContextListForMask.at(i).release();\r\n        this._clippingContextListForMask.set(i, void 0);\r\n      }\r\n      this._clippingContextListForMask.set(i, null);\r\n    }\r\n    this._clippingContextListForMask = null;\r\n\r\n    // _clippingContextListForDrawは_clippingContextListForMaskにあるインスタンスを指している。上記の処理により要素ごとのDELETEは不要。\r\n    for (let i = 0; i < this._clippingContextListForDraw.getSize(); i++) {\r\n      this._clippingContextListForDraw.set(i, null);\r\n    }\r\n    this._clippingContextListForDraw = null;\r\n\r\n    if (this._maskTexture) {\r\n      this.gl.deleteFramebuffer(this._maskTexture.texture);\r\n      this._maskTexture = null;\r\n    }\r\n\r\n    for (let i = 0; i < this._channelColors.getSize(); i++) {\r\n      this._channelColors.set(i, null);\r\n    }\r\n\r\n    this._channelColors = null;\r\n\r\n    // テクスチャ解放\r\n    this.gl.deleteTexture(this._colorBuffer);\r\n    this._colorBuffer = null;\r\n  }\r\n\r\n  /**\r\n   * マネージャの初期化処理\r\n   * クリッピングマスクを使う描画オブジェクトの登録を行う\r\n   * @param model モデルのインスタンス\r\n   * @param drawableCount 描画オブジェクトの数\r\n   * @param drawableMasks 描画オブジェクトをマスクする描画オブジェクトのインデックスのリスト\r\n   * @param drawableCounts 描画オブジェクトをマスクする描画オブジェクトの数\r\n   */\r\n  public initialize(\r\n    model: CubismModel,\r\n    drawableCount: number,\r\n    drawableMasks: Int32Array[],\r\n    drawableMaskCounts: Int32Array\r\n  ): void {\r\n    // クリッピングマスクを使う描画オブジェクトをすべて登録する\r\n    // クリッピングマスクは、通常数個程度に限定して使うものとする\r\n    for (let i = 0; i < drawableCount; i++) {\r\n      if (drawableMaskCounts[i] <= 0) {\r\n        // クリッピングマスクが使用されていないアートメッシュ（多くの場合使用しない）\r\n        this._clippingContextListForDraw.pushBack(null);\r\n        continue;\r\n      }\r\n\r\n      // 既にあるClipContextと同じかチェックする\r\n      let clippingContext: CubismClippingContext = this.findSameClip(\r\n        drawableMasks[i],\r\n        drawableMaskCounts[i]\r\n      );\r\n      if (clippingContext == null) {\r\n        // 同一のマスクが存在していない場合は生成する\r\n        clippingContext = new CubismClippingContext(\r\n          this,\r\n          drawableMasks[i],\r\n          drawableMaskCounts[i]\r\n        );\r\n        this._clippingContextListForMask.pushBack(clippingContext);\r\n      }\r\n\r\n      clippingContext.addClippedDrawable(i);\r\n\r\n      this._clippingContextListForDraw.pushBack(clippingContext);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * クリッピングコンテキストを作成する。モデル描画時に実行する。\r\n   * @param model モデルのインスタンス\r\n   * @param renderer レンダラのインスタンス\r\n   */\r\n  public setupClippingContext(\r\n    model: CubismModel,\r\n    renderer: CubismRenderer_WebGL\r\n  ): void {\r\n    this._currentFrameNo++;\r\n\r\n    // 全てのクリッピングを用意する\r\n    // 同じクリップ（複数の場合はまとめて一つのクリップ）を使う場合は1度だけ設定する\r\n    let usingClipCount = 0;\r\n    for (\r\n      let clipIndex = 0;\r\n      clipIndex < this._clippingContextListForMask.getSize();\r\n      clipIndex++\r\n    ) {\r\n      // 1つのクリッピングマスクに関して\r\n      const cc: CubismClippingContext =\r\n        this._clippingContextListForMask.at(clipIndex);\r\n\r\n      // このクリップを利用する描画オブジェクト群全体を囲む矩形を計算\r\n      this.calcClippedDrawTotalBounds(model, cc);\r\n\r\n      if (cc._isUsing) {\r\n        usingClipCount++; // 使用中としてカウント\r\n      }\r\n    }\r\n\r\n    // マスク作成処理\r\n    if (usingClipCount > 0) {\r\n      // 生成したFrameBufferと同じサイズでビューポートを設定\r\n      this.gl.viewport(\r\n        0,\r\n        0,\r\n        this._clippingMaskBufferSize,\r\n        this._clippingMaskBufferSize\r\n      );\r\n\r\n      // マスクをactiveにする\r\n      this._maskRenderTexture = this.getMaskRenderTexture();\r\n\r\n      // モデル描画時にDrawMeshNowに渡される変換(モデルtoワールド座標変換)\r\n      const modelToWorldF: CubismMatrix44 = renderer.getMvpMatrix();\r\n\r\n      renderer.preDraw(); // バッファをクリアする\r\n\r\n      // 各マスクのレイアウトを決定していく\r\n      this.setupLayoutBounds(usingClipCount);\r\n\r\n      // ---------- マスク描画処理 ----------\r\n      // マスク用RenderTextureをactiveにセット\r\n      this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, this._maskRenderTexture);\r\n\r\n      // マスクをクリアする\r\n      // (仮仕様) 1が無効（描かれない）領域、0が有効（描かれる）領域。（シェーダーCd*Csで0に近い値をかけてマスクを作る。1をかけると何も起こらない）\r\n      this.gl.clearColor(1.0, 1.0, 1.0, 1.0);\r\n      this.gl.clear(this.gl.COLOR_BUFFER_BIT);\r\n\r\n      // 実際にマスクを生成する\r\n      // 全てのマスクをどのようにレイアウトして描くかを決定し、ClipContext, ClippedDrawContextに記憶する\r\n      for (\r\n        let clipIndex = 0;\r\n        clipIndex < this._clippingContextListForMask.getSize();\r\n        clipIndex++\r\n      ) {\r\n        // --- 実際に1つのマスクを描く ---\r\n        const clipContext: CubismClippingContext =\r\n          this._clippingContextListForMask.at(clipIndex);\r\n        const allClipedDrawRect: csmRect = clipContext._allClippedDrawRect; // このマスクを使う、すべての描画オブジェクトの論理座標上の囲み矩形\r\n        const layoutBoundsOnTex01: csmRect = clipContext._layoutBounds; // この中にマスクを収める\r\n\r\n        // モデル座標上の矩形を、適宜マージンを付けて使う\r\n        const MARGIN = 0.05;\r\n        this._tmpBoundsOnModel.setRect(allClipedDrawRect);\r\n        this._tmpBoundsOnModel.expand(\r\n          allClipedDrawRect.width * MARGIN,\r\n          allClipedDrawRect.height * MARGIN\r\n        );\r\n        //########## 本来は割り当てられた領域の全体を使わず必要最低限のサイズがよい\r\n\r\n        // シェーダ用の計算式を求める。回転を考慮しない場合は以下のとおり\r\n        // movePeriod' = movePeriod * scaleX + offX\t\t  [[ movePeriod' = (movePeriod - tmpBoundsOnModel.movePeriod)*scale + layoutBoundsOnTex01.movePeriod ]]\r\n        const scaleX: number =\r\n          layoutBoundsOnTex01.width / this._tmpBoundsOnModel.width;\r\n        const scaleY: number =\r\n          layoutBoundsOnTex01.height / this._tmpBoundsOnModel.height;\r\n\r\n        // マスク生成時に使う行列を求める\r\n        {\r\n          // シェーダに渡す行列を求める <<<<<<<<<<<<<<<<<<<<<<<< 要最適化（逆順に計算すればシンプルにできる）\r\n          this._tmpMatrix.loadIdentity();\r\n          {\r\n            // layout0..1 を -1..1に変換\r\n            this._tmpMatrix.translateRelative(-1.0, -1.0);\r\n            this._tmpMatrix.scaleRelative(2.0, 2.0);\r\n          }\r\n          {\r\n            // view to layout0..1\r\n            this._tmpMatrix.translateRelative(\r\n              layoutBoundsOnTex01.x,\r\n              layoutBoundsOnTex01.y\r\n            );\r\n            this._tmpMatrix.scaleRelative(scaleX, scaleY); // new = [translate][scale]\r\n            this._tmpMatrix.translateRelative(\r\n              -this._tmpBoundsOnModel.x,\r\n              -this._tmpBoundsOnModel.y\r\n            );\r\n            // new = [translate][scale][translate]\r\n          }\r\n          // tmpMatrixForMaskが計算結果\r\n          this._tmpMatrixForMask.setMatrix(this._tmpMatrix.getArray());\r\n        }\r\n\r\n        //--------- draw時の mask 参照用行列を計算\r\n        {\r\n          // シェーダに渡す行列を求める <<<<<<<<<<<<<<<<<<<<<<<< 要最適化（逆順に計算すればシンプルにできる）\r\n          this._tmpMatrix.loadIdentity();\r\n          {\r\n            this._tmpMatrix.translateRelative(\r\n              layoutBoundsOnTex01.x,\r\n              layoutBoundsOnTex01.y\r\n            );\r\n            this._tmpMatrix.scaleRelative(scaleX, scaleY); // new = [translate][scale]\r\n            this._tmpMatrix.translateRelative(\r\n              -this._tmpBoundsOnModel.x,\r\n              -this._tmpBoundsOnModel.y\r\n            );\r\n            // new = [translate][scale][translate]\r\n          }\r\n          this._tmpMatrixForDraw.setMatrix(this._tmpMatrix.getArray());\r\n        }\r\n        clipContext._matrixForMask.setMatrix(this._tmpMatrixForMask.getArray());\r\n        clipContext._matrixForDraw.setMatrix(this._tmpMatrixForDraw.getArray());\r\n\r\n        const clipDrawCount: number = clipContext._clippingIdCount;\r\n        for (let i = 0; i < clipDrawCount; i++) {\r\n          const clipDrawIndex: number = clipContext._clippingIdList[i];\r\n\r\n          // 頂点情報が更新されておらず、信頼性がない場合は描画をパスする\r\n          if (\r\n            !model.getDrawableDynamicFlagVertexPositionsDidChange(clipDrawIndex)\r\n          ) {\r\n            continue;\r\n          }\r\n\r\n          renderer.setIsCulling(\r\n            model.getDrawableCulling(clipDrawIndex) != false\r\n          );\r\n\r\n          // 今回専用の変換を適用して描く\r\n          // チャンネルも切り替える必要がある(A,R,G,B)\r\n          renderer.setClippingContextBufferForMask(clipContext);\r\n          renderer.drawMesh(\r\n            model.getDrawableTextureIndex(clipDrawIndex),\r\n            model.getDrawableVertexIndexCount(clipDrawIndex),\r\n            model.getDrawableVertexCount(clipDrawIndex),\r\n            model.getDrawableVertexIndices(clipDrawIndex),\r\n            model.getDrawableVertices(clipDrawIndex),\r\n            model.getDrawableVertexUvs(clipDrawIndex),\r\n            model.getMultiplyColor(clipDrawIndex),\r\n            model.getScreenColor(clipDrawIndex),\r\n            model.getDrawableOpacity(clipDrawIndex),\r\n            CubismBlendMode.CubismBlendMode_Normal, // クリッピングは通常描画を強制\r\n            false // マスク生成時はクリッピングの反転使用は全く関係がない\r\n          );\r\n        }\r\n      }\r\n\r\n      // --- 後処理 ---\r\n      this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, s_fbo); // 描画対象を戻す\r\n      renderer.setClippingContextBufferForMask(null);\r\n\r\n      this.gl.viewport(\r\n        s_viewport[0],\r\n        s_viewport[1],\r\n        s_viewport[2],\r\n        s_viewport[3]\r\n      );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 既にマスクを作っているかを確認\r\n   * 作っている様であれば該当するクリッピングマスクのインスタンスを返す\r\n   * 作っていなければNULLを返す\r\n   * @param drawableMasks 描画オブジェクトをマスクする描画オブジェクトのリスト\r\n   * @param drawableMaskCounts 描画オブジェクトをマスクする描画オブジェクトの数\r\n   * @return 該当するクリッピングマスクが存在すればインスタンスを返し、なければNULLを返す\r\n   */\r\n  public findSameClip(\r\n    drawableMasks: Int32Array,\r\n    drawableMaskCounts: number\r\n  ): CubismClippingContext {\r\n    // 作成済みClippingContextと一致するか確認\r\n    for (let i = 0; i < this._clippingContextListForMask.getSize(); i++) {\r\n      const clippingContext: CubismClippingContext =\r\n        this._clippingContextListForMask.at(i);\r\n      const count: number = clippingContext._clippingIdCount;\r\n\r\n      // 個数が違う場合は別物\r\n      if (count != drawableMaskCounts) {\r\n        continue;\r\n      }\r\n\r\n      let sameCount = 0;\r\n\r\n      // 同じIDを持つか確認。配列の数が同じなので、一致した個数が同じなら同じ物を持つとする\r\n      for (let j = 0; j < count; j++) {\r\n        const clipId: number = clippingContext._clippingIdList[j];\r\n\r\n        for (let k = 0; k < count; k++) {\r\n          if (drawableMasks[k] == clipId) {\r\n            sameCount++;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n\r\n      if (sameCount == count) {\r\n        return clippingContext;\r\n      }\r\n    }\r\n\r\n    return null; // 見つからなかった\r\n  }\r\n\r\n  /**\r\n   * クリッピングコンテキストを配置するレイアウト\r\n   * 一つのレンダーテクスチャを極力いっぱいに使ってマスクをレイアウトする\r\n   * マスクグループの数が4以下ならRGBA各チャンネルに一つずつマスクを配置し、5以上6以下ならRGBAを2,2,1,1と配置する。\r\n   *\r\n   * @param usingClipCount 配置するクリッピングコンテキストの数\r\n   */\r\n  public setupLayoutBounds(usingClipCount: number): void {\r\n    // ひとつのRenderTextureを極力いっぱいに使ってマスクをレイアウトする\r\n    // マスクグループの数が4以下ならRGBA各チャンネルに1つずつマスクを配置し、5以上6以下ならRGBAを2,2,1,1と配置する\r\n\r\n    // RGBAを順番に使っていく\r\n    let div: number = usingClipCount / ColorChannelCount; // 1チャンネルに配置する基本のマスク\r\n    let mod: number = usingClipCount % ColorChannelCount; // 余り、この番号のチャンネルまでに一つずつ配分する\r\n\r\n    // 小数点は切り捨てる\r\n    div = ~~div;\r\n    mod = ~~mod;\r\n\r\n    // RGBAそれぞれのチャンネルを用意していく（0:R, 1:G, 2:B, 3:A）\r\n    let curClipIndex = 0; // 順番に設定していく\r\n\r\n    for (let channelNo = 0; channelNo < ColorChannelCount; channelNo++) {\r\n      // このチャンネルにレイアウトする数\r\n      const layoutCount: number = div + (channelNo < mod ? 1 : 0);\r\n\r\n      // 分割方法を決定する\r\n      if (layoutCount == 0) {\r\n        // 何もしない\r\n      } else if (layoutCount == 1) {\r\n        // 全てをそのまま使う\r\n        const clipContext: CubismClippingContext =\r\n          this._clippingContextListForMask.at(curClipIndex++);\r\n        clipContext._layoutChannelNo = channelNo;\r\n        clipContext._layoutBounds.x = 0.0;\r\n        clipContext._layoutBounds.y = 0.0;\r\n        clipContext._layoutBounds.width = 1.0;\r\n        clipContext._layoutBounds.height = 1.0;\r\n      } else if (layoutCount == 2) {\r\n        for (let i = 0; i < layoutCount; i++) {\r\n          let xpos: number = i % 2;\r\n\r\n          // 小数点は切り捨てる\r\n          xpos = ~~xpos;\r\n\r\n          const cc: CubismClippingContext = this._clippingContextListForMask.at(\r\n            curClipIndex++\r\n          );\r\n          cc._layoutChannelNo = channelNo;\r\n\r\n          cc._layoutBounds.x = xpos * 0.5;\r\n          cc._layoutBounds.y = 0.0;\r\n          cc._layoutBounds.width = 0.5;\r\n          cc._layoutBounds.height = 1.0;\r\n          // UVを2つに分解して使う\r\n        }\r\n      } else if (layoutCount <= 4) {\r\n        // 4分割して使う\r\n        for (let i = 0; i < layoutCount; i++) {\r\n          let xpos: number = i % 2;\r\n          let ypos: number = i / 2;\r\n\r\n          // 小数点は切り捨てる\r\n          xpos = ~~xpos;\r\n          ypos = ~~ypos;\r\n\r\n          const cc = this._clippingContextListForMask.at(curClipIndex++);\r\n          cc._layoutChannelNo = channelNo;\r\n\r\n          cc._layoutBounds.x = xpos * 0.5;\r\n          cc._layoutBounds.y = ypos * 0.5;\r\n          cc._layoutBounds.width = 0.5;\r\n          cc._layoutBounds.height = 0.5;\r\n        }\r\n      } else if (layoutCount <= 9) {\r\n        // 9分割して使う\r\n        for (let i = 0; i < layoutCount; i++) {\r\n          let xpos = i % 3;\r\n          let ypos = i / 3;\r\n\r\n          // 小数点は切り捨てる\r\n          xpos = ~~xpos;\r\n          ypos = ~~ypos;\r\n\r\n          const cc: CubismClippingContext = this._clippingContextListForMask.at(\r\n            curClipIndex++\r\n          );\r\n          cc._layoutChannelNo = channelNo;\r\n\r\n          cc._layoutBounds.x = xpos / 3.0;\r\n          cc._layoutBounds.y = ypos / 3.0;\r\n          cc._layoutBounds.width = 1.0 / 3.0;\r\n          cc._layoutBounds.height = 1.0 / 3.0;\r\n        }\r\n      } else {\r\n        // マスクの制限枚数を超えた場合の処理\r\n        CubismLogError('not supported mask count : {0}', layoutCount);\r\n\r\n        // SetupShaderProgramでオーバーアクセスが発生するので仮で数値を入れる\r\n        // もちろん描画結果は正しいものではなくなる\r\n        for (let index = 0; index < layoutCount; index++) {\r\n          const cc: CubismClippingContext = this._clippingContextListForMask.at(\r\n            curClipIndex++\r\n          );\r\n\r\n          cc._layoutChannelNo = 0;\r\n\r\n          cc._layoutBounds.x = 0.0;\r\n          cc._layoutBounds.y = 0.0;\r\n          cc._layoutBounds.width = 1.0;\r\n          cc._layoutBounds.height = 1.0;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * カラーバッファを取得する\r\n   * @return カラーバッファ\r\n   */\r\n  public getColorBuffer(): WebGLTexture {\r\n    return this._colorBuffer;\r\n  }\r\n\r\n  /**\r\n   * 画面描画に使用するクリッピングマスクのリストを取得する\r\n   * @return 画面描画に使用するクリッピングマスクのリスト\r\n   */\r\n  public getClippingContextListForDraw(): csmVector<CubismClippingContext> {\r\n    return this._clippingContextListForDraw;\r\n  }\r\n\r\n  /**\r\n   * クリッピングマスクバッファのサイズを設定する\r\n   * @param size クリッピングマスクバッファのサイズ\r\n   */\r\n  public setClippingMaskBufferSize(size: number): void {\r\n    this._clippingMaskBufferSize = size;\r\n  }\r\n\r\n  /**\r\n   * クリッピングマスクバッファのサイズを取得する\r\n   * @return クリッピングマスクバッファのサイズ\r\n   */\r\n  public getClippingMaskBufferSize(): number {\r\n    return this._clippingMaskBufferSize;\r\n  }\r\n\r\n  public _maskRenderTexture: WebGLFramebuffer; // マスク用レンダーテクスチャのアドレス\r\n  public _colorBuffer: WebGLTexture; // マスク用カラーバッファーのアドレス\r\n  public _currentFrameNo: number; // マスクテクスチャに与えるフレーム番号\r\n\r\n  public _channelColors: csmVector<CubismTextureColor>;\r\n  public _maskTexture: CubismRenderTextureResource; // マスク用のテクスチャリソースのリスト\r\n  public _clippingContextListForMask: csmVector<CubismClippingContext>; // マスク用クリッピングコンテキストのリスト\r\n  public _clippingContextListForDraw: csmVector<CubismClippingContext>; // 描画用クリッピングコンテキストのリスト\r\n  public _clippingMaskBufferSize: number; // クリッピングマスクのバッファサイズ（初期値:256）\r\n\r\n  private _tmpMatrix: CubismMatrix44; // マスク計算用の行列\r\n  private _tmpMatrixForMask: CubismMatrix44; // マスク計算用の行列\r\n  private _tmpMatrixForDraw: CubismMatrix44; // マスク計算用の行列\r\n  private _tmpBoundsOnModel: csmRect; // マスク配置計算用の矩形\r\n\r\n  gl: WebGLRenderingContext; // WebGLレンダリングコンテキスト\r\n}\r\n\r\n/**\r\n * レンダーテクスチャのリソースを定義する構造体\r\n * クリッピングマスクで使用する\r\n */\r\nexport class CubismRenderTextureResource {\r\n  /**\r\n   * 引数付きコンストラクタ\r\n   * @param frameNo レンダラーのフレーム番号\r\n   * @param texture テクスチャのアドレス\r\n   */\r\n  public constructor(frameNo: number, texture: WebGLFramebuffer) {\r\n    this.frameNo = frameNo;\r\n    this.texture = texture;\r\n  }\r\n\r\n  public frameNo: number; // レンダラのフレーム番号\r\n  public texture: WebGLFramebuffer; // テクスチャのアドレス\r\n}\r\n\r\n/**\r\n * クリッピングマスクのコンテキスト\r\n */\r\nexport class CubismClippingContext {\r\n  /**\r\n   * 引数付きコンストラクタ\r\n   */\r\n  public constructor(\r\n    manager: CubismClippingManager_WebGL,\r\n    clippingDrawableIndices: Int32Array,\r\n    clipCount: number\r\n  ) {\r\n    this._owner = manager;\r\n\r\n    // クリップしている（＝マスク用の）Drawableのインデックスリスト\r\n    this._clippingIdList = clippingDrawableIndices;\r\n\r\n    // マスクの数\r\n    this._clippingIdCount = clipCount;\r\n\r\n    this._allClippedDrawRect = new csmRect();\r\n    this._layoutBounds = new csmRect();\r\n\r\n    this._clippedDrawableIndexList = [];\r\n\r\n    this._matrixForMask = new CubismMatrix44();\r\n    this._matrixForDraw = new CubismMatrix44();\r\n  }\r\n\r\n  /**\r\n   * デストラクタ相当の処理\r\n   */\r\n  public release(): void {\r\n    if (this._layoutBounds != null) {\r\n      this._layoutBounds = null;\r\n    }\r\n\r\n    if (this._allClippedDrawRect != null) {\r\n      this._allClippedDrawRect = null;\r\n    }\r\n\r\n    if (this._clippedDrawableIndexList != null) {\r\n      this._clippedDrawableIndexList = null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * このマスクにクリップされる描画オブジェクトを追加する\r\n   *\r\n   * @param drawableIndex クリッピング対象に追加する描画オブジェクトのインデックス\r\n   */\r\n  public addClippedDrawable(drawableIndex: number) {\r\n    this._clippedDrawableIndexList.push(drawableIndex);\r\n  }\r\n\r\n  /**\r\n   * このマスクを管理するマネージャのインスタンスを取得する\r\n   * @return クリッピングマネージャのインスタンス\r\n   */\r\n  public getClippingManager(): CubismClippingManager_WebGL {\r\n    return this._owner;\r\n  }\r\n\r\n  public setGl(gl: WebGLRenderingContext): void {\r\n    this._owner.setGL(gl);\r\n  }\r\n\r\n  public _isUsing: boolean; // 現在の描画状態でマスクの準備が必要ならtrue\r\n  public readonly _clippingIdList: Int32Array; // クリッピングマスクのIDリスト\r\n  public _clippingIdCount: number; // クリッピングマスクの数\r\n  public _layoutChannelNo: number; // RGBAのいずれのチャンネルにこのクリップを配置するか（0:R, 1:G, 2:B, 3:A）\r\n  public _layoutBounds: csmRect; // マスク用チャンネルのどの領域にマスクを入れるか（View座標-1~1, UVは0~1に直す）\r\n  public _allClippedDrawRect: csmRect; // このクリッピングで、クリッピングされるすべての描画オブジェクトの囲み矩形（毎回更新）\r\n  public _matrixForMask: CubismMatrix44; // マスクの位置計算結果を保持する行列\r\n  public _matrixForDraw: CubismMatrix44; // 描画オブジェクトの位置計算結果を保持する行列\r\n  public _clippedDrawableIndexList: number[]; // このマスクにクリップされる描画オブジェクトのリスト\r\n\r\n  private _owner: CubismClippingManager_WebGL; // このマスクを管理しているマネージャのインスタンス\r\n}\r\n\r\n/**\r\n * WebGL用のシェーダープログラムを生成・破棄するクラス\r\n * シングルトンなクラスであり、CubismShader_WebGL.getInstanceからアクセスする。\r\n */\r\nexport class CubismShader_WebGL {\r\n  /**\r\n   * インスタンスを取得する（シングルトン）\r\n   * @return インスタンス\r\n   */\r\n  public static getInstance(): CubismShader_WebGL {\r\n    if (s_instance == null) {\r\n      s_instance = new CubismShader_WebGL();\r\n\r\n      return s_instance;\r\n    }\r\n    return s_instance;\r\n  }\r\n\r\n  /**\r\n   * インスタンスを開放する（シングルトン）\r\n   */\r\n  public static deleteInstance(): void {\r\n    if (s_instance) {\r\n      s_instance.release();\r\n      s_instance = null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * privateなコンストラクタ\r\n   */\r\n  private constructor() {\r\n    this._shaderSets = new csmVector<CubismShaderSet>();\r\n  }\r\n\r\n  /**\r\n   * デストラクタ相当の処理\r\n   */\r\n  public release(): void {\r\n    this.releaseShaderProgram();\r\n  }\r\n\r\n  /**\r\n   * シェーダープログラムの一連のセットアップを実行する\r\n   * @param renderer レンダラのインスタンス\r\n   * @param textureId GPUのテクスチャID\r\n   * @param vertexCount ポリゴンメッシュの頂点数\r\n   * @param vertexArray ポリゴンメッシュの頂点配列\r\n   * @param indexArray インデックスバッファの頂点配列\r\n   * @param uvArray uv配列\r\n   * @param opacity 不透明度\r\n   * @param colorBlendMode カラーブレンディングのタイプ\r\n   * @param baseColor ベースカラー\r\n   * @param isPremultipliedAlpha 乗算済みアルファかどうか\r\n   * @param matrix4x4 Model-View-Projection行列\r\n   * @param invertedMask マスクを反転して使用するフラグ\r\n   */\r\n  public setupShaderProgram(\r\n    renderer: CubismRenderer_WebGL,\r\n    textureId: WebGLTexture,\r\n    vertexCount: number,\r\n    vertexArray: Float32Array,\r\n    indexArray: Uint16Array,\r\n    uvArray: Float32Array,\r\n    bufferData: {\r\n      vertex: WebGLBuffer;\r\n      uv: WebGLBuffer;\r\n      index: WebGLBuffer;\r\n    },\r\n    opacity: number,\r\n    colorBlendMode: CubismBlendMode,\r\n    baseColor: CubismTextureColor,\r\n    multiplyColor: CubismTextureColor,\r\n    screenColor: CubismTextureColor,\r\n    isPremultipliedAlpha: boolean,\r\n    matrix4x4: CubismMatrix44,\r\n    invertedMask: boolean\r\n  ): void {\r\n    if (!isPremultipliedAlpha) {\r\n      CubismLogError('NoPremultipliedAlpha is not allowed');\r\n    }\r\n\r\n    if (this._shaderSets.getSize() == 0) {\r\n      this.generateShaders();\r\n    }\r\n\r\n    // Blending\r\n    let SRC_COLOR: number;\r\n    let DST_COLOR: number;\r\n    let SRC_ALPHA: number;\r\n    let DST_ALPHA: number;\r\n\r\n    if (renderer.getClippingContextBufferForMask() != null) {\r\n      // マスク生成時\r\n      const shaderSet: CubismShaderSet = this._shaderSets.at(\r\n        ShaderNames.ShaderNames_SetupMask\r\n      );\r\n      this.gl.useProgram(shaderSet.shaderProgram);\r\n\r\n      // テクスチャ設定\r\n      this.gl.activeTexture(this.gl.TEXTURE0);\r\n      this.gl.bindTexture(this.gl.TEXTURE_2D, textureId);\r\n      this.gl.uniform1i(shaderSet.samplerTexture0Location, 0);\r\n\r\n      // 頂点配列の設定(VBO)\r\n      if (bufferData.vertex == null) {\r\n        bufferData.vertex = this.gl.createBuffer();\r\n      }\r\n      this.gl.bindBuffer(this.gl.ARRAY_BUFFER, bufferData.vertex);\r\n      this.gl.bufferData(\r\n        this.gl.ARRAY_BUFFER,\r\n        vertexArray,\r\n        this.gl.DYNAMIC_DRAW\r\n      );\r\n      this.gl.enableVertexAttribArray(shaderSet.attributePositionLocation);\r\n      this.gl.vertexAttribPointer(\r\n        shaderSet.attributePositionLocation,\r\n        2,\r\n        this.gl.FLOAT,\r\n        false,\r\n        0,\r\n        0\r\n      );\r\n\r\n      // テクスチャ頂点の設定\r\n      if (bufferData.uv == null) {\r\n        bufferData.uv = this.gl.createBuffer();\r\n      }\r\n      this.gl.bindBuffer(this.gl.ARRAY_BUFFER, bufferData.uv);\r\n      this.gl.bufferData(this.gl.ARRAY_BUFFER, uvArray, this.gl.DYNAMIC_DRAW);\r\n      this.gl.enableVertexAttribArray(shaderSet.attributeTexCoordLocation);\r\n      this.gl.vertexAttribPointer(\r\n        shaderSet.attributeTexCoordLocation,\r\n        2,\r\n        this.gl.FLOAT,\r\n        false,\r\n        0,\r\n        0\r\n      );\r\n\r\n      // チャンネル\r\n      const channelNo: number =\r\n        renderer.getClippingContextBufferForMask()._layoutChannelNo;\r\n      const colorChannel: CubismTextureColor = renderer\r\n        .getClippingContextBufferForMask()\r\n        .getClippingManager()\r\n        .getChannelFlagAsColor(channelNo);\r\n      this.gl.uniform4f(\r\n        shaderSet.uniformChannelFlagLocation,\r\n        colorChannel.R,\r\n        colorChannel.G,\r\n        colorChannel.B,\r\n        colorChannel.A\r\n      );\r\n\r\n      this.gl.uniformMatrix4fv(\r\n        shaderSet.uniformClipMatrixLocation,\r\n        false,\r\n        renderer.getClippingContextBufferForMask()._matrixForMask.getArray()\r\n      );\r\n\r\n      const rect: csmRect =\r\n        renderer.getClippingContextBufferForMask()._layoutBounds;\r\n\r\n      this.gl.uniform4f(\r\n        shaderSet.uniformBaseColorLocation,\r\n        rect.x * 2.0 - 1.0,\r\n        rect.y * 2.0 - 1.0,\r\n        rect.getRight() * 2.0 - 1.0,\r\n        rect.getBottom() * 2.0 - 1.0\r\n      );\r\n\r\n      this.gl.uniform4f(\r\n        shaderSet.uniformMultiplyColorLocation,\r\n        multiplyColor.R,\r\n        multiplyColor.G,\r\n        multiplyColor.B,\r\n        multiplyColor.A\r\n      );\r\n\r\n      this.gl.uniform4f(\r\n        shaderSet.uniformScreenColorLocation,\r\n        screenColor.R,\r\n        screenColor.G,\r\n        screenColor.B,\r\n        screenColor.A\r\n      );\r\n\r\n      SRC_COLOR = this.gl.ZERO;\r\n      DST_COLOR = this.gl.ONE_MINUS_SRC_COLOR;\r\n      SRC_ALPHA = this.gl.ZERO;\r\n      DST_ALPHA = this.gl.ONE_MINUS_SRC_ALPHA;\r\n    } // マスク生成以外の場合\r\n    else {\r\n      const masked: boolean =\r\n        renderer.getClippingContextBufferForDraw() != null; // この描画オブジェクトはマスク対象か\r\n      const offset: number = masked ? (invertedMask ? 2 : 1) : 0;\r\n\r\n      let shaderSet: CubismShaderSet = new CubismShaderSet();\r\n\r\n      switch (colorBlendMode) {\r\n        case CubismBlendMode.CubismBlendMode_Normal:\r\n        default:\r\n          shaderSet = this._shaderSets.at(\r\n            ShaderNames.ShaderNames_NormalPremultipliedAlpha + offset\r\n          );\r\n          SRC_COLOR = this.gl.ONE;\r\n          DST_COLOR = this.gl.ONE_MINUS_SRC_ALPHA;\r\n          SRC_ALPHA = this.gl.ONE;\r\n          DST_ALPHA = this.gl.ONE_MINUS_SRC_ALPHA;\r\n          break;\r\n\r\n        case CubismBlendMode.CubismBlendMode_Additive:\r\n          shaderSet = this._shaderSets.at(\r\n            ShaderNames.ShaderNames_AddPremultipliedAlpha + offset\r\n          );\r\n          SRC_COLOR = this.gl.ONE;\r\n          DST_COLOR = this.gl.ONE;\r\n          SRC_ALPHA = this.gl.ZERO;\r\n          DST_ALPHA = this.gl.ONE;\r\n          break;\r\n\r\n        case CubismBlendMode.CubismBlendMode_Multiplicative:\r\n          shaderSet = this._shaderSets.at(\r\n            ShaderNames.ShaderNames_MultPremultipliedAlpha + offset\r\n          );\r\n          SRC_COLOR = this.gl.DST_COLOR;\r\n          DST_COLOR = this.gl.ONE_MINUS_SRC_ALPHA;\r\n          SRC_ALPHA = this.gl.ZERO;\r\n          DST_ALPHA = this.gl.ONE;\r\n          break;\r\n      }\r\n\r\n      this.gl.useProgram(shaderSet.shaderProgram);\r\n\r\n      // 頂点配列の設定\r\n      if (bufferData.vertex == null) {\r\n        bufferData.vertex = this.gl.createBuffer();\r\n      }\r\n      this.gl.bindBuffer(this.gl.ARRAY_BUFFER, bufferData.vertex);\r\n      this.gl.bufferData(\r\n        this.gl.ARRAY_BUFFER,\r\n        vertexArray,\r\n        this.gl.DYNAMIC_DRAW\r\n      );\r\n      this.gl.enableVertexAttribArray(shaderSet.attributePositionLocation);\r\n      this.gl.vertexAttribPointer(\r\n        shaderSet.attributePositionLocation,\r\n        2,\r\n        this.gl.FLOAT,\r\n        false,\r\n        0,\r\n        0\r\n      );\r\n\r\n      // テクスチャ頂点の設定\r\n      if (bufferData.uv == null) {\r\n        bufferData.uv = this.gl.createBuffer();\r\n      }\r\n      this.gl.bindBuffer(this.gl.ARRAY_BUFFER, bufferData.uv);\r\n      this.gl.bufferData(this.gl.ARRAY_BUFFER, uvArray, this.gl.DYNAMIC_DRAW);\r\n      this.gl.enableVertexAttribArray(shaderSet.attributeTexCoordLocation);\r\n      this.gl.vertexAttribPointer(\r\n        shaderSet.attributeTexCoordLocation,\r\n        2,\r\n        this.gl.FLOAT,\r\n        false,\r\n        0,\r\n        0\r\n      );\r\n\r\n      if (masked) {\r\n        this.gl.activeTexture(this.gl.TEXTURE1);\r\n        const tex: WebGLTexture = renderer\r\n          .getClippingContextBufferForDraw()\r\n          .getClippingManager()\r\n          .getColorBuffer();\r\n        this.gl.bindTexture(this.gl.TEXTURE_2D, tex);\r\n        this.gl.uniform1i(shaderSet.samplerTexture1Location, 1);\r\n\r\n        // view座標をClippingContextの座標に変換するための行列を設定\r\n        this.gl.uniformMatrix4fv(\r\n          shaderSet.uniformClipMatrixLocation,\r\n          false,\r\n          renderer.getClippingContextBufferForDraw()._matrixForDraw.getArray()\r\n        );\r\n\r\n        // 使用するカラーチャンネルを設定\r\n        const channelNo: number =\r\n          renderer.getClippingContextBufferForDraw()._layoutChannelNo;\r\n        const colorChannel: CubismTextureColor = renderer\r\n          .getClippingContextBufferForDraw()\r\n          .getClippingManager()\r\n          .getChannelFlagAsColor(channelNo);\r\n        this.gl.uniform4f(\r\n          shaderSet.uniformChannelFlagLocation,\r\n          colorChannel.R,\r\n          colorChannel.G,\r\n          colorChannel.B,\r\n          colorChannel.A\r\n        );\r\n      }\r\n\r\n      // テクスチャ設定\r\n      this.gl.activeTexture(this.gl.TEXTURE0);\r\n      this.gl.bindTexture(this.gl.TEXTURE_2D, textureId);\r\n      this.gl.uniform1i(shaderSet.samplerTexture0Location, 0);\r\n\r\n      // 座標変換\r\n      this.gl.uniformMatrix4fv(\r\n        shaderSet.uniformMatrixLocation,\r\n        false,\r\n        matrix4x4.getArray()\r\n      );\r\n\r\n      this.gl.uniform4f(\r\n        shaderSet.uniformBaseColorLocation,\r\n        baseColor.R,\r\n        baseColor.G,\r\n        baseColor.B,\r\n        baseColor.A\r\n      );\r\n\r\n      this.gl.uniform4f(\r\n        shaderSet.uniformMultiplyColorLocation,\r\n        multiplyColor.R,\r\n        multiplyColor.G,\r\n        multiplyColor.B,\r\n        multiplyColor.A\r\n      );\r\n\r\n      this.gl.uniform4f(\r\n        shaderSet.uniformScreenColorLocation,\r\n        screenColor.R,\r\n        screenColor.G,\r\n        screenColor.B,\r\n        screenColor.A\r\n      );\r\n    }\r\n\r\n    // IBOを作成し、データを転送\r\n    if (bufferData.index == null) {\r\n      bufferData.index = this.gl.createBuffer();\r\n    }\r\n    this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, bufferData.index);\r\n    this.gl.bufferData(\r\n      this.gl.ELEMENT_ARRAY_BUFFER,\r\n      indexArray,\r\n      this.gl.DYNAMIC_DRAW\r\n    );\r\n    this.gl.blendFuncSeparate(SRC_COLOR, DST_COLOR, SRC_ALPHA, DST_ALPHA);\r\n  }\r\n\r\n  /**\r\n   * シェーダープログラムを解放する\r\n   */\r\n  public releaseShaderProgram(): void {\r\n    for (let i = 0; i < this._shaderSets.getSize(); i++) {\r\n      this.gl.deleteProgram(this._shaderSets.at(i).shaderProgram);\r\n      this._shaderSets.at(i).shaderProgram = 0;\r\n      this._shaderSets.set(i, void 0);\r\n      this._shaderSets.set(i, null);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * シェーダープログラムを初期化する\r\n   * @param vertShaderSrc 頂点シェーダのソース\r\n   * @param fragShaderSrc フラグメントシェーダのソース\r\n   */\r\n  public generateShaders(): void {\r\n    for (let i = 0; i < shaderCount; i++) {\r\n      this._shaderSets.pushBack(new CubismShaderSet());\r\n    }\r\n\r\n    this._shaderSets.at(0).shaderProgram = this.loadShaderProgram(\r\n      vertexShaderSrcSetupMask,\r\n      fragmentShaderSrcsetupMask\r\n    );\r\n\r\n    this._shaderSets.at(1).shaderProgram = this.loadShaderProgram(\r\n      vertexShaderSrc,\r\n      fragmentShaderSrcPremultipliedAlpha\r\n    );\r\n    this._shaderSets.at(2).shaderProgram = this.loadShaderProgram(\r\n      vertexShaderSrcMasked,\r\n      fragmentShaderSrcMaskPremultipliedAlpha\r\n    );\r\n    this._shaderSets.at(3).shaderProgram = this.loadShaderProgram(\r\n      vertexShaderSrcMasked,\r\n      fragmentShaderSrcMaskInvertedPremultipliedAlpha\r\n    );\r\n\r\n    // 加算も通常と同じシェーダーを利用する\r\n    this._shaderSets.at(4).shaderProgram = this._shaderSets.at(1).shaderProgram;\r\n    this._shaderSets.at(5).shaderProgram = this._shaderSets.at(2).shaderProgram;\r\n    this._shaderSets.at(6).shaderProgram = this._shaderSets.at(3).shaderProgram;\r\n\r\n    // 乗算も通常と同じシェーダーを利用する\r\n    this._shaderSets.at(7).shaderProgram = this._shaderSets.at(1).shaderProgram;\r\n    this._shaderSets.at(8).shaderProgram = this._shaderSets.at(2).shaderProgram;\r\n    this._shaderSets.at(9).shaderProgram = this._shaderSets.at(3).shaderProgram;\r\n\r\n    // SetupMask\r\n    this._shaderSets.at(0).attributePositionLocation =\r\n      this.gl.getAttribLocation(\r\n        this._shaderSets.at(0).shaderProgram,\r\n        'a_position'\r\n      );\r\n    this._shaderSets.at(0).attributeTexCoordLocation =\r\n      this.gl.getAttribLocation(\r\n        this._shaderSets.at(0).shaderProgram,\r\n        'a_texCoord'\r\n      );\r\n    this._shaderSets.at(0).samplerTexture0Location = this.gl.getUniformLocation(\r\n      this._shaderSets.at(0).shaderProgram,\r\n      's_texture0'\r\n    );\r\n    this._shaderSets.at(0).uniformClipMatrixLocation =\r\n      this.gl.getUniformLocation(\r\n        this._shaderSets.at(0).shaderProgram,\r\n        'u_clipMatrix'\r\n      );\r\n    this._shaderSets.at(0).uniformChannelFlagLocation =\r\n      this.gl.getUniformLocation(\r\n        this._shaderSets.at(0).shaderProgram,\r\n        'u_channelFlag'\r\n      );\r\n    this._shaderSets.at(0).uniformBaseColorLocation =\r\n      this.gl.getUniformLocation(\r\n        this._shaderSets.at(0).shaderProgram,\r\n        'u_baseColor'\r\n      );\r\n    this._shaderSets.at(0).uniformMultiplyColorLocation =\r\n      this.gl.getUniformLocation(\r\n        this._shaderSets.at(0).shaderProgram,\r\n        'u_multiplyColor'\r\n      );\r\n    this._shaderSets.at(0).uniformScreenColorLocation =\r\n      this.gl.getUniformLocation(\r\n        this._shaderSets.at(0).shaderProgram,\r\n        'u_screenColor'\r\n      );\r\n\r\n    // 通常（PremultipliedAlpha）\r\n    this._shaderSets.at(1).attributePositionLocation =\r\n      this.gl.getAttribLocation(\r\n        this._shaderSets.at(1).shaderProgram,\r\n        'a_position'\r\n      );\r\n    this._shaderSets.at(1).attributeTexCoordLocation =\r\n      this.gl.getAttribLocation(\r\n        this._shaderSets.at(1).shaderProgram,\r\n        'a_texCoord'\r\n      );\r\n    this._shaderSets.at(1).samplerTexture0Location = this.gl.getUniformLocation(\r\n      this._shaderSets.at(1).shaderProgram,\r\n      's_texture0'\r\n    );\r\n    this._shaderSets.at(1).uniformMatrixLocation = this.gl.getUniformLocation(\r\n      this._shaderSets.at(1).shaderProgram,\r\n      'u_matrix'\r\n    );\r\n    this._shaderSets.at(1).uniformBaseColorLocation =\r\n      this.gl.getUniformLocation(\r\n        this._shaderSets.at(1).shaderProgram,\r\n        'u_baseColor'\r\n      );\r\n    this._shaderSets.at(1).uniformMultiplyColorLocation =\r\n      this.gl.getUniformLocation(\r\n        this._shaderSets.at(1).shaderProgram,\r\n        'u_multiplyColor'\r\n      );\r\n    this._shaderSets.at(1).uniformScreenColorLocation =\r\n      this.gl.getUniformLocation(\r\n        this._shaderSets.at(1).shaderProgram,\r\n        'u_screenColor'\r\n      );\r\n\r\n    // 通常（クリッピング、PremultipliedAlpha）\r\n    this._shaderSets.at(2).attributePositionLocation =\r\n      this.gl.getAttribLocation(\r\n        this._shaderSets.at(2).shaderProgram,\r\n        'a_position'\r\n      );\r\n    this._shaderSets.at(2).attributeTexCoordLocation =\r\n      this.gl.getAttribLocation(\r\n        this._shaderSets.at(2).shaderProgram,\r\n        'a_texCoord'\r\n      );\r\n    this._shaderSets.at(2).samplerTexture0Location = this.gl.getUniformLocation(\r\n      this._shaderSets.at(2).shaderProgram,\r\n      's_texture0'\r\n    );\r\n    this._shaderSets.at(2).samplerTexture1Location = this.gl.getUniformLocation(\r\n      this._shaderSets.at(2).shaderProgram,\r\n      's_texture1'\r\n    );\r\n    this._shaderSets.at(2).uniformMatrixLocation = this.gl.getUniformLocation(\r\n      this._shaderSets.at(2).shaderProgram,\r\n      'u_matrix'\r\n    );\r\n    this._shaderSets.at(2).uniformClipMatrixLocation =\r\n      this.gl.getUniformLocation(\r\n        this._shaderSets.at(2).shaderProgram,\r\n        'u_clipMatrix'\r\n      );\r\n    this._shaderSets.at(2).uniformChannelFlagLocation =\r\n      this.gl.getUniformLocation(\r\n        this._shaderSets.at(2).shaderProgram,\r\n        'u_channelFlag'\r\n      );\r\n    this._shaderSets.at(2).uniformBaseColorLocation =\r\n      this.gl.getUniformLocation(\r\n        this._shaderSets.at(2).shaderProgram,\r\n        'u_baseColor'\r\n      );\r\n    this._shaderSets.at(2).uniformMultiplyColorLocation =\r\n      this.gl.getUniformLocation(\r\n        this._shaderSets.at(2).shaderProgram,\r\n        'u_multiplyColor'\r\n      );\r\n    this._shaderSets.at(2).uniformScreenColorLocation =\r\n      this.gl.getUniformLocation(\r\n        this._shaderSets.at(2).shaderProgram,\r\n        'u_screenColor'\r\n      );\r\n\r\n    // 通常（クリッピング・反転, PremultipliedAlpha）\r\n    this._shaderSets.at(3).attributePositionLocation =\r\n      this.gl.getAttribLocation(\r\n        this._shaderSets.at(3).shaderProgram,\r\n        'a_position'\r\n      );\r\n    this._shaderSets.at(3).attributeTexCoordLocation =\r\n      this.gl.getAttribLocation(\r\n        this._shaderSets.at(3).shaderProgram,\r\n        'a_texCoord'\r\n      );\r\n    this._shaderSets.at(3).samplerTexture0Location = this.gl.getUniformLocation(\r\n      this._shaderSets.at(3).shaderProgram,\r\n      's_texture0'\r\n    );\r\n    this._shaderSets.at(3).samplerTexture1Location = this.gl.getUniformLocation(\r\n      this._shaderSets.at(3).shaderProgram,\r\n      's_texture1'\r\n    );\r\n    this._shaderSets.at(3).uniformMatrixLocation = this.gl.getUniformLocation(\r\n      this._shaderSets.at(3).shaderProgram,\r\n      'u_matrix'\r\n    );\r\n    this._shaderSets.at(3).uniformClipMatrixLocation =\r\n      this.gl.getUniformLocation(\r\n        this._shaderSets.at(3).shaderProgram,\r\n        'u_clipMatrix'\r\n      );\r\n    this._shaderSets.at(3).uniformChannelFlagLocation =\r\n      this.gl.getUniformLocation(\r\n        this._shaderSets.at(3).shaderProgram,\r\n        'u_channelFlag'\r\n      );\r\n    this._shaderSets.at(3).uniformBaseColorLocation =\r\n      this.gl.getUniformLocation(\r\n        this._shaderSets.at(3).shaderProgram,\r\n        'u_baseColor'\r\n      );\r\n    this._shaderSets.at(3).uniformMultiplyColorLocation =\r\n      this.gl.getUniformLocation(\r\n        this._shaderSets.at(3).shaderProgram,\r\n        'u_multiplyColor'\r\n      );\r\n    this._shaderSets.at(3).uniformScreenColorLocation =\r\n      this.gl.getUniformLocation(\r\n        this._shaderSets.at(3).shaderProgram,\r\n        'u_screenColor'\r\n      );\r\n\r\n    // 加算（PremultipliedAlpha）\r\n    this._shaderSets.at(4).attributePositionLocation =\r\n      this.gl.getAttribLocation(\r\n        this._shaderSets.at(4).shaderProgram,\r\n        'a_position'\r\n      );\r\n    this._shaderSets.at(4).attributeTexCoordLocation =\r\n      this.gl.getAttribLocation(\r\n        this._shaderSets.at(4).shaderProgram,\r\n        'a_texCoord'\r\n      );\r\n    this._shaderSets.at(4).samplerTexture0Location = this.gl.getUniformLocation(\r\n      this._shaderSets.at(4).shaderProgram,\r\n      's_texture0'\r\n    );\r\n    this._shaderSets.at(4).uniformMatrixLocation = this.gl.getUniformLocation(\r\n      this._shaderSets.at(4).shaderProgram,\r\n      'u_matrix'\r\n    );\r\n    this._shaderSets.at(4).uniformBaseColorLocation =\r\n      this.gl.getUniformLocation(\r\n        this._shaderSets.at(4).shaderProgram,\r\n        'u_baseColor'\r\n      );\r\n    this._shaderSets.at(4).uniformMultiplyColorLocation =\r\n      this.gl.getUniformLocation(\r\n        this._shaderSets.at(4).shaderProgram,\r\n        'u_multiplyColor'\r\n      );\r\n    this._shaderSets.at(4).uniformScreenColorLocation =\r\n      this.gl.getUniformLocation(\r\n        this._shaderSets.at(4).shaderProgram,\r\n        'u_screenColor'\r\n      );\r\n\r\n    // 加算（クリッピング、PremultipliedAlpha）\r\n    this._shaderSets.at(5).attributePositionLocation =\r\n      this.gl.getAttribLocation(\r\n        this._shaderSets.at(5).shaderProgram,\r\n        'a_position'\r\n      );\r\n    this._shaderSets.at(5).attributeTexCoordLocation =\r\n      this.gl.getAttribLocation(\r\n        this._shaderSets.at(5).shaderProgram,\r\n        'a_texCoord'\r\n      );\r\n    this._shaderSets.at(5).samplerTexture0Location = this.gl.getUniformLocation(\r\n      this._shaderSets.at(5).shaderProgram,\r\n      's_texture0'\r\n    );\r\n    this._shaderSets.at(5).samplerTexture1Location = this.gl.getUniformLocation(\r\n      this._shaderSets.at(5).shaderProgram,\r\n      's_texture1'\r\n    );\r\n    this._shaderSets.at(5).uniformMatrixLocation = this.gl.getUniformLocation(\r\n      this._shaderSets.at(5).shaderProgram,\r\n      'u_matrix'\r\n    );\r\n    this._shaderSets.at(5).uniformClipMatrixLocation =\r\n      this.gl.getUniformLocation(\r\n        this._shaderSets.at(5).shaderProgram,\r\n        'u_clipMatrix'\r\n      );\r\n    this._shaderSets.at(5).uniformChannelFlagLocation =\r\n      this.gl.getUniformLocation(\r\n        this._shaderSets.at(5).shaderProgram,\r\n        'u_channelFlag'\r\n      );\r\n    this._shaderSets.at(5).uniformBaseColorLocation =\r\n      this.gl.getUniformLocation(\r\n        this._shaderSets.at(5).shaderProgram,\r\n        'u_baseColor'\r\n      );\r\n    this._shaderSets.at(5).uniformMultiplyColorLocation =\r\n      this.gl.getUniformLocation(\r\n        this._shaderSets.at(5).shaderProgram,\r\n        'u_multiplyColor'\r\n      );\r\n    this._shaderSets.at(5).uniformScreenColorLocation =\r\n      this.gl.getUniformLocation(\r\n        this._shaderSets.at(5).shaderProgram,\r\n        'u_screenColor'\r\n      );\r\n\r\n    // 加算（クリッピング・反転、PremultipliedAlpha）\r\n    this._shaderSets.at(6).attributePositionLocation =\r\n      this.gl.getAttribLocation(\r\n        this._shaderSets.at(6).shaderProgram,\r\n        'a_position'\r\n      );\r\n    this._shaderSets.at(6).attributeTexCoordLocation =\r\n      this.gl.getAttribLocation(\r\n        this._shaderSets.at(6).shaderProgram,\r\n        'a_texCoord'\r\n      );\r\n    this._shaderSets.at(6).samplerTexture0Location = this.gl.getUniformLocation(\r\n      this._shaderSets.at(6).shaderProgram,\r\n      's_texture0'\r\n    );\r\n    this._shaderSets.at(6).samplerTexture1Location = this.gl.getUniformLocation(\r\n      this._shaderSets.at(6).shaderProgram,\r\n      's_texture1'\r\n    );\r\n    this._shaderSets.at(6).uniformMatrixLocation = this.gl.getUniformLocation(\r\n      this._shaderSets.at(6).shaderProgram,\r\n      'u_matrix'\r\n    );\r\n    this._shaderSets.at(6).uniformClipMatrixLocation =\r\n      this.gl.getUniformLocation(\r\n        this._shaderSets.at(6).shaderProgram,\r\n        'u_clipMatrix'\r\n      );\r\n    this._shaderSets.at(6).uniformChannelFlagLocation =\r\n      this.gl.getUniformLocation(\r\n        this._shaderSets.at(6).shaderProgram,\r\n        'u_channelFlag'\r\n      );\r\n    this._shaderSets.at(6).uniformBaseColorLocation =\r\n      this.gl.getUniformLocation(\r\n        this._shaderSets.at(6).shaderProgram,\r\n        'u_baseColor'\r\n      );\r\n    this._shaderSets.at(6).uniformMultiplyColorLocation =\r\n      this.gl.getUniformLocation(\r\n        this._shaderSets.at(6).shaderProgram,\r\n        'u_multiplyColor'\r\n      );\r\n    this._shaderSets.at(6).uniformScreenColorLocation =\r\n      this.gl.getUniformLocation(\r\n        this._shaderSets.at(6).shaderProgram,\r\n        'u_screenColor'\r\n      );\r\n\r\n    // 乗算（PremultipliedAlpha）\r\n    this._shaderSets.at(7).attributePositionLocation =\r\n      this.gl.getAttribLocation(\r\n        this._shaderSets.at(7).shaderProgram,\r\n        'a_position'\r\n      );\r\n    this._shaderSets.at(7).attributeTexCoordLocation =\r\n      this.gl.getAttribLocation(\r\n        this._shaderSets.at(7).shaderProgram,\r\n        'a_texCoord'\r\n      );\r\n    this._shaderSets.at(7).samplerTexture0Location = this.gl.getUniformLocation(\r\n      this._shaderSets.at(7).shaderProgram,\r\n      's_texture0'\r\n    );\r\n    this._shaderSets.at(7).uniformMatrixLocation = this.gl.getUniformLocation(\r\n      this._shaderSets.at(7).shaderProgram,\r\n      'u_matrix'\r\n    );\r\n    this._shaderSets.at(7).uniformBaseColorLocation =\r\n      this.gl.getUniformLocation(\r\n        this._shaderSets.at(7).shaderProgram,\r\n        'u_baseColor'\r\n      );\r\n    this._shaderSets.at(7).uniformMultiplyColorLocation =\r\n      this.gl.getUniformLocation(\r\n        this._shaderSets.at(7).shaderProgram,\r\n        'u_multiplyColor'\r\n      );\r\n    this._shaderSets.at(7).uniformScreenColorLocation =\r\n      this.gl.getUniformLocation(\r\n        this._shaderSets.at(7).shaderProgram,\r\n        'u_screenColor'\r\n      );\r\n\r\n    // 乗算（クリッピング、PremultipliedAlpha）\r\n    this._shaderSets.at(8).attributePositionLocation =\r\n      this.gl.getAttribLocation(\r\n        this._shaderSets.at(8).shaderProgram,\r\n        'a_position'\r\n      );\r\n    this._shaderSets.at(8).attributeTexCoordLocation =\r\n      this.gl.getAttribLocation(\r\n        this._shaderSets.at(8).shaderProgram,\r\n        'a_texCoord'\r\n      );\r\n    this._shaderSets.at(8).samplerTexture0Location = this.gl.getUniformLocation(\r\n      this._shaderSets.at(8).shaderProgram,\r\n      's_texture0'\r\n    );\r\n    this._shaderSets.at(8).samplerTexture1Location = this.gl.getUniformLocation(\r\n      this._shaderSets.at(8).shaderProgram,\r\n      's_texture1'\r\n    );\r\n    this._shaderSets.at(8).uniformMatrixLocation = this.gl.getUniformLocation(\r\n      this._shaderSets.at(8).shaderProgram,\r\n      'u_matrix'\r\n    );\r\n    this._shaderSets.at(8).uniformClipMatrixLocation =\r\n      this.gl.getUniformLocation(\r\n        this._shaderSets.at(8).shaderProgram,\r\n        'u_clipMatrix'\r\n      );\r\n    this._shaderSets.at(8).uniformChannelFlagLocation =\r\n      this.gl.getUniformLocation(\r\n        this._shaderSets.at(8).shaderProgram,\r\n        'u_channelFlag'\r\n      );\r\n    this._shaderSets.at(8).uniformBaseColorLocation =\r\n      this.gl.getUniformLocation(\r\n        this._shaderSets.at(8).shaderProgram,\r\n        'u_baseColor'\r\n      );\r\n    this._shaderSets.at(8).uniformMultiplyColorLocation =\r\n      this.gl.getUniformLocation(\r\n        this._shaderSets.at(8).shaderProgram,\r\n        'u_multiplyColor'\r\n      );\r\n    this._shaderSets.at(8).uniformScreenColorLocation =\r\n      this.gl.getUniformLocation(\r\n        this._shaderSets.at(8).shaderProgram,\r\n        'u_screenColor'\r\n      );\r\n\r\n    // 乗算（クリッピング・反転、PremultipliedAlpha）\r\n    this._shaderSets.at(9).attributePositionLocation =\r\n      this.gl.getAttribLocation(\r\n        this._shaderSets.at(9).shaderProgram,\r\n        'a_position'\r\n      );\r\n    this._shaderSets.at(9).attributeTexCoordLocation =\r\n      this.gl.getAttribLocation(\r\n        this._shaderSets.at(9).shaderProgram,\r\n        'a_texCoord'\r\n      );\r\n    this._shaderSets.at(9).samplerTexture0Location = this.gl.getUniformLocation(\r\n      this._shaderSets.at(9).shaderProgram,\r\n      's_texture0'\r\n    );\r\n    this._shaderSets.at(9).samplerTexture1Location = this.gl.getUniformLocation(\r\n      this._shaderSets.at(9).shaderProgram,\r\n      's_texture1'\r\n    );\r\n    this._shaderSets.at(9).uniformMatrixLocation = this.gl.getUniformLocation(\r\n      this._shaderSets.at(9).shaderProgram,\r\n      'u_matrix'\r\n    );\r\n    this._shaderSets.at(9).uniformClipMatrixLocation =\r\n      this.gl.getUniformLocation(\r\n        this._shaderSets.at(9).shaderProgram,\r\n        'u_clipMatrix'\r\n      );\r\n    this._shaderSets.at(9).uniformChannelFlagLocation =\r\n      this.gl.getUniformLocation(\r\n        this._shaderSets.at(9).shaderProgram,\r\n        'u_channelFlag'\r\n      );\r\n    this._shaderSets.at(9).uniformBaseColorLocation =\r\n      this.gl.getUniformLocation(\r\n        this._shaderSets.at(9).shaderProgram,\r\n        'u_baseColor'\r\n      );\r\n    this._shaderSets.at(9).uniformMultiplyColorLocation =\r\n      this.gl.getUniformLocation(\r\n        this._shaderSets.at(9).shaderProgram,\r\n        'u_multiplyColor'\r\n      );\r\n    this._shaderSets.at(9).uniformScreenColorLocation =\r\n      this.gl.getUniformLocation(\r\n        this._shaderSets.at(9).shaderProgram,\r\n        'u_screenColor'\r\n      );\r\n  }\r\n\r\n  /**\r\n   * シェーダプログラムをロードしてアドレスを返す\r\n   * @param vertexShaderSource    頂点シェーダのソース\r\n   * @param fragmentShaderSource  フラグメントシェーダのソース\r\n   * @return シェーダプログラムのアドレス\r\n   */\r\n  public loadShaderProgram(\r\n    vertexShaderSource: string,\r\n    fragmentShaderSource: string\r\n  ): WebGLProgram {\r\n    // Create Shader Program\r\n    let shaderProgram: WebGLProgram = this.gl.createProgram();\r\n\r\n    let vertShader = this.compileShaderSource(\r\n      this.gl.VERTEX_SHADER,\r\n      vertexShaderSource\r\n    );\r\n\r\n    if (!vertShader) {\r\n      CubismLogError('Vertex shader compile error!');\r\n      return 0;\r\n    }\r\n\r\n    let fragShader = this.compileShaderSource(\r\n      this.gl.FRAGMENT_SHADER,\r\n      fragmentShaderSource\r\n    );\r\n    if (!fragShader) {\r\n      CubismLogError('Vertex shader compile error!');\r\n      return 0;\r\n    }\r\n\r\n    // Attach vertex shader to program\r\n    this.gl.attachShader(shaderProgram, vertShader);\r\n\r\n    // Attach fragment shader to program\r\n    this.gl.attachShader(shaderProgram, fragShader);\r\n\r\n    // link program\r\n    this.gl.linkProgram(shaderProgram);\r\n    const linkStatus = this.gl.getProgramParameter(\r\n      shaderProgram,\r\n      this.gl.LINK_STATUS\r\n    );\r\n\r\n    // リンクに失敗したらシェーダーを削除\r\n    if (!linkStatus) {\r\n      CubismLogError('Failed to link program: {0}', shaderProgram);\r\n\r\n      this.gl.deleteShader(vertShader);\r\n      vertShader = 0;\r\n\r\n      this.gl.deleteShader(fragShader);\r\n      fragShader = 0;\r\n\r\n      if (shaderProgram) {\r\n        this.gl.deleteProgram(shaderProgram);\r\n        shaderProgram = 0;\r\n      }\r\n\r\n      return 0;\r\n    }\r\n\r\n    // Release vertex and fragment shaders.\r\n    this.gl.deleteShader(vertShader);\r\n    this.gl.deleteShader(fragShader);\r\n\r\n    return shaderProgram;\r\n  }\r\n\r\n  /**\r\n   * シェーダープログラムをコンパイルする\r\n   * @param shaderType シェーダタイプ(Vertex/Fragment)\r\n   * @param shaderSource シェーダソースコード\r\n   *\r\n   * @return コンパイルされたシェーダープログラム\r\n   */\r\n  public compileShaderSource(\r\n    shaderType: GLenum,\r\n    shaderSource: string\r\n  ): WebGLProgram {\r\n    const source: string = shaderSource;\r\n\r\n    const shader: WebGLProgram = this.gl.createShader(shaderType);\r\n    this.gl.shaderSource(shader, source);\r\n    this.gl.compileShader(shader);\r\n\r\n    if (!shader) {\r\n      const log: string = this.gl.getShaderInfoLog(shader);\r\n      CubismLogError('Shader compile log: {0} ', log);\r\n    }\r\n\r\n    const status: any = this.gl.getShaderParameter(\r\n      shader,\r\n      this.gl.COMPILE_STATUS\r\n    );\r\n    if (!status) {\r\n      this.gl.deleteShader(shader);\r\n      return null;\r\n    }\r\n\r\n    return shader;\r\n  }\r\n\r\n  public setGl(gl: WebGLRenderingContext): void {\r\n    this.gl = gl;\r\n  }\r\n\r\n  _shaderSets: csmVector<CubismShaderSet>; // ロードしたシェーダープログラムを保持する変数\r\n  gl: WebGLRenderingContext; // webglコンテキスト\r\n}\r\n\r\n/**\r\n * CubismShader_WebGLのインナークラス\r\n */\r\nexport class CubismShaderSet {\r\n  shaderProgram: WebGLProgram; // シェーダープログラムのアドレス\r\n  attributePositionLocation: GLuint; // シェーダープログラムに渡す変数のアドレス（Position）\r\n  attributeTexCoordLocation: GLuint; // シェーダープログラムに渡す変数のアドレス（TexCoord）\r\n  uniformMatrixLocation: WebGLUniformLocation; // シェーダープログラムに渡す変数のアドレス（Matrix）\r\n  uniformClipMatrixLocation: WebGLUniformLocation; // シェーダープログラムに渡す変数のアドレス（ClipMatrix）\r\n  samplerTexture0Location: WebGLUniformLocation; // シェーダープログラムに渡す変数のアドレス（Texture0）\r\n  samplerTexture1Location: WebGLUniformLocation; // シェーダープログラムに渡す変数のアドレス（Texture1）\r\n  uniformBaseColorLocation: WebGLUniformLocation; // シェーダープログラムに渡す変数のアドレス（BaseColor）\r\n  uniformChannelFlagLocation: WebGLUniformLocation; // シェーダープログラムに渡す変数のアドレス（ChannelFlag）\r\n  uniformMultiplyColorLocation: WebGLUniformLocation; // シェーダープログラムに渡す変数のアドレス（MultiplyColor）\r\n  uniformScreenColorLocation: WebGLUniformLocation; // シェーダープログラムに渡す変数のアドレス（ScreenColor）\r\n}\r\n\r\nexport enum ShaderNames {\r\n  // SetupMask\r\n  ShaderNames_SetupMask,\r\n\r\n  // Normal\r\n  ShaderNames_NormalPremultipliedAlpha,\r\n  ShaderNames_NormalMaskedPremultipliedAlpha,\r\n  ShaderNames_NomralMaskedInvertedPremultipliedAlpha,\r\n\r\n  // Add\r\n  ShaderNames_AddPremultipliedAlpha,\r\n  ShaderNames_AddMaskedPremultipliedAlpha,\r\n  ShaderNames_AddMaskedPremultipliedAlphaInverted,\r\n\r\n  // Mult\r\n  ShaderNames_MultPremultipliedAlpha,\r\n  ShaderNames_MultMaskedPremultipliedAlpha,\r\n  ShaderNames_MultMaskedPremultipliedAlphaInverted,\r\n}\r\n\r\nexport const vertexShaderSrcSetupMask =\r\n  'attribute vec4     a_position;' +\r\n  'attribute vec2     a_texCoord;' +\r\n  'varying vec2       v_texCoord;' +\r\n  'varying vec4       v_myPos;' +\r\n  'uniform mat4       u_clipMatrix;' +\r\n  'void main()' +\r\n  '{' +\r\n  '   gl_Position = u_clipMatrix * a_position;' +\r\n  '   v_myPos = u_clipMatrix * a_position;' +\r\n  '   v_texCoord = a_texCoord;' +\r\n  '   v_texCoord.y = 1.0 - v_texCoord.y;' +\r\n  '}';\r\nexport const fragmentShaderSrcsetupMask =\r\n  'precision mediump float;' +\r\n  'varying vec2       v_texCoord;' +\r\n  'varying vec4       v_myPos;' +\r\n  'uniform vec4       u_baseColor;' +\r\n  'uniform vec4       u_channelFlag;' +\r\n  'uniform sampler2D  s_texture0;' +\r\n  'void main()' +\r\n  '{' +\r\n  '   float isInside = ' +\r\n  '       step(u_baseColor.x, v_myPos.x/v_myPos.w)' +\r\n  '       * step(u_baseColor.y, v_myPos.y/v_myPos.w)' +\r\n  '       * step(v_myPos.x/v_myPos.w, u_baseColor.z)' +\r\n  '       * step(v_myPos.y/v_myPos.w, u_baseColor.w);' +\r\n  '   gl_FragColor = u_channelFlag * texture2D(s_texture0, v_texCoord).a * isInside;' +\r\n  '}';\r\n\r\n//----- バーテックスシェーダプログラム -----\r\n// Normal & Add & Mult 共通\r\nexport const vertexShaderSrc =\r\n  'attribute vec4     a_position;' + //v.vertex\r\n  'attribute vec2     a_texCoord;' + //v.texcoord\r\n  'varying vec2       v_texCoord;' + //v2f.texcoord\r\n  'uniform mat4       u_matrix;' +\r\n  'void main()' +\r\n  '{' +\r\n  '   gl_Position = u_matrix * a_position;' +\r\n  '   v_texCoord = a_texCoord;' +\r\n  '   v_texCoord.y = 1.0 - v_texCoord.y;' +\r\n  '}';\r\n\r\n// Normal & Add & Mult 共通（クリッピングされたものの描画用）\r\nexport const vertexShaderSrcMasked =\r\n  'attribute vec4     a_position;' +\r\n  'attribute vec2     a_texCoord;' +\r\n  'varying vec2       v_texCoord;' +\r\n  'varying vec4       v_clipPos;' +\r\n  'uniform mat4       u_matrix;' +\r\n  'uniform mat4       u_clipMatrix;' +\r\n  'void main()' +\r\n  '{' +\r\n  '   gl_Position = u_matrix * a_position;' +\r\n  '   v_clipPos = u_clipMatrix * a_position;' +\r\n  '   v_texCoord = a_texCoord;' +\r\n  '   v_texCoord.y = 1.0 - v_texCoord.y;' +\r\n  '}';\r\n\r\n//----- フラグメントシェーダプログラム -----\r\n// Normal & Add & Mult 共通 （PremultipliedAlpha）\r\nexport const fragmentShaderSrcPremultipliedAlpha =\r\n  'precision mediump float;' +\r\n  'varying vec2       v_texCoord;' + //v2f.texcoord\r\n  'uniform vec4       u_baseColor;' +\r\n  'uniform sampler2D  s_texture0;' + //_MainTex\r\n  'uniform vec4       u_multiplyColor;' +\r\n  'uniform vec4       u_screenColor;' +\r\n  'void main()' +\r\n  '{' +\r\n  '   vec4 texColor = texture2D(s_texture0, v_texCoord);' +\r\n  '   texColor.rgb = texColor.rgb * u_multiplyColor.rgb;' +\r\n  '   texColor.rgb = (texColor.rgb + u_screenColor.rgb * texColor.a) - (texColor.rgb * u_screenColor.rgb);' +\r\n  '   vec4 color = texColor * u_baseColor;' +\r\n  '   gl_FragColor = vec4(color.rgb, color.a);' +\r\n  '}';\r\n\r\n// Normal （クリッピングされたものの描画用、PremultipliedAlpha兼用）\r\nexport const fragmentShaderSrcMaskPremultipliedAlpha =\r\n  'precision mediump float;' +\r\n  'varying vec2       v_texCoord;' +\r\n  'varying vec4       v_clipPos;' +\r\n  'uniform vec4       u_baseColor;' +\r\n  'uniform vec4       u_channelFlag;' +\r\n  'uniform sampler2D  s_texture0;' +\r\n  'uniform sampler2D  s_texture1;' +\r\n  'uniform vec4       u_multiplyColor;' +\r\n  'uniform vec4       u_screenColor;' +\r\n  'void main()' +\r\n  '{' +\r\n  '   vec4 texColor = texture2D(s_texture0, v_texCoord);' +\r\n  '   texColor.rgb = texColor.rgb * u_multiplyColor.rgb;' +\r\n  '   texColor.rgb = (texColor.rgb + u_screenColor.rgb * texColor.a) - (texColor.rgb * u_screenColor.rgb);' +\r\n  '   vec4 col_formask = texColor * u_baseColor;' +\r\n  '   vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;' +\r\n  '   float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;' +\r\n  '   col_formask = col_formask * maskVal;' +\r\n  '   gl_FragColor = col_formask;' +\r\n  '}';\r\n\r\n// Normal & Add & Mult 共通（クリッピングされて反転使用の描画用、PremultipliedAlphaの場合）\r\nexport const fragmentShaderSrcMaskInvertedPremultipliedAlpha =\r\n  'precision mediump float;' +\r\n  'varying vec2      v_texCoord;' +\r\n  'varying vec4      v_clipPos;' +\r\n  'uniform sampler2D s_texture0;' +\r\n  'uniform sampler2D s_texture1;' +\r\n  'uniform vec4      u_channelFlag;' +\r\n  'uniform vec4      u_baseColor;' +\r\n  'uniform vec4      u_multiplyColor;' +\r\n  'uniform vec4      u_screenColor;' +\r\n  'void main()' +\r\n  '{' +\r\n  '   vec4 texColor = texture2D(s_texture0, v_texCoord);' +\r\n  '   texColor.rgb = texColor.rgb * u_multiplyColor.rgb;' +\r\n  '   texColor.rgb = (texColor.rgb + u_screenColor.rgb * texColor.a) - (texColor.rgb * u_screenColor.rgb);' +\r\n  '   vec4 col_formask = texColor * u_baseColor;' +\r\n  '   vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;' +\r\n  '   float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;' +\r\n  '   col_formask = col_formask * (1.0 - maskVal);' +\r\n  '   gl_FragColor = col_formask;' +\r\n  '}';\r\n\r\n/**\r\n * WebGL用の描画命令を実装したクラス\r\n */\r\nexport class CubismRenderer_WebGL extends CubismRenderer {\r\n  /**\r\n   * レンダラの初期化処理を実行する\r\n   * 引数に渡したモデルからレンダラの初期化処理に必要な情報を取り出すことができる\r\n   *\r\n   * @param model モデルのインスタンス\r\n   */\r\n  public initialize(model: CubismModel): void {\r\n    if (model.isUsingMasking()) {\r\n      this._clippingManager = new CubismClippingManager_WebGL(); // クリッピングマスク・バッファ前処理方式を初期化\r\n      this._clippingManager.initialize(\r\n        model,\r\n        model.getDrawableCount(),\r\n        model.getDrawableMasks(),\r\n        model.getDrawableMaskCounts()\r\n      );\r\n    }\r\n\r\n    this._sortedDrawableIndexList.resize(model.getDrawableCount(), 0);\r\n\r\n    super.initialize(model); // 親クラスの処理を呼ぶ\r\n  }\r\n\r\n  /**\r\n   * WebGLテクスチャのバインド処理\r\n   * CubismRendererにテクスチャを設定し、CubismRenderer内でその画像を参照するためのIndex値を戻り値とする\r\n   * @param modelTextureNo セットするモデルテクスチャの番号\r\n   * @param glTextureNo WebGLテクスチャの番号\r\n   */\r\n  public bindTexture(modelTextureNo: number, glTexture: WebGLTexture): void {\r\n    this._textures.setValue(modelTextureNo, glTexture);\r\n  }\r\n\r\n  /**\r\n   * WebGLにバインドされたテクスチャのリストを取得する\r\n   * @return テクスチャのリスト\r\n   */\r\n  public getBindedTextures(): csmMap<number, WebGLTexture> {\r\n    return this._textures;\r\n  }\r\n\r\n  /**\r\n   * クリッピングマスクバッファのサイズを設定する\r\n   * マスク用のFrameBufferを破棄、再作成する為処理コストは高い\r\n   * @param size クリッピングマスクバッファのサイズ\r\n   */\r\n  public setClippingMaskBufferSize(size: number) {\r\n    // FrameBufferのサイズを変更するためにインスタンスを破棄・再作成する\r\n    this._clippingManager.release();\r\n    this._clippingManager = void 0;\r\n    this._clippingManager = null;\r\n\r\n    this._clippingManager = new CubismClippingManager_WebGL();\r\n\r\n    this._clippingManager.setClippingMaskBufferSize(size);\r\n\r\n    this._clippingManager.initialize(\r\n      this.getModel(),\r\n      this.getModel().getDrawableCount(),\r\n      this.getModel().getDrawableMasks(),\r\n      this.getModel().getDrawableMaskCounts()\r\n    );\r\n  }\r\n\r\n  /**\r\n   * クリッピングマスクバッファのサイズを取得する\r\n   * @return クリッピングマスクバッファのサイズ\r\n   */\r\n  public getClippingMaskBufferSize(): number {\r\n    return this._clippingManager.getClippingMaskBufferSize();\r\n  }\r\n\r\n  /**\r\n   * コンストラクタ\r\n   */\r\n  public constructor() {\r\n    super();\r\n    this._clippingContextBufferForMask = null;\r\n    this._clippingContextBufferForDraw = null;\r\n    this._clippingManager = new CubismClippingManager_WebGL();\r\n    this.firstDraw = true;\r\n    this._textures = new csmMap<number, number>();\r\n    this._sortedDrawableIndexList = new csmVector<number>();\r\n    this._bufferData = {\r\n      vertex: (WebGLBuffer = null),\r\n      uv: (WebGLBuffer = null),\r\n      index: (WebGLBuffer = null),\r\n    };\r\n\r\n    // テクスチャ対応マップの容量を確保しておく\r\n    this._textures.prepareCapacity(32, true);\r\n  }\r\n\r\n  /**\r\n   * デストラクタ相当の処理\r\n   */\r\n  public release(): void {\r\n    this._clippingManager.release();\r\n    this._clippingManager = void 0;\r\n    this._clippingManager = null;\r\n\r\n    this.gl.deleteBuffer(this._bufferData.vertex);\r\n    this._bufferData.vertex = null;\r\n    this.gl.deleteBuffer(this._bufferData.uv);\r\n    this._bufferData.uv = null;\r\n    this.gl.deleteBuffer(this._bufferData.index);\r\n    this._bufferData.index = null;\r\n    this._bufferData = null;\r\n\r\n    this._textures = null;\r\n  }\r\n\r\n  /**\r\n   * モデルを描画する実際の処理\r\n   */\r\n  public doDrawModel(): void {\r\n    //------------ クリッピングマスク・バッファ前処理方式の場合 ------------\r\n    if (this._clippingManager != null) {\r\n      this.preDraw();\r\n      this._clippingManager.setupClippingContext(this.getModel(), this);\r\n    }\r\n\r\n    // 上記クリッピング処理内でも一度PreDrawを呼ぶので注意!!\r\n    this.preDraw();\r\n\r\n    const drawableCount: number = this.getModel().getDrawableCount();\r\n    const renderOrder: Int32Array = this.getModel().getDrawableRenderOrders();\r\n\r\n    // インデックスを描画順でソート\r\n    for (let i = 0; i < drawableCount; ++i) {\r\n      const order: number = renderOrder[i];\r\n      this._sortedDrawableIndexList.set(order, i);\r\n    }\r\n\r\n    // 描画\r\n    for (let i = 0; i < drawableCount; ++i) {\r\n      const drawableIndex: number = this._sortedDrawableIndexList.at(i);\r\n\r\n      // Drawableが表示状態でなければ処理をパスする\r\n      if (!this.getModel().getDrawableDynamicFlagIsVisible(drawableIndex)) {\r\n        continue;\r\n      }\r\n\r\n      // クリッピングマスクをセットする\r\n      this.setClippingContextBufferForDraw(\r\n        this._clippingManager != null\r\n          ? this._clippingManager\r\n              .getClippingContextListForDraw()\r\n              .at(drawableIndex)\r\n          : null\r\n      );\r\n\r\n      this.setIsCulling(this.getModel().getDrawableCulling(drawableIndex));\r\n\r\n      this.drawMesh(\r\n        this.getModel().getDrawableTextureIndex(drawableIndex),\r\n        this.getModel().getDrawableVertexIndexCount(drawableIndex),\r\n        this.getModel().getDrawableVertexCount(drawableIndex),\r\n        this.getModel().getDrawableVertexIndices(drawableIndex),\r\n        this.getModel().getDrawableVertices(drawableIndex),\r\n        this.getModel().getDrawableVertexUvs(drawableIndex),\r\n        this.getModel().getMultiplyColor(drawableIndex),\r\n        this.getModel().getScreenColor(drawableIndex),\r\n        this.getModel().getDrawableOpacity(drawableIndex),\r\n        this.getModel().getDrawableBlendMode(drawableIndex),\r\n        this.getModel().getDrawableInvertedMaskBit(drawableIndex)\r\n      );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * [オーバーライド]\r\n   * 描画オブジェクト（アートメッシュ）を描画する。\r\n   * ポリゴンメッシュとテクスチャ番号をセットで渡す。\r\n   * @param textureNo 描画するテクスチャ番号\r\n   * @param indexCount 描画オブジェクトのインデックス値\r\n   * @param vertexCount ポリゴンメッシュの頂点数\r\n   * @param indexArray ポリゴンメッシュのインデックス配列\r\n   * @param vertexArray ポリゴンメッシュの頂点配列\r\n   * @param uvArray uv配列\r\n   * @param opacity 不透明度\r\n   * @param colorBlendMode カラー合成タイプ\r\n   * @param invertedMask マスク使用時のマスクの反転使用\r\n   */\r\n  public drawMesh(\r\n    textureNo: number,\r\n    indexCount: number,\r\n    vertexCount: number,\r\n    indexArray: Uint16Array,\r\n    vertexArray: Float32Array,\r\n    uvArray: Float32Array,\r\n    multiplyColor: CubismTextureColor,\r\n    screenColor: CubismTextureColor,\r\n    opacity: number,\r\n    colorBlendMode: CubismBlendMode,\r\n    invertedMask: boolean\r\n  ): void {\r\n    // 裏面描画の有効・無効\r\n    if (this.isCulling()) {\r\n      this.gl.enable(this.gl.CULL_FACE);\r\n    } else {\r\n      this.gl.disable(this.gl.CULL_FACE);\r\n    }\r\n\r\n    this.gl.frontFace(this.gl.CCW); // Cubism SDK OpenGLはマスク・アートメッシュ共にCCWが表面\r\n\r\n    const modelColorRGBA: CubismTextureColor = this.getModelColor();\r\n\r\n    if (this.getClippingContextBufferForMask() == null) {\r\n      // マスク生成時以外\r\n      modelColorRGBA.A *= opacity;\r\n      if (this.isPremultipliedAlpha()) {\r\n        modelColorRGBA.R *= modelColorRGBA.A;\r\n        modelColorRGBA.G *= modelColorRGBA.A;\r\n        modelColorRGBA.B *= modelColorRGBA.A;\r\n      }\r\n    }\r\n\r\n    let drawtexture: WebGLTexture; // シェーダに渡すテクスチャ\r\n\r\n    // テクスチャマップからバインド済みテクスチャＩＤを取得\r\n    // バインドされていなければダミーのテクスチャIDをセットする\r\n    if (this._textures.getValue(textureNo) != null) {\r\n      drawtexture = this._textures.getValue(textureNo);\r\n    } else {\r\n      drawtexture = null;\r\n    }\r\n\r\n    CubismShader_WebGL.getInstance().setupShaderProgram(\r\n      this,\r\n      drawtexture,\r\n      vertexCount,\r\n      vertexArray,\r\n      indexArray,\r\n      uvArray,\r\n      this._bufferData,\r\n      opacity,\r\n      colorBlendMode,\r\n      modelColorRGBA,\r\n      multiplyColor,\r\n      screenColor,\r\n      this.isPremultipliedAlpha(),\r\n      this.getMvpMatrix(),\r\n      invertedMask\r\n    );\r\n\r\n    // ポリゴンメッシュを描画する\r\n    this.gl.drawElements(\r\n      this.gl.TRIANGLES,\r\n      indexCount,\r\n      this.gl.UNSIGNED_SHORT,\r\n      0\r\n    );\r\n\r\n    // 後処理\r\n    this.gl.useProgram(null);\r\n    this.setClippingContextBufferForDraw(null);\r\n    this.setClippingContextBufferForMask(null);\r\n  }\r\n\r\n  /**\r\n   * レンダラが保持する静的なリソースを解放する\r\n   * WebGLの静的なシェーダープログラムを解放する\r\n   */\r\n  public static doStaticRelease(): void {\r\n    CubismShader_WebGL.deleteInstance();\r\n  }\r\n\r\n  /**\r\n   * レンダーステートを設定する\r\n   * @param fbo アプリケーション側で指定しているフレームバッファ\r\n   * @param viewport ビューポート\r\n   */\r\n  public setRenderState(fbo: WebGLFramebuffer, viewport: number[]): void {\r\n    s_fbo = fbo;\r\n    s_viewport = viewport;\r\n  }\r\n\r\n  /**\r\n   * 描画開始時の追加処理\r\n   * モデルを描画する前にクリッピングマスクに必要な処理を実装している\r\n   */\r\n  public preDraw(): void {\r\n    if (this.firstDraw) {\r\n      this.firstDraw = false;\r\n    }\r\n\r\n    this.gl.disable(this.gl.SCISSOR_TEST);\r\n    this.gl.disable(this.gl.STENCIL_TEST);\r\n    this.gl.disable(this.gl.DEPTH_TEST);\r\n\r\n    // カリング（1.0beta3）\r\n    this.gl.frontFace(this.gl.CW);\r\n\r\n    this.gl.enable(this.gl.BLEND);\r\n    this.gl.colorMask(true, true, true, true);\r\n\r\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, null); // 前にバッファがバインドされていたら破棄する必要がある\r\n    this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, null);\r\n\r\n    // 異方性フィルタリングを適用する\r\n    if (this.getAnisotropy() > 0.0 && this._extension) {\r\n      for (let i = 0; i < this._textures.getSize(); ++i) {\r\n        this.gl.bindTexture(this.gl.TEXTURE_2D, this._textures.getValue(i));\r\n        this.gl.texParameterf(\r\n          this.gl.TEXTURE_2D,\r\n          this._extension.TEXTURE_MAX_ANISOTROPY_EXT,\r\n          this.getAnisotropy()\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * マスクテクスチャに描画するクリッピングコンテキストをセットする\r\n   */\r\n  public setClippingContextBufferForMask(clip: CubismClippingContext) {\r\n    this._clippingContextBufferForMask = clip;\r\n  }\r\n\r\n  /**\r\n   * マスクテクスチャに描画するクリッピングコンテキストを取得する\r\n   * @return マスクテクスチャに描画するクリッピングコンテキスト\r\n   */\r\n  public getClippingContextBufferForMask(): CubismClippingContext {\r\n    return this._clippingContextBufferForMask;\r\n  }\r\n\r\n  /**\r\n   * 画面上に描画するクリッピングコンテキストをセットする\r\n   */\r\n  public setClippingContextBufferForDraw(clip: CubismClippingContext): void {\r\n    this._clippingContextBufferForDraw = clip;\r\n  }\r\n\r\n  /**\r\n   * 画面上に描画するクリッピングコンテキストを取得する\r\n   * @return 画面上に描画するクリッピングコンテキスト\r\n   */\r\n  public getClippingContextBufferForDraw(): CubismClippingContext {\r\n    return this._clippingContextBufferForDraw;\r\n  }\r\n\r\n  /**\r\n   * glの設定\r\n   */\r\n  public startUp(gl: WebGLRenderingContext): void {\r\n    this.gl = gl;\r\n    this._clippingManager.setGL(gl);\r\n    CubismShader_WebGL.getInstance().setGl(gl);\r\n\r\n    // 異方性フィルタリングが使用できるかチェック\r\n    this._extension =\r\n      this.gl.getExtension('EXT_texture_filter_anisotropic') ||\r\n      this.gl.getExtension('WEBKIT_EXT_texture_filter_anisotropic') ||\r\n      this.gl.getExtension('MOZ_EXT_texture_filter_anisotropic');\r\n  }\r\n\r\n  _textures: csmMap<number, WebGLTexture>; // モデルが参照するテクスチャとレンダラでバインドしているテクスチャとのマップ\r\n  _sortedDrawableIndexList: csmVector<number>; // 描画オブジェクトのインデックスを描画順に並べたリスト\r\n  _clippingManager: CubismClippingManager_WebGL; // クリッピングマスク管理オブジェクト\r\n  _clippingContextBufferForMask: CubismClippingContext; // マスクテクスチャに描画するためのクリッピングコンテキスト\r\n  _clippingContextBufferForDraw: CubismClippingContext; // 画面上描画するためのクリッピングコンテキスト\r\n  firstDraw: boolean;\r\n  _bufferData: {\r\n    vertex: WebGLBuffer;\r\n    uv: WebGLBuffer;\r\n    index: WebGLBuffer;\r\n  }; // 頂点バッファデータ\r\n  _extension: any; // 拡張機能\r\n  gl: WebGLRenderingContext; // webglコンテキスト\r\n}\r\n\r\n/**\r\n * レンダラが保持する静的なリソースを開放する\r\n */\r\nCubismRenderer.staticRelease = (): void => {\r\n  CubismRenderer_WebGL.doStaticRelease();\r\n};\r\n\r\n// Namespace definition for compatibility.\r\nimport * as $ from './cubismrenderer_webgl';\r\n// eslint-disable-next-line @typescript-eslint/no-namespace\r\nexport namespace Live2DCubismFramework {\r\n  export const CubismClippingContext = $.CubismClippingContext;\r\n  export type CubismClippingContext = $.CubismClippingContext;\r\n  export const CubismClippingManager_WebGL = $.CubismClippingManager_WebGL;\r\n  export type CubismClippingManager_WebGL = $.CubismClippingManager_WebGL;\r\n  export const CubismRenderTextureResource = $.CubismRenderTextureResource;\r\n  export type CubismRenderTextureResource = $.CubismRenderTextureResource;\r\n  export const CubismRenderer_WebGL = $.CubismRenderer_WebGL;\r\n  export type CubismRenderer_WebGL = $.CubismRenderer_WebGL;\r\n  export const CubismShaderSet = $.CubismShaderSet;\r\n  export type CubismShaderSet = $.CubismShaderSet;\r\n  export const CubismShader_WebGL = $.CubismShader_WebGL;\r\n  export type CubismShader_WebGL = $.CubismShader_WebGL;\r\n  export const ShaderNames = $.ShaderNames;\r\n  export type ShaderNames = $.ShaderNames;\r\n}\r\n","/**\r\n * Copyright(c) Live2D Inc. All rights reserved.\r\n *\r\n * Use of this source code is governed by the Live2D Open Software license\r\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\r\n */\r\n\r\nimport { CubismLogDebug } from '../utils/cubismdebug';\r\n\r\n/**\r\n * Key-Valueのペアを定義するクラス\r\n * csmMapクラスの内部データで使用する。\r\n */\r\nexport class csmPair<_KeyT, _ValT> {\r\n  /**\r\n   * コンストラクタ\r\n   * @param key Keyとしてセットする値\r\n   * @param value Valueとしてセットする値\r\n   */\r\n  public constructor(key?: _KeyT, value?: _ValT) {\r\n    this.first = key == undefined ? null : key;\r\n\r\n    this.second = value == undefined ? null : value;\r\n  }\r\n\r\n  public first: _KeyT; // keyとして用いる変数\r\n  public second: _ValT; // valueとして用いる変数\r\n}\r\n\r\n/**\r\n * マップ型\r\n */\r\nexport class csmMap<_KeyT, _ValT> {\r\n  /**\r\n   * 引数付きコンストラクタ\r\n   * @param size 初期化時点で確保するサイズ\r\n   */\r\n  public constructor(size?: number) {\r\n    if (size != undefined) {\r\n      if (size < 1) {\r\n        this._keyValues = [];\r\n        this._dummyValue = null;\r\n        this._size = 0;\r\n      } else {\r\n        this._keyValues = new Array(size);\r\n        this._size = size;\r\n      }\r\n    } else {\r\n      this._keyValues = [];\r\n      this._dummyValue = null;\r\n      this._size = 0;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * デストラクタ\r\n   */\r\n  public release() {\r\n    this.clear();\r\n  }\r\n\r\n  /**\r\n   * キーを追加する\r\n   * @param key 新たに追加するキー\r\n   */\r\n  public appendKey(key: _KeyT): void {\r\n    // 新しくKey/Valueのペアを作る\r\n    this.prepareCapacity(this._size + 1, false); // 1つ以上入る隙間を作る\r\n    // 新しいkey/valueのインデックスは_size\r\n\r\n    this._keyValues[this._size] = new csmPair<_KeyT, _ValT>(key);\r\n    this._size += 1;\r\n  }\r\n\r\n  /**\r\n   * 添字演算子[key]のオーバーロード(get)\r\n   * @param key 添字から特定されるValue値\r\n   */\r\n  public getValue(key: _KeyT): _ValT {\r\n    let found = -1;\r\n\r\n    for (let i = 0; i < this._size; i++) {\r\n      if (this._keyValues[i].first == key) {\r\n        found = i;\r\n        break;\r\n      }\r\n    }\r\n\r\n    if (found >= 0) {\r\n      return this._keyValues[found].second;\r\n    } else {\r\n      this.appendKey(key); // 新規キーを追加\r\n      return this._keyValues[this._size - 1].second;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 添字演算子[key]のオーバーロード(set)\r\n   * @param key 添字から特定されるValue値\r\n   * @param value 代入するValue値\r\n   */\r\n  public setValue(key: _KeyT, value: _ValT): void {\r\n    let found = -1;\r\n\r\n    for (let i = 0; i < this._size; i++) {\r\n      if (this._keyValues[i].first == key) {\r\n        found = i;\r\n        break;\r\n      }\r\n    }\r\n\r\n    if (found >= 0) {\r\n      this._keyValues[found].second = value;\r\n    } else {\r\n      this.appendKey(key); // 新規キーを追加\r\n      this._keyValues[this._size - 1].second = value;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 引数で渡したKeyを持つ要素が存在するか\r\n   * @param key 存在を確認するkey\r\n   * @return true 引数で渡したkeyを持つ要素が存在する\r\n   * @return false 引数で渡したkeyを持つ要素が存在しない\r\n   */\r\n  public isExist(key: _KeyT): boolean {\r\n    for (let i = 0; i < this._size; i++) {\r\n      if (this._keyValues[i].first == key) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * keyValueのポインタを全て解放する\r\n   */\r\n  public clear(): void {\r\n    this._keyValues = void 0;\r\n    this._keyValues = null;\r\n    this._keyValues = [];\r\n\r\n    this._size = 0;\r\n  }\r\n\r\n  /**\r\n   * コンテナのサイズを取得する\r\n   *\r\n   * @return コンテナのサイズ\r\n   */\r\n  public getSize(): number {\r\n    return this._size;\r\n  }\r\n\r\n  /**\r\n   * コンテナのキャパシティを確保する\r\n   * @param newSize 新たなキャパシティ。引数の値が現在のサイズ未満の場合は何もしない。\r\n   * @param fitToSize trueなら指定したサイズに合わせる。falseならサイズを2倍確保しておく。\r\n   */\r\n  public prepareCapacity(newSize: number, fitToSize: boolean): void {\r\n    if (newSize > this._keyValues.length) {\r\n      if (this._keyValues.length == 0) {\r\n        if (!fitToSize && newSize < csmMap.DefaultSize)\r\n          newSize = csmMap.DefaultSize;\r\n        this._keyValues.length = newSize;\r\n      } else {\r\n        if (!fitToSize && newSize < this._keyValues.length * 2)\r\n          newSize = this._keyValues.length * 2;\r\n        this._keyValues.length = newSize;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * コンテナの先頭要素を返す\r\n   */\r\n  public begin(): iterator<_KeyT, _ValT> {\r\n    const ite: iterator<_KeyT, _ValT> = new iterator<_KeyT, _ValT>(this, 0);\r\n    return ite;\r\n  }\r\n\r\n  /**\r\n   * コンテナの終端要素を返す\r\n   */\r\n  public end(): iterator<_KeyT, _ValT> {\r\n    const ite: iterator<_KeyT, _ValT> = new iterator<_KeyT, _ValT>(\r\n      this,\r\n      this._size\r\n    ); // 終了\r\n    return ite;\r\n  }\r\n\r\n  /**\r\n   * コンテナから要素を削除する\r\n   *\r\n   * @param ite 削除する要素\r\n   */\r\n  public erase(ite: iterator<_KeyT, _ValT>): iterator<_KeyT, _ValT> {\r\n    const index: number = ite._index;\r\n    if (index < 0 || this._size <= index) {\r\n      return ite; // 削除範囲外\r\n    }\r\n\r\n    // 削除\r\n    this._keyValues.splice(index, 1);\r\n    --this._size;\r\n\r\n    const ite2: iterator<_KeyT, _ValT> = new iterator<_KeyT, _ValT>(\r\n      this,\r\n      index\r\n    ); // 終了\r\n    return ite2;\r\n  }\r\n\r\n  /**\r\n   * コンテナの値を32ビット符号付き整数型でダンプする\r\n   */\r\n  public dumpAsInt() {\r\n    for (let i = 0; i < this._size; i++) {\r\n      CubismLogDebug('{0} ,', this._keyValues[i]);\r\n      CubismLogDebug('\\n');\r\n    }\r\n  }\r\n\r\n  public static readonly DefaultSize = 10; // コンテナの初期化のデフォルトサイズ\r\n  public _keyValues: csmPair<_KeyT, _ValT>[]; // key-valueペアの配列\r\n  public _dummyValue: _ValT; // 空の値を返す為のダミー\r\n  public _size: number; // コンテナの要素数\r\n}\r\n\r\n/**\r\n * csmMap<T>のイテレータ\r\n */\r\nexport class iterator<_KeyT, _ValT> {\r\n  /**\r\n   * コンストラクタ\r\n   */\r\n  constructor(v?: csmMap<_KeyT, _ValT>, idx?: number) {\r\n    this._map = v != undefined ? v : new csmMap<_KeyT, _ValT>();\r\n\r\n    this._index = idx != undefined ? idx : 0;\r\n  }\r\n\r\n  /**\r\n   * =演算子のオーバーロード\r\n   */\r\n  public set(ite: iterator<_KeyT, _ValT>): iterator<_KeyT, _ValT> {\r\n    this._index = ite._index;\r\n    this._map = ite._map;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * 前置き++演算子のオーバーロード\r\n   */\r\n  public preIncrement(): iterator<_KeyT, _ValT> {\r\n    ++this._index;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * 前置き--演算子のオーバーロード\r\n   */\r\n  public preDecrement(): iterator<_KeyT, _ValT> {\r\n    --this._index;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * 後置き++演算子のオーバーロード\r\n   */\r\n  public increment(): iterator<_KeyT, _ValT> {\r\n    const iteold = new iterator<_KeyT, _ValT>(this._map, this._index++); // 古い値を保存\r\n    return iteold;\r\n  }\r\n\r\n  /**\r\n   * 後置き--演算子のオーバーロード\r\n   */\r\n  public decrement(): iterator<_KeyT, _ValT> {\r\n    const iteold = new iterator<_KeyT, _ValT>(this._map, this._index); // 古い値を保存\r\n    this._map = iteold._map;\r\n    this._index = iteold._index;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * *演算子のオーバーロード\r\n   */\r\n  public ptr(): csmPair<_KeyT, _ValT> {\r\n    return this._map._keyValues[this._index];\r\n  }\r\n\r\n  /**\r\n   * !=演算\r\n   */\r\n  public notEqual(ite: iterator<_KeyT, _ValT>): boolean {\r\n    return this._index != ite._index || this._map != ite._map;\r\n  }\r\n\r\n  _index: number; // コンテナのインデックス値\r\n  _map: csmMap<_KeyT, _ValT>; // コンテナ\r\n}\r\n\r\n// Namespace definition for compatibility.\r\nimport * as $ from './csmmap';\r\n// eslint-disable-next-line @typescript-eslint/no-namespace\r\nexport namespace Live2DCubismFramework {\r\n  export const csmMap = $.csmMap;\r\n  export type csmMap<K, V> = $.csmMap<K, V>;\r\n  export const csmPair = $.csmPair;\r\n  export type csmPair<K, V> = $.csmPair<K, V>;\r\n  export const iterator = $.iterator;\r\n  export type iterator<K, V> = $.iterator<K, V>;\r\n}\r\n","/**\r\n * Copyright(c) Live2D Inc. All rights reserved.\r\n *\r\n * Use of this source code is governed by the Live2D Open Software license\r\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\r\n */\r\n\r\n/**\r\n * 矩形形状（座標・長さはfloat値）を定義するクラス\r\n */\r\nexport class csmRect {\r\n  /**\r\n   * コンストラクタ\r\n   * @param x 左端X座標\r\n   * @param y 上端Y座標\r\n   * @param w 幅\r\n   * @param h 高さ\r\n   */\r\n  public constructor(x?: number, y?: number, w?: number, h?: number) {\r\n    this.x = x;\r\n    this.y = y;\r\n    this.width = w;\r\n    this.height = h;\r\n  }\r\n\r\n  /**\r\n   * 矩形中央のX座標を取得する\r\n   */\r\n  public getCenterX(): number {\r\n    return this.x + 0.5 * this.width;\r\n  }\r\n\r\n  /**\r\n   * 矩形中央のY座標を取得する\r\n   */\r\n  public getCenterY(): number {\r\n    return this.y + 0.5 * this.height;\r\n  }\r\n\r\n  /**\r\n   * 右側のX座標を取得する\r\n   */\r\n  public getRight(): number {\r\n    return this.x + this.width;\r\n  }\r\n\r\n  /**\r\n   * 下端のY座標を取得する\r\n   */\r\n  public getBottom(): number {\r\n    return this.y + this.height;\r\n  }\r\n\r\n  /**\r\n   * 矩形に値をセットする\r\n   * @param r 矩形のインスタンス\r\n   */\r\n  public setRect(r: csmRect): void {\r\n    this.x = r.x;\r\n    this.y = r.y;\r\n    this.width = r.width;\r\n    this.height = r.height;\r\n  }\r\n\r\n  /**\r\n   * 矩形中央を軸にして縦横を拡縮する\r\n   * @param w 幅方向に拡縮する量\r\n   * @param h 高さ方向に拡縮する量\r\n   */\r\n  public expand(w: number, h: number) {\r\n    this.x -= w;\r\n    this.y -= h;\r\n    this.width += w * 2.0;\r\n    this.height += h * 2.0;\r\n  }\r\n\r\n  public x: number; // 左端X座標\r\n  public y: number; // 上端Y座標\r\n  public width: number; // 幅\r\n  public height: number; // 高さ\r\n}\r\n\r\n// Namespace definition for compatibility.\r\nimport * as $ from './csmrectf';\r\n// eslint-disable-next-line @typescript-eslint/no-namespace\r\nexport namespace Live2DCubismFramework {\r\n  export const csmRect = $.csmRect;\r\n  export type csmRect = $.csmRect;\r\n}\r\n","/**\r\n * Copyright(c) Live2D Inc. All rights reserved.\r\n *\r\n * Use of this source code is governed by the Live2D Open Software license\r\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\r\n */\r\n\r\n/**\r\n * 文字列クラス。\r\n */\r\nexport class csmString {\r\n  /**\r\n   * 文字列を後方に追加する\r\n   *\r\n   * @param c 追加する文字列\r\n   * @return 更新された文字列\r\n   */\r\n  public append(c: string, length?: number): csmString {\r\n    this.s += length !== undefined ? c.substr(0, length) : c;\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * 文字サイズを拡張して文字を埋める\r\n   * @param length    拡張する文字数\r\n   * @param v         埋める文字\r\n   * @return 更新された文字列\r\n   */\r\n  public expansion(length: number, v: string): csmString {\r\n    for (let i = 0; i < length; i++) {\r\n      this.append(v);\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * 文字列の長さをバイト数で取得する\r\n   */\r\n  public getBytes(): number {\r\n    return encodeURIComponent(this.s).replace(/%../g, 'x').length;\r\n  }\r\n\r\n  /**\r\n   * 文字列の長さを返す\r\n   */\r\n  public getLength(): number {\r\n    return this.s.length;\r\n  }\r\n\r\n  /**\r\n   * 文字列比較 <\r\n   * @param s 比較する文字列\r\n   * @return true:    比較する文字列より小さい\r\n   * @return false:   比較する文字列より大きい\r\n   */\r\n  public isLess(s: csmString): boolean {\r\n    return this.s < s.s;\r\n  }\r\n\r\n  /**\r\n   * 文字列比較 >\r\n   * @param s 比較する文字列\r\n   * @return true:    比較する文字列より大きい\r\n   * @return false:   比較する文字列より小さい\r\n   */\r\n  public isGreat(s: csmString): boolean {\r\n    return this.s > s.s;\r\n  }\r\n\r\n  /**\r\n   * 文字列比較 ==\r\n   * @param s 比較する文字列\r\n   * @return true:    比較する文字列と等しい\r\n   * @return false:   比較する文字列と異なる\r\n   */\r\n  public isEqual(s: string): boolean {\r\n    return this.s == s;\r\n  }\r\n\r\n  /**\r\n   * 文字列が空かどうか\r\n   * @return true: 空の文字列\r\n   * @return false: 値が設定されている\r\n   */\r\n  public isEmpty(): boolean {\r\n    return this.s.length == 0;\r\n  }\r\n\r\n  /**\r\n   * 引数付きコンストラクタ\r\n   */\r\n  public constructor(s: string) {\r\n    this.s = s;\r\n  }\r\n\r\n  s: string;\r\n}\r\n\r\n// Namespace definition for compatibility.\r\nimport * as $ from './csmstring';\r\n// eslint-disable-next-line @typescript-eslint/no-namespace\r\nexport namespace Live2DCubismFramework {\r\n  export const csmString = $.csmString;\r\n  export type csmString = $.csmString;\r\n}\r\n","/**\r\n * Copyright(c) Live2D Inc. All rights reserved.\r\n *\r\n * Use of this source code is governed by the Live2D Open Software license\r\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\r\n */\r\n\r\n/**\r\n * ベクター型（可変配列型）\r\n */\r\nexport class csmVector<T> {\r\n  /**\r\n   * 引数付きコンストラクタ\r\n   * @param iniitalCapacity 初期化後のキャパシティ。データサイズは_capacity * sizeof(T)\r\n   * @param zeroClear trueなら初期化時に確保した領域を0で埋める\r\n   */\r\n  constructor(initialCapacity = 0) {\r\n    if (initialCapacity < 1) {\r\n      this._ptr = [];\r\n      this._capacity = 0;\r\n      this._size = 0;\r\n    } else {\r\n      this._ptr = new Array(initialCapacity);\r\n      this._capacity = initialCapacity;\r\n      this._size = 0;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * インデックスで指定した要素を返す\r\n   */\r\n  public at(index: number): T {\r\n    return this._ptr[index];\r\n  }\r\n\r\n  /**\r\n   * 要素をセット\r\n   * @param index 要素をセットするインデックス\r\n   * @param value セットする要素\r\n   */\r\n  public set(index: number, value: T): void {\r\n    this._ptr[index] = value;\r\n  }\r\n\r\n  /**\r\n   * コンテナを取得する\r\n   */\r\n  public get(offset = 0): T[] {\r\n    const ret: T[] = new Array<T>();\r\n    for (let i = offset; i < this._size; i++) {\r\n      ret.push(this._ptr[i]);\r\n    }\r\n    return ret;\r\n  }\r\n\r\n  /**\r\n   * pushBack処理、コンテナに新たな要素を追加する\r\n   * @param value PushBack処理で追加する値\r\n   */\r\n  public pushBack(value: T): void {\r\n    if (this._size >= this._capacity) {\r\n      this.prepareCapacity(\r\n        this._capacity == 0 ? csmVector.s_defaultSize : this._capacity * 2\r\n      );\r\n    }\r\n\r\n    this._ptr[this._size++] = value;\r\n  }\r\n\r\n  /**\r\n   * コンテナの全要素を解放する\r\n   */\r\n  public clear(): void {\r\n    this._ptr.length = 0;\r\n    this._size = 0;\r\n  }\r\n\r\n  /**\r\n   * コンテナの要素数を返す\r\n   * @return コンテナの要素数\r\n   */\r\n  public getSize(): number {\r\n    return this._size;\r\n  }\r\n\r\n  /**\r\n   * コンテナの全要素に対して代入処理を行う\r\n   * @param newSize 代入処理後のサイズ\r\n   * @param value 要素に代入する値\r\n   */\r\n  public assign(newSize: number, value: T): void {\r\n    const curSize = this._size;\r\n\r\n    if (curSize < newSize) {\r\n      this.prepareCapacity(newSize); // capacity更新\r\n    }\r\n\r\n    for (let i = 0; i < newSize; i++) {\r\n      this._ptr[i] = value;\r\n    }\r\n\r\n    this._size = newSize;\r\n  }\r\n\r\n  /**\r\n   * サイズ変更\r\n   */\r\n  public resize(newSize: number, value: T = null): void {\r\n    this.updateSize(newSize, value, true);\r\n  }\r\n\r\n  /**\r\n   * サイズ変更\r\n   */\r\n  public updateSize(\r\n    newSize: number,\r\n    value: any = null,\r\n    callPlacementNew = true\r\n  ): void {\r\n    const curSize: number = this._size;\r\n\r\n    if (curSize < newSize) {\r\n      this.prepareCapacity(newSize); // capacity更新\r\n\r\n      if (callPlacementNew) {\r\n        for (let i: number = this._size; i < newSize; i++) {\r\n          if (typeof value == 'function') {\r\n            // new\r\n            this._ptr[i] = JSON.parse(JSON.stringify(new value()));\r\n          } // プリミティブ型なので値渡し\r\n          else {\r\n            this._ptr[i] = value;\r\n          }\r\n        }\r\n      } else {\r\n        for (let i: number = this._size; i < newSize; i++) {\r\n          this._ptr[i] = value;\r\n        }\r\n      }\r\n    } else {\r\n      // newSize <= this._size\r\n      //---\r\n      const sub = this._size - newSize;\r\n      this._ptr.splice(this._size - sub, sub); // 不要なので破棄する\r\n    }\r\n    this._size = newSize;\r\n  }\r\n\r\n  /**\r\n   * コンテナにコンテナ要素を挿入する\r\n   * @param position 挿入する位置\r\n   * @param begin 挿入するコンテナの開始位置\r\n   * @param end 挿入するコンテナの終端位置\r\n   */\r\n  public insert(\r\n    position: iterator<T>,\r\n    begin: iterator<T>,\r\n    end: iterator<T>\r\n  ): void {\r\n    let dstSi: number = position._index;\r\n    const srcSi: number = begin._index;\r\n    const srcEi: number = end._index;\r\n\r\n    const addCount: number = srcEi - srcSi;\r\n\r\n    this.prepareCapacity(this._size + addCount);\r\n\r\n    // 挿入用の既存データをシフトして隙間を作る\r\n    const addSize = this._size - dstSi;\r\n    if (addSize > 0) {\r\n      for (let i = 0; i < addSize; i++) {\r\n        this._ptr.splice(dstSi + i, 0, null);\r\n      }\r\n    }\r\n\r\n    for (let i: number = srcSi; i < srcEi; i++, dstSi++) {\r\n      this._ptr[dstSi] = begin._vector._ptr[i];\r\n    }\r\n\r\n    this._size = this._size + addCount;\r\n  }\r\n\r\n  /**\r\n   * コンテナからインデックスで指定した要素を削除する\r\n   * @param index インデックス値\r\n   * @return true 削除実行\r\n   * @return false 削除範囲外\r\n   */\r\n  public remove(index: number): boolean {\r\n    if (index < 0 || this._size <= index) {\r\n      return false; // 削除範囲外\r\n    }\r\n\r\n    this._ptr.splice(index, 1);\r\n    --this._size;\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * コンテナから要素を削除して他の要素をシフトする\r\n   * @param ite 削除する要素\r\n   */\r\n  public erase(ite: iterator<T>): iterator<T> {\r\n    const index: number = ite._index;\r\n    if (index < 0 || this._size <= index) {\r\n      return ite; // 削除範囲外\r\n    }\r\n\r\n    // 削除\r\n    this._ptr.splice(index, 1);\r\n    --this._size;\r\n\r\n    const ite2: iterator<T> = new iterator<T>(this, index); // 終了\r\n    return ite2;\r\n  }\r\n\r\n  /**\r\n   * コンテナのキャパシティを確保する\r\n   * @param newSize 新たなキャパシティ。引数の値が現在のサイズ未満の場合は何もしない.\r\n   */\r\n  public prepareCapacity(newSize: number): void {\r\n    if (newSize > this._capacity) {\r\n      if (this._capacity == 0) {\r\n        this._ptr = new Array(newSize);\r\n        this._capacity = newSize;\r\n      } else {\r\n        this._ptr.length = newSize;\r\n        this._capacity = newSize;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * コンテナの先頭要素を返す\r\n   */\r\n  public begin(): iterator<T> {\r\n    const ite: iterator<T> =\r\n      this._size == 0 ? this.end() : new iterator<T>(this, 0);\r\n    return ite;\r\n  }\r\n\r\n  /**\r\n   * コンテナの終端要素を返す\r\n   */\r\n  public end(): iterator<T> {\r\n    const ite: iterator<T> = new iterator<T>(this, this._size);\r\n    return ite;\r\n  }\r\n\r\n  public getOffset(offset: number): csmVector<T> {\r\n    const newVector = new csmVector<T>();\r\n    newVector._ptr = this.get(offset);\r\n    newVector._size = this.get(offset).length;\r\n    newVector._capacity = this.get(offset).length;\r\n\r\n    return newVector;\r\n  }\r\n\r\n  _ptr: T[]; // コンテナの先頭アドレス\r\n  _size: number; // コンテナの要素数\r\n  _capacity: number; // コンテナのキャパシティ\r\n\r\n  static readonly s_defaultSize = 10; // コンテナ初期化のデフォルトサイズ\r\n}\r\n\r\nexport class iterator<T> {\r\n  /**\r\n   * コンストラクタ\r\n   */\r\n  public constructor(v?: csmVector<T>, index?: number) {\r\n    this._vector = v != undefined ? v : null;\r\n    this._index = index != undefined ? index : 0;\r\n  }\r\n\r\n  /**\r\n   * 代入\r\n   */\r\n  public set(ite: iterator<T>): iterator<T> {\r\n    this._index = ite._index;\r\n    this._vector = ite._vector;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * 前置き++演算\r\n   */\r\n  public preIncrement(): iterator<T> {\r\n    ++this._index;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * 前置き--演算\r\n   */\r\n  public preDecrement(): iterator<T> {\r\n    --this._index;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * 後置き++演算子\r\n   */\r\n  public increment(): iterator<T> {\r\n    const iteold = new iterator<T>(this._vector, this._index++); // 古い値を保存\r\n    return iteold;\r\n  }\r\n\r\n  /**\r\n   * 後置き--演算子\r\n   */\r\n  public decrement(): iterator<T> {\r\n    const iteold = new iterator<T>(this._vector, this._index--); // 古い値を保存\r\n    return iteold;\r\n  }\r\n\r\n  /**\r\n   * ptr\r\n   */\r\n  public ptr(): T {\r\n    return this._vector._ptr[this._index];\r\n  }\r\n\r\n  /**\r\n   * =演算子のオーバーロード\r\n   */\r\n  public substitution(ite: iterator<T>): iterator<T> {\r\n    this._index = ite._index;\r\n    this._vector = ite._vector;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * !=演算子のオーバーロード\r\n   */\r\n  public notEqual(ite: iterator<T>): boolean {\r\n    return this._index != ite._index || this._vector != ite._vector;\r\n  }\r\n\r\n  _index: number; // コンテナのインデックス値\r\n  _vector: csmVector<T>; // コンテナ\r\n}\r\n\r\n// Namespace definition for compatibility.\r\nimport * as $ from './csmvector';\r\n// eslint-disable-next-line @typescript-eslint/no-namespace\r\nexport namespace Live2DCubismFramework {\r\n  export const csmVector = $.csmVector;\r\n  export type csmVector<T> = $.csmVector<T>;\r\n  export const iterator = $.iterator;\r\n  export type iterator<T> = $.iterator<T>;\r\n}\r\n","/**\r\n * Copyright(c) Live2D Inc. All rights reserved.\r\n *\r\n * Use of this source code is governed by the Live2D Open Software license\r\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\r\n */\r\n\r\nimport {\r\n  CSM_LOG_LEVEL,\r\n  CSM_LOG_LEVEL_DEBUG,\r\n  CSM_LOG_LEVEL_ERROR,\r\n  CSM_LOG_LEVEL_INFO,\r\n  CSM_LOG_LEVEL_VERBOSE,\r\n  CSM_LOG_LEVEL_WARNING,\r\n} from '../cubismframeworkconfig';\r\nimport { CubismFramework, LogLevel } from '../live2dcubismframework';\r\n\r\nexport const CubismLogPrint = (level: LogLevel, fmt: string, args: any[]) => {\r\n  CubismDebug.print(level, '[CSM]' + fmt, args);\r\n};\r\n\r\nexport const CubismLogPrintIn = (level: LogLevel, fmt: string, args: any[]) => {\r\n  CubismLogPrint(level, fmt + '\\n', args);\r\n};\r\n\r\nexport const CSM_ASSERT = (expr: any) => {\r\n  console.assert(expr);\r\n};\r\n\r\nexport let CubismLogVerbose: (fmt: string, ...args: any[]) => void;\r\nexport let CubismLogDebug: (fmt: string, ...args: any[]) => void;\r\nexport let CubismLogInfo: (fmt: string, ...args: any[]) => void;\r\nexport let CubismLogWarning: (fmt: string, ...args: any[]) => void;\r\nexport let CubismLogError: (fmt: string, ...args: any[]) => void;\r\n\r\nif (CSM_LOG_LEVEL <= CSM_LOG_LEVEL_VERBOSE) {\r\n  CubismLogVerbose = (fmt: string, ...args: any[]) => {\r\n    CubismLogPrintIn(LogLevel.LogLevel_Verbose, '[V]' + fmt, args);\r\n  };\r\n\r\n  CubismLogDebug = (fmt: string, ...args: any[]) => {\r\n    CubismLogPrintIn(LogLevel.LogLevel_Debug, '[D]' + fmt, args);\r\n  };\r\n\r\n  CubismLogInfo = (fmt: string, ...args: any[]) => {\r\n    CubismLogPrintIn(LogLevel.LogLevel_Info, '[I]' + fmt, args);\r\n  };\r\n\r\n  CubismLogWarning = (fmt: string, ...args: any[]) => {\r\n    CubismLogPrintIn(LogLevel.LogLevel_Warning, '[W]' + fmt, args);\r\n  };\r\n\r\n  CubismLogError = (fmt: string, ...args: any[]) => {\r\n    CubismLogPrintIn(LogLevel.LogLevel_Error, '[E]' + fmt, args);\r\n  };\r\n} else if (CSM_LOG_LEVEL == CSM_LOG_LEVEL_DEBUG) {\r\n  CubismLogDebug = (fmt: string, ...args: any[]) => {\r\n    CubismLogPrintIn(LogLevel.LogLevel_Debug, '[D]' + fmt, args);\r\n  };\r\n\r\n  CubismLogInfo = (fmt: string, ...args: any[]) => {\r\n    CubismLogPrintIn(LogLevel.LogLevel_Info, '[I]' + fmt, args);\r\n  };\r\n\r\n  CubismLogWarning = (fmt: string, ...args: any[]) => {\r\n    CubismLogPrintIn(LogLevel.LogLevel_Warning, '[W]' + fmt, args);\r\n  };\r\n\r\n  CubismLogError = (fmt: string, ...args: any[]) => {\r\n    CubismLogPrintIn(LogLevel.LogLevel_Error, '[E]' + fmt, args);\r\n  };\r\n} else if (CSM_LOG_LEVEL == CSM_LOG_LEVEL_INFO) {\r\n  CubismLogInfo = (fmt: string, ...args: any[]) => {\r\n    CubismLogPrintIn(LogLevel.LogLevel_Info, '[I]' + fmt, args);\r\n  };\r\n\r\n  CubismLogWarning = (fmt: string, ...args: any[]) => {\r\n    CubismLogPrintIn(LogLevel.LogLevel_Warning, '[W]' + fmt, args);\r\n  };\r\n\r\n  CubismLogError = (fmt: string, ...args: any[]) => {\r\n    CubismLogPrintIn(LogLevel.LogLevel_Error, '[E]' + fmt, args);\r\n  };\r\n} else if (CSM_LOG_LEVEL == CSM_LOG_LEVEL_WARNING) {\r\n  CubismLogWarning = (fmt: string, ...args: any[]) => {\r\n    CubismLogPrintIn(LogLevel.LogLevel_Warning, '[W]' + fmt, args);\r\n  };\r\n\r\n  CubismLogError = (fmt: string, ...args: any[]) => {\r\n    CubismLogPrintIn(LogLevel.LogLevel_Error, '[E]' + fmt, args);\r\n  };\r\n} else if (CSM_LOG_LEVEL == CSM_LOG_LEVEL_ERROR) {\r\n  CubismLogError = (fmt: string, ...args: any[]) => {\r\n    CubismLogPrintIn(LogLevel.LogLevel_Error, '[E]' + fmt, args);\r\n  };\r\n}\r\n\r\n/**\r\n * デバッグ用のユーティリティクラス。\r\n * ログの出力、バイトのダンプなど\r\n */\r\nexport class CubismDebug {\r\n  /**\r\n   * ログを出力する。第一引数にログレベルを設定する。\r\n   * CubismFramework.initialize()時にオプションで設定されたログ出力レベルを下回る場合はログに出さない。\r\n   *\r\n   * @param logLevel ログレベルの設定\r\n   * @param format 書式付き文字列\r\n   * @param args 可変長引数\r\n   */\r\n  public static print(logLevel: LogLevel, format: string, args?: any[]): void {\r\n    // オプションで設定されたログ出力レベルを下回る場合はログに出さない\r\n    if (logLevel < CubismFramework.getLoggingLevel()) {\r\n      return;\r\n    }\r\n\r\n    const logPrint: Live2DCubismCore.csmLogFunction =\r\n      CubismFramework.coreLogFunction;\r\n\r\n    if (!logPrint) return;\r\n\r\n    const buffer: string = format.replace(/\\{(\\d+)\\}/g, (m, k) => {\r\n      return args[k];\r\n    });\r\n    logPrint(buffer);\r\n  }\r\n\r\n  /**\r\n   * データから指定した長さだけダンプ出力する。\r\n   * CubismFramework.initialize()時にオプションで設定されたログ出力レベルを下回る場合はログに出さない。\r\n   *\r\n   * @param logLevel ログレベルの設定\r\n   * @param data ダンプするデータ\r\n   * @param length ダンプする長さ\r\n   */\r\n  public static dumpBytes(\r\n    logLevel: LogLevel,\r\n    data: Uint8Array,\r\n    length: number\r\n  ): void {\r\n    for (let i = 0; i < length; i++) {\r\n      if (i % 16 == 0 && i > 0) this.print(logLevel, '\\n');\r\n      else if (i % 8 == 0 && i > 0) this.print(logLevel, '  ');\r\n      this.print(logLevel, '{0} ', [data[i] & 0xff]);\r\n    }\r\n\r\n    this.print(logLevel, '\\n');\r\n  }\r\n\r\n  /**\r\n   * private コンストラクタ\r\n   */\r\n  private constructor() {}\r\n}\r\n\r\n// Namespace definition for compatibility.\r\nimport * as $ from './cubismdebug';\r\n// eslint-disable-next-line @typescript-eslint/no-namespace\r\nexport namespace Live2DCubismFramework {\r\n  export const CubismDebug = $.CubismDebug;\r\n  export type CubismDebug = $.CubismDebug;\r\n}\r\n","/**\r\n * Copyright(c) Live2D Inc. All rights reserved.\r\n *\r\n * Use of this source code is governed by the Live2D Open Software license\r\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\r\n */\r\n\r\nimport { strtod } from '../live2dcubismframework';\r\nimport { csmMap, iterator as csmMap_iterator } from '../type/csmmap';\r\nimport { csmString } from '../type/csmstring';\r\nimport { csmVector, iterator as csmVector_iterator } from '../type/csmvector';\r\nimport { CubismLogInfo } from './cubismdebug';\r\n\r\n// StaticInitializeNotForClientCall()で初期化する\r\nconst CSM_JSON_ERROR_TYPE_MISMATCH = 'Error: type mismatch';\r\nconst CSM_JSON_ERROR_INDEX_OF_BOUNDS = 'Error: index out of bounds';\r\n\r\n/**\r\n * パースしたJSONエレメントの要素の基底クラス。\r\n */\r\nexport abstract class Value {\r\n  /**\r\n   * コンストラクタ\r\n   */\r\n  public constructor() {}\r\n\r\n  /**\r\n   * 要素を文字列型で返す(csmString型)\r\n   */\r\n  public abstract getString(defaultValue?: string, indent?: string): string;\r\n\r\n  /**\r\n   * 要素を文字列型で返す(string)\r\n   */\r\n  public getRawString(defaultValue?: string, indent?: string): string {\r\n    return this.getString(defaultValue, indent);\r\n  }\r\n\r\n  /**\r\n   * 要素を数値型で返す(number)\r\n   */\r\n  public toInt(defaultValue = 0): number {\r\n    return defaultValue;\r\n  }\r\n\r\n  /**\r\n   * 要素を数値型で返す(number)\r\n   */\r\n  public toFloat(defaultValue = 0): number {\r\n    return defaultValue;\r\n  }\r\n\r\n  /**\r\n   * 要素を真偽値で返す(boolean)\r\n   */\r\n  public toBoolean(defaultValue = false): boolean {\r\n    return defaultValue;\r\n  }\r\n\r\n  /**\r\n   * サイズを返す\r\n   */\r\n  public getSize(): number {\r\n    return 0;\r\n  }\r\n\r\n  /**\r\n   * 要素を配列で返す(Value[])\r\n   */\r\n  public getArray(defaultValue: Value[] = null): Value[] {\r\n    return defaultValue;\r\n  }\r\n\r\n  /**\r\n   * 要素をコンテナで返す(array)\r\n   */\r\n  public getVector(defaultValue = new csmVector<Value>()): csmVector<Value> {\r\n    return defaultValue;\r\n  }\r\n\r\n  /**\r\n   * 要素をマップで返す(csmMap<csmString, Value>)\r\n   */\r\n  public getMap(defaultValue?: csmMap<string, Value>): csmMap<string, Value> {\r\n    return defaultValue;\r\n  }\r\n\r\n  /**\r\n   * 添字演算子[index]\r\n   */\r\n  public getValueByIndex(index: number): Value {\r\n    return Value.errorValue.setErrorNotForClientCall(\r\n      CSM_JSON_ERROR_TYPE_MISMATCH\r\n    );\r\n  }\r\n\r\n  /**\r\n   * 添字演算子[string | csmString]\r\n   */\r\n  public getValueByString(s: string | csmString): Value {\r\n    return Value.nullValue.setErrorNotForClientCall(\r\n      CSM_JSON_ERROR_TYPE_MISMATCH\r\n    );\r\n  }\r\n\r\n  /**\r\n   * マップのキー一覧をコンテナで返す\r\n   *\r\n   * @return マップのキーの一覧\r\n   */\r\n  public getKeys(): csmVector<string> {\r\n    return Value.s_dummyKeys;\r\n  }\r\n\r\n  /**\r\n   * Valueの種類がエラー値ならtrue\r\n   */\r\n  public isError(): boolean {\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Valueの種類がnullならtrue\r\n   */\r\n  public isNull(): boolean {\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Valueの種類が真偽値ならtrue\r\n   */\r\n  public isBool(): boolean {\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Valueの種類が数値型ならtrue\r\n   */\r\n  public isFloat(): boolean {\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Valueの種類が文字列ならtrue\r\n   */\r\n  public isString(): boolean {\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Valueの種類が配列ならtrue\r\n   */\r\n  public isArray(): boolean {\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Valueの種類がマップ型ならtrue\r\n   */\r\n  public isMap(): boolean {\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * 引数の値と等しければtrue\r\n   */\r\n  public equals(value: csmString): boolean;\r\n  public equals(value: string): boolean;\r\n  public equals(value: number): boolean;\r\n  public equals(value: boolean): boolean;\r\n  public equals(value: any): boolean {\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Valueの値が静的ならtrue、静的なら解放しない\r\n   */\r\n  public isStatic(): boolean {\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Valueにエラー値をセットする\r\n   */\r\n  public setErrorNotForClientCall(errorStr: string): Value {\r\n    return JsonError.errorValue;\r\n  }\r\n\r\n  /**\r\n   * 初期化用メソッド\r\n   */\r\n  public static staticInitializeNotForClientCall(): void {\r\n    JsonBoolean.trueValue = new JsonBoolean(true);\r\n    JsonBoolean.falseValue = new JsonBoolean(false);\r\n    Value.errorValue = new JsonError('ERROR', true);\r\n    Value.nullValue = new JsonNullvalue();\r\n    Value.s_dummyKeys = new csmVector<string>();\r\n  }\r\n\r\n  /**\r\n   * リリース用メソッド\r\n   */\r\n  public static staticReleaseNotForClientCall(): void {\r\n    JsonBoolean.trueValue = null;\r\n    JsonBoolean.falseValue = null;\r\n    Value.errorValue = null;\r\n    Value.nullValue = null;\r\n    Value.s_dummyKeys = null;\r\n  }\r\n\r\n  protected _stringBuffer: string; // 文字列バッファ\r\n\r\n  private static s_dummyKeys: csmVector<string>; // ダミーキー\r\n\r\n  public static errorValue: Value; // 一時的な返り値として返すエラー。 CubismFramework::Disposeするまではdeleteしない\r\n  public static nullValue: Value; // 一時的な返り値として返すNULL。   CubismFramework::Disposeするまではdeleteしない\r\n}\r\n\r\n/**\r\n * Ascii文字のみ対応した最小限の軽量JSONパーサ。\r\n * 仕様はJSONのサブセットとなる。\r\n * 設定ファイル(model3.json)などのロード用\r\n *\r\n * [未対応項目]\r\n * ・日本語などの非ASCII文字\r\n * ・eによる指数表現\r\n */\r\nexport class CubismJson {\r\n  /**\r\n   * コンストラクタ\r\n   */\r\n  public constructor(buffer?: ArrayBuffer, length?: number) {\r\n    this._error = null;\r\n    this._lineCount = 0;\r\n    this._root = null;\r\n\r\n    if (buffer != undefined) {\r\n      this.parseBytes(buffer, length, this._parseCallback);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * バイトデータから直接ロードしてパースする\r\n   *\r\n   * @param buffer バッファ\r\n   * @param size バッファサイズ\r\n   * @return CubismJsonクラスのインスタンス。失敗したらNULL\r\n   */\r\n  public static create(buffer: ArrayBuffer, size: number) {\r\n    const json = new CubismJson();\r\n    const succeeded: boolean = json.parseBytes(\r\n      buffer,\r\n      size,\r\n      json._parseCallback\r\n    );\r\n\r\n    if (!succeeded) {\r\n      CubismJson.delete(json);\r\n      return null;\r\n    } else {\r\n      return json;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * パースしたJSONオブジェクトの解放処理\r\n   *\r\n   * @param instance CubismJsonクラスのインスタンス\r\n   */\r\n  public static delete(instance: CubismJson) {\r\n    instance = null;\r\n  }\r\n\r\n  /**\r\n   * パースしたJSONのルート要素を返す\r\n   */\r\n  public getRoot(): Value {\r\n    return this._root;\r\n  }\r\n\r\n  /**\r\n   *  UnicodeのバイナリをStringに変換\r\n   *\r\n   * @param buffer 変換するバイナリデータ\r\n   * @return 変換後の文字列\r\n   */\r\n  public static arrayBufferToString(buffer: ArrayBuffer): string {\r\n    const uint8Array: Uint8Array = new Uint8Array(buffer);\r\n    let str = '';\r\n\r\n    for (let i = 0, len: number = uint8Array.length; i < len; ++i) {\r\n      str += '%' + this.pad(uint8Array[i].toString(16));\r\n    }\r\n\r\n    str = decodeURIComponent(str);\r\n    return str;\r\n  }\r\n\r\n  /**\r\n   * エンコード、パディング\r\n   */\r\n  private static pad(n: string): string {\r\n    return n.length < 2 ? '0' + n : n;\r\n  }\r\n\r\n  /**\r\n   * JSONのパースを実行する\r\n   * @param buffer    パース対象のデータバイト\r\n   * @param size      データバイトのサイズ\r\n   * return true : 成功\r\n   * return false: 失敗\r\n   */\r\n  public parseBytes(\r\n    buffer: ArrayBuffer,\r\n    size: number,\r\n    parseCallback?: parseJsonObject\r\n  ): boolean {\r\n    const endPos: number[] = new Array<number>(1); // 参照渡しにするため配列\r\n    const decodeBuffer: string = CubismJson.arrayBufferToString(buffer);\r\n\r\n    if (parseCallback == undefined) {\r\n      this._root = this.parseValue(decodeBuffer, size, 0, endPos);\r\n    } else {\r\n      // TypeScript標準のJSONパーサを使う\r\n      this._root = parseCallback(JSON.parse(decodeBuffer), new JsonMap());\r\n    }\r\n\r\n    if (this._error) {\r\n      let strbuf = '\\0';\r\n      strbuf = 'Json parse error : @line ' + (this._lineCount + 1) + '\\n';\r\n      this._root = new JsonString(strbuf);\r\n\r\n      CubismLogInfo('{0}', this._root.getRawString());\r\n      return false;\r\n    } else if (this._root == null) {\r\n      this._root = new JsonError(new csmString(this._error), false); // rootは解放されるのでエラーオブジェクトを別途作成する\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * パース時のエラー値を返す\r\n   */\r\n  public getParseError(): string {\r\n    return this._error;\r\n  }\r\n\r\n  /**\r\n   * ルート要素の次の要素がファイルの終端だったらtrueを返す\r\n   */\r\n  public checkEndOfFile(): boolean {\r\n    return this._root.getArray()[1].equals('EOF');\r\n  }\r\n\r\n  /**\r\n   * JSONエレメントからValue(float,String,Value*,Array,null,true,false)をパースする\r\n   * エレメントの書式に応じて内部でParseString(), ParseObject(), ParseArray()を呼ぶ\r\n   *\r\n   * @param   buffer      JSONエレメントのバッファ\r\n   * @param   length      パースする長さ\r\n   * @param   begin       パースを開始する位置\r\n   * @param   outEndPos   パース終了時の位置\r\n   * @return      パースから取得したValueオブジェクト\r\n   */\r\n  protected parseValue(\r\n    buffer: string,\r\n    length: number,\r\n    begin: number,\r\n    outEndPos: number[]\r\n  ) {\r\n    if (this._error) return null;\r\n\r\n    let o: Value = null;\r\n    let i: number = begin;\r\n    let f: number;\r\n\r\n    for (; i < length; i++) {\r\n      const c: string = buffer[i];\r\n      switch (c) {\r\n        case '-':\r\n        case '.':\r\n        case '0':\r\n        case '1':\r\n        case '2':\r\n        case '3':\r\n        case '4':\r\n        case '5':\r\n        case '6':\r\n        case '7':\r\n        case '8':\r\n        case '9': {\r\n          const afterString: string[] = new Array(1); // 参照渡しにするため\r\n          f = strtod(buffer.slice(i), afterString);\r\n          outEndPos[0] = buffer.indexOf(afterString[0]);\r\n          return new JsonFloat(f);\r\n        }\r\n        case '\"':\r\n          return new JsonString(\r\n            this.parseString(buffer, length, i + 1, outEndPos)\r\n          ); // \\\"の次の文字から\r\n        case '[':\r\n          o = this.parseArray(buffer, length, i + 1, outEndPos);\r\n          return o;\r\n        case '{':\r\n          o = this.parseObject(buffer, length, i + 1, outEndPos);\r\n          return o;\r\n        case 'n': // null以外にない\r\n          if (i + 3 < length) {\r\n            o = new JsonNullvalue(); // 解放できるようにする\r\n            outEndPos[0] = i + 4;\r\n          } else {\r\n            this._error = 'parse null';\r\n          }\r\n          return o;\r\n        case 't': // true以外にない\r\n          if (i + 3 < length) {\r\n            o = JsonBoolean.trueValue;\r\n            outEndPos[0] = i + 4;\r\n          } else {\r\n            this._error = 'parse true';\r\n          }\r\n          return o;\r\n        case 'f': // false以外にない\r\n          if (i + 4 < length) {\r\n            o = JsonBoolean.falseValue;\r\n            outEndPos[0] = i + 5;\r\n          } else {\r\n            this._error = \"illegal ',' position\";\r\n          }\r\n          return o;\r\n        case ',': // Array separator\r\n          this._error = \"illegal ',' position\";\r\n          return null;\r\n        case ']': // 不正な｝だがスキップする。配列の最後に不要な , があると思われる\r\n          outEndPos[0] = i; // 同じ文字を再処理\r\n          return null;\r\n        case '\\n':\r\n          this._lineCount++;\r\n        case ' ':\r\n        case '\\t':\r\n        case '\\r':\r\n        default:\r\n          // スキップ\r\n          break;\r\n      }\r\n    }\r\n\r\n    this._error = 'illegal end of value';\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * 次の「\"」までの文字列をパースする。\r\n   *\r\n   * @param   string  ->  パース対象の文字列\r\n   * @param   length  ->  パースする長さ\r\n   * @param   begin   ->  パースを開始する位置\r\n   * @param  outEndPos   ->  パース終了時の位置\r\n   * @return      パースした文F字列要素\r\n   */\r\n  protected parseString(\r\n    string: string,\r\n    length: number,\r\n    begin: number,\r\n    outEndPos: number[]\r\n  ): string {\r\n    if (this._error) return null;\r\n\r\n    let i = begin;\r\n    let c: string, c2: string;\r\n    const ret: csmString = new csmString('');\r\n    let bufStart: number = begin; // sbufに登録されていない文字の開始位置\r\n\r\n    for (; i < length; i++) {\r\n      c = string[i];\r\n\r\n      switch (c) {\r\n        case '\"': {\r\n          // 終端の”、エスケープ文字は別に処理されるのでここに来ない\r\n          outEndPos[0] = i + 1; // ”の次の文字\r\n          ret.append(string.slice(bufStart), i - bufStart); // 前の文字までを登録する\r\n          return ret.s;\r\n        }\r\n        case '//': {\r\n          // エスケープの場合\r\n          i++; // ２文字をセットで扱う\r\n\r\n          if (i - 1 > bufStart) {\r\n            ret.append(string.slice(bufStart), i - bufStart); // 前の文字までを登録する\r\n          }\r\n          bufStart = i + 1; // エスケープ（２文字)の次の文字から\r\n\r\n          if (i < length) {\r\n            c2 = string[i];\r\n\r\n            switch (c2) {\r\n              case '\\\\':\r\n                ret.expansion(1, '\\\\');\r\n                break;\r\n              case '\"':\r\n                ret.expansion(1, '\"');\r\n                break;\r\n              case '/':\r\n                ret.expansion(1, '/');\r\n                break;\r\n              case 'b':\r\n                ret.expansion(1, '\\b');\r\n                break;\r\n              case 'f':\r\n                ret.expansion(1, '\\f');\r\n                break;\r\n              case 'n':\r\n                ret.expansion(1, '\\n');\r\n                break;\r\n              case 'r':\r\n                ret.expansion(1, '\\r');\r\n                break;\r\n              case 't':\r\n                ret.expansion(1, '\\t');\r\n                break;\r\n              case 'u':\r\n                this._error = 'parse string/unicord escape not supported';\r\n                break;\r\n              default:\r\n                break;\r\n            }\r\n          } else {\r\n            this._error = 'parse string/escape error';\r\n          }\r\n        }\r\n        default: {\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    this._error = 'parse string/illegal end';\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * JSONのオブジェクトエレメントをパースしてValueオブジェクトを返す\r\n   *\r\n   * @param buffer    JSONエレメントのバッファ\r\n   * @param length    パースする長さ\r\n   * @param begin     パースを開始する位置\r\n   * @param outEndPos パース終了時の位置\r\n   * @return パースから取得したValueオブジェクト\r\n   */\r\n  protected parseObject(\r\n    buffer: string,\r\n    length: number,\r\n    begin: number,\r\n    outEndPos: number[]\r\n  ): Value {\r\n    if (this._error) return null;\r\n    const ret: JsonMap = new JsonMap();\r\n\r\n    // Key: Value\r\n    let key = '';\r\n    let i: number = begin;\r\n    let c = '';\r\n    const localRetEndPos2: number[] = Array(1);\r\n    let ok = false;\r\n\r\n    // , が続く限りループ\r\n    for (; i < length; i++) {\r\n      FOR_LOOP: for (; i < length; i++) {\r\n        c = buffer[i];\r\n\r\n        switch (c) {\r\n          case '\"':\r\n            key = this.parseString(buffer, length, i + 1, localRetEndPos2);\r\n            if (this._error) {\r\n              return null;\r\n            }\r\n\r\n            i = localRetEndPos2[0];\r\n            ok = true;\r\n            break FOR_LOOP; //-- loopから出る\r\n          case '}': // 閉じカッコ\r\n            outEndPos[0] = i + 1;\r\n            return ret; // 空\r\n          case ':':\r\n            this._error = \"illegal ':' position\";\r\n            break;\r\n          case '\\n':\r\n            this._lineCount++;\r\n          default:\r\n            break; // スキップする文字\r\n        }\r\n      }\r\n      if (!ok) {\r\n        this._error = 'key not found';\r\n        return null;\r\n      }\r\n\r\n      ok = false;\r\n\r\n      // : をチェック\r\n      FOR_LOOP2: for (; i < length; i++) {\r\n        c = buffer[i];\r\n\r\n        switch (c) {\r\n          case ':':\r\n            ok = true;\r\n            i++;\r\n            break FOR_LOOP2;\r\n          case '}':\r\n            this._error = \"illegal '}' position\";\r\n            break;\r\n          case '\\n':\r\n            this._lineCount++;\r\n          // case ' ': case '\\t' : case '\\r':\r\n          default:\r\n            break; // スキップする文字\r\n        }\r\n      }\r\n\r\n      if (!ok) {\r\n        this._error = \"':' not found\";\r\n        return null;\r\n      }\r\n\r\n      // 値をチェック\r\n      const value: Value = this.parseValue(buffer, length, i, localRetEndPos2);\r\n      if (this._error) {\r\n        return null;\r\n      }\r\n\r\n      i = localRetEndPos2[0];\r\n\r\n      // ret.put(key, value);\r\n      ret.put(key, value);\r\n\r\n      FOR_LOOP3: for (; i < length; i++) {\r\n        c = buffer[i];\r\n\r\n        switch (c) {\r\n          case ',':\r\n            break FOR_LOOP3;\r\n          case '}':\r\n            outEndPos[0] = i + 1;\r\n            return ret; // 正常終了\r\n          case '\\n':\r\n            this._lineCount++;\r\n          default:\r\n            break; // スキップ\r\n        }\r\n      }\r\n    }\r\n\r\n    this._error = 'illegal end of perseObject';\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * 次の「\"」までの文字列をパースする。\r\n   * @param buffer    JSONエレメントのバッファ\r\n   * @param length    パースする長さ\r\n   * @param begin     パースを開始する位置\r\n   * @param outEndPos パース終了時の位置\r\n   * @return パースから取得したValueオブジェクト\r\n   */\r\n  protected parseArray(\r\n    buffer: string,\r\n    length: number,\r\n    begin: number,\r\n    outEndPos: number[]\r\n  ): Value {\r\n    if (this._error) return null;\r\n    let ret: JsonArray = new JsonArray();\r\n\r\n    // key : value\r\n    let i: number = begin;\r\n    let c: string;\r\n    const localRetEndpos2: number[] = new Array(1);\r\n\r\n    // , が続く限りループ\r\n    for (; i < length; i++) {\r\n      // : をチェック\r\n      const value: Value = this.parseValue(buffer, length, i, localRetEndpos2);\r\n\r\n      if (this._error) {\r\n        return null;\r\n      }\r\n      i = localRetEndpos2[0];\r\n\r\n      if (value) {\r\n        ret.add(value);\r\n      }\r\n\r\n      // FOR_LOOP3:\r\n      // boolean breakflag = false;\r\n      FOR_LOOP: for (; i < length; i++) {\r\n        c = buffer[i];\r\n\r\n        switch (c) {\r\n          case ',':\r\n            // breakflag = true;\r\n            // break; // 次のKEY, VAlUEへ\r\n            break FOR_LOOP;\r\n          case ']':\r\n            outEndPos[0] = i + 1;\r\n            return ret; // 終了\r\n          case '\\n':\r\n            ++this._lineCount;\r\n          //case ' ': case '\\t': case '\\r':\r\n          default:\r\n            break; // スキップ\r\n        }\r\n      }\r\n    }\r\n\r\n    ret = void 0;\r\n    this._error = 'illegal end of parseObject';\r\n    return null;\r\n  }\r\n\r\n  _parseCallback: parseJsonObject = CubismJsonExtension.parseJsonObject; // パース時に使う処理のコールバック関数\r\n\r\n  _error: string; // パース時のエラー\r\n  _lineCount: number; // エラー報告に用いる行数カウント\r\n  _root: Value; // パースされたルート要素\r\n}\r\n\r\ninterface parseJsonObject {\r\n  (obj: Value, map: JsonMap): JsonMap;\r\n}\r\n\r\n/**\r\n * パースしたJSONの要素をfloat値として扱う\r\n */\r\nexport class JsonFloat extends Value {\r\n  /**\r\n   * コンストラクタ\r\n   */\r\n  constructor(v: number) {\r\n    super();\r\n\r\n    this._value = v;\r\n  }\r\n\r\n  /**\r\n   * Valueの種類が数値型ならtrue\r\n   */\r\n  public isFloat(): boolean {\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * 要素を文字列で返す(csmString型)\r\n   */\r\n  public getString(defaultValue: string, indent: string): string {\r\n    const strbuf = '\\0';\r\n    this._value = parseFloat(strbuf);\r\n    this._stringBuffer = strbuf;\r\n\r\n    return this._stringBuffer;\r\n  }\r\n\r\n  /**\r\n   * 要素を数値型で返す(number)\r\n   */\r\n  public toInt(defaultValue = 0): number {\r\n    return parseInt(this._value.toString());\r\n  }\r\n\r\n  /**\r\n   * 要素を数値型で返す(number)\r\n   */\r\n  public toFloat(defaultValue = 0.0): number {\r\n    return this._value;\r\n  }\r\n\r\n  /**\r\n   * 引数の値と等しければtrue\r\n   */\r\n  public equals(value: csmString): boolean;\r\n  public equals(value: string): boolean;\r\n  public equals(value: number): boolean;\r\n  public equals(value: boolean): boolean;\r\n  public equals(value: any): boolean {\r\n    if ('number' === typeof value) {\r\n      // int\r\n      if (Math.round(value)) {\r\n        return false;\r\n      }\r\n      // float\r\n      else {\r\n        return value == this._value;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  private _value: number; // JSON要素の値\r\n}\r\n\r\n/**\r\n * パースしたJSONの要素を真偽値として扱う\r\n */\r\nexport class JsonBoolean extends Value {\r\n  /**\r\n   * Valueの種類が真偽値ならtrue\r\n   */\r\n  public isBool(): boolean {\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * 要素を真偽値で返す(boolean)\r\n   */\r\n  public toBoolean(defaultValue = false): boolean {\r\n    return this._boolValue;\r\n  }\r\n\r\n  /**\r\n   * 要素を文字列で返す(csmString型)\r\n   */\r\n  public getString(defaultValue: string, indent: string): string {\r\n    this._stringBuffer = this._boolValue ? 'true' : 'false';\r\n\r\n    return this._stringBuffer;\r\n  }\r\n\r\n  /**\r\n   * 引数の値と等しければtrue\r\n   */\r\n  public equals(value: csmString): boolean;\r\n  public equals(value: string): boolean;\r\n  public equals(value: number): boolean;\r\n  public equals(value: boolean): boolean;\r\n  public equals(value: any): boolean {\r\n    if ('boolean' === typeof value) {\r\n      return value == this._boolValue;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Valueの値が静的ならtrue, 静的なら解放しない\r\n   */\r\n  public isStatic(): boolean {\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * 引数付きコンストラクタ\r\n   */\r\n  public constructor(v: boolean) {\r\n    super();\r\n\r\n    this._boolValue = v;\r\n  }\r\n\r\n  static trueValue: JsonBoolean; // true\r\n  static falseValue: JsonBoolean; // false\r\n\r\n  private _boolValue: boolean; // JSON要素の値\r\n}\r\n\r\n/**\r\n * パースしたJSONの要素を文字列として扱う\r\n */\r\nexport class JsonString extends Value {\r\n  /**\r\n   * 引数付きコンストラクタ\r\n   */\r\n  public constructor(s: string);\r\n  public constructor(s: csmString);\r\n  public constructor(s: any) {\r\n    super();\r\n\r\n    if ('string' === typeof s) {\r\n      this._stringBuffer = s;\r\n    }\r\n\r\n    if (s instanceof csmString) {\r\n      this._stringBuffer = s.s;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Valueの種類が文字列ならtrue\r\n   */\r\n  public isString(): boolean {\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * 要素を文字列で返す(csmString型)\r\n   */\r\n  public getString(defaultValue: string, indent: string): string {\r\n    return this._stringBuffer;\r\n  }\r\n\r\n  /**\r\n   * 引数の値と等しければtrue\r\n   */\r\n  public equals(value: csmString): boolean;\r\n  public equals(value: string): boolean;\r\n  public equals(value: number): boolean;\r\n  public equals(value: boolean): boolean;\r\n  public equals(value: any): boolean {\r\n    if ('string' === typeof value) {\r\n      return this._stringBuffer == value;\r\n    }\r\n\r\n    if (value instanceof csmString) {\r\n      return this._stringBuffer == value.s;\r\n    }\r\n\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n * JSONパース時のエラー結果。文字列型のようにふるまう\r\n */\r\nexport class JsonError extends JsonString {\r\n  /**\r\n   * Valueの値が静的ならtrue、静的なら解放しない\r\n   */\r\n  public isStatic(): boolean {\r\n    return this._isStatic;\r\n  }\r\n\r\n  /**\r\n   * エラー情報をセットする\r\n   */\r\n  public setErrorNotForClientCall(s: string): Value {\r\n    this._stringBuffer = s;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * 引数付きコンストラクタ\r\n   */\r\n  public constructor(s: csmString | string, isStatic: boolean) {\r\n    if ('string' === typeof s) {\r\n      super(s);\r\n    } else {\r\n      super(s);\r\n    }\r\n    this._isStatic = isStatic;\r\n  }\r\n\r\n  /**\r\n   * Valueの種類がエラー値ならtrue\r\n   */\r\n  public isError(): boolean {\r\n    return true;\r\n  }\r\n\r\n  protected _isStatic: boolean; // 静的なValueかどうか\r\n}\r\n\r\n/**\r\n * パースしたJSONの要素をNULL値として持つ\r\n */\r\nexport class JsonNullvalue extends Value {\r\n  /**\r\n   * Valueの種類がNULL値ならtrue\r\n   */\r\n  public isNull(): boolean {\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * 要素を文字列で返す(csmString型)\r\n   */\r\n  public getString(defaultValue: string, indent: string): string {\r\n    return this._stringBuffer;\r\n  }\r\n\r\n  /**\r\n   * Valueの値が静的ならtrue, 静的なら解放しない\r\n   */\r\n  public isStatic(): boolean {\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Valueにエラー値をセットする\r\n   */\r\n  public setErrorNotForClientCall(s: string): Value {\r\n    this._stringBuffer = s;\r\n    return JsonError.nullValue;\r\n  }\r\n\r\n  /**\r\n   * コンストラクタ\r\n   */\r\n  public constructor() {\r\n    super();\r\n\r\n    this._stringBuffer = 'NullValue';\r\n  }\r\n}\r\n\r\n/**\r\n * パースしたJSONの要素を配列として持つ\r\n */\r\nexport class JsonArray extends Value {\r\n  /**\r\n   * コンストラクタ\r\n   */\r\n  public constructor() {\r\n    super();\r\n    this._array = new csmVector<Value>();\r\n  }\r\n\r\n  /**\r\n   * デストラクタ相当の処理\r\n   */\r\n  public release(): void {\r\n    for (\r\n      let ite: csmVector_iterator<Value> = this._array.begin();\r\n      ite.notEqual(this._array.end());\r\n      ite.preIncrement()\r\n    ) {\r\n      let v: Value = ite.ptr();\r\n\r\n      if (v && !v.isStatic()) {\r\n        v = void 0;\r\n        v = null;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Valueの種類が配列ならtrue\r\n   */\r\n  public isArray(): boolean {\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * 添字演算子[index]\r\n   */\r\n  public getValueByIndex(index: number): Value {\r\n    if (index < 0 || this._array.getSize() <= index) {\r\n      return Value.errorValue.setErrorNotForClientCall(\r\n        CSM_JSON_ERROR_INDEX_OF_BOUNDS\r\n      );\r\n    }\r\n\r\n    const v: Value = this._array.at(index);\r\n\r\n    if (v == null) {\r\n      return Value.nullValue;\r\n    }\r\n\r\n    return v;\r\n  }\r\n\r\n  /**\r\n   * 添字演算子[string | csmString]\r\n   */\r\n  public getValueByString(s: string | csmString): Value {\r\n    return Value.errorValue.setErrorNotForClientCall(\r\n      CSM_JSON_ERROR_TYPE_MISMATCH\r\n    );\r\n  }\r\n\r\n  /**\r\n   * 要素を文字列で返す(csmString型)\r\n   */\r\n  public getString(defaultValue: string, indent: string): string {\r\n    const stringBuffer: string = indent + '[\\n';\r\n\r\n    for (\r\n      let ite: csmVector_iterator<Value> = this._array.begin();\r\n      ite.notEqual(this._array.end());\r\n      ite.increment()\r\n    ) {\r\n      const v: Value = ite.ptr();\r\n      this._stringBuffer += indent + '' + v.getString(indent + ' ') + '\\n';\r\n    }\r\n\r\n    this._stringBuffer = stringBuffer + indent + ']\\n';\r\n\r\n    return this._stringBuffer;\r\n  }\r\n\r\n  /**\r\n   * 配列要素を追加する\r\n   * @param v 追加する要素\r\n   */\r\n  public add(v: Value): void {\r\n    this._array.pushBack(v);\r\n  }\r\n\r\n  /**\r\n   * 要素をコンテナで返す(csmVector<Value>)\r\n   */\r\n  public getVector(defaultValue: csmVector<Value> = null): csmVector<Value> {\r\n    return this._array;\r\n  }\r\n\r\n  /**\r\n   * 要素の数を返す\r\n   */\r\n  public getSize(): number {\r\n    return this._array.getSize();\r\n  }\r\n\r\n  private _array: csmVector<Value>; // JSON要素の値\r\n}\r\n\r\n/**\r\n * パースしたJSONの要素をマップとして持つ\r\n */\r\nexport class JsonMap extends Value {\r\n  /**\r\n   * コンストラクタ\r\n   */\r\n  public constructor() {\r\n    super();\r\n    this._map = new csmMap<string, Value>();\r\n  }\r\n\r\n  /**\r\n   * デストラクタ相当の処理\r\n   */\r\n  public release(): void {\r\n    const ite: csmMap_iterator<string, Value> = this._map.begin();\r\n\r\n    while (ite.notEqual(this._map.end())) {\r\n      let v: Value = ite.ptr().second;\r\n\r\n      if (v && !v.isStatic()) {\r\n        v = void 0;\r\n        v = null;\r\n      }\r\n\r\n      ite.preIncrement();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Valueの値がMap型ならtrue\r\n   */\r\n  public isMap(): boolean {\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * 添字演算子[string | csmString]\r\n   */\r\n  public getValueByString(s: string | csmString): Value {\r\n    if (s instanceof csmString) {\r\n      const ret: Value = this._map.getValue(s.s);\r\n      if (ret == null) {\r\n        return Value.nullValue;\r\n      }\r\n      return ret;\r\n    }\r\n\r\n    for (\r\n      let iter: csmMap_iterator<string, Value> = this._map.begin();\r\n      iter.notEqual(this._map.end());\r\n      iter.preIncrement()\r\n    ) {\r\n      if (iter.ptr().first == s) {\r\n        if (iter.ptr().second == null) {\r\n          return Value.nullValue;\r\n        }\r\n        return iter.ptr().second;\r\n      }\r\n    }\r\n\r\n    return Value.nullValue;\r\n  }\r\n\r\n  /**\r\n   * 添字演算子[index]\r\n   */\r\n  public getValueByIndex(index: number): Value {\r\n    return Value.errorValue.setErrorNotForClientCall(\r\n      CSM_JSON_ERROR_TYPE_MISMATCH\r\n    );\r\n  }\r\n\r\n  /**\r\n   * 要素を文字列で返す(csmString型)\r\n   */\r\n  public getString(defaultValue: string, indent: string) {\r\n    this._stringBuffer = indent + '{\\n';\r\n\r\n    const ite: csmMap_iterator<string, Value> = this._map.begin();\r\n    while (ite.notEqual(this._map.end())) {\r\n      const key = ite.ptr().first;\r\n      const v: Value = ite.ptr().second;\r\n\r\n      this._stringBuffer +=\r\n        indent + ' ' + key + ' : ' + v.getString(indent + '   ') + ' \\n';\r\n      ite.preIncrement();\r\n    }\r\n\r\n    this._stringBuffer += indent + '}\\n';\r\n\r\n    return this._stringBuffer;\r\n  }\r\n\r\n  /**\r\n   * 要素をMap型で返す\r\n   */\r\n  public getMap(defaultValue?: csmMap<string, Value>): csmMap<string, Value> {\r\n    return this._map;\r\n  }\r\n\r\n  /**\r\n   * Mapに要素を追加する\r\n   */\r\n  public put(key: string, v: Value): void {\r\n    this._map.setValue(key, v);\r\n  }\r\n\r\n  /**\r\n   * Mapからキーのリストを取得する\r\n   */\r\n  public getKeys(): csmVector<string> {\r\n    if (!this._keys) {\r\n      this._keys = new csmVector<string>();\r\n\r\n      const ite: csmMap_iterator<string, Value> = this._map.begin();\r\n\r\n      while (ite.notEqual(this._map.end())) {\r\n        const key: string = ite.ptr().first;\r\n        this._keys.pushBack(key);\r\n        ite.preIncrement();\r\n      }\r\n    }\r\n    return this._keys;\r\n  }\r\n\r\n  /**\r\n   * Mapの要素数を取得する\r\n   */\r\n  public getSize(): number {\r\n    return this._keys.getSize();\r\n  }\r\n\r\n  private _map: csmMap<string, Value>; // JSON要素の値\r\n  private _keys: csmVector<string>; // JSON要素の値\r\n}\r\n\r\n// Namespace definition for compatibility.\r\nimport * as $ from './cubismjson';\r\nimport { CubismJsonExtension } from './cubismjsonextension';\r\n// eslint-disable-next-line @typescript-eslint/no-namespace\r\nexport namespace Live2DCubismFramework {\r\n  export const CubismJson = $.CubismJson;\r\n  export type CubismJson = $.CubismJson;\r\n  export const JsonArray = $.JsonArray;\r\n  export type JsonArray = $.JsonArray;\r\n  export const JsonBoolean = $.JsonBoolean;\r\n  export type JsonBoolean = $.JsonBoolean;\r\n  export const JsonError = $.JsonError;\r\n  export type JsonError = $.JsonError;\r\n  export const JsonFloat = $.JsonFloat;\r\n  export type JsonFloat = $.JsonFloat;\r\n  export const JsonMap = $.JsonMap;\r\n  export type JsonMap = $.JsonMap;\r\n  export const JsonNullvalue = $.JsonNullvalue;\r\n  export type JsonNullvalue = $.JsonNullvalue;\r\n  export const JsonString = $.JsonString;\r\n  export type JsonString = $.JsonString;\r\n  export const Value = $.Value;\r\n  export type Value = $.Value;\r\n}\r\n","/**\r\n * Copyright(c) Live2D Inc. All rights reserved.\r\n *\r\n * Use of this source code is governed by the Live2D Open Software license\r\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\r\n */\r\n\r\nimport {\r\n  JsonArray,\r\n  JsonBoolean,\r\n  JsonFloat,\r\n  JsonMap,\r\n  JsonNullvalue,\r\n  JsonString,\r\n  Value,\r\n} from './cubismjson';\r\n\r\n/**\r\n * CubismJsonで実装されているJsonパーサを使用せず、\r\n * TypeScript標準のJsonパーサなどを使用し出力された結果を\r\n * Cubism SDKで定義されているJSONエレメントの要素に\r\n * 置き換える処理をするクラス。\r\n */\r\nexport class CubismJsonExtension {\r\n  static parseJsonObject(obj: Value, map: JsonMap) {\r\n    Object.keys(obj).forEach((key) => {\r\n      if (typeof obj[key] == 'boolean') {\r\n        map.put(key, new JsonBoolean(obj[key]));\r\n      } else if (typeof obj[key] == 'string') {\r\n        map.put(key, new JsonString(obj[key]));\r\n      } else if (typeof obj[key] == 'number') {\r\n        map.put(key, new JsonFloat(obj[key]));\r\n      } else if (obj[key] instanceof Array) {\r\n        map.put(key, CubismJsonExtension.parseJsonArray(obj[key]));\r\n      } else if (obj[key] instanceof Object) {\r\n        map.put(\r\n          key,\r\n          CubismJsonExtension.parseJsonObject(obj[key], new JsonMap())\r\n        );\r\n      } else if (obj[key] == null) {\r\n        map.put(key, new JsonNullvalue());\r\n      } else {\r\n        // どれにも当てはまらない場合でも処理する\r\n        map.put(key, obj[key]);\r\n      }\r\n    });\r\n    return map;\r\n  }\r\n\r\n  protected static parseJsonArray(obj: Value) {\r\n    const arr = new JsonArray();\r\n    Object.keys(obj).forEach((key) => {\r\n      const convKey = Number(key);\r\n      if (typeof convKey == 'number') {\r\n        if (typeof obj[convKey] == 'boolean') {\r\n          arr.add(new JsonBoolean(obj[convKey]));\r\n        } else if (typeof obj[convKey] == 'string') {\r\n          arr.add(new JsonString(obj[convKey]));\r\n        } else if (typeof obj[convKey] == 'number') {\r\n          arr.add(new JsonFloat(obj[convKey]));\r\n        } else if (obj[key] instanceof Array) {\r\n          arr.add(this.parseJsonArray(obj[key]));\r\n        } else if (obj[key] instanceof Object) {\r\n          arr.add(this.parseJsonObject(obj[key], new JsonMap()));\r\n        } else if (obj[key] == null) {\r\n          arr.add(new JsonNullvalue());\r\n        } else {\r\n          // どれにも当てはまらない場合でも処理する\r\n          arr.add(obj[key]);\r\n        }\r\n      } else if (obj[key] instanceof Array) {\r\n        arr.add(this.parseJsonArray(obj[key]));\r\n      } else if (obj[key] instanceof Object) {\r\n        arr.add(this.parseJsonObject(obj[key], new JsonMap()));\r\n      } else if (obj[key] == null) {\r\n        arr.add(new JsonNullvalue());\r\n      } else {\r\n        // 配列ともObjectとも判定できなかった場合でも処理する\r\n        for (let i = 0; i < obj[key].length; i++) {\r\n          arr.add(obj[key][i]);\r\n        }\r\n      }\r\n    });\r\n    return arr;\r\n  }\r\n}\r\n","import { Live2DFramework } from \"./lib/Live2DFramework\"\r\nimport { PlatformManager } from \"./PlatformManager\"\r\nimport { LAppModel } from \"./LAppModel_v2\"\r\nimport * as LAppDefine from \"./lappdefine\"\r\n\r\nexport class LAppLive2DManager{\r\n    \r\n    public constructor(){\r\n        this.models = [];\r\n\r\n\r\n        this.count = -1;\r\n        this.reloadFlg = false;\r\n      \r\n        (<any>window).Live2D.init();\r\n        Live2DFramework.setPlatformManager(new PlatformManager);\r\n    }\r\n\r\n    public createModel() {\r\n        var model = new LAppModel();\r\n        this.models.push(model);\r\n        return model;\r\n    }\r\n\r\n\r\n    public changeModel(gl, modelurl) {\r\n        // console.log(\"--> LAppLive2DManager.update(gl)\");\r\n        if (this.reloadFlg) {\r\n            console.log(this.models)\r\n            this.reloadFlg = false;\r\n\r\n            this.releaseModel(0, gl);\r\n            this.createModel();\r\n            this.models[0].load(gl, modelurl,()=>{\r\n                console.log(\"changeModel完成\");\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n    public getModel(no) {\r\n        // console.log(\"--> LAppLive2DManager.getModel(\" + no + \")\");\r\n\r\n        if (no >= this.models.length) return null;\r\n\r\n        return this.models[no];\r\n    }\r\n\r\n\r\n\r\n    public releaseModel(no, gl) {\r\n        // console.log(\"--> LAppLive2DManager.releaseModel(\" + no + \")\");\r\n\r\n        if (this.models.length <= no) return;\r\n\r\n        this.models[no].release(gl);\r\n\r\n        delete this.models[no];\r\n        this.models.splice(no, 1);\r\n    }\r\n\r\n\r\n\r\n    public numModels() {\r\n        return this.models.length;\r\n    }\r\n\r\n\r\n\r\n    public setDrag(x, y) {\r\n        for (var i = 0; i < this.models.length; i++) {\r\n            this.models[i].setDrag(x, y);\r\n        }\r\n    }\r\n\r\n\r\n\r\n    public maxScaleEvent() {\r\n        if (LAppDefine.DebugLogEnable)\r\n            console.log(\"Max scale event.\");\r\n        for (var i = 0; i < this.models.length; i++) {\r\n            this.models[i].startRandomMotion(LAppDefine.MotionGroupPinchIn,\r\n            LAppDefine.PriorityNormal);\r\n        }\r\n    }\r\n\r\n\r\n\r\n    public minScaleEvent() {\r\n        if (LAppDefine.DebugLogEnable)\r\n            console.log(\"Min scale event.\");\r\n        for (var i = 0; i < this.models.length; i++) {\r\n            this.models[i].startRandomMotion(LAppDefine.MotionGroupPinchOut,\r\n            LAppDefine.PriorityNormal);\r\n        }\r\n    }\r\n\r\n\r\n\r\n    public tapEvent(x, y) {\r\n        if (LAppDefine.DebugLogEnable)\r\n            console.log(\"tapEvent view x:\" + x + \" y:\" + y);\r\n\r\n        for (var i = 0; i < this.models.length; i++) {\r\n\r\n            if (this.models[i].hitTest(LAppDefine.HitAreaNameHead.toLowerCase(), x, y)) {\r\n\r\n            if (LAppDefine.DebugLogEnable)\r\n                console.log(\"Tap face.\");\r\n\r\n            this.models[i].setRandomExpression();\r\n            }else if (this.models[i].hitTest(LAppDefine.HitAreaNameBody.toLowerCase(), x, y)) {\r\n\r\n            if (LAppDefine.DebugLogEnable)\r\n                console.log(\"Tap body.\" + \" models[\" + i + \"]\");\r\n\r\n            this.models[i].startRandomMotion(LAppDefine.MOTION_GROUP_TAP_BODY,\r\n                LAppDefine.PriorityNormal);\r\n            }else if (this.models[i].hitTestCustom('head', x, y)) {\r\n\r\n            if (LAppDefine.DebugLogEnable)\r\n                console.log(\"Tap face.\");\r\n\r\n                this.models[i].startRandomMotion(LAppDefine.MotionGroupFlickHead,\r\n                LAppDefine.PriorityNormal);\r\n            }else if (this.models[i].hitTestCustom('body', x, y)) {\r\n\r\n            if (LAppDefine.DebugLogEnable)\r\n                console.log(\"Tap body.\" + \" models[\" + i + \"]\");\r\n\r\n                this.models[i].startRandomMotion(LAppDefine.MOTION_GROUP_TAP_BODY,\r\n                LAppDefine.PriorityNormal);\r\n            }\r\n        }\r\n\r\n        return true;\r\n    }\r\n    models :LAppModel[];\r\n    count;\r\n    reloadFlg;\r\n}","import {Live2DFramework, L2DBaseModel, L2DMotionManager} from \"./lib/Live2DFramework\"\r\nimport {ModelSettingJson} from \"./lib/ModelSettingJson\"\r\nimport * as LAppDefine from \"./lappdefine\"\r\n\r\nexport class LAppModel extends L2DBaseModel{\r\n    public constructor(){\r\n        super();\r\n        //L2DBaseModel.apply(this, arguments);\r\n        L2DBaseModel.prototype.constructor.call(this);\r\n    \r\n        this.modelHomeDir = \"\";\r\n        this.modelSetting = null;\r\n        this.tmpMatrix = [];\r\n    }\r\n\r\n    public load(gl, modelSettingPath, callback)\r\n    {\r\n        this.setUpdating(true);\r\n        this.setInitialized(false);\r\n    \r\n        this.modelHomeDir = modelSettingPath.substring(0, modelSettingPath.lastIndexOf(\"/\") + 1); \r\n    \r\n        this.modelSetting = new ModelSettingJson();\r\n        \r\n        var thisRef = this;\r\n        \r\n        this.modelSetting.loadModelSetting(modelSettingPath, function(){\r\n            \r\n            var path = thisRef.modelHomeDir + thisRef.modelSetting.getModelFile();\r\n            thisRef.loadModelData(path, function(model){\r\n                \r\n                for (var i = 0; i < thisRef.modelSetting.getTextureNum(); i++)\r\n                {\r\n                    let texPaths = '';\r\n                    if( /^https?:\\/\\/|^\\/\\//i.test(thisRef.modelSetting.getTextureFile(i)) )\r\n                    {\r\n                        texPaths = thisRef.modelSetting.getTextureFile(i);\r\n                    }\r\n                    else\r\n                    {\r\n                        texPaths = thisRef.modelHomeDir + \r\n                        thisRef.modelSetting.getTextureFile(i);\r\n                    }\r\n                    \r\n                    thisRef.loadTexture(i, texPaths, function() {\r\n                        \r\n                        if( thisRef.isTexLoaded ) {\r\n                            \r\n                            if (thisRef.modelSetting.getExpressionNum() > 0)\r\n                            {\r\n                                \r\n                                thisRef.expressions = {};\r\n                                \r\n                                for (var j = 0; j < thisRef.modelSetting.getExpressionNum(); j++)\r\n                                {\r\n                                    var expName = thisRef.modelSetting.getExpressionName(j);\r\n                                    var expFilePath = thisRef.modelHomeDir + \r\n                                        thisRef.modelSetting.getExpressionFile(j);\r\n                                    \r\n                                    thisRef.loadExpression(expName, expFilePath, null);\r\n                                }\r\n                            }\r\n                            else\r\n                            {\r\n                                thisRef.expressionManager = null;\r\n                                thisRef.expressions = {};\r\n                            }\r\n                            \r\n                            \r\n                            \r\n                            if (thisRef.eyeBlink == null)\r\n                            {\r\n                                //thisRef.eyeBlink = new L2DEyeBlink();\r\n                            }\r\n                            \r\n                            \r\n                            if (thisRef.modelSetting.getPhysicsFile() != null)\r\n                            {\r\n                                thisRef.loadPhysics(thisRef.modelHomeDir + \r\n                                                    thisRef.modelSetting.getPhysicsFile());\r\n                            }\r\n                            else\r\n                            {\r\n                                thisRef.physics = null;\r\n                            }\r\n                            \r\n                            \r\n                            \r\n                            if (thisRef.modelSetting.getPoseFile() != null)\r\n                            {\r\n                                thisRef.loadPose(\r\n                                    thisRef.modelHomeDir +\r\n                                    thisRef.modelSetting.getPoseFile(),\r\n                                    function() {\r\n                                        thisRef.pose.updateParam(thisRef.live2DModel);\r\n                                    }\r\n                                );\r\n                            }\r\n                            else\r\n                            {\r\n                                thisRef.pose = null;\r\n                            }\r\n                            \r\n                            \r\n                            \r\n                            if (thisRef.modelSetting.getLayout() != null)\r\n                            {\r\n                                var layout = thisRef.modelSetting.getLayout();\r\n                                if (layout[\"width\"] != null)\r\n                                    thisRef.modelMatrix.setWidth(layout[\"width\"]);\r\n                                if (layout[\"height\"] != null)\r\n                                    thisRef.modelMatrix.setHeight(layout[\"height\"]);\r\n    \r\n                                if (layout[\"x\"] != null)\r\n                                    thisRef.modelMatrix.setX(layout[\"x\"]);\r\n                                if (layout[\"y\"] != null)\r\n                                    thisRef.modelMatrix.setY(layout[\"y\"]);\r\n                                if (layout[\"center_x\"] != null)\r\n                                    thisRef.modelMatrix.centerX(layout[\"center_x\"]);\r\n                                if (layout[\"center_y\"] != null)\r\n                                    thisRef.modelMatrix.centerY(layout[\"center_y\"]);\r\n                                if (layout[\"top\"] != null)\r\n                                    thisRef.modelMatrix.top(layout[\"top\"]);\r\n                                if (layout[\"bottom\"] != null)\r\n                                    thisRef.modelMatrix.bottom(layout[\"bottom\"]);\r\n                                if (layout[\"left\"] != null)\r\n                                    thisRef.modelMatrix.left(layout[\"left\"]);\r\n                                if (layout[\"right\"] != null)\r\n                                    thisRef.modelMatrix.right(layout[\"right\"]);\r\n                            }\r\n                            \r\n                            if (thisRef.modelSetting.getHitAreasCustom() != null)\r\n                            {\r\n                                var hit_areas_custom = thisRef.modelSetting.getHitAreasCustom();\r\n                                if (hit_areas_custom[\"head_x\"] != null)\r\n                                    LAppDefine.setHitAreasCustomHead_x(hit_areas_custom[\"head_x\"]);\r\n                                if (hit_areas_custom[\"head_y\"] != null)\r\n                                    LAppDefine.setHitAreasCustomHead_y(hit_areas_custom[\"head_y\"]);\r\n                                if (hit_areas_custom[\"body_x\"] != null)\r\n                                    LAppDefine.setHitAreasCustomBody_x(hit_areas_custom[\"body_x\"]) ;\r\n                                if (hit_areas_custom[\"body_y\"] != null)\r\n                                    LAppDefine.setHitAreasCustomBody_y(hit_areas_custom[\"body_y\"]) ;\r\n                    }\r\n                            \r\n                            for (var j = 0; j < thisRef.modelSetting.getInitParamNum(); j++)\r\n                            {\r\n                                \r\n                                thisRef.live2DModel.setParamFloat(\r\n                                    thisRef.modelSetting.getInitParamID(j),\r\n                                    thisRef.modelSetting.getInitParamValue(j)\r\n                                );\r\n                            }\r\n    \r\n                            for (var j = 0; j < thisRef.modelSetting.getInitPartsVisibleNum(); j++)\r\n                            {\r\n                                \r\n                                thisRef.live2DModel.setPartsOpacity(\r\n                                    thisRef.modelSetting.getInitPartsVisibleID(j),\r\n                                    thisRef.modelSetting.getInitPartsVisibleValue(j)\r\n                                );\r\n                            }\r\n                            \r\n                            \r\n                            \r\n                            thisRef.live2DModel.saveParam();\r\n                            // thisRef.live2DModel.setGL(gl);\r\n                            \r\n                            \r\n                            thisRef.preloadMotionGroup(LAppDefine.MotionGroupIdle.toLowerCase());\r\n                            thisRef.preloadMotionGroup(LAppDefine.MotionGroupSleepy);\r\n                            thisRef.mainMotionManager.stopAllMotions();\r\n    \r\n                            thisRef.setUpdating(false); \r\n                            thisRef.setInitialized(true); \r\n    \r\n                            if (typeof callback == \"function\") callback();\r\n                            \r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    public release(gl)\r\n    {\r\n        // this.live2DModel.deleteTextures();\r\n        let pm = Live2DFramework.getPlatformManager();\r\n\r\n        gl.deleteTexture(pm.texture);\r\n    }\r\n\r\n    public preloadMotionGroup(name)\r\n    {\r\n        var thisRef = this;\r\n        \r\n        for (var i = 0; i < this.modelSetting.getMotionNum(name); i++)\r\n        {\r\n            var file = this.modelSetting.getMotionFile(name, i);\r\n            this.loadMotion(file, this.modelHomeDir + file, function(motion) {\r\n                motion.setFadeIn(thisRef.modelSetting.getMotionFadeIn(name, i));\r\n                motion.setFadeOut(thisRef.modelSetting.getMotionFadeOut(name, i));\r\n            });\r\n            \r\n        }\r\n    }\r\n\r\n    public update()\r\n    {\r\n        // console.log(\"--> LAppModel.update()\");\r\n\r\n        if(this.live2DModel == null) \r\n        {\r\n            if (LAppDefine.DebugLogEnable) console.error(\"Failed to update.\");\r\n            \r\n            return;\r\n        }\r\n        \r\n        var timeMSec = (<any>window).UtSystem.getUserTimeMSec() - this.startTimeMSec;\r\n        var timeSec = timeMSec / 1000.0;\r\n        var t = timeSec * 2 * Math.PI; \r\n        \r\n        \r\n        if (this.mainMotionManager.isFinished())\r\n        {\r\n            var Sleepy = sessionStorage.getItem('Sleepy');\r\n            if(Sleepy === '1') {\r\n                this.startRandomMotion(LAppDefine.MotionGroupSleepy, LAppDefine.PrioritySleepy);\r\n            }else {\r\n                this.startRandomMotion(LAppDefine.MotionGroupIdle.toLowerCase(), LAppDefine.PriorityIdle);\r\n            }\r\n        }\r\n        \r\n        //-----------------------------------------------------------------\t\t\r\n        \r\n        \r\n        this.live2DModel.loadParam();\r\n        \r\n        \r\n        \r\n        var update = this.mainMotionManager.updateParam(this.live2DModel); \r\n        if (!update) {\r\n            \r\n            if(this.eyeBlink != null) {\r\n                this.eyeBlink.updateParam(this.live2DModel);\r\n            }\r\n        }\r\n\r\n        \r\n        this.live2DModel.saveParam();\r\n        \r\n        //-----------------------------------------------------------------\t\t\r\n        \r\n        \r\n        if (this.expressionManager != null && \r\n            this.expressions != null && \r\n            !this.expressionManager.isFinished())\r\n        {\r\n            this.expressionManager.updateParam(this.live2DModel); \r\n        }\r\n\r\n        \r\n        \r\n        this.live2DModel.addToParamFloat(\"PARAM_ANGLE_X\", this.dragX * 30, 1); \r\n        this.live2DModel.addToParamFloat(\"PARAM_ANGLE_Y\", this.dragY * 30, 1);\r\n        this.live2DModel.addToParamFloat(\"PARAM_ANGLE_Z\", (this.dragX * this.dragY) * -30, 1);\r\n\r\n        \r\n        \r\n        this.live2DModel.addToParamFloat(\"PARAM_BODY_ANGLE_X\", this.dragX*10, 1); \r\n\r\n        \r\n        \r\n        this.live2DModel.addToParamFloat(\"PARAM_EYE_BALL_X\", this.dragX, 1); \r\n        this.live2DModel.addToParamFloat(\"PARAM_EYE_BALL_Y\", this.dragY, 1);\r\n\r\n\r\n        \r\n        this.live2DModel.addToParamFloat(\"PARAM_ANGLE_X\", \r\n                                        Number((15 * Math.sin(t / 6.5345))), 0.5);\r\n        this.live2DModel.addToParamFloat(\"PARAM_ANGLE_Y\", \r\n                                        Number((8 * Math.sin(t / 3.5345))), 0.5);\r\n        this.live2DModel.addToParamFloat(\"PARAM_ANGLE_Z\", \r\n                                        Number((10 * Math.sin(t / 5.5345))), 0.5);\r\n        this.live2DModel.addToParamFloat(\"PARAM_BODY_ANGLE_X\", \r\n                                        Number((4 * Math.sin(t / 15.5345))), 0.5);\r\n        this.live2DModel.setParamFloat(\"PARAM_BREATH\", \r\n                                    Number((0.5 + 0.5 * Math.sin(t / 3.2345))), 1);\r\n        \r\n        \r\n        if (this.physics != null)\r\n        {\r\n            this.physics.updateParam(this.live2DModel); \r\n        }\r\n        \r\n        \r\n        if (this.lipSync == null)\r\n        {\r\n            this.live2DModel.setParamFloat(\"PARAM_MOUTH_OPEN_Y\",\r\n                                        this.lipSyncValue);\r\n        }\r\n        \r\n        \r\n        if( this.pose != null ) {\r\n            this.pose.updateParam(this.live2DModel);\r\n        }\r\n            \r\n        this.live2DModel.update();\r\n    }\r\n\r\n\r\n\r\n    public setRandomExpression()\r\n    {\r\n        var tmp = [];\r\n        for (var name in this.expressions)\r\n        {\r\n            tmp.push(name);\r\n        }\r\n\r\n        var no = parseInt((Math.random() * tmp.length).toString());\r\n\r\n        this.setExpression(tmp[no]);\r\n    }\r\n\r\n\r\n\r\n    public startRandomMotion(name, priority)\r\n    {\r\n        var max = this.modelSetting.getMotionNum(name);\r\n        var no = parseInt((Math.random() * max).toString());\r\n        this.startMotion(name, no, priority);\r\n    }\r\n\r\n\r\n\r\n    public startMotion(name, no, priority)\r\n    {\r\n        // console.log(\"startMotion : \" + name + \" \" + no + \" \" + priority);\r\n        \r\n        var motionName = this.modelSetting.getMotionFile(name, no);\r\n        \r\n        if (motionName == null || motionName == \"\")\r\n        {\r\n            if (LAppDefine.DebugLogEnable)\r\n                console.error(\"Failed to motion.\");\r\n            return;\r\n        }\r\n\r\n        if (priority == LAppDefine.PriorityForce) \r\n        {\r\n            this.mainMotionManager.setReservePriority(priority);\r\n        }\r\n        else if (!this.mainMotionManager.reserveMotion(priority))\r\n        {\r\n            if (LAppDefine.DebugLogEnable)\r\n                console.log(\"Motion is running.\")\r\n            return;\r\n        }\r\n\r\n        var thisRef = this;\r\n        var motion;\r\n\r\n        if (this.motions[name] == null) \r\n        {\r\n            this.loadMotion(null, this.modelHomeDir + motionName, function(mtn) {\r\n                motion = mtn;\r\n                \r\n                \r\n                thisRef.setFadeInFadeOut(name, no, priority, motion);\r\n                \r\n            });\r\n        }\r\n        else \r\n        {\r\n            motion = this.motions[name];\r\n            \r\n            \r\n            thisRef.setFadeInFadeOut(name, no, priority, motion);\r\n        }\r\n    }\r\n\r\n\r\n    public setFadeInFadeOut(name, no, priority, motion)\r\n    {\r\n        var motionName = this.modelSetting.getMotionFile(name, no);\r\n        \r\n        motion.setFadeIn(this.modelSetting.getMotionFadeIn(name, no));\r\n        motion.setFadeOut(this.modelSetting.getMotionFadeOut(name, no));\r\n        \r\n        \r\n        if (LAppDefine.DebugLogEnable)\r\n                console.log(\"Start motion : \" + motionName);\r\n\r\n        if (this.modelSetting.getMotionSound(name, no) == null)\r\n        {\r\n            this.mainMotionManager.startMotionPrio(motion, priority);\r\n        }\r\n        else\r\n        {\r\n            var soundName = this.modelSetting.getMotionSound(name, no);\r\n            // var player = new Sound(this.modelHomeDir + soundName);\r\n            \r\n            var snd = document.createElement(\"audio\");\r\n            snd.src = this.modelHomeDir + soundName;\r\n            \r\n            if (LAppDefine.DebugLogEnable)\r\n                console.log(\"Start sound : \" + soundName);\r\n            \r\n            snd.play();\r\n            this.mainMotionManager.startMotionPrio(motion, priority);\r\n        }\r\n    }\r\n\r\n\r\n\r\n    public setExpression(name)\r\n    {\r\n        var motion = this.expressions[name];\r\n        \r\n        if (LAppDefine.DebugLogEnable)\r\n            console.log(\"Expression : \" + name);\r\n            \r\n        this.expressionManager.startMotion(motion, false);\r\n    }\r\n\r\n\r\n    /**\r\n     * 模仿v3版本的framework写的\r\n     * 同等于lappmodel.ts中797行代码\r\n     * @param {实例化后的MatrixStack} matrix \r\n     */\r\n    public draw(matrix)\r\n    {\r\n        matrix.multMatrix(this.modelMatrix.getArray());\r\n        \r\n        this.tmpMatrix = matrix.getMatrix()\r\n\r\n        this.live2DModel.setMatrix(this.tmpMatrix);\r\n        this.live2DModel.draw();\r\n    }\r\n        \r\n\r\n\r\n    public hitTest(id, testX, testY)\r\n    {\r\n        var len = this.modelSetting.getHitAreaNum();\r\n        for (var i = 0; i < len; i++)\r\n        {        \r\n            if (id == this.modelSetting.getHitAreaName(i))\r\n            {\r\n                var drawID = this.modelSetting.getHitAreaID(i);\r\n                \r\n                return this.hitTestSimple(drawID, testX, testY);\r\n            }\r\n        }\r\n        \r\n        return false; \r\n    }        \r\n\r\n\r\n    public hitTestCustom(type, testX, testY)\r\n    {\r\n        if (type == 'head'){\r\n            return this.hitTestSimpleCustom(LAppDefine.getHitAreasCustomHead_x(), LAppDefine.getHitAreasCustomHead_y(), testX, testY);\r\n        }else if (type == 'body'){\r\n            return this.hitTestSimpleCustom(LAppDefine.getHitAreasCustomBody_x(), LAppDefine.getHitAreasCustomBody_y(), testX, testY);\r\n        }else{\r\n            return false; \r\n        }\r\n    }\r\n\r\n    modelHomeDir;\r\n    modelSetting :ModelSettingJson;\r\n    tmpMatrix :any[];\r\n    mainMotionManager:any;\r\n    expressionManager:any;\r\n}","/**\r\n *\r\n *  You can modify and use this source freely\r\n *  only for the development of application related Live2D.\r\n *\r\n *  (c) Live2D Inc. All rights reserved.\r\n */\r\nimport {getContext,path2FileName,path2DirName} from \"./lappdefine\"\r\nimport { CubismJson } from './Framework/utils/cubismjson'\r\nimport { db } from \"./DbCache\";\r\n\r\nlet requestCache = {};\r\n\r\nexport class PlatformManager{\r\n    /**\r\n     * PlatformManager # loadBytes()\r\n     * @param path \r\n     */\r\n    public async loadBytes(path:string) : Promise<ArrayBuffer>{\r\n        // 获取当前model的名字\r\n        let fileKey = path2FileName(path);\r\n        let fileName =path2DirName(path);\r\n        console.log('正在加载',fileName);\r\n        // Cache 相同的请求，减少请求数量\r\n        let rsp = await db.mocJson.where({key:fileKey,name:fileName}).first();\r\n        if(rsp){\r\n            return rsp.value;\r\n        }else{\r\n            let request = await fetch(path);\r\n            let rsp =  await request.arrayBuffer();\r\n            switch(request.status){\r\n                case 200:\r\n                    db.mocJson.put({key:fileKey,name:fileName,value :rsp});\r\n                    return rsp;\r\n                default:\r\n                    console.error(\"Failed to load (\" + request.status + \") : \" + path);\r\n                    return null!;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 返回路径对应的内容（字符串类型）\r\n     * @param path \r\n     * @param callback \r\n     */\r\n    public async loadString(path:string):Promise<string>{\r\n        let buf = await this.loadBytes(path);\r\n        let arrayStr = CubismJson.arrayBufferToString(buf);\r\n        return arrayStr;\r\n    }\r\n\r\n    public loadLive2DModel(path:string, callback:any){\r\n        this.loadBytes(path).then((buf)=>{\r\n            var model = (<any>window).Live2DModelWebGL.loadModel(buf);\r\n            callback(model);\r\n        });\r\n    }\r\n\r\n    //============================================================\r\n    //    PlatformManager # loadTexture()\r\n    //============================================================\r\n    public loadTexture(model/*ALive2DModel*/, no:number, path:string, callback)\r\n    { \r\n        // load textures\r\n        var loadedImage = new Image();\r\n        loadedImage.crossOrigin = 'Anonymous';\r\n        loadedImage.src = path;\r\n        \r\n        var thisRef = this;\r\n        loadedImage.onload = function() {\r\n            // create texture\r\n            var gl = getContext();\r\n            var texture = gl.createTexture();\t \r\n            if (!texture){ console.error(\"Failed to generate gl texture name.\"); return -1; }\r\n\r\n            if(model.isPremultipliedAlpha() == false){\r\n                // 乗算済アルファテクスチャ以外の場合\r\n                gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, 1);\r\n            }\r\n            gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, 1);\t\r\n            gl.activeTexture(gl.TEXTURE0);\r\n            gl.bindTexture(gl.TEXTURE_2D, texture);\r\n            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, \r\n                        gl.UNSIGNED_BYTE, loadedImage);\r\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\r\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_NEAREST);\r\n            gl.generateMipmap(gl.TEXTURE_2D);\r\n\r\n\r\n            \r\n            model.setTexture(no, texture);\r\n            \r\n            // テクスチャオブジェクトを解放\r\n            texture = null;\r\n            \r\n            if (typeof callback == \"function\") callback();\r\n        };\r\n        \r\n        loadedImage.onerror = function() { \r\n            console.error(\"Failed to load image : \" + path); \r\n        }\r\n    }\r\n\r\n\r\n    //============================================================\r\n    //    PlatformManager # parseFromBytes(buf)\r\n\r\n    //============================================================\r\n    public jsonParseFromBytes(buf){\r\n        \r\n        var jsonStr;\r\n        \r\n        \r\n        \r\n        var bomCode = new Uint8Array(buf, 0, 3);\r\n        if (bomCode[0] == 239 && bomCode[1] == 187 && bomCode[2] == 191) {\r\n            jsonStr = String.fromCharCode.apply(null, new Uint8Array(buf, 3));\r\n        } else {\r\n            jsonStr = String.fromCharCode.apply(null, new Uint8Array(buf));\r\n        }\r\n        \r\n        var jsonObj = JSON.parse(jsonStr);\r\n        \r\n        return jsonObj;\r\n    }\r\n\r\n\r\n    //============================================================\r\n    //    PlatformManager # log()\r\n    //============================================================\r\n    public log(txt:string)\r\n    {\r\n        //console.log(txt);\r\n    }\r\n\r\n    \r\n}","/**\r\n * Copyright(c) Live2D Inc. All rights reserved.\r\n *\r\n * Use of this source code is governed by the Live2D Open Software license\r\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\r\n * \r\n * 由官方文档进行合并LAppDefine.js 与此ts进行合并\r\n */\r\n\r\nimport { LogLevel } from './Framework/live2dcubismframework';\r\n\r\n/**\r\n * Sample Appで使用する定数\r\n */\r\n// 画面\r\nexport const ViewMaxScale = 2;\r\nexport const ViewMinScale = 0.8;\r\n\r\nexport const ViewLogicalLeft = -1.0;\r\nexport const ViewLogicalRight = 1.0;\r\n\r\nexport const ViewLogicalMaxLeft = -2.0;\r\nexport const ViewLogicalMaxRight = 2.0;\r\nexport const ViewLogicalMaxBottom = -2.0;\r\nexport const ViewLogicalMaxTop = 2.0;\r\n\r\n// 外部定義ファイル（json）と合わせる\r\nexport const MotionGroupIdle = 'Idle'; // アイドリング 待机的时候 v2版本需要小写 toLowerCase()\r\nexport const MotionGroupTapBody = 'TapBody'; // 体をタップしたとき  触碰身体的时候\r\nexport const MotionGroupSleepy = \"sleepy\"; //困倦时 打哈欠\r\nexport const MotionGroupFlickHead = 'flick_head'; //触碰头部的时候\r\n\r\n/**\r\n * 触碰身体 v2的信息定义\r\n */\r\nexport const MOTION_GROUP_TAP_BODY = \"tap_body\"; // 触碰身体 V2的定义\r\n\r\nexport const MotionGroupPinchIn = \"pinch_in\"; //夹住\r\nexport const MotionGroupPinchOut = \"pinch_out\"; //松开\r\nexport const MotionGroupShake = \"shake\"; //摇晃\r\n\r\n\r\n// 外部定義ファイル（json）と合わせる\r\nexport const HitAreaNameHead = 'Head';//头部触碰区域的名称 v2版本需要小写 toLowerCase()\r\nexport const HitAreaNameBody = 'Body';//身体触碰区域的名称 v2版本需要小写 toLowerCase()\r\n//export const HitAreaName\r\n\r\n// モーションの優先度定数 动作优先度常量\r\nexport const PriorityNone = 0;\r\nexport const PriorityIdle = 1;\r\nexport const PrioritySleepy = 2;\r\nexport const PriorityNormal = 2;\r\nexport const PriorityForce = 3;\r\n\r\n// デバッグ用ログの表示オプション\r\nexport const DebugLogEnable = false;\r\nexport const DebugTouchLogEnable = false;\r\nexport const DebugDrawHitArea = false;\r\nexport const DebugDrawAlphaModel = false;\r\n\r\n// Frameworkから出力するログのレベル設定\r\nexport const CubismLoggingLevel: LogLevel = LogLevel.LogLevel_Verbose;\r\n\r\n/**\r\n * \r\n * get set\r\n * 将webglContext移动到常量类中合并为TypeScript\r\n * \r\n */\r\n\r\nlet context = undefined;\r\n\r\nlet _HitAreasCustomHead_x =undefined;\r\nlet _HitAreasCustomHead_y =undefined;\r\nlet _HitAreasCustomBody_x =undefined;\r\nlet _HitAreasCustomBody_y =undefined;\r\n\r\nlet _jsonPath :string = '';\r\n\r\nexport function setContext(webglContext) {\r\n  context = webglContext;\r\n}\r\n\r\nexport function getContext() {\r\n  return context;\r\n}\r\n\r\nexport function setHitAreasCustomHead_x(HitAreasCustomHead_x) {\r\n    _HitAreasCustomHead_x = HitAreasCustomHead_x;\r\n  }\r\n  \r\n  export function getHitAreasCustomHead_x() {\r\n    return _HitAreasCustomHead_x;\r\n  }\r\n  \r\n  export function setHitAreasCustomHead_y(HitAreasCustomHead_y) {\r\n    _HitAreasCustomHead_y = HitAreasCustomHead_y;\r\n  }\r\n  \r\n  export function getHitAreasCustomHead_y() {\r\n    return _HitAreasCustomHead_y;\r\n  }\r\n\r\n  export function setHitAreasCustomBody_x(HitAreasCustomBody_x) {\r\n    _HitAreasCustomBody_x = HitAreasCustomBody_x;\r\n  }\r\n  \r\n  export function getHitAreasCustomBody_x() {\r\n    return _HitAreasCustomBody_x;\r\n  }\r\n  \r\n  export function setHitAreasCustomBody_y(HitAreasCustomBody_y) {\r\n    _HitAreasCustomBody_y = HitAreasCustomBody_y;\r\n  }\r\n  \r\n  export function getHitAreasCustomBody_y() {\r\n    return _HitAreasCustomBody_y;\r\n  }\r\n\r\n  /**\r\n   * 返回模型的名字\r\n   * @param path 以{模型}.model3.json结尾的路径\r\n   * @returns \r\n   */\r\n   export function path2ModelName(path:string):string{\r\n    let jsonName = path2FileName(path);\r\n    return jsonName.substring(0,jsonName.indexOf('.'));\r\n  }\r\n  /**\r\n   * 返回路径名称\r\n   * @param path 以model3.json结尾的路径\r\n   * @returns \r\n   */\r\n  export function pathName(path:string):string{\r\n    return path.substring(0,path.lastIndexOf('/') + 1);\r\n  }\r\n\r\n  export function path2FileName(path:string):string{\r\n    return path.substring(path.lastIndexOf('/') + 1);\r\n  }\r\n\r\n  export function path2DirName(path:string):string{\r\n    var url = path.substring(path.indexOf('//') + 2);\r\n    let hasIndex = path.indexOf(\"model3.json\");\r\n    if(hasIndex>0){\r\n      //存在\r\n      let dirList = url.split('/');\r\n      return `${dirList[dirList.length -2]}.moc3`;\r\n    }else{\r\n      let dirList = url.split('/');\r\n      if(url.indexOf(\".mtn\")>0){\r\n        //如果是MTN文件\r\n        return dirList[dirList.length -3];\r\n      }else if(url.indexOf(\".moc\")>0){\r\n        //如果是MTN文件\r\n        return dirList[dirList.length -2];\r\n      }else{\r\n        return dirList[dirList.length -1];\r\n      }\r\n    }\r\n  }","/**\r\n * Copyright(c) Live2D Inc. All rights reserved.\r\n *\r\n * Use of this source code is governed by the Live2D Open Software license\r\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\r\n */\r\n\r\nimport {\r\n  Live2DCubismFramework as live2dcubismframework,\r\n  Option as Csm_Option,\r\n} from \"./Framework/live2dcubismframework\";\r\nimport Csm_CubismFramework = live2dcubismframework.CubismFramework;\r\nimport { LAppView } from \"./lappview\";\r\nimport { LAppPal } from \"./lapppal\";\r\nimport { LAppTextureManager } from \"./lapptexturemanager\";\r\nimport { LAppLive2DManager } from \"./lapplive2dmanager\";\r\nimport * as LAppDefine from \"./lappdefine\";\r\n\r\n//import { config } from \"./config/configMgr\";\r\n//import { L2Dwidget } from \"./index\";\r\n\r\nexport let canvas: HTMLCanvasElement = null;\r\nexport let s_instance: LAppDelegate = null;\r\nexport let gl: WebGLRenderingContext = null;\r\nexport let frameBuffer: WebGLFramebuffer = null;\r\n\r\nexport let jsonPath: string = null;\r\nexport let modelName: string = null;\r\nexport let modelDir: string = null;\r\n\r\nexport let zoom: number ;\r\nexport let modelX: number;\r\nexport let modelY: number;\r\n\r\n/**\r\n * アプリケーションクラス。\r\n * Cubism SDKの管理を行う。\r\n */\r\nexport class LAppDelegate {\r\n  /**\r\n   * クラスのインスタンス（シングルトン）を返す。\r\n   * インスタンスが生成されていない場合は内部でインスタンスを生成する。\r\n   * 返回LAppDelegate的实例，静态方法 如果调用会生成一个实例\r\n   * 举例：let a = new LAppDelegate(); 等效于LAppDelegate.getInstance();\r\n   *\r\n   * @return 返回LAppDelegate的实例\r\n   */\r\n  public static getInstance(): LAppDelegate {\r\n    if (s_instance == null) {\r\n      s_instance = new LAppDelegate();\r\n    }\r\n\r\n    return s_instance;\r\n  }\r\n\r\n  /**\r\n   * クラスのインスタンス（シングルトン）を解放する。\r\n   */\r\n  public static releaseInstance(): void {\r\n    if (s_instance != null) {\r\n      s_instance.release();\r\n    }\r\n\r\n    s_instance = null;\r\n  }\r\n\r\n\r\n  /**\r\n   * APPに必要な物を初期化する。\r\n   * 方法入口，这里是调用Live2D的初始化\r\n   */\r\n  public initialize(canvasId:string,path:string): boolean {\r\n    \r\n    canvas =  document.getElementById(canvasId) as HTMLCanvasElement;\r\n    jsonPath = path\r\n    modelName = LAppDefine.path2ModelName(path);\r\n    modelDir = LAppDefine.pathName(path);\r\n    zoom = this._zoom;\r\n    modelX = this._modelX;\r\n    modelY = this._modelY;\r\n    const supportTouch: boolean = \"ontouchend\" in canvas;\r\n    if (supportTouch) {\r\n      // タッチ関連コールバック関数登録\r\n      canvas.ontouchstart = onTouchBegan;\r\n      window.ontouchmove = onTouchMoved;\r\n      canvas.ontouchend = onTouchEnded;\r\n      canvas.ontouchcancel = onTouchCancel;\r\n    } else {\r\n      // マウス関連コールバック関数登録\r\n      canvas.onmousedown = onClickBegan;\r\n      window.onmousemove = onMouseMoved;\r\n      canvas.onmouseup = onClickEnded;\r\n      document.onmouseleave = onMouseLeave;\r\n    }\r\n\r\n    // @ts-ignore\r\n    gl =  getWebGLContext(canvas);\r\n\r\n    if (!gl) {\r\n      alert(\"Cannot initialize WebGL. This browser does not support.\");\r\n      gl = null;\r\n\r\n      document.body.innerHTML =\r\n        \"This browser does not support the <code>&lt;canvas&gt;</code> element.\";\r\n\r\n      // gl初期化失敗\r\n      return false;\r\n    }\r\n\r\n    if (!frameBuffer) {\r\n      frameBuffer = gl.getParameter(gl.FRAMEBUFFER_BINDING);\r\n    }\r\n\r\n    // 透過設定\r\n    gl.enable(gl.BLEND);\r\n    gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\r\n\r\n\r\n    // AppViewの初期化\r\n    this._view.initialize();\r\n\r\n    // Cubism SDKの初期化\r\n    this.initializeCubism();\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * 解放する。\r\n   */\r\n  public release(): void {\r\n    this._textureManager.release();\r\n    this._textureManager = null;\r\n\r\n    this._view.release();\r\n    this._view = null;\r\n\r\n    // リソースを解放\r\n    LAppLive2DManager.releaseInstance();\r\n\r\n    // Cubism SDKの解放\r\n    Csm_CubismFramework.dispose();\r\n  }\r\n\r\n  /**\r\n   * 実行処理。\r\n   */\r\n  public run(): void {\r\n    // メインループ\r\n    const loop = (): void => {\r\n      // インスタンスの有無の確認\r\n      if (s_instance == null) {\r\n        return;\r\n      }\r\n\r\n      // 時間更新\r\n      LAppPal.updateTime();\r\n\r\n      // 画面の初期化\r\n      // 清除或者说是给画板增加RGBA颜色 0-1的范围\r\n      gl.clearColor(0.0, 0.0, 0.0, 0.0);\r\n\r\n      // 深度テストを有効化\r\n      gl.enable(gl.DEPTH_TEST);\r\n\r\n      // 近くにある物体は、遠くにある物体を覆い隠す\r\n      gl.depthFunc(gl.LEQUAL);\r\n\r\n      // カラーバッファや深度バッファをクリアする\r\n      // 清除彩色缓冲区和深度缓冲区\r\n      gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\r\n\r\n      gl.clearDepth(1.0);\r\n\r\n      // 透過設定\r\n      gl.enable(gl.BLEND);\r\n      gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\r\n\r\n      this._view._head_pos = this._head_pos;\r\n      this._view._hitAreaList = this._hitAreaList;\r\n\r\n      // 描画更新\r\n      this._view.render();\r\n      // 截图截停帧\r\n      if(this._captureFrame){\r\n        this._captureFrame = false;\r\n        var link = document.createElement('a');\r\n        document.body.appendChild(link);\r\n        link.setAttribute(\"type\", \"hidden\");\r\n        link.href = canvas.toDataURL();\r\n        link.download = this._captureName || 'live2d.png';\r\n        link.click();\r\n      }\r\n\r\n      // ループのために再帰呼び出し\r\n      requestAnimationFrame(loop);\r\n    };\r\n    loop();\r\n  }\r\n\r\n  /**\r\n   * シェーダーを登録する。\r\n   */\r\n  public createShader(): WebGLProgram {\r\n    // バーテックスシェーダーのコンパイル\r\n    const vertexShaderId = gl.createShader(gl.VERTEX_SHADER);\r\n\r\n    if (vertexShaderId == null) {\r\n      LAppPal.printMessage(\"failed to create vertexShader\");\r\n      return null;\r\n    }\r\n\r\n    const vertexShader: string =\r\n      \"precision mediump float;\" +\r\n      \"attribute vec3 position;\" +\r\n      \"attribute vec2 uv;\" +\r\n      \"varying vec2 vuv;\" +\r\n      \"void main(void)\" +\r\n      \"{\" +\r\n      \"   gl_Position = vec4(position, 1.0);\" +\r\n      \"   vuv = uv;\" +\r\n      \"}\";\r\n\r\n    gl.shaderSource(vertexShaderId, vertexShader);\r\n    gl.compileShader(vertexShaderId);\r\n\r\n    // フラグメントシェーダのコンパイル\r\n    const fragmentShaderId = gl.createShader(gl.FRAGMENT_SHADER);\r\n\r\n    if (fragmentShaderId == null) {\r\n      LAppPal.printMessage(\"failed to create fragmentShader\");\r\n      return null;\r\n    }\r\n\r\n    const fragmentShader: string =\r\n      \"precision mediump float;\" +\r\n      \"varying vec2 vuv;\" +\r\n      \"uniform sampler2D texture;\" +\r\n      \"void main(void)\" +\r\n      \"{\" +\r\n      \"   gl_FragColor = texture2D(texture, vuv);\" +\r\n      \"}\";\r\n\r\n    gl.shaderSource(fragmentShaderId, fragmentShader);\r\n    gl.compileShader(fragmentShaderId);\r\n\r\n    // プログラムオブジェクトの作成\r\n    const programId = gl.createProgram();\r\n    gl.attachShader(programId, vertexShaderId);\r\n    gl.attachShader(programId, fragmentShaderId);\r\n\r\n    gl.deleteShader(vertexShaderId);\r\n    gl.deleteShader(fragmentShaderId);\r\n\r\n    // リンク\r\n    gl.linkProgram(programId);\r\n\r\n    gl.useProgram(programId);\r\n\r\n    return programId;\r\n  }\r\n\r\n  /**\r\n   * View情報を取得する。\r\n   */\r\n  public getView(): LAppView {\r\n    return this._view;\r\n  }\r\n\r\n  public getTextureManager(): LAppTextureManager {\r\n    return this._textureManager;\r\n  }\r\n\r\n  /**\r\n   * コンストラクタ\r\n   */\r\n  constructor() {\r\n    this._captured = false;\r\n    this._captureFrame = false;\r\n    this._mouseX = 0.0;\r\n    this._mouseY = 0.0;\r\n    this._modelX = 0.0;\r\n    this._modelY = 0.0;\r\n    this._isEnd = false;\r\n\r\n    this._cubismOption = new Csm_Option();\r\n    this._view = new LAppView();\r\n    this._textureManager = new LAppTextureManager();\r\n    this._zoom = 1.0;\r\n    this._head_pos = 0.5;\r\n  }\r\n\r\n  /**\r\n   * Cubism SDKの初期化\r\n   */\r\n  public initializeCubism(): void {\r\n    // setup cubism\r\n    this._cubismOption.logFunction = LAppPal.printMessage;\r\n    this._cubismOption.loggingLevel = LAppDefine.CubismLoggingLevel;\r\n    Csm_CubismFramework.startUp(this._cubismOption);\r\n\r\n    // initialize cubism\r\n    Csm_CubismFramework.initialize();\r\n\r\n    // 在LAppLive2DManager构造的时候会用到jsonPath\r\n    LAppLive2DManager.getInstance();\r\n\r\n    LAppPal.updateTime();\r\n\r\n    this._view.initializeSprite();\r\n  }\r\n\r\n  _cubismOption: Csm_Option; // Cubism SDK Option\r\n  _view: LAppView; // View情報\r\n  _captured: boolean; // クリックしているか\r\n  _captureFrame: boolean;\r\n  _mouseX: number; // マウスX座標\r\n  _mouseY: number; // マウスY座標\r\n  _isEnd: boolean; // APP終了しているか\r\n  _textureManager: LAppTextureManager; // テクスチャマネージャー\r\n  _zoom:number;//放大倍率\r\n  _captureName:string;//截图名称\r\n  _head_pos:number;//头部动作计算比例\r\n  _hitAreaList : any[];\r\n  _modelX: number;\r\n  _modelY: number;\r\n}\r\n\r\n/**\r\n * -----------------------------鼠标事件开始----------------------\r\n * \r\n * クリックしたときに呼ばれる。\r\n */\r\nfunction onClickBegan(e: MouseEvent): void {\r\n  if (!LAppDelegate.getInstance()._view) {\r\n    LAppPal.printMessage(\"view notfound\");\r\n    return;\r\n  }\r\n  LAppDelegate.getInstance()._captured = true;\r\n\r\n  const posX: number = e.pageX;\r\n  const posY: number = e.pageY;\r\n\r\n  LAppDelegate.getInstance()._view.onTouchesBegan(posX, posY);\r\n}\r\n\r\n/**\r\n * マウスポインタが動いたら呼ばれる。\r\n */\r\nfunction onMouseMoved(e: MouseEvent): void {\r\n  // if (!LAppDelegate.getInstance()._captured) {\r\n  //   return;\r\n  // }\r\n\r\n  if (!LAppDelegate.getInstance()._view) {\r\n    LAppPal.printMessage(\"view notfound\");\r\n    return;\r\n  }\r\n\r\n  const rect = canvas.getBoundingClientRect()\r\n\r\n  LAppDelegate.getInstance()._view.onTouchesMoved(e.clientX,e.clientY,rect);\r\n}\r\n\r\n/**\r\n * クリックが終了したら呼ばれる。\r\n */\r\nfunction onClickEnded(e: MouseEvent): void {\r\n  LAppDelegate.getInstance()._captured = false;\r\n  if (!LAppDelegate.getInstance()._view) {\r\n    LAppPal.printMessage(\"view notfound\");\r\n    return;\r\n  }\r\n\r\n  const rect = (e.target as Element).getBoundingClientRect();\r\n  const posX: number = e.clientX - rect.left;\r\n  const posY: number = e.clientY - rect.top;\r\n\r\n  LAppDelegate.getInstance()._view.onTouchesEnded(posX, posY);\r\n}\r\n\r\n/**\r\n * タッチしたときに呼ばれる。\r\n */\r\nfunction onTouchBegan(e: TouchEvent): void {\r\n  if (!LAppDelegate.getInstance()._view) {\r\n    LAppPal.printMessage(\"view notfound\");\r\n    return;\r\n  }\r\n\r\n  LAppDelegate.getInstance()._captured = true;\r\n\r\n  const posX = e.changedTouches[0].pageX;\r\n  const posY = e.changedTouches[0].pageY;\r\n\r\n  LAppDelegate.getInstance()._view.onTouchesBegan(posX, posY);\r\n}\r\n\r\n/**\r\n * スワイプすると呼ばれる。\r\n */\r\nfunction onTouchMoved(e: TouchEvent): void {\r\n  if (!LAppDelegate.getInstance()._captured) {\r\n    return;\r\n  }\r\n\r\n  if (!LAppDelegate.getInstance()._view) {\r\n    LAppPal.printMessage(\"view notfound\");\r\n    return;\r\n  }\r\n\r\n  const rect = (e.target as Element).getBoundingClientRect();\r\n\r\n  const posX = e.changedTouches[0].clientX;\r\n  const posY = e.changedTouches[0].clientY;\r\n\r\n  LAppDelegate.getInstance()._view.onTouchesMoved(posX,posY, rect);\r\n}\r\n\r\n/**\r\n * タッチが終了したら呼ばれる。\r\n */\r\nfunction onTouchEnded(e: TouchEvent): void {\r\n  LAppDelegate.getInstance()._captured = false;\r\n\r\n  if (!LAppDelegate.getInstance()._view) {\r\n    LAppPal.printMessage(\"view notfound\");\r\n    return;\r\n  }\r\n\r\n  const rect = (e.target as Element).getBoundingClientRect();\r\n\r\n  const posX = e.changedTouches[0].clientX - rect.left;\r\n  const posY = e.changedTouches[0].clientY - rect.top;\r\n\r\n  LAppDelegate.getInstance()._view.onTouchesEnded(posX, posY);\r\n}\r\n\r\n/**\r\n * タッチがキャンセルされると呼ばれる。\r\n */\r\nfunction onTouchCancel(e: TouchEvent): void {\r\n  LAppDelegate.getInstance()._captured = false;\r\n\r\n  if (!LAppDelegate.getInstance()._view) {\r\n    LAppPal.printMessage(\"view notfound\");\r\n    return;\r\n  }\r\n\r\n  const rect = (e.target as Element).getBoundingClientRect();\r\n\r\n  const posX = e.changedTouches[0].clientX - rect.left;\r\n  const posY = e.changedTouches[0].clientY - rect.top;\r\n\r\n  LAppDelegate.getInstance()._view.onTouchesEnded(posX, posY);\r\n}\r\n\r\nfunction onMouseLeave(e: MouseEvent): void {\r\n  LAppDelegate.getInstance()._captured = false;\r\n  if (!LAppDelegate.getInstance()._view) {\r\n    LAppPal.printMessage(\"view notfound\");\r\n    return;\r\n  }\r\n  LAppDelegate.getInstance()._view.onTouchesEnded(0, 0);\r\n}\r\n\r\n/**\r\n * WebGLContext渲染器\r\n * @param canvas 获得一个canvas对象\r\n */\r\nfunction getWebGLContext(canvas)\r\n{\r\n    var NAMES = [ \"webgl\" , \"experimental-webgl\" , \"webkit-3d\" , \"moz-webgl\"];\r\n    for( var i = 0; i < NAMES.length; i++ ){\r\n        try{\r\n            var ctx = canvas.getContext(NAMES[i], {premultipliedAlpha : true});\r\n            if(ctx) return ctx;\r\n        }\r\n        catch(e){}\r\n    }\r\n    return null;\r\n}\r\n\r\n\r\n\r\n","/**\r\n * Copyright(c) Live2D Inc. All rights reserved.\r\n *\r\n * Use of this source code is governed by the Live2D Open Software license\r\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\r\n */\r\n\r\nimport { Live2DCubismFramework as cubismmatrix44 } from \"./Framework/math/cubismmatrix44\";\r\nimport { Live2DCubismFramework as csmvector } from \"./Framework/type/csmvector\";\r\nimport { Live2DCubismFramework as acubismmotion } from \"./Framework/motion/acubismmotion\";\r\nimport { Live2DCubismFramework as cubismframework } from './Framework/live2dcubismframework';\r\nimport {jsonPath , modelDir, modelName} from './lappdelegate'\r\nimport Csm_CubismMatrix44 = cubismmatrix44.CubismMatrix44;\r\nimport ACubismMotion = acubismmotion.ACubismMotion;\r\n\r\n\r\nimport { LAppModel } from \"./lappmodel\";\r\nimport { LAppPal } from \"./lapppal\";\r\nimport { canvas,zoom,modelX,modelY } from \"./lappdelegate\";\r\nimport * as LAppDefine from \"./lappdefine\";\r\n\r\nexport let s_instance: LAppLive2DManager = null;\r\n\r\n\r\n// v2的全局声明\r\nlet models = [];\r\nlet count = -1;\r\nlet reloadFlg = false;\r\n\r\n/**\r\n * サンプルアプリケーションにおいてCubismModelを管理するクラス\r\n * モデル生成と破棄、タップイベントの処理、モデル切り替えを行う。\r\n */\r\nexport class LAppLive2DManager {\r\n  /**\r\n   * クラスのインスタンス（シングルトン）を返す。\r\n   * インスタンスが生成されていない場合は内部でインスタンスを生成する。\r\n   * 返回LAppLive2DManager的实例，静态方法 如果调用会生成一个实例\r\n   * 举例：let a = new LAppLive2DManager(); 等效于LAppLive2DManager.getInstance();\r\n   *\r\n   * @return クラスのインスタンス\r\n   */\r\n  public static getInstance(): LAppLive2DManager {\r\n    if (s_instance == null) {\r\n      s_instance = new LAppLive2DManager();\r\n    }\r\n    return s_instance;\r\n  }\r\n\r\n  /**\r\n   * クラスのインスタンス（シングルトン）を解放する。\r\n   */\r\n  public static releaseInstance(): void {\r\n    if (s_instance != null) {\r\n      s_instance = void 0;\r\n    }\r\n\r\n    s_instance = null;\r\n  }\r\n\r\n\r\n  /**\r\n   * 現在のシーンで保持しているすべてのモデルを解放する\r\n   */\r\n  public releaseAllModel(): void {\r\n    this._model.release()\r\n  }\r\n\r\n  /**\r\n   * 画面をドラッグした時の処理\r\n   *\r\n   * @param x 画面のX座標\r\n   * @param y 画面のY座標\r\n   */\r\n  public onDrag(x: number, y: number): void {\r\n    if (this._model) {\r\n      this._model.setDragging(x, y);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 画面をタップした時の処理\r\n   * 点击动画时的处理\r\n   *\r\n   * @param x 画面のX座標\r\n   * @param y 画面のY座標\r\n   */\r\n  public onTap(x: number, y: number ,hitAreaList :any[] ): void {\r\n    if (LAppDefine.DebugLogEnable) {\r\n      LAppPal.printMessage(\r\n        `[APP]tap point: {x: ${x.toFixed(2)} y: ${y.toFixed(2)}}`\r\n      );\r\n    }\r\n   \r\n    if (this._model.hitTest(LAppDefine.HitAreaNameHead, x, y)) {\r\n      if (LAppDefine.DebugLogEnable) {\r\n        LAppPal.printMessage(`[APP]hit area: [${LAppDefine.HitAreaNameHead}]`);\r\n      }\r\n      this._model.setRandomExpression();\r\n    } else if (this._model.hitTest(LAppDefine.HitAreaNameBody, x, y)) {\r\n      if (LAppDefine.DebugLogEnable) {\r\n        LAppPal.printMessage(`[APP]hit area: [${LAppDefine.HitAreaNameBody}]`);\r\n      }\r\n      this._model.startRandomMotion(\r\n        LAppDefine.MotionGroupTapBody,\r\n        LAppDefine.PriorityNormal,\r\n        this._finishedMotion\r\n      );\r\n    }else {\r\n      // 如果不是内置情况，需要判断是否是自定义的动作\r\n      for(let i = 0 ;i < hitAreaList.length; i++){\r\n        if(this._model.hitTestDefine(hitAreaList[i], x, y)){ //自定义的触摸区域\r\n          if (LAppDefine.DebugLogEnable) {\r\n            LAppPal.printMessage(`[APP]hit area: [${name}]`);\r\n          }\r\n          this._model.startMotionFile(\r\n            hitAreaList[i],\r\n            LAppDefine.PriorityNormal, //低优先级避免动作没有执行完马上执行下一个动作\r\n            this._finishedMotion\r\n          );\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 画面を更新するときの処理\r\n   * モデルの更新処理及び描画処理を行う\r\n   */\r\n  public onUpdate(): void {\r\n    let projection: Csm_CubismMatrix44 = new Csm_CubismMatrix44();\r\n    const { width, height } = canvas;\r\n    //新增可以调整模型的XY轴位置\r\n    projection.translate(modelX/100,modelY/100);\r\n    // 此处与v2版本 main.js 中 97行 相同\r\n    // 此处可以调整渲染人物的放大倍数 倍数参照物是画框（canvas）的大小 \r\n    // 但是他会影响触摸区域的大小\r\n    projection.scale(zoom, (zoom * width) / height);\r\n\r\n    if (this._viewMatrix != null) {\r\n      projection.multiplyByMatrix(this._viewMatrix);\r\n    }\r\n\r\n    const saveProjection: Csm_CubismMatrix44 = projection.clone();\r\n\r\n    const model: LAppModel = this._model;\r\n    projection = saveProjection.clone();\r\n\r\n    model.update();\r\n    model.draw(projection); // 参照渡しなのでprojectionは変質する。\r\n  }\r\n\r\n  \r\n\r\n  /**\r\n   * コンストラクタ\r\n   */\r\n  constructor() {\r\n    // 从公共Define获取JsonPath \r\n    //+1后百分之百带“/”符号\r\n    const modelHomeDir = modelDir;\r\n    this._viewMatrix = new Csm_CubismMatrix44();\r\n    this._model = new LAppModel();\r\n    const modelJsonName = `${modelName}.model3.json`;\r\n    this._model.loadAssets(modelHomeDir, modelJsonName);\r\n  }\r\n\r\n  _viewMatrix: Csm_CubismMatrix44; // モデル描画に用いるview行列\r\n  _model: LAppModel; // モデルインスタンスのコンテナ\r\n  // モーション再生終了のコールバック関数\r\n  _finishedMotion = (self: ACubismMotion): void => {\r\n    if(LAppDefine.DebugLogEnable){\r\n      LAppPal.printMessage(\"Motion Finished:\");\r\n      console.log(self);\r\n    }\r\n  };\r\n  \r\n}\r\n\r\n\r\n","/**\r\n * Copyright(c) Live2D Inc. All rights reserved.\r\n *\r\n * Use of this source code is governed by the Live2D Open Software license\r\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\r\n */\r\n\r\nimport { Live2DCubismFramework as live2dcubismframework } from './Framework/live2dcubismframework';\r\nimport { Live2DCubismFramework as cubismid } from './Framework/id/cubismid';\r\nimport { Live2DCubismFramework as cubismusermodel } from './Framework/model/cubismusermodel';\r\nimport { Live2DCubismFramework as icubismmodelsetting } from './Framework/icubismmodelsetting';\r\nimport { Live2DCubismFramework as cubismmodelsettingjson } from './Framework/cubismmodelsettingjson';\r\nimport { Live2DCubismFramework as cubismdefaultparameterid } from './Framework/cubismdefaultparameterid';\r\nimport { Live2DCubismFramework as acubismmotion } from './Framework/motion/acubismmotion';\r\nimport { Live2DCubismFramework as cubismeyeblink } from './Framework/effect/cubismeyeblink';\r\nimport { Live2DCubismFramework as cubismbreath } from './Framework/effect/cubismbreath';\r\nimport { Live2DCubismFramework as csmvector } from './Framework/type/csmvector';\r\nimport { Live2DCubismFramework as csmmap } from './Framework/type/csmmap';\r\nimport { Live2DCubismFramework as cubismmatrix44 } from './Framework/math/cubismmatrix44';\r\nimport { Live2DCubismFramework as cubismmotion } from './Framework/motion/cubismmotion';\r\nimport { Live2DCubismFramework as cubismmotionqueuemanager } from './Framework/motion/cubismmotionqueuemanager';\r\nimport { Live2DCubismFramework as csmstring } from './Framework/type/csmstring';\r\nimport { Live2DCubismFramework as csmrect } from './Framework/type/csmrectf';\r\nimport { CubismLogInfo } from './Framework/utils/cubismdebug';\r\nimport csmRect = csmrect.csmRect;\r\nimport csmString = csmstring.csmString;\r\nimport InvalidMotionQueueEntryHandleValue = cubismmotionqueuemanager.InvalidMotionQueueEntryHandleValue;\r\nimport CubismMotionQueueEntryHandle = cubismmotionqueuemanager.CubismMotionQueueEntryHandle;\r\nimport CubismMotion = cubismmotion.CubismMotion;\r\nimport CubismMatrix44 = cubismmatrix44.CubismMatrix44;\r\nimport csmMap = csmmap.csmMap;\r\nimport csmVector = csmvector.csmVector;\r\nimport CubismBreath = cubismbreath.CubismBreath;\r\nimport BreathParameterData = cubismbreath.BreathParameterData;\r\nimport CubismEyeBlink = cubismeyeblink.CubismEyeBlink;\r\nimport ACubismMotion = acubismmotion.ACubismMotion;\r\nimport FinishedMotionCallback = acubismmotion.FinishedMotionCallback;\r\nimport CubismFramework = live2dcubismframework.CubismFramework;\r\nimport CubismIdHandle = cubismid.CubismIdHandle;\r\nimport CubismUserModel = cubismusermodel.CubismUserModel;\r\nimport ICubismModelSetting = icubismmodelsetting.ICubismModelSetting;\r\nimport CubismModelSettingJson = cubismmodelsettingjson.CubismModelSettingJson;\r\nimport CubismDefaultParameterId = cubismdefaultparameterid;\r\n\r\nimport { LAppPal } from './lapppal';\r\nimport { gl, canvas, frameBuffer, LAppDelegate } from './lappdelegate';\r\nimport { TextureInfo } from './lapptexturemanager';\r\nimport * as LAppDefine from './lappdefine';\r\nimport { db } from \"./DbCache\";\r\n\r\nenum LoadStep {\r\n  LoadAssets,\r\n  LoadModel,\r\n  WaitLoadModel,\r\n  LoadExpression,\r\n  WaitLoadExpression,\r\n  LoadPhysics,\r\n  WaitLoadPhysics,\r\n  LoadPose,\r\n  WaitLoadPose,\r\n  SetupEyeBlink,\r\n  SetupBreath,\r\n  LoadUserData,\r\n  WaitLoadUserData,\r\n  SetupEyeBlinkIds,\r\n  SetupLipSyncIds,\r\n  SetupLayout,\r\n  LoadMotion,\r\n  WaitLoadMotion,\r\n  CompleteInitialize,\r\n  CompleteSetupModel,\r\n  LoadTexture,\r\n  WaitLoadTexture,\r\n  CompleteSetup\r\n}\r\n\r\n/**\r\n * ユーザーが実際に使用するモデルの実装クラス<br>\r\n * 用户实际使用的模型的安装类\r\n * モデル生成、機能コンポーネント生成、更新処理とレンダリングの呼び出しを行う。\r\n * 进行模型生成、功能组件生成、更新处理和渲染的调用。\r\n */\r\nexport class LAppModel extends CubismUserModel {\r\n\r\n  /**\r\n   * model3.jsonが置かれたディレクトリとファイルパスからモデルを生成する\r\n   * 可跨域返回正确数据 已验证\r\n   * @param dir\r\n   * @param fileName\r\n   */\r\n  public async loadAssets(dir: string, fileName: string): Promise<void> {\r\n    this._modelHomeDir = dir;\r\n    let url = `${this._modelHomeDir}${fileName}`;\r\n    //用这个方法换取名字来作为文件缓存的key和name\r\n    let theName = LAppDefine.path2DirName(url);\r\n    let arrayBuffer :ArrayBuffer;\r\n    let rsp = await db.mocJson.where({name:theName,key:fileName}).first();\r\n    if(rsp){\r\n      arrayBuffer = rsp.value;\r\n    }else{\r\n      arrayBuffer = await fetch(url).then(response => response.arrayBuffer());\r\n      db.mocJson.put({key:fileName,name:theName,value :arrayBuffer});\r\n    }\r\n    //通过实例化model3.json的arrayBuffer,来读取配置\r\n    //此处读取的是model3.json的配置信息\r\n    const setting: ICubismModelSetting = new CubismModelSettingJson(\r\n      arrayBuffer,\r\n      arrayBuffer.byteLength\r\n    );\r\n    // ステートを更新\r\n    this._state = LoadStep.LoadModel;\r\n     // 結果を保存\r\n    this.setupModel(setting);\r\n  }\r\n\r\n  /**\r\n   * model3.jsonからモデルを生成する。\r\n   * model3.jsonの記述に従ってモデル生成、モーション、物理演算などのコンポーネント生成を行う。\r\n   * 此方法用于读取设置并安装Model\r\n   *\r\n   * @param setting ICubismModelSettingの配置信息\r\n   */\r\n  private setupModel(setting: ICubismModelSetting): void{\r\n    this._updating = true;\r\n    this._initialized = false;\r\n\r\n    this._modelSetting = setting;\r\n    //通过setting可以获取到model3.json中的所有内容\r\n    var mainFileName = setting.getModelFileName();\r\n\r\n    // CubismModel\r\n    if (this._modelSetting.getModelFileName() != '') {\r\n      const modelFileName = this._modelSetting.getModelFileName();\r\n      db.mocJson.where({key:modelFileName,name:mainFileName}).first().then((rsp)=>{\r\n        if(rsp){\r\n          this.loadModel(rsp.value);\r\n          this._state = LoadStep.LoadExpression;\r\n          // callback\r\n          loadCubismExpression();\r\n        }else{\r\n          fetch(`${this._modelHomeDir}/${modelFileName}`)\r\n          .then(response => response.arrayBuffer())\r\n          .then(arrayBuffer => {\r\n            this.loadModel(arrayBuffer);\r\n            //写入缓存\r\n            db.mocJson.put({key:modelFileName,name:mainFileName,value :arrayBuffer});\r\n            this._state = LoadStep.LoadExpression;\r\n            // callback\r\n            loadCubismExpression();\r\n          });\r\n        }\r\n      });\r\n\r\n      this._state = LoadStep.WaitLoadModel;\r\n    } else {\r\n      LAppPal.printMessage('Model data does not exist.');\r\n    }\r\n\r\n    /**\r\n     * 这个方法用于读取Expression(表情) 节点中的文件\r\n     */\r\n    const loadCubismExpression = (): void => {\r\n      if (this._modelSetting.getExpressionCount() > 0) {\r\n        //查看有多少表情文件\r\n        const count: number = this._modelSetting.getExpressionCount();\r\n        console.log(\"加载表情(Expression)\")\r\n        for (let i = 0; i < count; i++) {\r\n          //获取节点信息 例如:\"Name\": \"exp_01\",\"File\": \"expressions/exp_01.exp3.json\"\r\n          const expressionName = this._modelSetting.getExpressionName(i);\r\n          const expressionFileName = this._modelSetting.getExpressionFileName(i);\r\n          db.mocJson.where({key:expressionName,name:mainFileName}).first().then((rsp)=>{\r\n            if(rsp){\r\n              const motion: ACubismMotion = this.loadExpression(\r\n                rsp.value,\r\n                rsp.value.byteLength,\r\n                expressionName\r\n              );\r\n\r\n              if (this._expressions.getValue(expressionName) != null) {\r\n                ACubismMotion.delete(\r\n                  this._expressions.getValue(expressionName)\r\n                );\r\n                this._expressions.setValue(expressionName, null);\r\n              }\r\n\r\n              this._expressions.setValue(expressionName, motion);\r\n\r\n              this._expressionCount++;\r\n\r\n              if (this._expressionCount >= count) {\r\n                this._state = LoadStep.LoadPhysics;\r\n\r\n                // callback\r\n                loadCubismPhysics();\r\n              }\r\n            }else{\r\n              fetch(`${this._modelHomeDir}/${expressionFileName}`)\r\n              .then(response => response.arrayBuffer())\r\n              .then(arrayBuffer => {\r\n                db.mocJson.put({key:expressionName,name:mainFileName,value :arrayBuffer});\r\n                const motion: ACubismMotion = this.loadExpression(\r\n                  arrayBuffer,\r\n                  arrayBuffer.byteLength,\r\n                  expressionName\r\n                );\r\n  \r\n                if (this._expressions.getValue(expressionName) != null) {\r\n                  ACubismMotion.delete(\r\n                    this._expressions.getValue(expressionName)\r\n                  );\r\n                  this._expressions.setValue(expressionName, null);\r\n                }\r\n  \r\n                this._expressions.setValue(expressionName, motion);\r\n  \r\n                this._expressionCount++;\r\n  \r\n                if (this._expressionCount >= count) {\r\n                  this._state = LoadStep.LoadPhysics;\r\n  \r\n                  // callback\r\n                  loadCubismPhysics();\r\n                }\r\n              });\r\n            }\r\n          })\r\n          \r\n        }\r\n        this._state = LoadStep.WaitLoadExpression;\r\n      } else {\r\n        this._state = LoadStep.LoadPhysics;\r\n\r\n        // callback\r\n        loadCubismPhysics();\r\n      }\r\n    };\r\n\r\n    /**\r\n     * 此方法用于读取Physics节点内容\r\n     * Physics节点是一些物理演算信息 对应的是*.physics3.json \r\n     */\r\n    const loadCubismPhysics = (): void => {\r\n      if (this._modelSetting.getPhysicsFileName() != '') {\r\n        const physicsFileName = this._modelSetting.getPhysicsFileName();\r\n        console.log(\"加载physics\")\r\n        db.mocJson.where({key:physicsFileName,name:mainFileName}).first().then((rsp)=>{\r\n          if(rsp){\r\n            //将数据提交给物理演算方法\r\n            this.loadPhysics(rsp.value, rsp.value.byteLength);\r\n            this._state = LoadStep.LoadPose;\r\n            // callback\r\n            loadCubismPose();\r\n          }else{\r\n            fetch(`${this._modelHomeDir}/${physicsFileName}`)\r\n            .then(response => response.arrayBuffer())\r\n            .then(arrayBuffer => {\r\n              db.mocJson.put({key:physicsFileName,name:mainFileName,value :arrayBuffer});\r\n              //将数据提交给物理演算方法\r\n              this.loadPhysics(arrayBuffer, arrayBuffer.byteLength);\r\n              this._state = LoadStep.LoadPose;\r\n              // callback\r\n              loadCubismPose();\r\n            });\r\n          }\r\n        });\r\n        this._state = LoadStep.WaitLoadPhysics;\r\n      } else {\r\n        this._state = LoadStep.LoadPose;\r\n\r\n        // callback\r\n        loadCubismPose();\r\n      }\r\n    };\r\n\r\n    /**\r\n     * 读取Pose信息, 用来一些站立的特定动作使用, 对应的是*.pose3.json \r\n     * \r\n     */\r\n    const loadCubismPose = (): void => {\r\n      if (this._modelSetting.getPoseFileName() != '') {\r\n        const poseFileName = this._modelSetting.getPoseFileName();\r\n        console.log(\"加载pose动作\")\r\n        db.mocJson.where({key:poseFileName,name:mainFileName}).first().then((rsp)=>{\r\n          if(rsp){\r\n            //传递给Pose加载\r\n            this.loadPose(rsp.value, rsp.value.byteLength);\r\n            this._state = LoadStep.SetupEyeBlink;\r\n            // callback\r\n            setupEyeBlink();\r\n          }else{\r\n            fetch(`${this._modelHomeDir}/${poseFileName}`)\r\n            .then(response => response.arrayBuffer())\r\n            .then(arrayBuffer => {\r\n              db.mocJson.put({key:poseFileName,name:mainFileName,value :arrayBuffer});\r\n              //传递给Pose加载\r\n              this.loadPose(arrayBuffer, arrayBuffer.byteLength);\r\n              this._state = LoadStep.SetupEyeBlink;\r\n              // callback\r\n              setupEyeBlink();\r\n            });\r\n          }\r\n        });\r\n        \r\n        this._state = LoadStep.WaitLoadPose;\r\n      } else {\r\n        this._state = LoadStep.SetupEyeBlink;\r\n\r\n        // callback\r\n        setupEyeBlink();\r\n      }\r\n    };\r\n\r\n    /**\r\n     * EyeBlink(眨眼)\r\n     */\r\n    const setupEyeBlink = (): void => {\r\n      if (this._modelSetting.getEyeBlinkParameterCount() > 0) {\r\n        console.log(\"EyeBlink参数大于0\");\r\n        this._eyeBlink = CubismEyeBlink.create(this._modelSetting);\r\n        this._state = LoadStep.SetupBreath;\r\n      }\r\n      console.log(\"EyeBlink已加载\");\r\n      // callback\r\n      // 加载结束后加载呼吸\r\n      setupBreath();\r\n    };\r\n\r\n    /**\r\n     * Breath(呼吸)\r\n     */\r\n    const setupBreath = (): void => {\r\n      this._breath = CubismBreath.create();\r\n\r\n      const breathParameters: csmVector<BreathParameterData> = new csmVector();\r\n      breathParameters.pushBack(\r\n        new BreathParameterData(this._idParamAngleX, 0.0, 15.0, 6.5345, 0.5)\r\n      );\r\n      breathParameters.pushBack(\r\n        new BreathParameterData(this._idParamAngleY, 0.0, 8.0, 3.5345, 0.5)\r\n      );\r\n      breathParameters.pushBack(\r\n        new BreathParameterData(this._idParamAngleZ, 0.0, 10.0, 5.5345, 0.5)\r\n      );\r\n      breathParameters.pushBack(\r\n        new BreathParameterData(this._idParamBodyAngleX, 0.0, 4.0, 15.5345, 0.5)\r\n      );\r\n      breathParameters.pushBack(\r\n        new BreathParameterData(\r\n          CubismFramework.getIdManager().getId(\r\n            CubismDefaultParameterId.ParamBreath\r\n          ),\r\n          0.0,\r\n          0.5,\r\n          3.2345,\r\n          0.5\r\n        )\r\n      );\r\n      console.log(\"setupBreath\");\r\n      this._breath.setParameters(breathParameters);\r\n      this._state = LoadStep.LoadUserData;\r\n\r\n      // callback\r\n      loadUserData();\r\n    };\r\n\r\n    /**\r\n     * UserData 加载模型自带的用户数据\r\n     */\r\n    const loadUserData = (): void => {\r\n      if (this._modelSetting.getUserDataFile() != '') {\r\n        const userDataFile = this._modelSetting.getUserDataFile();\r\n        console.log(\"加载UserData\")\r\n        db.mocJson.where({key:userDataFile,name:mainFileName}).first().then((rsp)=>{\r\n          if(rsp){\r\n            this.loadUserData(rsp.value, rsp.value.byteLength);\r\n            this._state = LoadStep.SetupEyeBlinkIds;\r\n            // callback\r\n            setupEyeBlinkIds();\r\n          }else{\r\n            fetch(`${this._modelHomeDir}/${userDataFile}`)\r\n            .then(response => response.arrayBuffer())\r\n            .then(arrayBuffer => {\r\n              db.mocJson.put({key:userDataFile,name:mainFileName,value :arrayBuffer});\r\n              this.loadUserData(arrayBuffer, arrayBuffer.byteLength);\r\n              this._state = LoadStep.SetupEyeBlinkIds;\r\n              // callback\r\n              setupEyeBlinkIds();\r\n            });\r\n          }\r\n        });\r\n        \r\n\r\n        this._state = LoadStep.WaitLoadUserData;\r\n      } else {\r\n        this._state = LoadStep.SetupEyeBlinkIds;\r\n\r\n        // callback\r\n        setupEyeBlinkIds();\r\n      }\r\n    };\r\n\r\n    /**\r\n     * 眨眼的Ids\r\n     */\r\n    const setupEyeBlinkIds = (): void => {\r\n      const eyeBlinkIdCount: number = this._modelSetting.getEyeBlinkParameterCount();\r\n\r\n      for (let i = 0; i < eyeBlinkIdCount; ++i) {\r\n        this._eyeBlinkIds.pushBack(\r\n          this._modelSetting.getEyeBlinkParameterId(i)\r\n        );\r\n      }\r\n\r\n      this._state = LoadStep.SetupLipSyncIds;\r\n\r\n      // callback\r\n      setupLipSyncIds();\r\n    };\r\n\r\n    /**\r\n     * 唇形同步的Ids\r\n     */\r\n    const setupLipSyncIds = (): void => {\r\n      const lipSyncIdCount = this._modelSetting.getLipSyncParameterCount();\r\n\r\n      for (let i = 0; i < lipSyncIdCount; ++i) {\r\n        this._lipSyncIds.pushBack(this._modelSetting.getLipSyncParameterId(i));\r\n      }\r\n      this._state = LoadStep.SetupLayout;\r\n\r\n      // callback\r\n      setupLayout();\r\n    };\r\n\r\n    // Layout\r\n    const setupLayout = (): void => {\r\n      const layout: csmMap<string, number> = new csmMap<string, number>();\r\n      this._modelSetting.getLayoutMap(layout);\r\n      this._modelMatrix.setupFromLayout(layout);\r\n      this._state = LoadStep.LoadMotion;\r\n\r\n      // callback\r\n      loadCubismMotion();\r\n    };\r\n\r\n    /**\r\n     * 加载动作(Motion)\r\n     */\r\n    const loadCubismMotion = (): void => {\r\n      this._state = LoadStep.WaitLoadMotion;\r\n      this._model.saveParameters();\r\n      this._allMotionCount = 0;\r\n      this._motionCount = 0;\r\n      const group: string[] = [];\r\n\r\n      const motionGroupCount: number = this._modelSetting.getMotionGroupCount();\r\n\r\n      // モーションの総数を求める\r\n      for (let i = 0; i < motionGroupCount; i++) {\r\n        group[i] = this._modelSetting.getMotionGroupName(i);\r\n        this._allMotionCount += this._modelSetting.getMotionCount(group[i]);\r\n      }\r\n\r\n      // モーションの読み込み\r\n      for (let i = 0; i < motionGroupCount; i++) {\r\n        this.preLoadMotionGroup(group[i]);\r\n      }\r\n\r\n      // モーションがない場合\r\n      if (motionGroupCount == 0) {\r\n        this.restartMotion();\r\n      }\r\n    };\r\n  }\r\n\r\n  /**\r\n   * テクスチャユニットにテクスチャをロードする\r\n   * 将纹理加载到纹理单元中 对应节点Textures\r\n   */\r\n  private setupTextures(): void {\r\n    // iPhoneでのアルファ品質向上のためTypescriptではpremultipliedAlphaを採用\r\n    const usePremultiply = true;\r\n\r\n    if (this._state == LoadStep.LoadTexture) {\r\n      // テクスチャ読み込み用\r\n      const textureCount: number = this._modelSetting.getTextureCount();\r\n\r\n      for (\r\n        let modelTextureNumber = 0;\r\n        modelTextureNumber < textureCount;\r\n        modelTextureNumber++\r\n      ) {\r\n        // テクスチャ名が空文字だった場合はロード・バインド処理をスキップ\r\n        if (this._modelSetting.getTextureFileName(modelTextureNumber) == '') {\r\n          console.log('getTextureFileName null');\r\n          continue;\r\n        }\r\n\r\n        // WebGLのテクスチャユニットにテクスチャをロードする\r\n        let texturePath = this._modelSetting.getTextureFileName(\r\n          modelTextureNumber\r\n        );\r\n        texturePath = this._modelHomeDir + texturePath;\r\n\r\n        // ロード完了時に呼び出すコールバック関数\r\n        const onLoad = (textureInfo: TextureInfo): void => {\r\n          this.getRenderer().bindTexture(modelTextureNumber, textureInfo.id);\r\n\r\n          this._textureCount++;\r\n\r\n          if (this._textureCount >= textureCount) {\r\n            // ロード完了\r\n            this._state = LoadStep.CompleteSetup;\r\n          }\r\n        };\r\n\r\n        // 読み込み\r\n        LAppDelegate.getInstance()\r\n          .getTextureManager()\r\n          .createTextureFromPngFile(texturePath, usePremultiply, onLoad);\r\n        this.getRenderer().setIsPremultipliedAlpha(usePremultiply);\r\n      }\r\n\r\n      this._state = LoadStep.WaitLoadTexture;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * レンダラを再構築する\r\n   */\r\n  public reloadRenderer(): void {\r\n    this.deleteRenderer();\r\n    this.createRenderer();\r\n    this.setupTextures();\r\n  }\r\n\r\n  /**\r\n   * 更新\r\n   */\r\n  public update(): void {\r\n    if (this._state != LoadStep.CompleteSetup) return;\r\n\r\n    const deltaTimeSeconds: number = LAppPal.getDeltaTime();\r\n    this._userTimeSeconds += deltaTimeSeconds;\r\n\r\n    this._dragManager.update(deltaTimeSeconds);\r\n    this._dragX = this._dragManager.getX();\r\n    this._dragY = this._dragManager.getY();\r\n\r\n    // モーションによるパラメータ更新の有無\r\n    let motionUpdated = false;\r\n\r\n    //--------------------------------------------------------------------------\r\n    this._model.loadParameters(); // 前回セーブされた状態をロード\r\n    if (this._motionManager.isFinished()) {\r\n      // モーションの再生がない場合、待機モーションの中からランダムで再生する\r\n      this.startRandomMotion(\r\n        LAppDefine.MotionGroupIdle,\r\n        LAppDefine.PriorityIdle\r\n      );\r\n    } else {\r\n      motionUpdated = this._motionManager.updateMotion(\r\n        this._model,\r\n        deltaTimeSeconds\r\n      ); // モーションを更新\r\n    }\r\n    this._model.saveParameters(); // 状態を保存\r\n    //--------------------------------------------------------------------------\r\n\r\n    // まばたき\r\n    if (!motionUpdated) {\r\n      if (this._eyeBlink != null) {\r\n        // メインモーションの更新がないとき\r\n        this._eyeBlink.updateParameters(this._model, deltaTimeSeconds); // 目パチ\r\n      }\r\n    }\r\n\r\n    if (this._expressionManager != null) {\r\n      this._expressionManager.updateMotion(this._model, deltaTimeSeconds); // 表情でパラメータ更新（相対変化）\r\n    }\r\n\r\n    // ドラッグによる変化\r\n    // ドラッグによる顔の向きの調整\r\n    this._model.addParameterValueById(this._idParamAngleX, this._dragX * 30); // -30から30の値を加える\r\n    this._model.addParameterValueById(this._idParamAngleY, this._dragY * 30);\r\n    this._model.addParameterValueById(\r\n      this._idParamAngleZ,\r\n      this._dragX * this._dragY * -30\r\n    );\r\n\r\n    // ドラッグによる体の向きの調整\r\n    this._model.addParameterValueById(\r\n      this._idParamBodyAngleX,\r\n      this._dragX * 10\r\n    ); // -10から10の値を加える\r\n\r\n    // ドラッグによる目の向きの調整\r\n    this._model.addParameterValueById(this._idParamEyeBallX, this._dragX); // -1から1の値を加える\r\n    this._model.addParameterValueById(this._idParamEyeBallY, this._dragY);\r\n\r\n    // 呼吸など\r\n    if (this._breath != null) {\r\n      this._breath.updateParameters(this._model, deltaTimeSeconds);\r\n    }\r\n\r\n    // 物理演算の設定\r\n    if (this._physics != null) {\r\n      this._physics.evaluate(this._model, deltaTimeSeconds);\r\n    }\r\n\r\n    // リップシンクの設定\r\n    if (this._lipsync) {\r\n      const value = 0; // リアルタイムでリップシンクを行う場合、システムから音量を取得して、0~1の範囲で値を入力します。\r\n\r\n      for (let i = 0; i < this._lipSyncIds.getSize(); ++i) {\r\n        this._model.addParameterValueById(this._lipSyncIds.at(i), value, 0.8);\r\n      }\r\n    }\r\n\r\n    // ポーズの設定\r\n    if (this._pose != null) {\r\n      this._pose.updateParameters(this._model, deltaTimeSeconds);\r\n    }\r\n\r\n    this._model.update();\r\n  }\r\n\r\n  /**\r\n   * 引数で指定したモーションの再生を開始する\r\n   * @param group モーショングループ名\r\n   * @param no グループ内の番号\r\n   * @param priority 優先度\r\n   * @param onFinishedMotionHandler モーション再生終了時に呼び出されるコールバック関数\r\n   * @return 開始したモーションの識別番号を返す。個別のモーションが終了したか否かを判定するisFinished()の引数で使用する。開始できない時は[-1]\r\n   */\r\n  public async startMotion(\r\n    group: string,\r\n    no: number,\r\n    priority: number,\r\n    onFinishedMotionHandler?: FinishedMotionCallback\r\n  ): Promise<CubismMotionQueueEntryHandle> {\r\n    if (priority == LAppDefine.PriorityForce) {\r\n      this._motionManager.setReservePriority(priority);\r\n    } else if (!this._motionManager.reserveMotion(priority)) {\r\n      if (this._debugMode) {\r\n        LAppPal.printMessage(\"[APP]can't start motion.\");\r\n      }\r\n      return InvalidMotionQueueEntryHandleValue;\r\n    }\r\n    const mainFileName = this._modelSetting.getModelFileName();\r\n    const motionFileName = this._modelSetting.getMotionFileName(group, no);\r\n\r\n    // ex) idle_0\r\n    const name = `${group}_${no}`;\r\n    let motion: CubismMotion = this._motions.getValue(name) as CubismMotion;\r\n    let autoDelete = false;\r\n\r\n    if (motion == null) {\r\n      var arrayBuffer:ArrayBuffer;\r\n      var motionFileArr = await db.mocJson.where({key:motionFileName,name:mainFileName}).first();\r\n      console.log(\"加载motion\")\r\n      if(motionFileArr){\r\n        arrayBuffer = motionFileArr.value;\r\n      }else{\r\n        arrayBuffer = await fetch(`${this._modelHomeDir}/${motionFileName}`).then(response => response.arrayBuffer());\r\n        await db.mocJson.put({key:motionFileName,name:mainFileName,value :arrayBuffer});\r\n      }\r\n      motion = this.loadMotion(\r\n        arrayBuffer,\r\n        arrayBuffer.byteLength,\r\n        null,\r\n        onFinishedMotionHandler\r\n      );\r\n      let fadeTime: number = this._modelSetting.getMotionFadeInTimeValue(\r\n        group,\r\n        no\r\n      );\r\n       \r\n      if (fadeTime >= 0.0) {\r\n        motion.setFadeInTime(fadeTime);\r\n      }\r\n\r\n      fadeTime = this._modelSetting.getMotionFadeOutTimeValue(group, no);\r\n      if (fadeTime >= 0.0) {\r\n        motion.setFadeOutTime(fadeTime);\r\n      }\r\n      motion.setEffectIds(this._eyeBlinkIds, this._lipSyncIds);\r\n      autoDelete = true; // 終了時にメモリから削除\r\n    } else {\r\n      motion.setFinishedMotionHandler(onFinishedMotionHandler);\r\n    }\r\n\r\n    if (this._debugMode) {\r\n      LAppPal.printMessage(`[APP]start motion: [${group}_${no}`);\r\n    }\r\n    return this._motionManager.startMotionPriority(\r\n      motion,\r\n      autoDelete,\r\n      priority\r\n    );\r\n  }\r\n\r\n  /**\r\n   * 执行一个指定文件的Motion（动作）\r\n   * @param fileName 文件名\r\n   * @param priority 优先级\r\n   * @param onFinishedMotionHandler 完成动作后的触发事件\r\n   */\r\n  public async startMotionFile(\r\n    fileName :string,\r\n    priority: number,\r\n    onFinishedMotionHandler?: FinishedMotionCallback\r\n  ): Promise<CubismMotionQueueEntryHandle>{\r\n    if (priority == LAppDefine.PriorityForce) {\r\n      this._motionManager.setReservePriority(priority);\r\n    } else if (!this._motionManager.reserveMotion(priority)) {\r\n      if (this._debugMode) {\r\n        LAppPal.printMessage(\"[APP]can't start motion.\");\r\n      }\r\n      return InvalidMotionQueueEntryHandleValue;\r\n    }\r\n    // 通过文件名获取文件路径和扩展名\r\n    const motionFileName = this._motionFileName.get(fileName);\r\n    const mainFileName = this._modelSetting.getModelFileName();\r\n    let autoDelete = false;\r\n    //放弃调用堆空间的方式，直接使用文件，缺点是每次都要读取文件\r\n    console.log(\"读取动作文件:\");\r\n    console.log(`${this._modelHomeDir}/${motionFileName}`);\r\n    var arrayBuffer:ArrayBuffer;\r\n    var motionFileArr = await db.mocJson.where({key:motionFileName,name:mainFileName}).first();\r\n    if(motionFileArr){\r\n      arrayBuffer = motionFileArr.value;\r\n    }else{\r\n      arrayBuffer = await fetch(`${this._modelHomeDir}/${motionFileName}`).then(response => response.arrayBuffer());\r\n      db.mocJson.put({key:motionFileName,name:mainFileName,value :arrayBuffer});\r\n    }\r\n    const motion = this.loadMotion(\r\n      arrayBuffer,\r\n      arrayBuffer.byteLength,\r\n      fileName,\r\n      onFinishedMotionHandler\r\n    );\r\n    motion.setEffectIds(this._eyeBlinkIds, this._lipSyncIds);\r\n    autoDelete = true; // 終了時にメモリから削除\r\n      \r\n    if (this._debugMode) {\r\n      LAppPal.printMessage(`[APP]start motion in File: [${motionFileName}`);\r\n    }\r\n    return this._motionManager.startMotionPriority(\r\n      motion,\r\n      autoDelete,\r\n      priority\r\n    );\r\n  }\r\n\r\n  /**\r\n   * ランダムに選ばれたモーションの再生を開始する。\r\n   * @param group モーショングループ名\r\n   * @param priority 優先度\r\n   * @param onFinishedMotionHandler モーション再生終了時に呼び出されるコールバック関数\r\n   * @return 開始したモーションの識別番号を返す。個別のモーションが終了したか否かを判定するisFinished()の引数で使用する。開始できない時は[-1]\r\n   */\r\n  public async startRandomMotion(\r\n    group: string,\r\n    priority: number,\r\n    onFinishedMotionHandler?: FinishedMotionCallback\r\n  ): Promise<CubismMotionQueueEntryHandle> {\r\n    if (this._modelSetting.getMotionCount(group) == 0) {\r\n      return InvalidMotionQueueEntryHandleValue;\r\n    }\r\n\r\n    const no: number = Math.floor(\r\n      Math.random() * this._modelSetting.getMotionCount(group)\r\n    );\r\n\r\n    return await this.startMotion(group, no, priority, onFinishedMotionHandler);\r\n  }\r\n\r\n  /**\r\n   * 引数で指定した表情モーションをセットする\r\n   *\r\n   * @param expressionId 表情モーションのID\r\n   */\r\n  public setExpression(expressionId: string): void {\r\n    const motion: ACubismMotion = this._expressions.getValue(expressionId);\r\n\r\n    if (this._debugMode) {\r\n      LAppPal.printMessage(`[APP]expression: [${expressionId}]`);\r\n    }\r\n\r\n    if (motion != null) {\r\n      this._expressionManager.startMotionPriority(\r\n        motion,\r\n        false,\r\n        LAppDefine.PriorityForce\r\n      );\r\n    } else {\r\n      if (this._debugMode) {\r\n        LAppPal.printMessage(`[APP]expression[${expressionId}] is null`);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ランダムに選ばれた表情モーションをセットする\r\n   */\r\n  public setRandomExpression(): void {\r\n    if (this._expressions.getSize() == 0) {\r\n      return;\r\n    }\r\n\r\n    const no: number = Math.floor(Math.random() * this._expressions.getSize());\r\n\r\n    for (let i = 0; i < this._expressions.getSize(); i++) {\r\n      if (i == no) {\r\n        const name: string = this._expressions._keyValues[i].first;\r\n        this.setExpression(name);\r\n        return;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * イベントの発火を受け取る\r\n   */\r\n  public motionEventFired(eventValue: csmString): void {\r\n    //CubismLogInfo('{0} is fired on LAppModel!!', eventValue.s);\r\n  }\r\n\r\n  /**\r\n   * 当たり判定テスト\r\n   * 指定ＩＤの頂点リストから矩形を計算し、座標をが矩形範囲内か判定する。\r\n   * 从指定ID的顶点列表计算矩形，确定坐标是否在矩形范围内。\r\n   *\r\n   * @param hitArenaName  当たり判定をテストする対象のID\r\n   * @param x             判定を行うX座標\r\n   * @param y             判定を行うY座標\r\n   */\r\n  public hitTest(hitArenaName: string, x: number, y: number): boolean {\r\n    // 透明時は当たり判定無し。\r\n    if (this._opacity < 1) {\r\n      return false;\r\n    }\r\n    try{\r\n      const count: number = this._modelSetting.getHitAreasCount();\r\n\r\n      for (let i = 0; i < count; i++) {\r\n        if (this._modelSetting.getHitAreaName(i) == hitArenaName) {\r\n          const drawId: CubismIdHandle = this._modelSetting.getHitAreaId(i);\r\n          return this.isHit(drawId, x, y);\r\n        }\r\n      }\r\n    }catch(ex){\r\n      console.log(\"数据可能还没有准备好\"+ex);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  public hitTestDefine(hitAreaItem:string,x: number, y: number){\r\n    // 透明時は当たり判定無し。\r\n    if (this._opacity < 1) {\r\n      return false;\r\n    }\r\n    // 拆分文字进行isHit触碰反馈\r\n    let spList = hitAreaItem.split('_'); // 把名字拆分并将首字母大写\r\n    for(let i =0 ;i<spList.length; i++ ){\r\n      spList[i] = spList[i].charAt(0).toUpperCase() + spList[i].slice(1);\r\n    }\r\n    let name = spList.join('') ;\r\n    // 查看这个名字在绘图中是否有被触碰的位置\r\n    const drawId: CubismIdHandle = CubismFramework.getIdManager().getId(name);\r\n    return this.isHit(drawId, x, y);\r\n  }\r\n\r\n  /**\r\n   * モーションデータをグループ名から一括でロードする。\r\n   * モーションデータの名前は内部でModelSettingから取得する。\r\n   *\r\n   * @param group モーションデータのグループ名\r\n   */\r\n   public async preLoadMotionGroup(group: string): Promise<void> {\r\n    const mainFileName = this._modelSetting.getModelFileName();\r\n    for (let i = 0; i < this._modelSetting.getMotionCount(group); i++) {\r\n      const motionFileName = this._modelSetting.getMotionFileName(group, i);\r\n\r\n      // ex) idle_0\r\n      const name = `${group}_${i}`;\r\n      if (this._debugMode) {\r\n        LAppPal.printMessage(\r\n          `[APP]load motion: ${motionFileName} => [${name}]`\r\n        );\r\n      }\r\n      var arrayBuffer:ArrayBuffer;\r\n      var motionFileArr = await db.mocJson.where({key:motionFileName,name:mainFileName}).first();\r\n      if(motionFileArr){\r\n        arrayBuffer = motionFileArr.value;\r\n      }else{\r\n        arrayBuffer = await fetch(`${this._modelHomeDir}${motionFileName}`).then(response => response.arrayBuffer());\r\n        db.mocJson.put({key:motionFileName,name:mainFileName,value :arrayBuffer});\r\n      }\r\n      const tmpMotion: CubismMotion = this.loadMotion(\r\n        arrayBuffer,\r\n        arrayBuffer.byteLength,\r\n        name\r\n      );\r\n\r\n      let fadeTime = this._modelSetting.getMotionFadeInTimeValue(group, i);\r\n      if (fadeTime >= 0.0) {\r\n        tmpMotion.setFadeInTime(fadeTime);\r\n      }\r\n\r\n      fadeTime = this._modelSetting.getMotionFadeOutTimeValue(group, i);\r\n      if (fadeTime >= 0.0) {\r\n        tmpMotion.setFadeOutTime(fadeTime);\r\n      }\r\n      tmpMotion.setEffectIds(this._eyeBlinkIds, this._lipSyncIds);\r\n\r\n      if (this._motions.getValue(name) != null) {\r\n        ACubismMotion.delete(this._motions.getValue(name));\r\n      }\r\n\r\n      this._motions.setValue(name, tmpMotion);\r\n\r\n      this._motionCount++;\r\n      if (this._motionCount >= this._allMotionCount) {\r\n        this._state = LoadStep.LoadTexture;\r\n\r\n        // 全てのモーションを停止する\r\n        this._motionManager.stopAllMotions();\r\n\r\n        this._updating = false;\r\n        this._initialized = true;\r\n\r\n        this.createRenderer();\r\n        this.setupTextures();\r\n        this.getRenderer().startUp(gl);\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * 每个执行方法都要重置，所以写成公共方法\r\n   */\r\n  private restartMotion(){\r\n    this._state = LoadStep.LoadTexture;\r\n\r\n    // 全てのモーションを停止する\r\n    this._motionManager.stopAllMotions();\r\n\r\n    this._updating = false;\r\n    this._initialized = true;\r\n\r\n    this.createRenderer();\r\n    this.setupTextures();\r\n    this.getRenderer().startUp(gl);\r\n  }\r\n\r\n  /**\r\n   * すべてのモーションデータを解放する。\r\n   */\r\n  public releaseMotions(): void {\r\n    this._motions.clear();\r\n  }\r\n\r\n  /**\r\n   * 全ての表情データを解放する。\r\n   */\r\n  public releaseExpressions(): void {\r\n    this._expressions.clear();\r\n  }\r\n\r\n  /**\r\n   * モデルを描画する処理。モデルを描画する空間のView-Projection行列を渡す。\r\n   */\r\n  public doDraw(): void {\r\n    if (this._model == null) return;\r\n\r\n    // キャンバスサイズを渡す\r\n    const viewport: number[] = [0, 0, canvas.width, canvas.height];\r\n\r\n    this.getRenderer().setRenderState(frameBuffer, viewport);\r\n    this.getRenderer().drawModel();\r\n  }\r\n\r\n  /**\r\n   * モデルを描画する処理。モデルを描画する空間のView-Projection行列を渡す。\r\n   */\r\n  public draw(matrix: CubismMatrix44): void {\r\n    if (this._model == null) {\r\n      return;\r\n    }\r\n\r\n    // 各読み込み終了後\r\n    if (this._state == LoadStep.CompleteSetup) {\r\n      matrix.multiplyByMatrix(this._modelMatrix);\r\n\r\n      this.getRenderer().setMvpMatrix(matrix);\r\n\r\n      this.doDraw();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * コンストラクタ\r\n   */\r\n  public constructor() {\r\n    super();\r\n\r\n    this._modelSetting = null;\r\n    this._modelHomeDir = null;\r\n    this._userTimeSeconds = 0.0;\r\n\r\n    this._eyeBlinkIds = new csmVector<CubismIdHandle>();\r\n    this._lipSyncIds = new csmVector<CubismIdHandle>();\r\n\r\n    this._motions = new csmMap<string, ACubismMotion>();\r\n    this._expressions = new csmMap<string, ACubismMotion>();\r\n\r\n    this._hitArea = new csmVector<csmRect>();\r\n    this._userArea = new csmVector<csmRect>();\r\n\r\n    this._idParamAngleX = CubismFramework.getIdManager().getId(\r\n      CubismDefaultParameterId.ParamAngleX\r\n    );\r\n    this._idParamAngleY = CubismFramework.getIdManager().getId(\r\n      CubismDefaultParameterId.ParamAngleY\r\n    );\r\n    this._idParamAngleZ = CubismFramework.getIdManager().getId(\r\n      CubismDefaultParameterId.ParamAngleZ\r\n    );\r\n    this._idParamEyeBallX = CubismFramework.getIdManager().getId(\r\n      CubismDefaultParameterId.ParamEyeBallX\r\n    );\r\n    this._idParamEyeBallY = CubismFramework.getIdManager().getId(\r\n      CubismDefaultParameterId.ParamEyeBallY\r\n    );\r\n    this._idParamBodyAngleX = CubismFramework.getIdManager().getId(\r\n      CubismDefaultParameterId.ParamBodyAngleX\r\n    );\r\n\r\n    this._state = LoadStep.LoadAssets;\r\n    this._expressionCount = 0;\r\n    this._textureCount = 0;\r\n    this._motionCount = 0;\r\n    this._allMotionCount = 0;\r\n  }\r\n\r\n  _modelSetting: ICubismModelSetting; // モデルセッティング情報\r\n  _modelHomeDir: string; // モデルセッティングが置かれたディレクトリ\r\n  _userTimeSeconds: number; // デルタ時間の積算値[秒]\r\n\r\n  _eyeBlinkIds: csmVector<CubismIdHandle>; // モデルに設定された瞬き機能用パラメータID\r\n  _lipSyncIds: csmVector<CubismIdHandle>; // モデルに設定されたリップシンク機能用パラメータID\r\n\r\n  _motions: csmMap<string, ACubismMotion>; // 読み込まれているモーションのリスト\r\n  _expressions: csmMap<string, ACubismMotion>; // 読み込まれている表情のリスト\r\n\r\n  _hitArea: csmVector<csmRect>;\r\n  _userArea: csmVector<csmRect>;\r\n\r\n  _idParamAngleX: CubismIdHandle; // パラメータID: ParamAngleX\r\n  _idParamAngleY: CubismIdHandle; // パラメータID: ParamAngleY\r\n  _idParamAngleZ: CubismIdHandle; // パラメータID: ParamAngleZ\r\n  _idParamEyeBallX: CubismIdHandle; // パラメータID: ParamEyeBallX\r\n  _idParamEyeBallY: CubismIdHandle; // パラメータID: ParamEyeBAllY\r\n  _idParamBodyAngleX: CubismIdHandle; // パラメータID: ParamBodyAngleX\r\n\r\n  _state: number; // 現在のステータス管理用\r\n  _expressionCount: number; // 表情データカウント\r\n  _textureCount: number; // テクスチャカウント\r\n  _motionCount: number; // モーションデータカウント\r\n  _allMotionCount: number; // モーション総数\r\n\r\n  private _motionFileName :Map<string, string> = new Map<string, string>();\r\n}\r\n","/**\r\n * Copyright(c) Live2D Inc. All rights reserved.\r\n *\r\n * Use of this source code is governed by the Live2D Open Software license\r\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\r\n */\r\n\r\n/**\r\n * プラットフォーム依存機能を抽象化する Cubism Platform Abstraction Layer.\r\n *\r\n * ファイル読み込みや時刻取得等のプラットフォームに依存する関数をまとめる。\r\n * \r\n * 说白了就是一堆工具，主要是获取时间和打印消息的抽象方法\r\n */\r\nexport class LAppPal {\r\n  /**\r\n   * ファイルをバイトデータとして読みこむ\r\n   *\r\n   * @param filePath 読み込み対象ファイルのパス\r\n   * @return\r\n   * {\r\n   *      buffer,   読み込んだバイトデータ\r\n   *      size        ファイルサイズ\r\n   * }\r\n   */\r\n  public static loadFileAsBytes(\r\n    filePath: string,\r\n    callback: (arrayBuffer: ArrayBuffer, size: number) => void\r\n  ): void {\r\n    fetch(filePath)\r\n      .then(response => response.arrayBuffer())\r\n      .then(arrayBuffer => callback(arrayBuffer, arrayBuffer.byteLength));\r\n  }\r\n\r\n  /**\r\n   * デルタ時間（前回フレームとの差分）を取得する\r\n   * @return デルタ時間[ms]\r\n   */\r\n  public static getDeltaTime(): number {\r\n    return this.s_deltaTime;\r\n  }\r\n\r\n  public static updateTime(): void {\r\n    this.s_currentFrame = Date.now();\r\n    this.s_deltaTime = (this.s_currentFrame - this.s_lastFrame) / 1000;\r\n    this.s_lastFrame = this.s_currentFrame;\r\n  }\r\n\r\n  /**\r\n   * メッセージを出力する\r\n   * @param message 文字列\r\n   */\r\n  public static printMessage(message: string): void {\r\n    console.log(message);\r\n  }\r\n\r\n  public static modelUrlVersion(modelurl:string):number{\r\n    let setting:any = null;\r\n    fetch(modelurl,{\r\n      mode :'cors',\r\n      method: \"GET\"\r\n    })\r\n    .then(function(response){\r\n      if(response.status === 200){\r\n        setting = response.arrayBuffer;\r\n      }\r\n    });\r\n    let test = JSON.stringify(setting);\r\n    return 2;\r\n  }\r\n\r\n  static lastUpdate = Date.now();\r\n\r\n  static s_currentFrame = 0.0;\r\n  static s_lastFrame = 0.0;\r\n  static s_deltaTime = 0.0;\r\n}\r\n","/**\r\n * Copyright(c) Live2D Inc. All rights reserved.\r\n *\r\n * Use of this source code is governed by the Live2D Open Software license\r\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\r\n */\r\n\r\nimport { Live2DCubismFramework as csmvector } from './Framework/type/csmvector';\r\nimport Csm_csmVector = csmvector.csmVector;\r\nimport csmVector_iterator = csmvector.iterator;\r\nimport { gl } from './lappdelegate';\r\n\r\n/**\r\n * テクスチャ管理クラス\r\n * 画像読み込み、管理を行うクラス。\r\n */\r\nexport class LAppTextureManager {\r\n  /**\r\n   * コンストラクタ\r\n   */\r\n  constructor() {\r\n    this._textures = new Csm_csmVector<TextureInfo>();\r\n  }\r\n\r\n  /**\r\n   * 解放する。\r\n   */\r\n  public release(): void {\r\n    for (\r\n      let ite: csmVector_iterator<TextureInfo> = this._textures.begin();\r\n      ite.notEqual(this._textures.end());\r\n      ite.preIncrement()\r\n    ) {\r\n      gl.deleteTexture(ite.ptr().id);\r\n    }\r\n    this._textures = null;\r\n  }\r\n\r\n  /**\r\n   * 画像読み込み\r\n   *\r\n   * @param fileName 読み込む画像ファイルパス名\r\n   * @param usePremultiply Premult処理を有効にするか\r\n   * @return 画像情報、読み込み失敗時はnullを返す\r\n   */\r\n  public createTextureFromPngFile(\r\n    fileName: string,\r\n    usePremultiply: boolean,\r\n    callback: (textureInfo: TextureInfo) => void\r\n  ): void {\r\n    // search loaded texture already\r\n    for (\r\n      let ite: csmVector_iterator<TextureInfo> = this._textures.begin();\r\n      ite.notEqual(this._textures.end());\r\n      ite.preIncrement()\r\n    ) {\r\n      if (\r\n        ite.ptr().fileName == fileName &&\r\n        ite.ptr().usePremultply == usePremultiply\r\n      ) {\r\n        // 2回目以降はキャッシュが使用される(待ち時間なし)\r\n        // WebKitでは同じImageのonloadを再度呼ぶには再インスタンスが必要\r\n        // 詳細：https://stackoverflow.com/a/5024181\r\n        ite.ptr().img = new Image();\r\n        ite.ptr().img.crossOrigin='Anonymous';\r\n        ite.ptr().img.onload = (): void => callback(ite.ptr());\r\n        ite.ptr().img.src = fileName;\r\n        return;\r\n      }\r\n    }\r\n\r\n    // データのオンロードをトリガーにする\r\n    const img = new Image();\r\n    img.crossOrigin='Anonymous';\r\n    img.onload = (): void => {\r\n      // テクスチャオブジェクトの作成\r\n      const tex: WebGLTexture = gl.createTexture();\r\n\r\n      // テクスチャを選択\r\n      gl.bindTexture(gl.TEXTURE_2D, tex);\r\n\r\n      // テクスチャにピクセルを書き込む\r\n      gl.texParameteri(\r\n        gl.TEXTURE_2D,\r\n        gl.TEXTURE_MIN_FILTER,\r\n        gl.LINEAR_MIPMAP_LINEAR\r\n      );\r\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\r\n\r\n      // Premult処理を行わせる\r\n      if (usePremultiply) {\r\n        gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, 1);\r\n      }\r\n\r\n      // テクスチャにピクセルを書き込む\r\n      gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, img);\r\n\r\n      // ミップマップを生成\r\n      gl.generateMipmap(gl.TEXTURE_2D);\r\n\r\n      // テクスチャをバインド\r\n      gl.bindTexture(gl.TEXTURE_2D, null);\r\n\r\n      const textureInfo: TextureInfo = new TextureInfo();\r\n      if (textureInfo != null) {\r\n        textureInfo.fileName = fileName;\r\n        textureInfo.width = img.width;\r\n        textureInfo.height = img.height;\r\n        textureInfo.id = tex;\r\n        textureInfo.img = img;\r\n        textureInfo.usePremultply = usePremultiply;\r\n        this._textures.pushBack(textureInfo);\r\n      }\r\n\r\n      callback(textureInfo);\r\n    };\r\n    img.src = fileName;\r\n  }\r\n\r\n  /**\r\n   * 画像の解放\r\n   *\r\n   * 配列に存在する画像全てを解放する。\r\n   */\r\n  public releaseTextures(): void {\r\n    for (let i = 0; i < this._textures.getSize(); i++) {\r\n      this._textures.set(i, null);\r\n    }\r\n\r\n    this._textures.clear();\r\n  }\r\n\r\n  /**\r\n   * 画像の解放\r\n   *\r\n   * 指定したテクスチャの画像を解放する。\r\n   * @param texture 解放するテクスチャ\r\n   */\r\n  public releaseTextureByTexture(texture: WebGLTexture): void {\r\n    for (let i = 0; i < this._textures.getSize(); i++) {\r\n      if (this._textures.at(i).id != texture) {\r\n        continue;\r\n      }\r\n\r\n      this._textures.set(i, null);\r\n      this._textures.remove(i);\r\n      break;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 画像の解放\r\n   *\r\n   * 指定した名前の画像を解放する。\r\n   * @param fileName 解放する画像ファイルパス名\r\n   */\r\n  public releaseTextureByFilePath(fileName: string): void {\r\n    for (let i = 0; i < this._textures.getSize(); i++) {\r\n      if (this._textures.at(i).fileName == fileName) {\r\n        this._textures.set(i, null);\r\n        this._textures.remove(i);\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  _textures: Csm_csmVector<TextureInfo>;\r\n}\r\n\r\n/**\r\n * 画像情報構造体\r\n */\r\nexport class TextureInfo {\r\n  img: HTMLImageElement; // 画像\r\n  id: WebGLTexture = null; // テクスチャ\r\n  width = 0; // 横幅\r\n  height = 0; // 高さ\r\n  usePremultply: boolean; // Premult処理を有効にするか\r\n  fileName: string; // ファイル名\r\n}\r\n","/**\r\n * Copyright(c) Live2D Inc. All rights reserved.\r\n *\r\n * Use of this source code is governed by the Live2D Open Software license\r\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\r\n */\r\n\r\nimport { Live2DCubismFramework as cubismMatrix44 } from \"./Framework/math/cubismmatrix44\";\r\nimport { Live2DCubismFramework as cubismviewmatrix } from \"./Framework/math/cubismviewmatrix\";\r\nimport Csm_CubismViewMatrix = cubismviewmatrix.CubismViewMatrix;\r\nimport Csm_CubismMatrix44 = cubismMatrix44.CubismMatrix44;\r\nimport { TouchManager } from \"./touchmanager\";\r\nimport { LAppLive2DManager } from \"./lapplive2dmanager\";\r\nimport { LAppDelegate, canvas, gl } from \"./lappdelegate\";\r\nimport { LAppSprite } from \"./lappsprite\";\r\nimport { LAppPal } from \"./lapppal\";\r\nimport * as LAppDefine from \"./lappdefine\";\r\n\r\n/**\r\n * 描画クラス。\r\n */\r\nexport class LAppView {\r\n  /**\r\n   * コンストラクタ\r\n   */\r\n  constructor() {\r\n    this._programId = null;\r\n    this._back = null;\r\n    this._gear = null;\r\n    this._hitAreaList = null;\r\n\r\n    // タッチ関係のイベント管理\r\n    this._touchManager = new TouchManager();\r\n\r\n    //将设备坐标转换为屏幕坐标\r\n    this._deviceToScreen = new Csm_CubismMatrix44();\r\n\r\n    // 画面の表示の拡大縮小や移動の変換を行う行列\r\n    this._viewMatrix = new Csm_CubismViewMatrix();\r\n    // 放大倍率默认值1.0倍\r\n    this._head_pos = 0.5;\r\n  }\r\n\r\n  /**\r\n   * 初期化する。\r\n   * 此处与main.js中的initv2方法类似\r\n   */\r\n  public initialize(): void {\r\n    const { width, height } = canvas;\r\n\r\n    const ratio: number = height / width;\r\n    const left: number = LAppDefine.ViewLogicalLeft;\r\n    const right: number = LAppDefine.ViewLogicalRight;\r\n    const bottom: number = -ratio;\r\n    const top: number = ratio;\r\n\r\n    this._viewMatrix.setScreenRect(left, right, bottom, top); // デバイスに対応する画面の範囲。 Xの左端、Xの右端、Yの下端、Yの上端\r\n\r\n    const screenW: number = Math.abs(left - right);\r\n    this._deviceToScreen.scaleRelative(screenW / width, -screenW / width);\r\n    this._deviceToScreen.translateRelative(-width * 0.5, -height * 0.5);\r\n\r\n    // 表示範囲の設定\r\n    this._viewMatrix.setMaxScale(LAppDefine.ViewMaxScale); // 限界拡張率\r\n    this._viewMatrix.setMinScale(LAppDefine.ViewMinScale); // 限界縮小率\r\n\r\n    // 表示できる最大範囲\r\n    this._viewMatrix.setMaxScreenRect(\r\n      LAppDefine.ViewLogicalMaxLeft,\r\n      LAppDefine.ViewLogicalMaxRight,\r\n      LAppDefine.ViewLogicalMaxBottom,\r\n      LAppDefine.ViewLogicalMaxTop\r\n    );\r\n    \r\n    //console.log(this._viewMatrix);\r\n  }\r\n\r\n  /**\r\n   * 解放する\r\n   */\r\n  public release(): void {\r\n    this._viewMatrix = null;\r\n    this._touchManager = null;\r\n    this._deviceToScreen = null;\r\n\r\n    if (this._gear) {\r\n      this._gear.release();\r\n      this._gear = null;\r\n    }\r\n\r\n    if (this._back){\r\n      this._back.release();\r\n      this._back = null;\r\n    }\r\n\r\n    gl.deleteProgram(this._programId);\r\n    this._programId = null;\r\n  }\r\n\r\n  /**\r\n   * 描画する。\r\n   */\r\n  public render(): void {\r\n    gl.useProgram(this._programId);\r\n\r\n    if (this._back) {\r\n      this._back.render(this._programId);\r\n    }\r\n    if (this._gear) {\r\n      this._gear.render(this._programId);\r\n    }\r\n\r\n    gl.flush();\r\n    const live2DManager: LAppLive2DManager = LAppLive2DManager.getInstance();\r\n\r\n    live2DManager.onUpdate();\r\n  }\r\n\r\n  /**\r\n   * 画像の初期化を行う。\r\n   */\r\n  public initializeSprite(): void {\r\n    // シェーダーを作成\r\n    if (this._programId == null) {\r\n      this._programId = LAppDelegate.getInstance().createShader();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * タッチされた時に呼ばれる。\r\n   *\r\n   * @param pointX スクリーンX座標\r\n   * @param pointY スクリーンY座標\r\n   */\r\n  public onTouchesBegan(pointX: number, pointY: number): void {\r\n    this._touchManager.touchesBegan(pointX, pointY);\r\n  }\r\n\r\n  /**\r\n   * タッチしているときにポインタが動いたら呼ばれる。\r\n   *\r\n   * @param clientX 屏幕X坐标\r\n   * @param clientY 屏幕Y坐标\r\n   */\r\n  public onTouchesMoved(clientX: number,clientY: number, rect): void {\r\n    \r\n    const sx: number = this.transformScreenX(clientX - rect.left); //sx\r\n    const sy: number = this.transformScreenY(clientY - rect.top);  //sy\r\n    const target = this.transformRect({\r\n      x: rect.left + rect.width / 2,\r\n      y: rect.top + rect.height * this._head_pos\r\n    }, {\r\n      x: clientX,\r\n      y: clientY\r\n    }, rect);\r\n    const viewX: number = this.transformViewX(target.x - rect.left);\r\n    const viewY: number = this.transformViewY(target.y - rect.top);\r\n    //const viewX: number = this.transformViewX(this._touchManager.getX());\r\n    //const viewY: number = this.transformViewY(this._touchManager.getY());\r\n\r\n    this._touchManager.touchesMoved(sx, sy);\r\n    const live2DManager: LAppLive2DManager = LAppLive2DManager.getInstance();\r\n    live2DManager.onDrag(viewX, viewY);\r\n    \r\n  }\r\n\r\n  /**\r\n   * タッチが終了したら呼ばれる。\r\n   *\r\n   * @param pointX スクリーンX座標\r\n   * @param pointY スクリーンY座標\r\n   * @param hitAreaList 触碰的区域数组\r\n   */\r\n  public onTouchesEnded(pointX: number, pointY: number): void {\r\n    // タッチ終了\r\n    const live2DManager: LAppLive2DManager = LAppLive2DManager.getInstance();\r\n    live2DManager.onDrag(0.0, 0.0);\r\n\r\n    {\r\n      // シングルタップ\r\n      // 如果使用this._touchManager 获得的是按下去时候的坐标\r\n      // 使用 onTouchesEnded 的 pointX 参数是获得鼠标释放时的坐标\r\n      const x: number = this._deviceToScreen.transformX(\r\n        pointX //this._touchManager.getX()\r\n      ); // 論理座標変換した座標を取得。\r\n      const y: number = this._deviceToScreen.transformY(\r\n        pointY //this._touchManager.getY()\r\n      ); // 論理座標変化した座標を取得。\r\n\r\n      if (LAppDefine.DebugTouchLogEnable) {\r\n        LAppPal.printMessage(`[APP]touchesEnded x: ${x} y: ${y}`);\r\n      }\r\n      live2DManager.onTap(x, y,this._hitAreaList);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * X座標をView座標に変換する。\r\n   *\r\n   * @param deviceX デバイスX座標\r\n   */\r\n  public transformViewX(deviceX: number): number {\r\n    const screenX: number = this._deviceToScreen.transformX(deviceX); // 論理座標変換した座標を取得。\r\n    return this._viewMatrix.invertTransformX(screenX); // 拡大、縮小、移動後の値。\r\n  }\r\n\r\n  /**\r\n   * Y座標をView座標に変換する。\r\n   *\r\n   * @param deviceY デバイスY座標\r\n   */\r\n  public transformViewY(deviceY: number): number {\r\n    const screenY: number = this._deviceToScreen.transformY(deviceY); // 論理座標変換した座標を取得。\r\n    return this._viewMatrix.invertTransformY(screenY);\r\n  }\r\n\r\n  /**\r\n   * X座標をScreen座標に変換する。\r\n   * @param deviceX デバイスX座標\r\n   */\r\n  public transformScreenX(deviceX: number): number {\r\n    return this._deviceToScreen.transformX(deviceX);\r\n  }\r\n\r\n  /**\r\n   * Y座標をScreen座標に変換する。\r\n   *\r\n   * @param deviceY デバイスY座標\r\n   */\r\n  public transformScreenY(deviceY: number): number {\r\n    return this._deviceToScreen.transformY(deviceY);\r\n  }\r\n\r\n  public transformRect(center, transform, rect)\r\n  {\r\n    if (transform.x < rect.left + rect.width && transform.y < rect.top + rect.height &&\r\n        transform.x > rect.left && transform.y > rect.top) return transform;\r\n    let Len_X = center.x - transform.x;\r\n    let Len_Y = center.y - transform.y;\r\n\r\n    function angle(Len_X, Len_Y)\r\n    {\r\n        return Math.acos(LAppView.dot({\r\n            x: 0,\r\n            y: 1\r\n        }, LAppView.normalize(Len_X, Len_Y))) * 180 / Math.PI\r\n    }\r\n\r\n    let angleTarget = angle(Len_X, Len_Y);\r\n    if (transform.x < center.x) angleTarget = 360 - angleTarget;\r\n    let angleLeftTop = 360 - angle(rect.left - center.x, (rect.top - center.y) * -1);\r\n    let angleLeftBottom = 360 - angle(rect.left - center.x, (rect.top + rect.height - center.y) * -1);\r\n    let angleRightTop = angle(rect.left + rect.width - center.x, (rect.top - center.y) * -1);\r\n    let angleRightBottom = angle(rect.left + rect.width - center.x, (rect.top + rect.height - center.y) * -1);\r\n    let scale = Len_Y / Len_X;\r\n    let res = {};\r\n\r\n    if (angleTarget < angleRightTop) {\r\n        let y3 = rect.top - center.y;\r\n        let x3 = y3 / scale;\r\n        res = {\r\n            y: center.y + y3,\r\n            x: center.x + x3\r\n        }\r\n    } else if(angleTarget < angleRightBottom) {\r\n        let x3 = rect.left + rect.width - center.x;\r\n        let y3 = x3 * scale;\r\n        res = {\r\n            y: center.y + y3,\r\n            x: center.x + x3\r\n        }\r\n    } else if (angleTarget < angleLeftBottom) {\r\n        let y3 = rect.top + rect.height - center.y;\r\n        let x3 = y3 / scale;\r\n        res = {\r\n            y: center.y + y3,\r\n            x: center.x + x3\r\n        }\r\n    } else if (angleTarget < angleLeftTop) {\r\n        let x3 = center.x - rect.left;\r\n        let y3 = x3 * scale;\r\n        res = {\r\n            y: center.y - y3,\r\n            x: center.x - x3\r\n        }\r\n    } else {\r\n        let y3 = rect.top - center.y;\r\n        let x3 = y3 / scale;\r\n        res = {\r\n            y: center.y + y3,\r\n            x: center.x + x3\r\n        }\r\n    }\r\n\r\n    return res;\r\n  }\r\n\r\n  public transformRange(center, transform, range)\r\n  {\r\n    let a = {\r\n        x: transform.x - center.x,\r\n        y: transform.y - center.y\r\n    }\r\n    let r = Math.sqrt(Math.pow(a.x,2) + Math.pow(a.y,2));\r\n    if (r > range) {\r\n        a = {\r\n            x: a.x / r * range + center.x,\r\n            y: a.y / r * range + center.y\r\n        };\r\n        return a;\r\n    } else {\r\n        return transform;\r\n    }\r\n  }\r\n\r\n  public static dot(A,B)\r\n  {\r\n    return A.x * B.x + A.y * B.y;\r\n  }\r\n\r\n  public static normalize(x,y)\r\n  {\r\n    let length = Math.sqrt(x * x + y * y)\r\n    return {\r\n        x: x / length,\r\n        y: y / length\r\n    }\r\n  }\r\n\r\n  _touchManager: TouchManager; // タッチマネージャー\r\n  _deviceToScreen: Csm_CubismMatrix44; // デバイスからスクリーンへの行列\r\n  _viewMatrix: Csm_CubismViewMatrix; // viewMatrix\r\n  _programId: WebGLProgram; // シェーダID\r\n  _back: LAppSprite; // 背景画像\r\n  _gear: LAppSprite; // ギア画像\r\n  _changeModel: boolean; // モデル切り替えフラグ\r\n  _isClick: boolean; // クリック中\r\n\r\n  _head_pos:number;\r\n  _hitAreaList:any[];//自定义动作数组\r\n\r\n}\r\n","/**\r\n *\r\n *  You can modify and use this source freely\r\n *  only for the development of application related Live2D.\r\n *\r\n *  (c) Live2D Inc. All rights reserved.\r\n */\r\n/**\r\n * EYHN 修改\r\n * \r\n * Copyright © 2016 - 2017 EYHN\r\n */\r\nexport class MatrixStack{\r\n    \r\n    public reset(){\r\n        this.depth = 0;\r\n    }\r\n\r\n    public loadIdentity(){\r\n        for (var i = 0; i < 16; i++)\r\n        {\r\n            this.currentMatrix[i] = (i % 5 == 0) ? 1 : 0;\r\n        }\r\n    }\r\n\r\n    public push(){\r\n        let offset = this.depth * 16;\r\n        let nextOffset = (this.depth + 1) * 16;\r\n        \r\n        if (this.matrixStack.length < nextOffset + 16)\r\n        {\r\n            this.matrixStack.length = nextOffset + 16;\r\n        }\r\n    \r\n        for (let i = 0; i < 16; i++)\r\n        {\r\n            this.matrixStack[nextOffset + i] = this.currentMatrix[i];\r\n        }\r\n    \r\n        this.depth++;\r\n    }\r\n\r\n    public pop(){\r\n        this.depth--;\r\n        if (this.depth < 0)\r\n        {\r\n            console.log(\"Invalid matrix stack. 无效的矩阵堆栈\")\r\n            this.depth = 0;\r\n        }\r\n    \r\n        let offset = this.depth * 16;\r\n        for (let i = 0; i < 16; i++)\r\n        {\r\n            this.currentMatrix[i] = this.matrixStack[offset + i];\r\n        }\r\n    }\r\n\r\n    public getMatrix(){\r\n        return this.currentMatrix;\r\n    }\r\n\r\n    public multMatrix(matNew){\r\n        let i, j, k;\r\n\r\n        for (i = 0; i < 16; i++)\r\n        {\r\n            this.tmp[i] = 0;\r\n        }\r\n    \r\n        for (i = 0; i < 4; i++)\r\n        {\r\n            for (j = 0; j < 4; j++)\r\n            {\r\n                for (k = 0; k < 4; k++)\r\n                {\r\n                    this.tmp[i + j * 4] += this.currentMatrix[i + k * 4] * matNew[k + j * 4];\r\n                }\r\n            }\r\n        }\r\n        for (i = 0; i < 16; i++)\r\n        {\r\n            this.currentMatrix[i] = this.tmp[i];\r\n        }\r\n    }\r\n\r\n    depth = 0;\r\n\r\n    matrixStack = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\r\n\r\n    currentMatrix = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\r\n\r\n    tmp = new Array(16);\r\n}\r\n\r\n","import {Live2DFramework} from \"./Live2DFramework\"\r\nimport {PlatformManager} from '../PlatformManager'\r\n\r\nexport class ModelSettingJson{\r\n    public constructor(){\r\n        this.NAME = \"name\";\r\n        this.ID = \"id\";\r\n        this.MODEL = \"model\";\r\n        this.TEXTURES = \"textures\";\r\n        this.HIT_AREAS = \"hit_areas\";\r\n        this.PHYSICS = \"physics\";\r\n        this.POSE = \"pose\";\r\n        this.EXPRESSIONS = \"expressions\";\r\n        this.MOTION_GROUPS = \"motions\";\r\n        this.SOUND = \"sound\";\r\n        this.FADE_IN = \"fade_in\";\r\n        this.FADE_OUT = \"fade_out\";\r\n        this.LAYOUT = \"layout\";\r\n        this.HIT_AREAS_CUSTOM = \"hit_areas_custom\";\r\n        this.INIT_PARAM = \"init_param\";\r\n        this.INIT_PARTS_VISIBLE = \"init_parts_visible\";\r\n        this.VALUE = \"val\";\r\n        this.FILE = \"file\";\r\n\r\n        this.json = {};\r\n    }\r\n\r\n    public loadModelSetting(path, callback){\r\n        var thisRef = this;\r\n        var pm = Live2DFramework.getPlatformManager() as PlatformManager;\r\n        pm.loadBytes(path).then((buf)=>{\r\n            var str = String.fromCharCode.apply(null,new Uint8Array(buf));\r\n            thisRef.json = JSON.parse(str);\r\n            callback();\r\n        });\r\n    }\r\n\r\n    public getTextureFile(n){\r\n        if (this.json[this.TEXTURES] == null || this.json[this.TEXTURES][n] == null)\r\n        return null;\r\n    \r\n        return this.json[this.TEXTURES][n];\r\n    }\r\n\r\n    public getModelFile(){\r\n        return this.json[this.MODEL];\r\n    }\r\n\r\n    public getTextureNum ()\r\n    {    \r\n        if (this.json[this.TEXTURES] == null) return 0;\r\n        \r\n        return this.json[this.TEXTURES].length;\r\n    }\r\n\r\n\r\n    public getHitAreaNum ()\r\n    {\r\n        if (this.json[this.HIT_AREAS] == null)\r\n            return 0;\r\n\r\n        return this.json[this.HIT_AREAS].length;\r\n    }\r\n\r\n\r\n    public getHitAreaID(n)\r\n    {\r\n        if (this.json[this.HIT_AREAS] == null || \r\n            this.json[this.HIT_AREAS][n] == null)\r\n            return null;\r\n\r\n        return this.json[this.HIT_AREAS][n][this.ID];\r\n    }\r\n\r\n\r\n    public getHitAreaName(n)\r\n    {\r\n        if (this.json[this.HIT_AREAS] == null || \r\n            this.json[this.HIT_AREAS][n] == null)\r\n            return null;\r\n\r\n        return this.json[this.HIT_AREAS][n][this.NAME];\r\n    }\r\n\r\n\r\n    public getPhysicsFile()\r\n    {\r\n        return this.json[this.PHYSICS];\r\n    }\r\n\r\n\r\n    public getPoseFile()\r\n    {\r\n        return this.json[this.POSE];\r\n    }\r\n\r\n\r\n    public getExpressionNum ()\r\n    {\r\n        return (this.json[this.EXPRESSIONS] == null) ? 0 : this.json[this.EXPRESSIONS].length;\r\n    }\r\n\r\n\r\n    public getExpressionFile(n)\r\n    {\r\n        if (this.json[this.EXPRESSIONS] == null)\r\n            return null;\r\n        return this.json[this.EXPRESSIONS][n][this.FILE];\r\n    }\r\n\r\n\r\n    public getExpressionName(n)\r\n    {\r\n        if (this.json[this.EXPRESSIONS] == null)\r\n            return null;\r\n        return this.json[this.EXPRESSIONS][n][this.NAME];\r\n    }\r\n\r\n\r\n    public getLayout()\r\n    {\r\n        return this.json[this.LAYOUT];\r\n    }\r\n\r\n\r\n    public getHitAreasCustom ()\r\n    {\r\n        return this.json[this.HIT_AREAS_CUSTOM];\r\n    }\r\n\r\n\r\n    public getInitParamNum ()\r\n    {\r\n        return (this.json[this.INIT_PARAM] == null) ? 0 : this.json[this.INIT_PARAM].length;\r\n    }\r\n\r\n\r\n    public getMotionNum(name)\r\n    {\r\n        if (this.json[this.MOTION_GROUPS] == null || \r\n            this.json[this.MOTION_GROUPS][name] == null)\r\n            return 0;\r\n        \r\n        return this.json[this.MOTION_GROUPS][name].length;\r\n    }\r\n\r\n\r\n    public getMotionFile(name, n)\r\n    {\r\n        if (this.json[this.MOTION_GROUPS] == null || \r\n            this.json[this.MOTION_GROUPS][name] == null || \r\n            this.json[this.MOTION_GROUPS][name][n] == null)\r\n            return null;\r\n\r\n        return this.json[this.MOTION_GROUPS][name][n][this.FILE];\r\n    }\r\n\r\n\r\n    public getMotionSound(name, n)\r\n    {\r\n        if (this.json[this.MOTION_GROUPS] == null || \r\n            this.json[this.MOTION_GROUPS][name] == null || \r\n            this.json[this.MOTION_GROUPS][name][n] == null || \r\n            this.json[this.MOTION_GROUPS][name][n][this.SOUND] == null)\r\n            return null;\r\n\r\n        return this.json[this.MOTION_GROUPS][name][n][this.SOUND];\r\n    }\r\n\r\n\r\n    public getMotionFadeIn(name, n)\r\n    {\r\n        if (this.json[this.MOTION_GROUPS] == null || \r\n            this.json[this.MOTION_GROUPS][name] == null || \r\n            this.json[this.MOTION_GROUPS][name][n] == null || \r\n            this.json[this.MOTION_GROUPS][name][n][this.FADE_IN] == null)\r\n            return 1000;\r\n\r\n        return this.json[this.MOTION_GROUPS][name][n][this.FADE_IN];\r\n    }\r\n\r\n\r\n    public getMotionFadeOut(name, n)\r\n    {\r\n        if (this.json[this.MOTION_GROUPS] == null || \r\n            this.json[this.MOTION_GROUPS][name] == null || \r\n            this.json[this.MOTION_GROUPS][name][n] == null || \r\n            this.json[this.MOTION_GROUPS][name][n][this.FADE_OUT] == null)\r\n            return 1000;\r\n        \r\n        return this.json[this.MOTION_GROUPS][name][n][this.FADE_OUT];\r\n    }\r\n\r\n\r\n    public getInitParamID(n)\r\n    {\r\n        if (this.json[this.INIT_PARAM] == null || \r\n            this.json[this.INIT_PARAM][n] == null)\r\n            return null;\r\n        \r\n        return this.json[this.INIT_PARAM][n][this.ID];\r\n    }\r\n\r\n\r\n    public getInitParamValue(n)\r\n    {\r\n        if (this.json[this.INIT_PARAM] == null || this.json[this.INIT_PARAM][n] == null)\r\n            return NaN;\r\n        \r\n        return this.json[this.INIT_PARAM][n][this.VALUE];\r\n    }\r\n\r\n\r\n    public getInitPartsVisibleNum ()\r\n    {\r\n        return (this.json[this.INIT_PARTS_VISIBLE] == null) ? 0 : this.json[this.INIT_PARTS_VISIBLE].length;\r\n    }\r\n\r\n\r\n    public getInitPartsVisibleID(n)\r\n    {\r\n        if (this.json[this.INIT_PARTS_VISIBLE] == null || this.json[this.INIT_PARTS_VISIBLE][n] == null)\r\n            return null;\r\n        return this.json[this.INIT_PARTS_VISIBLE][n][this.ID];\r\n    }\r\n\r\n\r\n    public getInitPartsVisibleValue(n)\r\n    {\r\n        if (this.json[this.INIT_PARTS_VISIBLE] == null || this.json[this.INIT_PARTS_VISIBLE][n] == null)\r\n            return NaN;\r\n        \r\n        return this.json[this.INIT_PARTS_VISIBLE][n][this.VALUE];\r\n    }\r\n\r\n\r\n    NAME:string;\r\n    ID:string;\r\n    MODEL:string;\r\n    TEXTURES:string;\r\n    HIT_AREAS:string;\r\n    PHYSICS:string;\r\n    POSE :string;\r\n    EXPRESSIONS :string;\r\n    MOTION_GROUPS:string;\r\n    SOUND:string;\r\n    FADE_IN :string;\r\n    FADE_OUT :string;\r\n    LAYOUT :string;\r\n    HIT_AREAS_CUSTOM :string;\r\n    INIT_PARAM :string;\r\n    INIT_PARTS_VISIBLE :string;\r\n    VALUE :string;\r\n    FILE :string;\r\n\r\n    json :any;\r\n}","/**\r\n * Copyright(c) Live2D Inc. All rights reserved.\r\n *\r\n * Use of this source code is governed by the Live2D Open Software license\r\n * that can be found at https://www.live2d.com/eula/live2d-open-software-license-agreement_en.html.\r\n */\r\n\r\nexport class TouchManager {\r\n  /**\r\n   * コンストラクタ\r\n   */\r\n  constructor() {\r\n    this._startX = 0.0;\r\n    this._startY = 0.0;\r\n    this._lastX = 0.0;\r\n    this._lastY = 0.0;\r\n    this._lastX1 = 0.0;\r\n    this._lastY1 = 0.0;\r\n    this._lastX2 = 0.0;\r\n    this._lastY2 = 0.0;\r\n    this._lastTouchDistance = 0.0;\r\n    this._deltaX = 0.0;\r\n    this._deltaY = 0.0;\r\n    this._scale = 1.0;\r\n    this._touchSingle = false;\r\n    this._flipAvailable = false;\r\n  }\r\n\r\n  public getCenterX(): number {\r\n    return this._lastX;\r\n  }\r\n\r\n  public getCenterY(): number {\r\n    return this._lastY;\r\n  }\r\n\r\n  public getDeltaX(): number {\r\n    return this._deltaX;\r\n  }\r\n\r\n  public getDeltaY(): number {\r\n    return this._deltaY;\r\n  }\r\n\r\n  public getStartX(): number {\r\n    return this._startX;\r\n  }\r\n\r\n  public getStartY(): number {\r\n    return this._startY;\r\n  }\r\n\r\n  public getScale(): number {\r\n    return this._scale;\r\n  }\r\n\r\n  public getX(): number {\r\n    return this._lastX;\r\n  }\r\n\r\n  public getY(): number {\r\n    return this._lastY;\r\n  }\r\n\r\n  public getX1(): number {\r\n    return this._lastX1;\r\n  }\r\n\r\n  public getY1(): number {\r\n    return this._lastY1;\r\n  }\r\n\r\n  public getX2(): number {\r\n    return this._lastX2;\r\n  }\r\n\r\n  public getY2(): number {\r\n    return this._lastY2;\r\n  }\r\n\r\n  public isSingleTouch(): boolean {\r\n    return this._touchSingle;\r\n  }\r\n\r\n  public isFlickAvailable(): boolean {\r\n    return this._flipAvailable;\r\n  }\r\n\r\n  public disableFlick(): void {\r\n    this._flipAvailable = false;\r\n  }\r\n\r\n  /**\r\n   * タッチ開始時イベント\r\n   * @param deviceX タッチした画面のxの値\r\n   * @param deviceY タッチした画面のyの値\r\n   */\r\n  public touchesBegan(deviceX: number, deviceY: number): void {\r\n    this._lastX = deviceX;\r\n    this._lastY = deviceY;\r\n    this._startX = deviceX;\r\n    this._startY = deviceY;\r\n    this._lastTouchDistance = -1.0;\r\n    this._flipAvailable = true;\r\n    this._touchSingle = true;\r\n  }\r\n\r\n  /**\r\n   * ドラッグ時のイベント\r\n   * @param deviceX タッチした画面のxの値\r\n   * @param deviceY タッチした画面のyの値\r\n   */\r\n  public touchesMoved(deviceX: number, deviceY: number): void {\r\n    this._lastX = deviceX;\r\n    this._lastY = deviceY;\r\n    this._lastTouchDistance = -1.0;\r\n    this._touchSingle = true;\r\n  }\r\n\r\n  /**\r\n   * フリックの距離測定\r\n   * @return フリック距離\r\n   */\r\n  public getFlickDistance(): number {\r\n    return this.calculateDistance(\r\n      this._startX,\r\n      this._startY,\r\n      this._lastX,\r\n      this._lastY\r\n    );\r\n  }\r\n\r\n  /**\r\n   * 点１から点２への距離を求める\r\n   *\r\n   * @param x1 １つ目のタッチした画面のxの値\r\n   * @param y1 １つ目のタッチした画面のyの値\r\n   * @param x2 ２つ目のタッチした画面のxの値\r\n   * @param y2 ２つ目のタッチした画面のyの値\r\n   */\r\n  public calculateDistance(\r\n    x1: number,\r\n    y1: number,\r\n    x2: number,\r\n    y2: number\r\n  ): number {\r\n    return Math.sqrt((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2));\r\n  }\r\n\r\n  /**\r\n   * ２つ目の値から、移動量を求める。\r\n   * 違う方向の場合は移動量０。同じ方向の場合は、絶対値が小さい方の値を参照する。\r\n   *\r\n   * @param v1 １つ目の移動量\r\n   * @param v2 ２つ目の移動量\r\n   *\r\n   * @return 小さい方の移動量\r\n   */\r\n  public calculateMovingAmount(v1: number, v2: number): number {\r\n    if (v1 > 0.0 != v2 > 0.0) {\r\n      return 0.0;\r\n    }\r\n\r\n    const sign: number = v1 > 0.0 ? 1.0 : -1.0;\r\n    const absoluteValue1 = Math.abs(v1);\r\n    const absoluteValue2 = Math.abs(v2);\r\n    return (\r\n      sign * (absoluteValue1 < absoluteValue2 ? absoluteValue1 : absoluteValue2)\r\n    );\r\n  }\r\n\r\n  _startY: number; // タッチを開始した時のxの値\r\n  _startX: number; // タッチを開始した時のyの値\r\n  _lastX: number; // シングルタッチ時のxの値\r\n  _lastY: number; // シングルタッチ時のyの値\r\n  _lastX1: number; // ダブルタッチ時の一つ目のxの値\r\n  _lastY1: number; // ダブルタッチ時の一つ目のyの値\r\n  _lastX2: number; // ダブルタッチ時の二つ目のxの値\r\n  _lastY2: number; // ダブルタッチ時の二つ目のyの値\r\n  _lastTouchDistance: number; // 2本以上でタッチしたときの指の距離\r\n  _deltaX: number; // 前回の値から今回の値へのxの移動距離。\r\n  _deltaY: number; // 前回の値から今回の値へのyの移動距離。\r\n  _scale: number; // このフレームで掛け合わせる拡大率。拡大操作中以外は1。\r\n  _touchSingle: boolean; // シングルタッチ時はtrue\r\n  _flipAvailable: boolean; // フリップが有効かどうか\r\n}\r\n","/*\n * Dexie.js - a minimalistic wrapper for IndexedDB\n * ===============================================\n *\n * By David Fahlander, david.fahlander@gmail.com\n *\n * Version 3.2.2, Wed Apr 27 2022\n *\n * https://dexie.org\n *\n * Apache License Version 2.0, January 2004, http://www.apache.org/licenses/\n */\n \nconst _global = typeof globalThis !== 'undefined' ? globalThis :\n    typeof self !== 'undefined' ? self :\n        typeof window !== 'undefined' ? window :\n            global;\n\nconst keys = Object.keys;\nconst isArray = Array.isArray;\nif (typeof Promise !== 'undefined' && !_global.Promise) {\n    _global.Promise = Promise;\n}\nfunction extend(obj, extension) {\n    if (typeof extension !== 'object')\n        return obj;\n    keys(extension).forEach(function (key) {\n        obj[key] = extension[key];\n    });\n    return obj;\n}\nconst getProto = Object.getPrototypeOf;\nconst _hasOwn = {}.hasOwnProperty;\nfunction hasOwn(obj, prop) {\n    return _hasOwn.call(obj, prop);\n}\nfunction props(proto, extension) {\n    if (typeof extension === 'function')\n        extension = extension(getProto(proto));\n    (typeof Reflect === \"undefined\" ? keys : Reflect.ownKeys)(extension).forEach(key => {\n        setProp(proto, key, extension[key]);\n    });\n}\nconst defineProperty = Object.defineProperty;\nfunction setProp(obj, prop, functionOrGetSet, options) {\n    defineProperty(obj, prop, extend(functionOrGetSet && hasOwn(functionOrGetSet, \"get\") && typeof functionOrGetSet.get === 'function' ?\n        { get: functionOrGetSet.get, set: functionOrGetSet.set, configurable: true } :\n        { value: functionOrGetSet, configurable: true, writable: true }, options));\n}\nfunction derive(Child) {\n    return {\n        from: function (Parent) {\n            Child.prototype = Object.create(Parent.prototype);\n            setProp(Child.prototype, \"constructor\", Child);\n            return {\n                extend: props.bind(null, Child.prototype)\n            };\n        }\n    };\n}\nconst getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nfunction getPropertyDescriptor(obj, prop) {\n    const pd = getOwnPropertyDescriptor(obj, prop);\n    let proto;\n    return pd || (proto = getProto(obj)) && getPropertyDescriptor(proto, prop);\n}\nconst _slice = [].slice;\nfunction slice(args, start, end) {\n    return _slice.call(args, start, end);\n}\nfunction override(origFunc, overridedFactory) {\n    return overridedFactory(origFunc);\n}\nfunction assert(b) {\n    if (!b)\n        throw new Error(\"Assertion Failed\");\n}\nfunction asap$1(fn) {\n    if (_global.setImmediate)\n        setImmediate(fn);\n    else\n        setTimeout(fn, 0);\n}\nfunction arrayToObject(array, extractor) {\n    return array.reduce((result, item, i) => {\n        var nameAndValue = extractor(item, i);\n        if (nameAndValue)\n            result[nameAndValue[0]] = nameAndValue[1];\n        return result;\n    }, {});\n}\nfunction tryCatch(fn, onerror, args) {\n    try {\n        fn.apply(null, args);\n    }\n    catch (ex) {\n        onerror && onerror(ex);\n    }\n}\nfunction getByKeyPath(obj, keyPath) {\n    if (hasOwn(obj, keyPath))\n        return obj[keyPath];\n    if (!keyPath)\n        return obj;\n    if (typeof keyPath !== 'string') {\n        var rv = [];\n        for (var i = 0, l = keyPath.length; i < l; ++i) {\n            var val = getByKeyPath(obj, keyPath[i]);\n            rv.push(val);\n        }\n        return rv;\n    }\n    var period = keyPath.indexOf('.');\n    if (period !== -1) {\n        var innerObj = obj[keyPath.substr(0, period)];\n        return innerObj === undefined ? undefined : getByKeyPath(innerObj, keyPath.substr(period + 1));\n    }\n    return undefined;\n}\nfunction setByKeyPath(obj, keyPath, value) {\n    if (!obj || keyPath === undefined)\n        return;\n    if ('isFrozen' in Object && Object.isFrozen(obj))\n        return;\n    if (typeof keyPath !== 'string' && 'length' in keyPath) {\n        assert(typeof value !== 'string' && 'length' in value);\n        for (var i = 0, l = keyPath.length; i < l; ++i) {\n            setByKeyPath(obj, keyPath[i], value[i]);\n        }\n    }\n    else {\n        var period = keyPath.indexOf('.');\n        if (period !== -1) {\n            var currentKeyPath = keyPath.substr(0, period);\n            var remainingKeyPath = keyPath.substr(period + 1);\n            if (remainingKeyPath === \"\")\n                if (value === undefined) {\n                    if (isArray(obj) && !isNaN(parseInt(currentKeyPath)))\n                        obj.splice(currentKeyPath, 1);\n                    else\n                        delete obj[currentKeyPath];\n                }\n                else\n                    obj[currentKeyPath] = value;\n            else {\n                var innerObj = obj[currentKeyPath];\n                if (!innerObj || !hasOwn(obj, currentKeyPath))\n                    innerObj = (obj[currentKeyPath] = {});\n                setByKeyPath(innerObj, remainingKeyPath, value);\n            }\n        }\n        else {\n            if (value === undefined) {\n                if (isArray(obj) && !isNaN(parseInt(keyPath)))\n                    obj.splice(keyPath, 1);\n                else\n                    delete obj[keyPath];\n            }\n            else\n                obj[keyPath] = value;\n        }\n    }\n}\nfunction delByKeyPath(obj, keyPath) {\n    if (typeof keyPath === 'string')\n        setByKeyPath(obj, keyPath, undefined);\n    else if ('length' in keyPath)\n        [].map.call(keyPath, function (kp) {\n            setByKeyPath(obj, kp, undefined);\n        });\n}\nfunction shallowClone(obj) {\n    var rv = {};\n    for (var m in obj) {\n        if (hasOwn(obj, m))\n            rv[m] = obj[m];\n    }\n    return rv;\n}\nconst concat = [].concat;\nfunction flatten(a) {\n    return concat.apply([], a);\n}\nconst intrinsicTypeNames = \"Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey\"\n    .split(',').concat(flatten([8, 16, 32, 64].map(num => [\"Int\", \"Uint\", \"Float\"].map(t => t + num + \"Array\")))).filter(t => _global[t]);\nconst intrinsicTypes = intrinsicTypeNames.map(t => _global[t]);\narrayToObject(intrinsicTypeNames, x => [x, true]);\nlet circularRefs = null;\nfunction deepClone(any) {\n    circularRefs = typeof WeakMap !== 'undefined' && new WeakMap();\n    const rv = innerDeepClone(any);\n    circularRefs = null;\n    return rv;\n}\nfunction innerDeepClone(any) {\n    if (!any || typeof any !== 'object')\n        return any;\n    let rv = circularRefs && circularRefs.get(any);\n    if (rv)\n        return rv;\n    if (isArray(any)) {\n        rv = [];\n        circularRefs && circularRefs.set(any, rv);\n        for (var i = 0, l = any.length; i < l; ++i) {\n            rv.push(innerDeepClone(any[i]));\n        }\n    }\n    else if (intrinsicTypes.indexOf(any.constructor) >= 0) {\n        rv = any;\n    }\n    else {\n        const proto = getProto(any);\n        rv = proto === Object.prototype ? {} : Object.create(proto);\n        circularRefs && circularRefs.set(any, rv);\n        for (var prop in any) {\n            if (hasOwn(any, prop)) {\n                rv[prop] = innerDeepClone(any[prop]);\n            }\n        }\n    }\n    return rv;\n}\nconst { toString } = {};\nfunction toStringTag(o) {\n    return toString.call(o).slice(8, -1);\n}\nconst iteratorSymbol = typeof Symbol !== 'undefined' ?\n    Symbol.iterator :\n    '@@iterator';\nconst getIteratorOf = typeof iteratorSymbol === \"symbol\" ? function (x) {\n    var i;\n    return x != null && (i = x[iteratorSymbol]) && i.apply(x);\n} : function () { return null; };\nconst NO_CHAR_ARRAY = {};\nfunction getArrayOf(arrayLike) {\n    var i, a, x, it;\n    if (arguments.length === 1) {\n        if (isArray(arrayLike))\n            return arrayLike.slice();\n        if (this === NO_CHAR_ARRAY && typeof arrayLike === 'string')\n            return [arrayLike];\n        if ((it = getIteratorOf(arrayLike))) {\n            a = [];\n            while ((x = it.next()), !x.done)\n                a.push(x.value);\n            return a;\n        }\n        if (arrayLike == null)\n            return [arrayLike];\n        i = arrayLike.length;\n        if (typeof i === 'number') {\n            a = new Array(i);\n            while (i--)\n                a[i] = arrayLike[i];\n            return a;\n        }\n        return [arrayLike];\n    }\n    i = arguments.length;\n    a = new Array(i);\n    while (i--)\n        a[i] = arguments[i];\n    return a;\n}\nconst isAsyncFunction = typeof Symbol !== 'undefined'\n    ? (fn) => fn[Symbol.toStringTag] === 'AsyncFunction'\n    : () => false;\n\nvar debug = typeof location !== 'undefined' &&\n    /^(http|https):\\/\\/(localhost|127\\.0\\.0\\.1)/.test(location.href);\nfunction setDebug(value, filter) {\n    debug = value;\n    libraryFilter = filter;\n}\nvar libraryFilter = () => true;\nconst NEEDS_THROW_FOR_STACK = !new Error(\"\").stack;\nfunction getErrorWithStack() {\n    if (NEEDS_THROW_FOR_STACK)\n        try {\n            getErrorWithStack.arguments;\n            throw new Error();\n        }\n        catch (e) {\n            return e;\n        }\n    return new Error();\n}\nfunction prettyStack(exception, numIgnoredFrames) {\n    var stack = exception.stack;\n    if (!stack)\n        return \"\";\n    numIgnoredFrames = (numIgnoredFrames || 0);\n    if (stack.indexOf(exception.name) === 0)\n        numIgnoredFrames += (exception.name + exception.message).split('\\n').length;\n    return stack.split('\\n')\n        .slice(numIgnoredFrames)\n        .filter(libraryFilter)\n        .map(frame => \"\\n\" + frame)\n        .join('');\n}\n\nvar dexieErrorNames = [\n    'Modify',\n    'Bulk',\n    'OpenFailed',\n    'VersionChange',\n    'Schema',\n    'Upgrade',\n    'InvalidTable',\n    'MissingAPI',\n    'NoSuchDatabase',\n    'InvalidArgument',\n    'SubTransaction',\n    'Unsupported',\n    'Internal',\n    'DatabaseClosed',\n    'PrematureCommit',\n    'ForeignAwait'\n];\nvar idbDomErrorNames = [\n    'Unknown',\n    'Constraint',\n    'Data',\n    'TransactionInactive',\n    'ReadOnly',\n    'Version',\n    'NotFound',\n    'InvalidState',\n    'InvalidAccess',\n    'Abort',\n    'Timeout',\n    'QuotaExceeded',\n    'Syntax',\n    'DataClone'\n];\nvar errorList = dexieErrorNames.concat(idbDomErrorNames);\nvar defaultTexts = {\n    VersionChanged: \"Database version changed by other database connection\",\n    DatabaseClosed: \"Database has been closed\",\n    Abort: \"Transaction aborted\",\n    TransactionInactive: \"Transaction has already completed or failed\",\n    MissingAPI: \"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb\"\n};\nfunction DexieError(name, msg) {\n    this._e = getErrorWithStack();\n    this.name = name;\n    this.message = msg;\n}\nderive(DexieError).from(Error).extend({\n    stack: {\n        get: function () {\n            return this._stack ||\n                (this._stack = this.name + \": \" + this.message + prettyStack(this._e, 2));\n        }\n    },\n    toString: function () { return this.name + \": \" + this.message; }\n});\nfunction getMultiErrorMessage(msg, failures) {\n    return msg + \". Errors: \" + Object.keys(failures)\n        .map(key => failures[key].toString())\n        .filter((v, i, s) => s.indexOf(v) === i)\n        .join('\\n');\n}\nfunction ModifyError(msg, failures, successCount, failedKeys) {\n    this._e = getErrorWithStack();\n    this.failures = failures;\n    this.failedKeys = failedKeys;\n    this.successCount = successCount;\n    this.message = getMultiErrorMessage(msg, failures);\n}\nderive(ModifyError).from(DexieError);\nfunction BulkError(msg, failures) {\n    this._e = getErrorWithStack();\n    this.name = \"BulkError\";\n    this.failures = Object.keys(failures).map(pos => failures[pos]);\n    this.failuresByPos = failures;\n    this.message = getMultiErrorMessage(msg, failures);\n}\nderive(BulkError).from(DexieError);\nvar errnames = errorList.reduce((obj, name) => (obj[name] = name + \"Error\", obj), {});\nconst BaseException = DexieError;\nvar exceptions = errorList.reduce((obj, name) => {\n    var fullName = name + \"Error\";\n    function DexieError(msgOrInner, inner) {\n        this._e = getErrorWithStack();\n        this.name = fullName;\n        if (!msgOrInner) {\n            this.message = defaultTexts[name] || fullName;\n            this.inner = null;\n        }\n        else if (typeof msgOrInner === 'string') {\n            this.message = `${msgOrInner}${!inner ? '' : '\\n ' + inner}`;\n            this.inner = inner || null;\n        }\n        else if (typeof msgOrInner === 'object') {\n            this.message = `${msgOrInner.name} ${msgOrInner.message}`;\n            this.inner = msgOrInner;\n        }\n    }\n    derive(DexieError).from(BaseException);\n    obj[name] = DexieError;\n    return obj;\n}, {});\nexceptions.Syntax = SyntaxError;\nexceptions.Type = TypeError;\nexceptions.Range = RangeError;\nvar exceptionMap = idbDomErrorNames.reduce((obj, name) => {\n    obj[name + \"Error\"] = exceptions[name];\n    return obj;\n}, {});\nfunction mapError(domError, message) {\n    if (!domError || domError instanceof DexieError || domError instanceof TypeError || domError instanceof SyntaxError || !domError.name || !exceptionMap[domError.name])\n        return domError;\n    var rv = new exceptionMap[domError.name](message || domError.message, domError);\n    if (\"stack\" in domError) {\n        setProp(rv, \"stack\", { get: function () {\n                return this.inner.stack;\n            } });\n    }\n    return rv;\n}\nvar fullNameExceptions = errorList.reduce((obj, name) => {\n    if ([\"Syntax\", \"Type\", \"Range\"].indexOf(name) === -1)\n        obj[name + \"Error\"] = exceptions[name];\n    return obj;\n}, {});\nfullNameExceptions.ModifyError = ModifyError;\nfullNameExceptions.DexieError = DexieError;\nfullNameExceptions.BulkError = BulkError;\n\nfunction nop() { }\nfunction mirror(val) { return val; }\nfunction pureFunctionChain(f1, f2) {\n    if (f1 == null || f1 === mirror)\n        return f2;\n    return function (val) {\n        return f2(f1(val));\n    };\n}\nfunction callBoth(on1, on2) {\n    return function () {\n        on1.apply(this, arguments);\n        on2.apply(this, arguments);\n    };\n}\nfunction hookCreatingChain(f1, f2) {\n    if (f1 === nop)\n        return f2;\n    return function () {\n        var res = f1.apply(this, arguments);\n        if (res !== undefined)\n            arguments[0] = res;\n        var onsuccess = this.onsuccess,\n        onerror = this.onerror;\n        this.onsuccess = null;\n        this.onerror = null;\n        var res2 = f2.apply(this, arguments);\n        if (onsuccess)\n            this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;\n        if (onerror)\n            this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;\n        return res2 !== undefined ? res2 : res;\n    };\n}\nfunction hookDeletingChain(f1, f2) {\n    if (f1 === nop)\n        return f2;\n    return function () {\n        f1.apply(this, arguments);\n        var onsuccess = this.onsuccess,\n        onerror = this.onerror;\n        this.onsuccess = this.onerror = null;\n        f2.apply(this, arguments);\n        if (onsuccess)\n            this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;\n        if (onerror)\n            this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;\n    };\n}\nfunction hookUpdatingChain(f1, f2) {\n    if (f1 === nop)\n        return f2;\n    return function (modifications) {\n        var res = f1.apply(this, arguments);\n        extend(modifications, res);\n        var onsuccess = this.onsuccess,\n        onerror = this.onerror;\n        this.onsuccess = null;\n        this.onerror = null;\n        var res2 = f2.apply(this, arguments);\n        if (onsuccess)\n            this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;\n        if (onerror)\n            this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;\n        return res === undefined ?\n            (res2 === undefined ? undefined : res2) :\n            (extend(res, res2));\n    };\n}\nfunction reverseStoppableEventChain(f1, f2) {\n    if (f1 === nop)\n        return f2;\n    return function () {\n        if (f2.apply(this, arguments) === false)\n            return false;\n        return f1.apply(this, arguments);\n    };\n}\nfunction promisableChain(f1, f2) {\n    if (f1 === nop)\n        return f2;\n    return function () {\n        var res = f1.apply(this, arguments);\n        if (res && typeof res.then === 'function') {\n            var thiz = this, i = arguments.length, args = new Array(i);\n            while (i--)\n                args[i] = arguments[i];\n            return res.then(function () {\n                return f2.apply(thiz, args);\n            });\n        }\n        return f2.apply(this, arguments);\n    };\n}\n\nvar INTERNAL = {};\nconst LONG_STACKS_CLIP_LIMIT = 100,\nMAX_LONG_STACKS = 20, ZONE_ECHO_LIMIT = 100, [resolvedNativePromise, nativePromiseProto, resolvedGlobalPromise] = typeof Promise === 'undefined' ?\n    [] :\n    (() => {\n        let globalP = Promise.resolve();\n        if (typeof crypto === 'undefined' || !crypto.subtle)\n            return [globalP, getProto(globalP), globalP];\n        const nativeP = crypto.subtle.digest(\"SHA-512\", new Uint8Array([0]));\n        return [\n            nativeP,\n            getProto(nativeP),\n            globalP\n        ];\n    })(), nativePromiseThen = nativePromiseProto && nativePromiseProto.then;\nconst NativePromise = resolvedNativePromise && resolvedNativePromise.constructor;\nconst patchGlobalPromise = !!resolvedGlobalPromise;\nvar stack_being_generated = false;\nvar schedulePhysicalTick = resolvedGlobalPromise ?\n    () => { resolvedGlobalPromise.then(physicalTick); }\n    :\n        _global.setImmediate ?\n            setImmediate.bind(null, physicalTick) :\n            _global.MutationObserver ?\n                () => {\n                    var hiddenDiv = document.createElement(\"div\");\n                    (new MutationObserver(() => {\n                        physicalTick();\n                        hiddenDiv = null;\n                    })).observe(hiddenDiv, { attributes: true });\n                    hiddenDiv.setAttribute('i', '1');\n                } :\n                () => { setTimeout(physicalTick, 0); };\nvar asap = function (callback, args) {\n    microtickQueue.push([callback, args]);\n    if (needsNewPhysicalTick) {\n        schedulePhysicalTick();\n        needsNewPhysicalTick = false;\n    }\n};\nvar isOutsideMicroTick = true,\nneedsNewPhysicalTick = true,\nunhandledErrors = [],\nrejectingErrors = [],\ncurrentFulfiller = null, rejectionMapper = mirror;\nvar globalPSD = {\n    id: 'global',\n    global: true,\n    ref: 0,\n    unhandleds: [],\n    onunhandled: globalError,\n    pgp: false,\n    env: {},\n    finalize: function () {\n        this.unhandleds.forEach(uh => {\n            try {\n                globalError(uh[0], uh[1]);\n            }\n            catch (e) { }\n        });\n    }\n};\nvar PSD = globalPSD;\nvar microtickQueue = [];\nvar numScheduledCalls = 0;\nvar tickFinalizers = [];\nfunction DexiePromise(fn) {\n    if (typeof this !== 'object')\n        throw new TypeError('Promises must be constructed via new');\n    this._listeners = [];\n    this.onuncatched = nop;\n    this._lib = false;\n    var psd = (this._PSD = PSD);\n    if (debug) {\n        this._stackHolder = getErrorWithStack();\n        this._prev = null;\n        this._numPrev = 0;\n    }\n    if (typeof fn !== 'function') {\n        if (fn !== INTERNAL)\n            throw new TypeError('Not a function');\n        this._state = arguments[1];\n        this._value = arguments[2];\n        if (this._state === false)\n            handleRejection(this, this._value);\n        return;\n    }\n    this._state = null;\n    this._value = null;\n    ++psd.ref;\n    executePromiseTask(this, fn);\n}\nconst thenProp = {\n    get: function () {\n        var psd = PSD, microTaskId = totalEchoes;\n        function then(onFulfilled, onRejected) {\n            var possibleAwait = !psd.global && (psd !== PSD || microTaskId !== totalEchoes);\n            const cleanup = possibleAwait && !decrementExpectedAwaits();\n            var rv = new DexiePromise((resolve, reject) => {\n                propagateToListener(this, new Listener(nativeAwaitCompatibleWrap(onFulfilled, psd, possibleAwait, cleanup), nativeAwaitCompatibleWrap(onRejected, psd, possibleAwait, cleanup), resolve, reject, psd));\n            });\n            debug && linkToPreviousPromise(rv, this);\n            return rv;\n        }\n        then.prototype = INTERNAL;\n        return then;\n    },\n    set: function (value) {\n        setProp(this, 'then', value && value.prototype === INTERNAL ?\n            thenProp :\n            {\n                get: function () {\n                    return value;\n                },\n                set: thenProp.set\n            });\n    }\n};\nprops(DexiePromise.prototype, {\n    then: thenProp,\n    _then: function (onFulfilled, onRejected) {\n        propagateToListener(this, new Listener(null, null, onFulfilled, onRejected, PSD));\n    },\n    catch: function (onRejected) {\n        if (arguments.length === 1)\n            return this.then(null, onRejected);\n        var type = arguments[0], handler = arguments[1];\n        return typeof type === 'function' ? this.then(null, err =>\n        err instanceof type ? handler(err) : PromiseReject(err))\n            : this.then(null, err =>\n            err && err.name === type ? handler(err) : PromiseReject(err));\n    },\n    finally: function (onFinally) {\n        return this.then(value => {\n            onFinally();\n            return value;\n        }, err => {\n            onFinally();\n            return PromiseReject(err);\n        });\n    },\n    stack: {\n        get: function () {\n            if (this._stack)\n                return this._stack;\n            try {\n                stack_being_generated = true;\n                var stacks = getStack(this, [], MAX_LONG_STACKS);\n                var stack = stacks.join(\"\\nFrom previous: \");\n                if (this._state !== null)\n                    this._stack = stack;\n                return stack;\n            }\n            finally {\n                stack_being_generated = false;\n            }\n        }\n    },\n    timeout: function (ms, msg) {\n        return ms < Infinity ?\n            new DexiePromise((resolve, reject) => {\n                var handle = setTimeout(() => reject(new exceptions.Timeout(msg)), ms);\n                this.then(resolve, reject).finally(clearTimeout.bind(null, handle));\n            }) : this;\n    }\n});\nif (typeof Symbol !== 'undefined' && Symbol.toStringTag)\n    setProp(DexiePromise.prototype, Symbol.toStringTag, 'Dexie.Promise');\nglobalPSD.env = snapShot();\nfunction Listener(onFulfilled, onRejected, resolve, reject, zone) {\n    this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n    this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n    this.resolve = resolve;\n    this.reject = reject;\n    this.psd = zone;\n}\nprops(DexiePromise, {\n    all: function () {\n        var values = getArrayOf.apply(null, arguments)\n            .map(onPossibleParallellAsync);\n        return new DexiePromise(function (resolve, reject) {\n            if (values.length === 0)\n                resolve([]);\n            var remaining = values.length;\n            values.forEach((a, i) => DexiePromise.resolve(a).then(x => {\n                values[i] = x;\n                if (!--remaining)\n                    resolve(values);\n            }, reject));\n        });\n    },\n    resolve: value => {\n        if (value instanceof DexiePromise)\n            return value;\n        if (value && typeof value.then === 'function')\n            return new DexiePromise((resolve, reject) => {\n                value.then(resolve, reject);\n            });\n        var rv = new DexiePromise(INTERNAL, true, value);\n        linkToPreviousPromise(rv, currentFulfiller);\n        return rv;\n    },\n    reject: PromiseReject,\n    race: function () {\n        var values = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);\n        return new DexiePromise((resolve, reject) => {\n            values.map(value => DexiePromise.resolve(value).then(resolve, reject));\n        });\n    },\n    PSD: {\n        get: () => PSD,\n        set: value => PSD = value\n    },\n    totalEchoes: { get: () => totalEchoes },\n    newPSD: newScope,\n    usePSD: usePSD,\n    scheduler: {\n        get: () => asap,\n        set: value => { asap = value; }\n    },\n    rejectionMapper: {\n        get: () => rejectionMapper,\n        set: value => { rejectionMapper = value; }\n    },\n    follow: (fn, zoneProps) => {\n        return new DexiePromise((resolve, reject) => {\n            return newScope((resolve, reject) => {\n                var psd = PSD;\n                psd.unhandleds = [];\n                psd.onunhandled = reject;\n                psd.finalize = callBoth(function () {\n                    run_at_end_of_this_or_next_physical_tick(() => {\n                        this.unhandleds.length === 0 ? resolve() : reject(this.unhandleds[0]);\n                    });\n                }, psd.finalize);\n                fn();\n            }, zoneProps, resolve, reject);\n        });\n    }\n});\nif (NativePromise) {\n    if (NativePromise.allSettled)\n        setProp(DexiePromise, \"allSettled\", function () {\n            const possiblePromises = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);\n            return new DexiePromise(resolve => {\n                if (possiblePromises.length === 0)\n                    resolve([]);\n                let remaining = possiblePromises.length;\n                const results = new Array(remaining);\n                possiblePromises.forEach((p, i) => DexiePromise.resolve(p).then(value => results[i] = { status: \"fulfilled\", value }, reason => results[i] = { status: \"rejected\", reason })\n                    .then(() => --remaining || resolve(results)));\n            });\n        });\n    if (NativePromise.any && typeof AggregateError !== 'undefined')\n        setProp(DexiePromise, \"any\", function () {\n            const possiblePromises = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);\n            return new DexiePromise((resolve, reject) => {\n                if (possiblePromises.length === 0)\n                    reject(new AggregateError([]));\n                let remaining = possiblePromises.length;\n                const failures = new Array(remaining);\n                possiblePromises.forEach((p, i) => DexiePromise.resolve(p).then(value => resolve(value), failure => {\n                    failures[i] = failure;\n                    if (!--remaining)\n                        reject(new AggregateError(failures));\n                }));\n            });\n        });\n}\nfunction executePromiseTask(promise, fn) {\n    try {\n        fn(value => {\n            if (promise._state !== null)\n                return;\n            if (value === promise)\n                throw new TypeError('A promise cannot be resolved with itself.');\n            var shouldExecuteTick = promise._lib && beginMicroTickScope();\n            if (value && typeof value.then === 'function') {\n                executePromiseTask(promise, (resolve, reject) => {\n                    value instanceof DexiePromise ?\n                        value._then(resolve, reject) :\n                        value.then(resolve, reject);\n                });\n            }\n            else {\n                promise._state = true;\n                promise._value = value;\n                propagateAllListeners(promise);\n            }\n            if (shouldExecuteTick)\n                endMicroTickScope();\n        }, handleRejection.bind(null, promise));\n    }\n    catch (ex) {\n        handleRejection(promise, ex);\n    }\n}\nfunction handleRejection(promise, reason) {\n    rejectingErrors.push(reason);\n    if (promise._state !== null)\n        return;\n    var shouldExecuteTick = promise._lib && beginMicroTickScope();\n    reason = rejectionMapper(reason);\n    promise._state = false;\n    promise._value = reason;\n    debug && reason !== null && typeof reason === 'object' && !reason._promise && tryCatch(() => {\n        var origProp = getPropertyDescriptor(reason, \"stack\");\n        reason._promise = promise;\n        setProp(reason, \"stack\", {\n            get: () => stack_being_generated ?\n                origProp && (origProp.get ?\n                    origProp.get.apply(reason) :\n                    origProp.value) :\n                promise.stack\n        });\n    });\n    addPossiblyUnhandledError(promise);\n    propagateAllListeners(promise);\n    if (shouldExecuteTick)\n        endMicroTickScope();\n}\nfunction propagateAllListeners(promise) {\n    var listeners = promise._listeners;\n    promise._listeners = [];\n    for (var i = 0, len = listeners.length; i < len; ++i) {\n        propagateToListener(promise, listeners[i]);\n    }\n    var psd = promise._PSD;\n    --psd.ref || psd.finalize();\n    if (numScheduledCalls === 0) {\n        ++numScheduledCalls;\n        asap(() => {\n            if (--numScheduledCalls === 0)\n                finalizePhysicalTick();\n        }, []);\n    }\n}\nfunction propagateToListener(promise, listener) {\n    if (promise._state === null) {\n        promise._listeners.push(listener);\n        return;\n    }\n    var cb = promise._state ? listener.onFulfilled : listener.onRejected;\n    if (cb === null) {\n        return (promise._state ? listener.resolve : listener.reject)(promise._value);\n    }\n    ++listener.psd.ref;\n    ++numScheduledCalls;\n    asap(callListener, [cb, promise, listener]);\n}\nfunction callListener(cb, promise, listener) {\n    try {\n        currentFulfiller = promise;\n        var ret, value = promise._value;\n        if (promise._state) {\n            ret = cb(value);\n        }\n        else {\n            if (rejectingErrors.length)\n                rejectingErrors = [];\n            ret = cb(value);\n            if (rejectingErrors.indexOf(value) === -1)\n                markErrorAsHandled(promise);\n        }\n        listener.resolve(ret);\n    }\n    catch (e) {\n        listener.reject(e);\n    }\n    finally {\n        currentFulfiller = null;\n        if (--numScheduledCalls === 0)\n            finalizePhysicalTick();\n        --listener.psd.ref || listener.psd.finalize();\n    }\n}\nfunction getStack(promise, stacks, limit) {\n    if (stacks.length === limit)\n        return stacks;\n    var stack = \"\";\n    if (promise._state === false) {\n        var failure = promise._value, errorName, message;\n        if (failure != null) {\n            errorName = failure.name || \"Error\";\n            message = failure.message || failure;\n            stack = prettyStack(failure, 0);\n        }\n        else {\n            errorName = failure;\n            message = \"\";\n        }\n        stacks.push(errorName + (message ? \": \" + message : \"\") + stack);\n    }\n    if (debug) {\n        stack = prettyStack(promise._stackHolder, 2);\n        if (stack && stacks.indexOf(stack) === -1)\n            stacks.push(stack);\n        if (promise._prev)\n            getStack(promise._prev, stacks, limit);\n    }\n    return stacks;\n}\nfunction linkToPreviousPromise(promise, prev) {\n    var numPrev = prev ? prev._numPrev + 1 : 0;\n    if (numPrev < LONG_STACKS_CLIP_LIMIT) {\n        promise._prev = prev;\n        promise._numPrev = numPrev;\n    }\n}\nfunction physicalTick() {\n    beginMicroTickScope() && endMicroTickScope();\n}\nfunction beginMicroTickScope() {\n    var wasRootExec = isOutsideMicroTick;\n    isOutsideMicroTick = false;\n    needsNewPhysicalTick = false;\n    return wasRootExec;\n}\nfunction endMicroTickScope() {\n    var callbacks, i, l;\n    do {\n        while (microtickQueue.length > 0) {\n            callbacks = microtickQueue;\n            microtickQueue = [];\n            l = callbacks.length;\n            for (i = 0; i < l; ++i) {\n                var item = callbacks[i];\n                item[0].apply(null, item[1]);\n            }\n        }\n    } while (microtickQueue.length > 0);\n    isOutsideMicroTick = true;\n    needsNewPhysicalTick = true;\n}\nfunction finalizePhysicalTick() {\n    var unhandledErrs = unhandledErrors;\n    unhandledErrors = [];\n    unhandledErrs.forEach(p => {\n        p._PSD.onunhandled.call(null, p._value, p);\n    });\n    var finalizers = tickFinalizers.slice(0);\n    var i = finalizers.length;\n    while (i)\n        finalizers[--i]();\n}\nfunction run_at_end_of_this_or_next_physical_tick(fn) {\n    function finalizer() {\n        fn();\n        tickFinalizers.splice(tickFinalizers.indexOf(finalizer), 1);\n    }\n    tickFinalizers.push(finalizer);\n    ++numScheduledCalls;\n    asap(() => {\n        if (--numScheduledCalls === 0)\n            finalizePhysicalTick();\n    }, []);\n}\nfunction addPossiblyUnhandledError(promise) {\n    if (!unhandledErrors.some(p => p._value === promise._value))\n        unhandledErrors.push(promise);\n}\nfunction markErrorAsHandled(promise) {\n    var i = unhandledErrors.length;\n    while (i)\n        if (unhandledErrors[--i]._value === promise._value) {\n            unhandledErrors.splice(i, 1);\n            return;\n        }\n}\nfunction PromiseReject(reason) {\n    return new DexiePromise(INTERNAL, false, reason);\n}\nfunction wrap(fn, errorCatcher) {\n    var psd = PSD;\n    return function () {\n        var wasRootExec = beginMicroTickScope(), outerScope = PSD;\n        try {\n            switchToZone(psd, true);\n            return fn.apply(this, arguments);\n        }\n        catch (e) {\n            errorCatcher && errorCatcher(e);\n        }\n        finally {\n            switchToZone(outerScope, false);\n            if (wasRootExec)\n                endMicroTickScope();\n        }\n    };\n}\nconst task = { awaits: 0, echoes: 0, id: 0 };\nvar taskCounter = 0;\nvar zoneStack = [];\nvar zoneEchoes = 0;\nvar totalEchoes = 0;\nvar zone_id_counter = 0;\nfunction newScope(fn, props, a1, a2) {\n    var parent = PSD, psd = Object.create(parent);\n    psd.parent = parent;\n    psd.ref = 0;\n    psd.global = false;\n    psd.id = ++zone_id_counter;\n    var globalEnv = globalPSD.env;\n    psd.env = patchGlobalPromise ? {\n        Promise: DexiePromise,\n        PromiseProp: { value: DexiePromise, configurable: true, writable: true },\n        all: DexiePromise.all,\n        race: DexiePromise.race,\n        allSettled: DexiePromise.allSettled,\n        any: DexiePromise.any,\n        resolve: DexiePromise.resolve,\n        reject: DexiePromise.reject,\n        nthen: getPatchedPromiseThen(globalEnv.nthen, psd),\n        gthen: getPatchedPromiseThen(globalEnv.gthen, psd)\n    } : {};\n    if (props)\n        extend(psd, props);\n    ++parent.ref;\n    psd.finalize = function () {\n        --this.parent.ref || this.parent.finalize();\n    };\n    var rv = usePSD(psd, fn, a1, a2);\n    if (psd.ref === 0)\n        psd.finalize();\n    return rv;\n}\nfunction incrementExpectedAwaits() {\n    if (!task.id)\n        task.id = ++taskCounter;\n    ++task.awaits;\n    task.echoes += ZONE_ECHO_LIMIT;\n    return task.id;\n}\nfunction decrementExpectedAwaits() {\n    if (!task.awaits)\n        return false;\n    if (--task.awaits === 0)\n        task.id = 0;\n    task.echoes = task.awaits * ZONE_ECHO_LIMIT;\n    return true;\n}\nif (('' + nativePromiseThen).indexOf('[native code]') === -1) {\n    incrementExpectedAwaits = decrementExpectedAwaits = nop;\n}\nfunction onPossibleParallellAsync(possiblePromise) {\n    if (task.echoes && possiblePromise && possiblePromise.constructor === NativePromise) {\n        incrementExpectedAwaits();\n        return possiblePromise.then(x => {\n            decrementExpectedAwaits();\n            return x;\n        }, e => {\n            decrementExpectedAwaits();\n            return rejection(e);\n        });\n    }\n    return possiblePromise;\n}\nfunction zoneEnterEcho(targetZone) {\n    ++totalEchoes;\n    if (!task.echoes || --task.echoes === 0) {\n        task.echoes = task.id = 0;\n    }\n    zoneStack.push(PSD);\n    switchToZone(targetZone, true);\n}\nfunction zoneLeaveEcho() {\n    var zone = zoneStack[zoneStack.length - 1];\n    zoneStack.pop();\n    switchToZone(zone, false);\n}\nfunction switchToZone(targetZone, bEnteringZone) {\n    var currentZone = PSD;\n    if (bEnteringZone ? task.echoes && (!zoneEchoes++ || targetZone !== PSD) : zoneEchoes && (!--zoneEchoes || targetZone !== PSD)) {\n        enqueueNativeMicroTask(bEnteringZone ? zoneEnterEcho.bind(null, targetZone) : zoneLeaveEcho);\n    }\n    if (targetZone === PSD)\n        return;\n    PSD = targetZone;\n    if (currentZone === globalPSD)\n        globalPSD.env = snapShot();\n    if (patchGlobalPromise) {\n        var GlobalPromise = globalPSD.env.Promise;\n        var targetEnv = targetZone.env;\n        nativePromiseProto.then = targetEnv.nthen;\n        GlobalPromise.prototype.then = targetEnv.gthen;\n        if (currentZone.global || targetZone.global) {\n            Object.defineProperty(_global, 'Promise', targetEnv.PromiseProp);\n            GlobalPromise.all = targetEnv.all;\n            GlobalPromise.race = targetEnv.race;\n            GlobalPromise.resolve = targetEnv.resolve;\n            GlobalPromise.reject = targetEnv.reject;\n            if (targetEnv.allSettled)\n                GlobalPromise.allSettled = targetEnv.allSettled;\n            if (targetEnv.any)\n                GlobalPromise.any = targetEnv.any;\n        }\n    }\n}\nfunction snapShot() {\n    var GlobalPromise = _global.Promise;\n    return patchGlobalPromise ? {\n        Promise: GlobalPromise,\n        PromiseProp: Object.getOwnPropertyDescriptor(_global, \"Promise\"),\n        all: GlobalPromise.all,\n        race: GlobalPromise.race,\n        allSettled: GlobalPromise.allSettled,\n        any: GlobalPromise.any,\n        resolve: GlobalPromise.resolve,\n        reject: GlobalPromise.reject,\n        nthen: nativePromiseProto.then,\n        gthen: GlobalPromise.prototype.then\n    } : {};\n}\nfunction usePSD(psd, fn, a1, a2, a3) {\n    var outerScope = PSD;\n    try {\n        switchToZone(psd, true);\n        return fn(a1, a2, a3);\n    }\n    finally {\n        switchToZone(outerScope, false);\n    }\n}\nfunction enqueueNativeMicroTask(job) {\n    nativePromiseThen.call(resolvedNativePromise, job);\n}\nfunction nativeAwaitCompatibleWrap(fn, zone, possibleAwait, cleanup) {\n    return typeof fn !== 'function' ? fn : function () {\n        var outerZone = PSD;\n        if (possibleAwait)\n            incrementExpectedAwaits();\n        switchToZone(zone, true);\n        try {\n            return fn.apply(this, arguments);\n        }\n        finally {\n            switchToZone(outerZone, false);\n            if (cleanup)\n                enqueueNativeMicroTask(decrementExpectedAwaits);\n        }\n    };\n}\nfunction getPatchedPromiseThen(origThen, zone) {\n    return function (onResolved, onRejected) {\n        return origThen.call(this, nativeAwaitCompatibleWrap(onResolved, zone), nativeAwaitCompatibleWrap(onRejected, zone));\n    };\n}\nconst UNHANDLEDREJECTION = \"unhandledrejection\";\nfunction globalError(err, promise) {\n    var rv;\n    try {\n        rv = promise.onuncatched(err);\n    }\n    catch (e) { }\n    if (rv !== false)\n        try {\n            var event, eventData = { promise: promise, reason: err };\n            if (_global.document && document.createEvent) {\n                event = document.createEvent('Event');\n                event.initEvent(UNHANDLEDREJECTION, true, true);\n                extend(event, eventData);\n            }\n            else if (_global.CustomEvent) {\n                event = new CustomEvent(UNHANDLEDREJECTION, { detail: eventData });\n                extend(event, eventData);\n            }\n            if (event && _global.dispatchEvent) {\n                dispatchEvent(event);\n                if (!_global.PromiseRejectionEvent && _global.onunhandledrejection)\n                    try {\n                        _global.onunhandledrejection(event);\n                    }\n                    catch (_) { }\n            }\n            if (debug && event && !event.defaultPrevented) {\n                console.warn(`Unhandled rejection: ${err.stack || err}`);\n            }\n        }\n        catch (e) { }\n}\nvar rejection = DexiePromise.reject;\n\nfunction tempTransaction(db, mode, storeNames, fn) {\n    if (!db.idbdb || (!db._state.openComplete && (!PSD.letThrough && !db._vip))) {\n        if (db._state.openComplete) {\n            return rejection(new exceptions.DatabaseClosed(db._state.dbOpenError));\n        }\n        if (!db._state.isBeingOpened) {\n            if (!db._options.autoOpen)\n                return rejection(new exceptions.DatabaseClosed());\n            db.open().catch(nop);\n        }\n        return db._state.dbReadyPromise.then(() => tempTransaction(db, mode, storeNames, fn));\n    }\n    else {\n        var trans = db._createTransaction(mode, storeNames, db._dbSchema);\n        try {\n            trans.create();\n            db._state.PR1398_maxLoop = 3;\n        }\n        catch (ex) {\n            if (ex.name === errnames.InvalidState && db.isOpen() && --db._state.PR1398_maxLoop > 0) {\n                console.warn('Dexie: Need to reopen db');\n                db._close();\n                return db.open().then(() => tempTransaction(db, mode, storeNames, fn));\n            }\n            return rejection(ex);\n        }\n        return trans._promise(mode, (resolve, reject) => {\n            return newScope(() => {\n                PSD.trans = trans;\n                return fn(resolve, reject, trans);\n            });\n        }).then(result => {\n            return trans._completion.then(() => result);\n        });\n    }\n}\n\nconst DEXIE_VERSION = '3.2.2';\nconst maxString = String.fromCharCode(65535);\nconst minKey = -Infinity;\nconst INVALID_KEY_ARGUMENT = \"Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.\";\nconst STRING_EXPECTED = \"String expected.\";\nconst connections = [];\nconst isIEOrEdge = typeof navigator !== 'undefined' && /(MSIE|Trident|Edge)/.test(navigator.userAgent);\nconst hasIEDeleteObjectStoreBug = isIEOrEdge;\nconst hangsOnDeleteLargeKeyRange = isIEOrEdge;\nconst dexieStackFrameFilter = frame => !/(dexie\\.js|dexie\\.min\\.js)/.test(frame);\nconst DBNAMES_DB = '__dbnames';\nconst READONLY = 'readonly';\nconst READWRITE = 'readwrite';\n\nfunction combine(filter1, filter2) {\n    return filter1 ?\n        filter2 ?\n            function () { return filter1.apply(this, arguments) && filter2.apply(this, arguments); } :\n            filter1 :\n        filter2;\n}\n\nconst AnyRange = {\n    type: 3 ,\n    lower: -Infinity,\n    lowerOpen: false,\n    upper: [[]],\n    upperOpen: false\n};\n\nfunction workaroundForUndefinedPrimKey(keyPath) {\n    return typeof keyPath === \"string\" && !/\\./.test(keyPath)\n        ? (obj) => {\n            if (obj[keyPath] === undefined && (keyPath in obj)) {\n                obj = deepClone(obj);\n                delete obj[keyPath];\n            }\n            return obj;\n        }\n        : (obj) => obj;\n}\n\nclass Table {\n    _trans(mode, fn, writeLocked) {\n        const trans = this._tx || PSD.trans;\n        const tableName = this.name;\n        function checkTableInTransaction(resolve, reject, trans) {\n            if (!trans.schema[tableName])\n                throw new exceptions.NotFound(\"Table \" + tableName + \" not part of transaction\");\n            return fn(trans.idbtrans, trans);\n        }\n        const wasRootExec = beginMicroTickScope();\n        try {\n            return trans && trans.db === this.db ?\n                trans === PSD.trans ?\n                    trans._promise(mode, checkTableInTransaction, writeLocked) :\n                    newScope(() => trans._promise(mode, checkTableInTransaction, writeLocked), { trans: trans, transless: PSD.transless || PSD }) :\n                tempTransaction(this.db, mode, [this.name], checkTableInTransaction);\n        }\n        finally {\n            if (wasRootExec)\n                endMicroTickScope();\n        }\n    }\n    get(keyOrCrit, cb) {\n        if (keyOrCrit && keyOrCrit.constructor === Object)\n            return this.where(keyOrCrit).first(cb);\n        return this._trans('readonly', (trans) => {\n            return this.core.get({ trans, key: keyOrCrit })\n                .then(res => this.hook.reading.fire(res));\n        }).then(cb);\n    }\n    where(indexOrCrit) {\n        if (typeof indexOrCrit === 'string')\n            return new this.db.WhereClause(this, indexOrCrit);\n        if (isArray(indexOrCrit))\n            return new this.db.WhereClause(this, `[${indexOrCrit.join('+')}]`);\n        const keyPaths = keys(indexOrCrit);\n        if (keyPaths.length === 1)\n            return this\n                .where(keyPaths[0])\n                .equals(indexOrCrit[keyPaths[0]]);\n        const compoundIndex = this.schema.indexes.concat(this.schema.primKey).filter(ix => ix.compound &&\n            keyPaths.every(keyPath => ix.keyPath.indexOf(keyPath) >= 0) &&\n            ix.keyPath.every(keyPath => keyPaths.indexOf(keyPath) >= 0))[0];\n        if (compoundIndex && this.db._maxKey !== maxString)\n            return this\n                .where(compoundIndex.name)\n                .equals(compoundIndex.keyPath.map(kp => indexOrCrit[kp]));\n        if (!compoundIndex && debug)\n            console.warn(`The query ${JSON.stringify(indexOrCrit)} on ${this.name} would benefit of a ` +\n                `compound index [${keyPaths.join('+')}]`);\n        const { idxByName } = this.schema;\n        const idb = this.db._deps.indexedDB;\n        function equals(a, b) {\n            try {\n                return idb.cmp(a, b) === 0;\n            }\n            catch (e) {\n                return false;\n            }\n        }\n        const [idx, filterFunction] = keyPaths.reduce(([prevIndex, prevFilterFn], keyPath) => {\n            const index = idxByName[keyPath];\n            const value = indexOrCrit[keyPath];\n            return [\n                prevIndex || index,\n                prevIndex || !index ?\n                    combine(prevFilterFn, index && index.multi ?\n                        x => {\n                            const prop = getByKeyPath(x, keyPath);\n                            return isArray(prop) && prop.some(item => equals(value, item));\n                        } : x => equals(value, getByKeyPath(x, keyPath)))\n                    : prevFilterFn\n            ];\n        }, [null, null]);\n        return idx ?\n            this.where(idx.name).equals(indexOrCrit[idx.keyPath])\n                .filter(filterFunction) :\n            compoundIndex ?\n                this.filter(filterFunction) :\n                this.where(keyPaths).equals('');\n    }\n    filter(filterFunction) {\n        return this.toCollection().and(filterFunction);\n    }\n    count(thenShortcut) {\n        return this.toCollection().count(thenShortcut);\n    }\n    offset(offset) {\n        return this.toCollection().offset(offset);\n    }\n    limit(numRows) {\n        return this.toCollection().limit(numRows);\n    }\n    each(callback) {\n        return this.toCollection().each(callback);\n    }\n    toArray(thenShortcut) {\n        return this.toCollection().toArray(thenShortcut);\n    }\n    toCollection() {\n        return new this.db.Collection(new this.db.WhereClause(this));\n    }\n    orderBy(index) {\n        return new this.db.Collection(new this.db.WhereClause(this, isArray(index) ?\n            `[${index.join('+')}]` :\n            index));\n    }\n    reverse() {\n        return this.toCollection().reverse();\n    }\n    mapToClass(constructor) {\n        this.schema.mappedClass = constructor;\n        const readHook = obj => {\n            if (!obj)\n                return obj;\n            const res = Object.create(constructor.prototype);\n            for (var m in obj)\n                if (hasOwn(obj, m))\n                    try {\n                        res[m] = obj[m];\n                    }\n                    catch (_) { }\n            return res;\n        };\n        if (this.schema.readHook) {\n            this.hook.reading.unsubscribe(this.schema.readHook);\n        }\n        this.schema.readHook = readHook;\n        this.hook(\"reading\", readHook);\n        return constructor;\n    }\n    defineClass() {\n        function Class(content) {\n            extend(this, content);\n        }\n        return this.mapToClass(Class);\n    }\n    add(obj, key) {\n        const { auto, keyPath } = this.schema.primKey;\n        let objToAdd = obj;\n        if (keyPath && auto) {\n            objToAdd = workaroundForUndefinedPrimKey(keyPath)(obj);\n        }\n        return this._trans('readwrite', trans => {\n            return this.core.mutate({ trans, type: 'add', keys: key != null ? [key] : null, values: [objToAdd] });\n        }).then(res => res.numFailures ? DexiePromise.reject(res.failures[0]) : res.lastResult)\n            .then(lastResult => {\n            if (keyPath) {\n                try {\n                    setByKeyPath(obj, keyPath, lastResult);\n                }\n                catch (_) { }\n            }\n            return lastResult;\n        });\n    }\n    update(keyOrObject, modifications) {\n        if (typeof keyOrObject === 'object' && !isArray(keyOrObject)) {\n            const key = getByKeyPath(keyOrObject, this.schema.primKey.keyPath);\n            if (key === undefined)\n                return rejection(new exceptions.InvalidArgument(\"Given object does not contain its primary key\"));\n            try {\n                if (typeof modifications !== \"function\") {\n                    keys(modifications).forEach(keyPath => {\n                        setByKeyPath(keyOrObject, keyPath, modifications[keyPath]);\n                    });\n                }\n                else {\n                    modifications(keyOrObject, { value: keyOrObject, primKey: key });\n                }\n            }\n            catch (_a) {\n            }\n            return this.where(\":id\").equals(key).modify(modifications);\n        }\n        else {\n            return this.where(\":id\").equals(keyOrObject).modify(modifications);\n        }\n    }\n    put(obj, key) {\n        const { auto, keyPath } = this.schema.primKey;\n        let objToAdd = obj;\n        if (keyPath && auto) {\n            objToAdd = workaroundForUndefinedPrimKey(keyPath)(obj);\n        }\n        return this._trans('readwrite', trans => this.core.mutate({ trans, type: 'put', values: [objToAdd], keys: key != null ? [key] : null }))\n            .then(res => res.numFailures ? DexiePromise.reject(res.failures[0]) : res.lastResult)\n            .then(lastResult => {\n            if (keyPath) {\n                try {\n                    setByKeyPath(obj, keyPath, lastResult);\n                }\n                catch (_) { }\n            }\n            return lastResult;\n        });\n    }\n    delete(key) {\n        return this._trans('readwrite', trans => this.core.mutate({ trans, type: 'delete', keys: [key] }))\n            .then(res => res.numFailures ? DexiePromise.reject(res.failures[0]) : undefined);\n    }\n    clear() {\n        return this._trans('readwrite', trans => this.core.mutate({ trans, type: 'deleteRange', range: AnyRange }))\n            .then(res => res.numFailures ? DexiePromise.reject(res.failures[0]) : undefined);\n    }\n    bulkGet(keys) {\n        return this._trans('readonly', trans => {\n            return this.core.getMany({\n                keys,\n                trans\n            }).then(result => result.map(res => this.hook.reading.fire(res)));\n        });\n    }\n    bulkAdd(objects, keysOrOptions, options) {\n        const keys = Array.isArray(keysOrOptions) ? keysOrOptions : undefined;\n        options = options || (keys ? undefined : keysOrOptions);\n        const wantResults = options ? options.allKeys : undefined;\n        return this._trans('readwrite', trans => {\n            const { auto, keyPath } = this.schema.primKey;\n            if (keyPath && keys)\n                throw new exceptions.InvalidArgument(\"bulkAdd(): keys argument invalid on tables with inbound keys\");\n            if (keys && keys.length !== objects.length)\n                throw new exceptions.InvalidArgument(\"Arguments objects and keys must have the same length\");\n            const numObjects = objects.length;\n            let objectsToAdd = keyPath && auto ?\n                objects.map(workaroundForUndefinedPrimKey(keyPath)) :\n                objects;\n            return this.core.mutate({ trans, type: 'add', keys: keys, values: objectsToAdd, wantResults })\n                .then(({ numFailures, results, lastResult, failures }) => {\n                const result = wantResults ? results : lastResult;\n                if (numFailures === 0)\n                    return result;\n                throw new BulkError(`${this.name}.bulkAdd(): ${numFailures} of ${numObjects} operations failed`, failures);\n            });\n        });\n    }\n    bulkPut(objects, keysOrOptions, options) {\n        const keys = Array.isArray(keysOrOptions) ? keysOrOptions : undefined;\n        options = options || (keys ? undefined : keysOrOptions);\n        const wantResults = options ? options.allKeys : undefined;\n        return this._trans('readwrite', trans => {\n            const { auto, keyPath } = this.schema.primKey;\n            if (keyPath && keys)\n                throw new exceptions.InvalidArgument(\"bulkPut(): keys argument invalid on tables with inbound keys\");\n            if (keys && keys.length !== objects.length)\n                throw new exceptions.InvalidArgument(\"Arguments objects and keys must have the same length\");\n            const numObjects = objects.length;\n            let objectsToPut = keyPath && auto ?\n                objects.map(workaroundForUndefinedPrimKey(keyPath)) :\n                objects;\n            return this.core.mutate({ trans, type: 'put', keys: keys, values: objectsToPut, wantResults })\n                .then(({ numFailures, results, lastResult, failures }) => {\n                const result = wantResults ? results : lastResult;\n                if (numFailures === 0)\n                    return result;\n                throw new BulkError(`${this.name}.bulkPut(): ${numFailures} of ${numObjects} operations failed`, failures);\n            });\n        });\n    }\n    bulkDelete(keys) {\n        const numKeys = keys.length;\n        return this._trans('readwrite', trans => {\n            return this.core.mutate({ trans, type: 'delete', keys: keys });\n        }).then(({ numFailures, lastResult, failures }) => {\n            if (numFailures === 0)\n                return lastResult;\n            throw new BulkError(`${this.name}.bulkDelete(): ${numFailures} of ${numKeys} operations failed`, failures);\n        });\n    }\n}\n\nfunction Events(ctx) {\n    var evs = {};\n    var rv = function (eventName, subscriber) {\n        if (subscriber) {\n            var i = arguments.length, args = new Array(i - 1);\n            while (--i)\n                args[i - 1] = arguments[i];\n            evs[eventName].subscribe.apply(null, args);\n            return ctx;\n        }\n        else if (typeof (eventName) === 'string') {\n            return evs[eventName];\n        }\n    };\n    rv.addEventType = add;\n    for (var i = 1, l = arguments.length; i < l; ++i) {\n        add(arguments[i]);\n    }\n    return rv;\n    function add(eventName, chainFunction, defaultFunction) {\n        if (typeof eventName === 'object')\n            return addConfiguredEvents(eventName);\n        if (!chainFunction)\n            chainFunction = reverseStoppableEventChain;\n        if (!defaultFunction)\n            defaultFunction = nop;\n        var context = {\n            subscribers: [],\n            fire: defaultFunction,\n            subscribe: function (cb) {\n                if (context.subscribers.indexOf(cb) === -1) {\n                    context.subscribers.push(cb);\n                    context.fire = chainFunction(context.fire, cb);\n                }\n            },\n            unsubscribe: function (cb) {\n                context.subscribers = context.subscribers.filter(function (fn) { return fn !== cb; });\n                context.fire = context.subscribers.reduce(chainFunction, defaultFunction);\n            }\n        };\n        evs[eventName] = rv[eventName] = context;\n        return context;\n    }\n    function addConfiguredEvents(cfg) {\n        keys(cfg).forEach(function (eventName) {\n            var args = cfg[eventName];\n            if (isArray(args)) {\n                add(eventName, cfg[eventName][0], cfg[eventName][1]);\n            }\n            else if (args === 'asap') {\n                var context = add(eventName, mirror, function fire() {\n                    var i = arguments.length, args = new Array(i);\n                    while (i--)\n                        args[i] = arguments[i];\n                    context.subscribers.forEach(function (fn) {\n                        asap$1(function fireEvent() {\n                            fn.apply(null, args);\n                        });\n                    });\n                });\n            }\n            else\n                throw new exceptions.InvalidArgument(\"Invalid event config\");\n        });\n    }\n}\n\nfunction makeClassConstructor(prototype, constructor) {\n    derive(constructor).from({ prototype });\n    return constructor;\n}\n\nfunction createTableConstructor(db) {\n    return makeClassConstructor(Table.prototype, function Table(name, tableSchema, trans) {\n        this.db = db;\n        this._tx = trans;\n        this.name = name;\n        this.schema = tableSchema;\n        this.hook = db._allTables[name] ? db._allTables[name].hook : Events(null, {\n            \"creating\": [hookCreatingChain, nop],\n            \"reading\": [pureFunctionChain, mirror],\n            \"updating\": [hookUpdatingChain, nop],\n            \"deleting\": [hookDeletingChain, nop]\n        });\n    });\n}\n\nfunction isPlainKeyRange(ctx, ignoreLimitFilter) {\n    return !(ctx.filter || ctx.algorithm || ctx.or) &&\n        (ignoreLimitFilter ? ctx.justLimit : !ctx.replayFilter);\n}\nfunction addFilter(ctx, fn) {\n    ctx.filter = combine(ctx.filter, fn);\n}\nfunction addReplayFilter(ctx, factory, isLimitFilter) {\n    var curr = ctx.replayFilter;\n    ctx.replayFilter = curr ? () => combine(curr(), factory()) : factory;\n    ctx.justLimit = isLimitFilter && !curr;\n}\nfunction addMatchFilter(ctx, fn) {\n    ctx.isMatch = combine(ctx.isMatch, fn);\n}\nfunction getIndexOrStore(ctx, coreSchema) {\n    if (ctx.isPrimKey)\n        return coreSchema.primaryKey;\n    const index = coreSchema.getIndexByKeyPath(ctx.index);\n    if (!index)\n        throw new exceptions.Schema(\"KeyPath \" + ctx.index + \" on object store \" + coreSchema.name + \" is not indexed\");\n    return index;\n}\nfunction openCursor(ctx, coreTable, trans) {\n    const index = getIndexOrStore(ctx, coreTable.schema);\n    return coreTable.openCursor({\n        trans,\n        values: !ctx.keysOnly,\n        reverse: ctx.dir === 'prev',\n        unique: !!ctx.unique,\n        query: {\n            index,\n            range: ctx.range\n        }\n    });\n}\nfunction iter(ctx, fn, coreTrans, coreTable) {\n    const filter = ctx.replayFilter ? combine(ctx.filter, ctx.replayFilter()) : ctx.filter;\n    if (!ctx.or) {\n        return iterate(openCursor(ctx, coreTable, coreTrans), combine(ctx.algorithm, filter), fn, !ctx.keysOnly && ctx.valueMapper);\n    }\n    else {\n        const set = {};\n        const union = (item, cursor, advance) => {\n            if (!filter || filter(cursor, advance, result => cursor.stop(result), err => cursor.fail(err))) {\n                var primaryKey = cursor.primaryKey;\n                var key = '' + primaryKey;\n                if (key === '[object ArrayBuffer]')\n                    key = '' + new Uint8Array(primaryKey);\n                if (!hasOwn(set, key)) {\n                    set[key] = true;\n                    fn(item, cursor, advance);\n                }\n            }\n        };\n        return Promise.all([\n            ctx.or._iterate(union, coreTrans),\n            iterate(openCursor(ctx, coreTable, coreTrans), ctx.algorithm, union, !ctx.keysOnly && ctx.valueMapper)\n        ]);\n    }\n}\nfunction iterate(cursorPromise, filter, fn, valueMapper) {\n    var mappedFn = valueMapper ? (x, c, a) => fn(valueMapper(x), c, a) : fn;\n    var wrappedFn = wrap(mappedFn);\n    return cursorPromise.then(cursor => {\n        if (cursor) {\n            return cursor.start(() => {\n                var c = () => cursor.continue();\n                if (!filter || filter(cursor, advancer => c = advancer, val => { cursor.stop(val); c = nop; }, e => { cursor.fail(e); c = nop; }))\n                    wrappedFn(cursor.value, cursor, advancer => c = advancer);\n                c();\n            });\n        }\n    });\n}\n\nfunction cmp(a, b) {\n    try {\n        const ta = type(a);\n        const tb = type(b);\n        if (ta !== tb) {\n            if (ta === 'Array')\n                return 1;\n            if (tb === 'Array')\n                return -1;\n            if (ta === 'binary')\n                return 1;\n            if (tb === 'binary')\n                return -1;\n            if (ta === 'string')\n                return 1;\n            if (tb === 'string')\n                return -1;\n            if (ta === 'Date')\n                return 1;\n            if (tb !== 'Date')\n                return NaN;\n            return -1;\n        }\n        switch (ta) {\n            case 'number':\n            case 'Date':\n            case 'string':\n                return a > b ? 1 : a < b ? -1 : 0;\n            case 'binary': {\n                return compareUint8Arrays(getUint8Array(a), getUint8Array(b));\n            }\n            case 'Array':\n                return compareArrays(a, b);\n        }\n    }\n    catch (_a) { }\n    return NaN;\n}\nfunction compareArrays(a, b) {\n    const al = a.length;\n    const bl = b.length;\n    const l = al < bl ? al : bl;\n    for (let i = 0; i < l; ++i) {\n        const res = cmp(a[i], b[i]);\n        if (res !== 0)\n            return res;\n    }\n    return al === bl ? 0 : al < bl ? -1 : 1;\n}\nfunction compareUint8Arrays(a, b) {\n    const al = a.length;\n    const bl = b.length;\n    const l = al < bl ? al : bl;\n    for (let i = 0; i < l; ++i) {\n        if (a[i] !== b[i])\n            return a[i] < b[i] ? -1 : 1;\n    }\n    return al === bl ? 0 : al < bl ? -1 : 1;\n}\nfunction type(x) {\n    const t = typeof x;\n    if (t !== 'object')\n        return t;\n    if (ArrayBuffer.isView(x))\n        return 'binary';\n    const tsTag = toStringTag(x);\n    return tsTag === 'ArrayBuffer' ? 'binary' : tsTag;\n}\nfunction getUint8Array(a) {\n    if (a instanceof Uint8Array)\n        return a;\n    if (ArrayBuffer.isView(a))\n        return new Uint8Array(a.buffer, a.byteOffset, a.byteLength);\n    return new Uint8Array(a);\n}\n\nclass Collection {\n    _read(fn, cb) {\n        var ctx = this._ctx;\n        return ctx.error ?\n            ctx.table._trans(null, rejection.bind(null, ctx.error)) :\n            ctx.table._trans('readonly', fn).then(cb);\n    }\n    _write(fn) {\n        var ctx = this._ctx;\n        return ctx.error ?\n            ctx.table._trans(null, rejection.bind(null, ctx.error)) :\n            ctx.table._trans('readwrite', fn, \"locked\");\n    }\n    _addAlgorithm(fn) {\n        var ctx = this._ctx;\n        ctx.algorithm = combine(ctx.algorithm, fn);\n    }\n    _iterate(fn, coreTrans) {\n        return iter(this._ctx, fn, coreTrans, this._ctx.table.core);\n    }\n    clone(props) {\n        var rv = Object.create(this.constructor.prototype), ctx = Object.create(this._ctx);\n        if (props)\n            extend(ctx, props);\n        rv._ctx = ctx;\n        return rv;\n    }\n    raw() {\n        this._ctx.valueMapper = null;\n        return this;\n    }\n    each(fn) {\n        var ctx = this._ctx;\n        return this._read(trans => iter(ctx, fn, trans, ctx.table.core));\n    }\n    count(cb) {\n        return this._read(trans => {\n            const ctx = this._ctx;\n            const coreTable = ctx.table.core;\n            if (isPlainKeyRange(ctx, true)) {\n                return coreTable.count({\n                    trans,\n                    query: {\n                        index: getIndexOrStore(ctx, coreTable.schema),\n                        range: ctx.range\n                    }\n                }).then(count => Math.min(count, ctx.limit));\n            }\n            else {\n                var count = 0;\n                return iter(ctx, () => { ++count; return false; }, trans, coreTable)\n                    .then(() => count);\n            }\n        }).then(cb);\n    }\n    sortBy(keyPath, cb) {\n        const parts = keyPath.split('.').reverse(), lastPart = parts[0], lastIndex = parts.length - 1;\n        function getval(obj, i) {\n            if (i)\n                return getval(obj[parts[i]], i - 1);\n            return obj[lastPart];\n        }\n        var order = this._ctx.dir === \"next\" ? 1 : -1;\n        function sorter(a, b) {\n            var aVal = getval(a, lastIndex), bVal = getval(b, lastIndex);\n            return aVal < bVal ? -order : aVal > bVal ? order : 0;\n        }\n        return this.toArray(function (a) {\n            return a.sort(sorter);\n        }).then(cb);\n    }\n    toArray(cb) {\n        return this._read(trans => {\n            var ctx = this._ctx;\n            if (ctx.dir === 'next' && isPlainKeyRange(ctx, true) && ctx.limit > 0) {\n                const { valueMapper } = ctx;\n                const index = getIndexOrStore(ctx, ctx.table.core.schema);\n                return ctx.table.core.query({\n                    trans,\n                    limit: ctx.limit,\n                    values: true,\n                    query: {\n                        index,\n                        range: ctx.range\n                    }\n                }).then(({ result }) => valueMapper ? result.map(valueMapper) : result);\n            }\n            else {\n                const a = [];\n                return iter(ctx, item => a.push(item), trans, ctx.table.core).then(() => a);\n            }\n        }, cb);\n    }\n    offset(offset) {\n        var ctx = this._ctx;\n        if (offset <= 0)\n            return this;\n        ctx.offset += offset;\n        if (isPlainKeyRange(ctx)) {\n            addReplayFilter(ctx, () => {\n                var offsetLeft = offset;\n                return (cursor, advance) => {\n                    if (offsetLeft === 0)\n                        return true;\n                    if (offsetLeft === 1) {\n                        --offsetLeft;\n                        return false;\n                    }\n                    advance(() => {\n                        cursor.advance(offsetLeft);\n                        offsetLeft = 0;\n                    });\n                    return false;\n                };\n            });\n        }\n        else {\n            addReplayFilter(ctx, () => {\n                var offsetLeft = offset;\n                return () => (--offsetLeft < 0);\n            });\n        }\n        return this;\n    }\n    limit(numRows) {\n        this._ctx.limit = Math.min(this._ctx.limit, numRows);\n        addReplayFilter(this._ctx, () => {\n            var rowsLeft = numRows;\n            return function (cursor, advance, resolve) {\n                if (--rowsLeft <= 0)\n                    advance(resolve);\n                return rowsLeft >= 0;\n            };\n        }, true);\n        return this;\n    }\n    until(filterFunction, bIncludeStopEntry) {\n        addFilter(this._ctx, function (cursor, advance, resolve) {\n            if (filterFunction(cursor.value)) {\n                advance(resolve);\n                return bIncludeStopEntry;\n            }\n            else {\n                return true;\n            }\n        });\n        return this;\n    }\n    first(cb) {\n        return this.limit(1).toArray(function (a) { return a[0]; }).then(cb);\n    }\n    last(cb) {\n        return this.reverse().first(cb);\n    }\n    filter(filterFunction) {\n        addFilter(this._ctx, function (cursor) {\n            return filterFunction(cursor.value);\n        });\n        addMatchFilter(this._ctx, filterFunction);\n        return this;\n    }\n    and(filter) {\n        return this.filter(filter);\n    }\n    or(indexName) {\n        return new this.db.WhereClause(this._ctx.table, indexName, this);\n    }\n    reverse() {\n        this._ctx.dir = (this._ctx.dir === \"prev\" ? \"next\" : \"prev\");\n        if (this._ondirectionchange)\n            this._ondirectionchange(this._ctx.dir);\n        return this;\n    }\n    desc() {\n        return this.reverse();\n    }\n    eachKey(cb) {\n        var ctx = this._ctx;\n        ctx.keysOnly = !ctx.isMatch;\n        return this.each(function (val, cursor) { cb(cursor.key, cursor); });\n    }\n    eachUniqueKey(cb) {\n        this._ctx.unique = \"unique\";\n        return this.eachKey(cb);\n    }\n    eachPrimaryKey(cb) {\n        var ctx = this._ctx;\n        ctx.keysOnly = !ctx.isMatch;\n        return this.each(function (val, cursor) { cb(cursor.primaryKey, cursor); });\n    }\n    keys(cb) {\n        var ctx = this._ctx;\n        ctx.keysOnly = !ctx.isMatch;\n        var a = [];\n        return this.each(function (item, cursor) {\n            a.push(cursor.key);\n        }).then(function () {\n            return a;\n        }).then(cb);\n    }\n    primaryKeys(cb) {\n        var ctx = this._ctx;\n        if (ctx.dir === 'next' && isPlainKeyRange(ctx, true) && ctx.limit > 0) {\n            return this._read(trans => {\n                var index = getIndexOrStore(ctx, ctx.table.core.schema);\n                return ctx.table.core.query({\n                    trans,\n                    values: false,\n                    limit: ctx.limit,\n                    query: {\n                        index,\n                        range: ctx.range\n                    }\n                });\n            }).then(({ result }) => result).then(cb);\n        }\n        ctx.keysOnly = !ctx.isMatch;\n        var a = [];\n        return this.each(function (item, cursor) {\n            a.push(cursor.primaryKey);\n        }).then(function () {\n            return a;\n        }).then(cb);\n    }\n    uniqueKeys(cb) {\n        this._ctx.unique = \"unique\";\n        return this.keys(cb);\n    }\n    firstKey(cb) {\n        return this.limit(1).keys(function (a) { return a[0]; }).then(cb);\n    }\n    lastKey(cb) {\n        return this.reverse().firstKey(cb);\n    }\n    distinct() {\n        var ctx = this._ctx, idx = ctx.index && ctx.table.schema.idxByName[ctx.index];\n        if (!idx || !idx.multi)\n            return this;\n        var set = {};\n        addFilter(this._ctx, function (cursor) {\n            var strKey = cursor.primaryKey.toString();\n            var found = hasOwn(set, strKey);\n            set[strKey] = true;\n            return !found;\n        });\n        return this;\n    }\n    modify(changes) {\n        var ctx = this._ctx;\n        return this._write(trans => {\n            var modifyer;\n            if (typeof changes === 'function') {\n                modifyer = changes;\n            }\n            else {\n                var keyPaths = keys(changes);\n                var numKeys = keyPaths.length;\n                modifyer = function (item) {\n                    var anythingModified = false;\n                    for (var i = 0; i < numKeys; ++i) {\n                        var keyPath = keyPaths[i], val = changes[keyPath];\n                        if (getByKeyPath(item, keyPath) !== val) {\n                            setByKeyPath(item, keyPath, val);\n                            anythingModified = true;\n                        }\n                    }\n                    return anythingModified;\n                };\n            }\n            const coreTable = ctx.table.core;\n            const { outbound, extractKey } = coreTable.schema.primaryKey;\n            const limit = this.db._options.modifyChunkSize || 200;\n            const totalFailures = [];\n            let successCount = 0;\n            const failedKeys = [];\n            const applyMutateResult = (expectedCount, res) => {\n                const { failures, numFailures } = res;\n                successCount += expectedCount - numFailures;\n                for (let pos of keys(failures)) {\n                    totalFailures.push(failures[pos]);\n                }\n            };\n            return this.clone().primaryKeys().then(keys => {\n                const nextChunk = (offset) => {\n                    const count = Math.min(limit, keys.length - offset);\n                    return coreTable.getMany({\n                        trans,\n                        keys: keys.slice(offset, offset + count),\n                        cache: \"immutable\"\n                    }).then(values => {\n                        const addValues = [];\n                        const putValues = [];\n                        const putKeys = outbound ? [] : null;\n                        const deleteKeys = [];\n                        for (let i = 0; i < count; ++i) {\n                            const origValue = values[i];\n                            const ctx = {\n                                value: deepClone(origValue),\n                                primKey: keys[offset + i]\n                            };\n                            if (modifyer.call(ctx, ctx.value, ctx) !== false) {\n                                if (ctx.value == null) {\n                                    deleteKeys.push(keys[offset + i]);\n                                }\n                                else if (!outbound && cmp(extractKey(origValue), extractKey(ctx.value)) !== 0) {\n                                    deleteKeys.push(keys[offset + i]);\n                                    addValues.push(ctx.value);\n                                }\n                                else {\n                                    putValues.push(ctx.value);\n                                    if (outbound)\n                                        putKeys.push(keys[offset + i]);\n                                }\n                            }\n                        }\n                        const criteria = isPlainKeyRange(ctx) &&\n                            ctx.limit === Infinity &&\n                            (typeof changes !== 'function' || changes === deleteCallback) && {\n                            index: ctx.index,\n                            range: ctx.range\n                        };\n                        return Promise.resolve(addValues.length > 0 &&\n                            coreTable.mutate({ trans, type: 'add', values: addValues })\n                                .then(res => {\n                                for (let pos in res.failures) {\n                                    deleteKeys.splice(parseInt(pos), 1);\n                                }\n                                applyMutateResult(addValues.length, res);\n                            })).then(() => (putValues.length > 0 || (criteria && typeof changes === 'object')) &&\n                            coreTable.mutate({\n                                trans,\n                                type: 'put',\n                                keys: putKeys,\n                                values: putValues,\n                                criteria,\n                                changeSpec: typeof changes !== 'function'\n                                    && changes\n                            }).then(res => applyMutateResult(putValues.length, res))).then(() => (deleteKeys.length > 0 || (criteria && changes === deleteCallback)) &&\n                            coreTable.mutate({\n                                trans,\n                                type: 'delete',\n                                keys: deleteKeys,\n                                criteria\n                            }).then(res => applyMutateResult(deleteKeys.length, res))).then(() => {\n                            return keys.length > offset + count && nextChunk(offset + limit);\n                        });\n                    });\n                };\n                return nextChunk(0).then(() => {\n                    if (totalFailures.length > 0)\n                        throw new ModifyError(\"Error modifying one or more objects\", totalFailures, successCount, failedKeys);\n                    return keys.length;\n                });\n            });\n        });\n    }\n    delete() {\n        var ctx = this._ctx, range = ctx.range;\n        if (isPlainKeyRange(ctx) &&\n            ((ctx.isPrimKey && !hangsOnDeleteLargeKeyRange) || range.type === 3 ))\n         {\n            return this._write(trans => {\n                const { primaryKey } = ctx.table.core.schema;\n                const coreRange = range;\n                return ctx.table.core.count({ trans, query: { index: primaryKey, range: coreRange } }).then(count => {\n                    return ctx.table.core.mutate({ trans, type: 'deleteRange', range: coreRange })\n                        .then(({ failures, lastResult, results, numFailures }) => {\n                        if (numFailures)\n                            throw new ModifyError(\"Could not delete some values\", Object.keys(failures).map(pos => failures[pos]), count - numFailures);\n                        return count - numFailures;\n                    });\n                });\n            });\n        }\n        return this.modify(deleteCallback);\n    }\n}\nconst deleteCallback = (value, ctx) => ctx.value = null;\n\nfunction createCollectionConstructor(db) {\n    return makeClassConstructor(Collection.prototype, function Collection(whereClause, keyRangeGenerator) {\n        this.db = db;\n        let keyRange = AnyRange, error = null;\n        if (keyRangeGenerator)\n            try {\n                keyRange = keyRangeGenerator();\n            }\n            catch (ex) {\n                error = ex;\n            }\n        const whereCtx = whereClause._ctx;\n        const table = whereCtx.table;\n        const readingHook = table.hook.reading.fire;\n        this._ctx = {\n            table: table,\n            index: whereCtx.index,\n            isPrimKey: (!whereCtx.index || (table.schema.primKey.keyPath && whereCtx.index === table.schema.primKey.name)),\n            range: keyRange,\n            keysOnly: false,\n            dir: \"next\",\n            unique: \"\",\n            algorithm: null,\n            filter: null,\n            replayFilter: null,\n            justLimit: true,\n            isMatch: null,\n            offset: 0,\n            limit: Infinity,\n            error: error,\n            or: whereCtx.or,\n            valueMapper: readingHook !== mirror ? readingHook : null\n        };\n    });\n}\n\nfunction simpleCompare(a, b) {\n    return a < b ? -1 : a === b ? 0 : 1;\n}\nfunction simpleCompareReverse(a, b) {\n    return a > b ? -1 : a === b ? 0 : 1;\n}\n\nfunction fail(collectionOrWhereClause, err, T) {\n    var collection = collectionOrWhereClause instanceof WhereClause ?\n        new collectionOrWhereClause.Collection(collectionOrWhereClause) :\n        collectionOrWhereClause;\n    collection._ctx.error = T ? new T(err) : new TypeError(err);\n    return collection;\n}\nfunction emptyCollection(whereClause) {\n    return new whereClause.Collection(whereClause, () => rangeEqual(\"\")).limit(0);\n}\nfunction upperFactory(dir) {\n    return dir === \"next\" ?\n        (s) => s.toUpperCase() :\n        (s) => s.toLowerCase();\n}\nfunction lowerFactory(dir) {\n    return dir === \"next\" ?\n        (s) => s.toLowerCase() :\n        (s) => s.toUpperCase();\n}\nfunction nextCasing(key, lowerKey, upperNeedle, lowerNeedle, cmp, dir) {\n    var length = Math.min(key.length, lowerNeedle.length);\n    var llp = -1;\n    for (var i = 0; i < length; ++i) {\n        var lwrKeyChar = lowerKey[i];\n        if (lwrKeyChar !== lowerNeedle[i]) {\n            if (cmp(key[i], upperNeedle[i]) < 0)\n                return key.substr(0, i) + upperNeedle[i] + upperNeedle.substr(i + 1);\n            if (cmp(key[i], lowerNeedle[i]) < 0)\n                return key.substr(0, i) + lowerNeedle[i] + upperNeedle.substr(i + 1);\n            if (llp >= 0)\n                return key.substr(0, llp) + lowerKey[llp] + upperNeedle.substr(llp + 1);\n            return null;\n        }\n        if (cmp(key[i], lwrKeyChar) < 0)\n            llp = i;\n    }\n    if (length < lowerNeedle.length && dir === \"next\")\n        return key + upperNeedle.substr(key.length);\n    if (length < key.length && dir === \"prev\")\n        return key.substr(0, upperNeedle.length);\n    return (llp < 0 ? null : key.substr(0, llp) + lowerNeedle[llp] + upperNeedle.substr(llp + 1));\n}\nfunction addIgnoreCaseAlgorithm(whereClause, match, needles, suffix) {\n    var upper, lower, compare, upperNeedles, lowerNeedles, direction, nextKeySuffix, needlesLen = needles.length;\n    if (!needles.every(s => typeof s === 'string')) {\n        return fail(whereClause, STRING_EXPECTED);\n    }\n    function initDirection(dir) {\n        upper = upperFactory(dir);\n        lower = lowerFactory(dir);\n        compare = (dir === \"next\" ? simpleCompare : simpleCompareReverse);\n        var needleBounds = needles.map(function (needle) {\n            return { lower: lower(needle), upper: upper(needle) };\n        }).sort(function (a, b) {\n            return compare(a.lower, b.lower);\n        });\n        upperNeedles = needleBounds.map(function (nb) { return nb.upper; });\n        lowerNeedles = needleBounds.map(function (nb) { return nb.lower; });\n        direction = dir;\n        nextKeySuffix = (dir === \"next\" ? \"\" : suffix);\n    }\n    initDirection(\"next\");\n    var c = new whereClause.Collection(whereClause, () => createRange(upperNeedles[0], lowerNeedles[needlesLen - 1] + suffix));\n    c._ondirectionchange = function (direction) {\n        initDirection(direction);\n    };\n    var firstPossibleNeedle = 0;\n    c._addAlgorithm(function (cursor, advance, resolve) {\n        var key = cursor.key;\n        if (typeof key !== 'string')\n            return false;\n        var lowerKey = lower(key);\n        if (match(lowerKey, lowerNeedles, firstPossibleNeedle)) {\n            return true;\n        }\n        else {\n            var lowestPossibleCasing = null;\n            for (var i = firstPossibleNeedle; i < needlesLen; ++i) {\n                var casing = nextCasing(key, lowerKey, upperNeedles[i], lowerNeedles[i], compare, direction);\n                if (casing === null && lowestPossibleCasing === null)\n                    firstPossibleNeedle = i + 1;\n                else if (lowestPossibleCasing === null || compare(lowestPossibleCasing, casing) > 0) {\n                    lowestPossibleCasing = casing;\n                }\n            }\n            if (lowestPossibleCasing !== null) {\n                advance(function () { cursor.continue(lowestPossibleCasing + nextKeySuffix); });\n            }\n            else {\n                advance(resolve);\n            }\n            return false;\n        }\n    });\n    return c;\n}\nfunction createRange(lower, upper, lowerOpen, upperOpen) {\n    return {\n        type: 2 ,\n        lower,\n        upper,\n        lowerOpen,\n        upperOpen\n    };\n}\nfunction rangeEqual(value) {\n    return {\n        type: 1 ,\n        lower: value,\n        upper: value\n    };\n}\n\nclass WhereClause {\n    get Collection() {\n        return this._ctx.table.db.Collection;\n    }\n    between(lower, upper, includeLower, includeUpper) {\n        includeLower = includeLower !== false;\n        includeUpper = includeUpper === true;\n        try {\n            if ((this._cmp(lower, upper) > 0) ||\n                (this._cmp(lower, upper) === 0 && (includeLower || includeUpper) && !(includeLower && includeUpper)))\n                return emptyCollection(this);\n            return new this.Collection(this, () => createRange(lower, upper, !includeLower, !includeUpper));\n        }\n        catch (e) {\n            return fail(this, INVALID_KEY_ARGUMENT);\n        }\n    }\n    equals(value) {\n        if (value == null)\n            return fail(this, INVALID_KEY_ARGUMENT);\n        return new this.Collection(this, () => rangeEqual(value));\n    }\n    above(value) {\n        if (value == null)\n            return fail(this, INVALID_KEY_ARGUMENT);\n        return new this.Collection(this, () => createRange(value, undefined, true));\n    }\n    aboveOrEqual(value) {\n        if (value == null)\n            return fail(this, INVALID_KEY_ARGUMENT);\n        return new this.Collection(this, () => createRange(value, undefined, false));\n    }\n    below(value) {\n        if (value == null)\n            return fail(this, INVALID_KEY_ARGUMENT);\n        return new this.Collection(this, () => createRange(undefined, value, false, true));\n    }\n    belowOrEqual(value) {\n        if (value == null)\n            return fail(this, INVALID_KEY_ARGUMENT);\n        return new this.Collection(this, () => createRange(undefined, value));\n    }\n    startsWith(str) {\n        if (typeof str !== 'string')\n            return fail(this, STRING_EXPECTED);\n        return this.between(str, str + maxString, true, true);\n    }\n    startsWithIgnoreCase(str) {\n        if (str === \"\")\n            return this.startsWith(str);\n        return addIgnoreCaseAlgorithm(this, (x, a) => x.indexOf(a[0]) === 0, [str], maxString);\n    }\n    equalsIgnoreCase(str) {\n        return addIgnoreCaseAlgorithm(this, (x, a) => x === a[0], [str], \"\");\n    }\n    anyOfIgnoreCase() {\n        var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n        if (set.length === 0)\n            return emptyCollection(this);\n        return addIgnoreCaseAlgorithm(this, (x, a) => a.indexOf(x) !== -1, set, \"\");\n    }\n    startsWithAnyOfIgnoreCase() {\n        var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n        if (set.length === 0)\n            return emptyCollection(this);\n        return addIgnoreCaseAlgorithm(this, (x, a) => a.some(n => x.indexOf(n) === 0), set, maxString);\n    }\n    anyOf() {\n        const set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n        let compare = this._cmp;\n        try {\n            set.sort(compare);\n        }\n        catch (e) {\n            return fail(this, INVALID_KEY_ARGUMENT);\n        }\n        if (set.length === 0)\n            return emptyCollection(this);\n        const c = new this.Collection(this, () => createRange(set[0], set[set.length - 1]));\n        c._ondirectionchange = direction => {\n            compare = (direction === \"next\" ?\n                this._ascending :\n                this._descending);\n            set.sort(compare);\n        };\n        let i = 0;\n        c._addAlgorithm((cursor, advance, resolve) => {\n            const key = cursor.key;\n            while (compare(key, set[i]) > 0) {\n                ++i;\n                if (i === set.length) {\n                    advance(resolve);\n                    return false;\n                }\n            }\n            if (compare(key, set[i]) === 0) {\n                return true;\n            }\n            else {\n                advance(() => { cursor.continue(set[i]); });\n                return false;\n            }\n        });\n        return c;\n    }\n    notEqual(value) {\n        return this.inAnyRange([[minKey, value], [value, this.db._maxKey]], { includeLowers: false, includeUppers: false });\n    }\n    noneOf() {\n        const set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n        if (set.length === 0)\n            return new this.Collection(this);\n        try {\n            set.sort(this._ascending);\n        }\n        catch (e) {\n            return fail(this, INVALID_KEY_ARGUMENT);\n        }\n        const ranges = set.reduce((res, val) => res ?\n            res.concat([[res[res.length - 1][1], val]]) :\n            [[minKey, val]], null);\n        ranges.push([set[set.length - 1], this.db._maxKey]);\n        return this.inAnyRange(ranges, { includeLowers: false, includeUppers: false });\n    }\n    inAnyRange(ranges, options) {\n        const cmp = this._cmp, ascending = this._ascending, descending = this._descending, min = this._min, max = this._max;\n        if (ranges.length === 0)\n            return emptyCollection(this);\n        if (!ranges.every(range => range[0] !== undefined &&\n            range[1] !== undefined &&\n            ascending(range[0], range[1]) <= 0)) {\n            return fail(this, \"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower\", exceptions.InvalidArgument);\n        }\n        const includeLowers = !options || options.includeLowers !== false;\n        const includeUppers = options && options.includeUppers === true;\n        function addRange(ranges, newRange) {\n            let i = 0, l = ranges.length;\n            for (; i < l; ++i) {\n                const range = ranges[i];\n                if (cmp(newRange[0], range[1]) < 0 && cmp(newRange[1], range[0]) > 0) {\n                    range[0] = min(range[0], newRange[0]);\n                    range[1] = max(range[1], newRange[1]);\n                    break;\n                }\n            }\n            if (i === l)\n                ranges.push(newRange);\n            return ranges;\n        }\n        let sortDirection = ascending;\n        function rangeSorter(a, b) { return sortDirection(a[0], b[0]); }\n        let set;\n        try {\n            set = ranges.reduce(addRange, []);\n            set.sort(rangeSorter);\n        }\n        catch (ex) {\n            return fail(this, INVALID_KEY_ARGUMENT);\n        }\n        let rangePos = 0;\n        const keyIsBeyondCurrentEntry = includeUppers ?\n            key => ascending(key, set[rangePos][1]) > 0 :\n            key => ascending(key, set[rangePos][1]) >= 0;\n        const keyIsBeforeCurrentEntry = includeLowers ?\n            key => descending(key, set[rangePos][0]) > 0 :\n            key => descending(key, set[rangePos][0]) >= 0;\n        function keyWithinCurrentRange(key) {\n            return !keyIsBeyondCurrentEntry(key) && !keyIsBeforeCurrentEntry(key);\n        }\n        let checkKey = keyIsBeyondCurrentEntry;\n        const c = new this.Collection(this, () => createRange(set[0][0], set[set.length - 1][1], !includeLowers, !includeUppers));\n        c._ondirectionchange = direction => {\n            if (direction === \"next\") {\n                checkKey = keyIsBeyondCurrentEntry;\n                sortDirection = ascending;\n            }\n            else {\n                checkKey = keyIsBeforeCurrentEntry;\n                sortDirection = descending;\n            }\n            set.sort(rangeSorter);\n        };\n        c._addAlgorithm((cursor, advance, resolve) => {\n            var key = cursor.key;\n            while (checkKey(key)) {\n                ++rangePos;\n                if (rangePos === set.length) {\n                    advance(resolve);\n                    return false;\n                }\n            }\n            if (keyWithinCurrentRange(key)) {\n                return true;\n            }\n            else if (this._cmp(key, set[rangePos][1]) === 0 || this._cmp(key, set[rangePos][0]) === 0) {\n                return false;\n            }\n            else {\n                advance(() => {\n                    if (sortDirection === ascending)\n                        cursor.continue(set[rangePos][0]);\n                    else\n                        cursor.continue(set[rangePos][1]);\n                });\n                return false;\n            }\n        });\n        return c;\n    }\n    startsWithAnyOf() {\n        const set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n        if (!set.every(s => typeof s === 'string')) {\n            return fail(this, \"startsWithAnyOf() only works with strings\");\n        }\n        if (set.length === 0)\n            return emptyCollection(this);\n        return this.inAnyRange(set.map((str) => [str, str + maxString]));\n    }\n}\n\nfunction createWhereClauseConstructor(db) {\n    return makeClassConstructor(WhereClause.prototype, function WhereClause(table, index, orCollection) {\n        this.db = db;\n        this._ctx = {\n            table: table,\n            index: index === \":id\" ? null : index,\n            or: orCollection\n        };\n        const indexedDB = db._deps.indexedDB;\n        if (!indexedDB)\n            throw new exceptions.MissingAPI();\n        this._cmp = this._ascending = indexedDB.cmp.bind(indexedDB);\n        this._descending = (a, b) => indexedDB.cmp(b, a);\n        this._max = (a, b) => indexedDB.cmp(a, b) > 0 ? a : b;\n        this._min = (a, b) => indexedDB.cmp(a, b) < 0 ? a : b;\n        this._IDBKeyRange = db._deps.IDBKeyRange;\n    });\n}\n\nfunction eventRejectHandler(reject) {\n    return wrap(function (event) {\n        preventDefault(event);\n        reject(event.target.error);\n        return false;\n    });\n}\nfunction preventDefault(event) {\n    if (event.stopPropagation)\n        event.stopPropagation();\n    if (event.preventDefault)\n        event.preventDefault();\n}\n\nconst DEXIE_STORAGE_MUTATED_EVENT_NAME = 'storagemutated';\nconst STORAGE_MUTATED_DOM_EVENT_NAME = 'x-storagemutated-1';\nconst globalEvents = Events(null, DEXIE_STORAGE_MUTATED_EVENT_NAME);\n\nclass Transaction {\n    _lock() {\n        assert(!PSD.global);\n        ++this._reculock;\n        if (this._reculock === 1 && !PSD.global)\n            PSD.lockOwnerFor = this;\n        return this;\n    }\n    _unlock() {\n        assert(!PSD.global);\n        if (--this._reculock === 0) {\n            if (!PSD.global)\n                PSD.lockOwnerFor = null;\n            while (this._blockedFuncs.length > 0 && !this._locked()) {\n                var fnAndPSD = this._blockedFuncs.shift();\n                try {\n                    usePSD(fnAndPSD[1], fnAndPSD[0]);\n                }\n                catch (e) { }\n            }\n        }\n        return this;\n    }\n    _locked() {\n        return this._reculock && PSD.lockOwnerFor !== this;\n    }\n    create(idbtrans) {\n        if (!this.mode)\n            return this;\n        const idbdb = this.db.idbdb;\n        const dbOpenError = this.db._state.dbOpenError;\n        assert(!this.idbtrans);\n        if (!idbtrans && !idbdb) {\n            switch (dbOpenError && dbOpenError.name) {\n                case \"DatabaseClosedError\":\n                    throw new exceptions.DatabaseClosed(dbOpenError);\n                case \"MissingAPIError\":\n                    throw new exceptions.MissingAPI(dbOpenError.message, dbOpenError);\n                default:\n                    throw new exceptions.OpenFailed(dbOpenError);\n            }\n        }\n        if (!this.active)\n            throw new exceptions.TransactionInactive();\n        assert(this._completion._state === null);\n        idbtrans = this.idbtrans = idbtrans ||\n            (this.db.core\n                ? this.db.core.transaction(this.storeNames, this.mode, { durability: this.chromeTransactionDurability })\n                : idbdb.transaction(this.storeNames, this.mode, { durability: this.chromeTransactionDurability }));\n        idbtrans.onerror = wrap(ev => {\n            preventDefault(ev);\n            this._reject(idbtrans.error);\n        });\n        idbtrans.onabort = wrap(ev => {\n            preventDefault(ev);\n            this.active && this._reject(new exceptions.Abort(idbtrans.error));\n            this.active = false;\n            this.on(\"abort\").fire(ev);\n        });\n        idbtrans.oncomplete = wrap(() => {\n            this.active = false;\n            this._resolve();\n            if ('mutatedParts' in idbtrans) {\n                globalEvents.storagemutated.fire(idbtrans[\"mutatedParts\"]);\n            }\n        });\n        return this;\n    }\n    _promise(mode, fn, bWriteLock) {\n        if (mode === 'readwrite' && this.mode !== 'readwrite')\n            return rejection(new exceptions.ReadOnly(\"Transaction is readonly\"));\n        if (!this.active)\n            return rejection(new exceptions.TransactionInactive());\n        if (this._locked()) {\n            return new DexiePromise((resolve, reject) => {\n                this._blockedFuncs.push([() => {\n                        this._promise(mode, fn, bWriteLock).then(resolve, reject);\n                    }, PSD]);\n            });\n        }\n        else if (bWriteLock) {\n            return newScope(() => {\n                var p = new DexiePromise((resolve, reject) => {\n                    this._lock();\n                    const rv = fn(resolve, reject, this);\n                    if (rv && rv.then)\n                        rv.then(resolve, reject);\n                });\n                p.finally(() => this._unlock());\n                p._lib = true;\n                return p;\n            });\n        }\n        else {\n            var p = new DexiePromise((resolve, reject) => {\n                var rv = fn(resolve, reject, this);\n                if (rv && rv.then)\n                    rv.then(resolve, reject);\n            });\n            p._lib = true;\n            return p;\n        }\n    }\n    _root() {\n        return this.parent ? this.parent._root() : this;\n    }\n    waitFor(promiseLike) {\n        var root = this._root();\n        const promise = DexiePromise.resolve(promiseLike);\n        if (root._waitingFor) {\n            root._waitingFor = root._waitingFor.then(() => promise);\n        }\n        else {\n            root._waitingFor = promise;\n            root._waitingQueue = [];\n            var store = root.idbtrans.objectStore(root.storeNames[0]);\n            (function spin() {\n                ++root._spinCount;\n                while (root._waitingQueue.length)\n                    (root._waitingQueue.shift())();\n                if (root._waitingFor)\n                    store.get(-Infinity).onsuccess = spin;\n            }());\n        }\n        var currentWaitPromise = root._waitingFor;\n        return new DexiePromise((resolve, reject) => {\n            promise.then(res => root._waitingQueue.push(wrap(resolve.bind(null, res))), err => root._waitingQueue.push(wrap(reject.bind(null, err)))).finally(() => {\n                if (root._waitingFor === currentWaitPromise) {\n                    root._waitingFor = null;\n                }\n            });\n        });\n    }\n    abort() {\n        if (this.active) {\n            this.active = false;\n            if (this.idbtrans)\n                this.idbtrans.abort();\n            this._reject(new exceptions.Abort());\n        }\n    }\n    table(tableName) {\n        const memoizedTables = (this._memoizedTables || (this._memoizedTables = {}));\n        if (hasOwn(memoizedTables, tableName))\n            return memoizedTables[tableName];\n        const tableSchema = this.schema[tableName];\n        if (!tableSchema) {\n            throw new exceptions.NotFound(\"Table \" + tableName + \" not part of transaction\");\n        }\n        const transactionBoundTable = new this.db.Table(tableName, tableSchema, this);\n        transactionBoundTable.core = this.db.core.table(tableName);\n        memoizedTables[tableName] = transactionBoundTable;\n        return transactionBoundTable;\n    }\n}\n\nfunction createTransactionConstructor(db) {\n    return makeClassConstructor(Transaction.prototype, function Transaction(mode, storeNames, dbschema, chromeTransactionDurability, parent) {\n        this.db = db;\n        this.mode = mode;\n        this.storeNames = storeNames;\n        this.schema = dbschema;\n        this.chromeTransactionDurability = chromeTransactionDurability;\n        this.idbtrans = null;\n        this.on = Events(this, \"complete\", \"error\", \"abort\");\n        this.parent = parent || null;\n        this.active = true;\n        this._reculock = 0;\n        this._blockedFuncs = [];\n        this._resolve = null;\n        this._reject = null;\n        this._waitingFor = null;\n        this._waitingQueue = null;\n        this._spinCount = 0;\n        this._completion = new DexiePromise((resolve, reject) => {\n            this._resolve = resolve;\n            this._reject = reject;\n        });\n        this._completion.then(() => {\n            this.active = false;\n            this.on.complete.fire();\n        }, e => {\n            var wasActive = this.active;\n            this.active = false;\n            this.on.error.fire(e);\n            this.parent ?\n                this.parent._reject(e) :\n                wasActive && this.idbtrans && this.idbtrans.abort();\n            return rejection(e);\n        });\n    });\n}\n\nfunction createIndexSpec(name, keyPath, unique, multi, auto, compound, isPrimKey) {\n    return {\n        name,\n        keyPath,\n        unique,\n        multi,\n        auto,\n        compound,\n        src: (unique && !isPrimKey ? '&' : '') + (multi ? '*' : '') + (auto ? \"++\" : \"\") + nameFromKeyPath(keyPath)\n    };\n}\nfunction nameFromKeyPath(keyPath) {\n    return typeof keyPath === 'string' ?\n        keyPath :\n        keyPath ? ('[' + [].join.call(keyPath, '+') + ']') : \"\";\n}\n\nfunction createTableSchema(name, primKey, indexes) {\n    return {\n        name,\n        primKey,\n        indexes,\n        mappedClass: null,\n        idxByName: arrayToObject(indexes, index => [index.name, index])\n    };\n}\n\nfunction safariMultiStoreFix(storeNames) {\n    return storeNames.length === 1 ? storeNames[0] : storeNames;\n}\nlet getMaxKey = (IdbKeyRange) => {\n    try {\n        IdbKeyRange.only([[]]);\n        getMaxKey = () => [[]];\n        return [[]];\n    }\n    catch (e) {\n        getMaxKey = () => maxString;\n        return maxString;\n    }\n};\n\nfunction getKeyExtractor(keyPath) {\n    if (keyPath == null) {\n        return () => undefined;\n    }\n    else if (typeof keyPath === 'string') {\n        return getSinglePathKeyExtractor(keyPath);\n    }\n    else {\n        return obj => getByKeyPath(obj, keyPath);\n    }\n}\nfunction getSinglePathKeyExtractor(keyPath) {\n    const split = keyPath.split('.');\n    if (split.length === 1) {\n        return obj => obj[keyPath];\n    }\n    else {\n        return obj => getByKeyPath(obj, keyPath);\n    }\n}\n\nfunction arrayify(arrayLike) {\n    return [].slice.call(arrayLike);\n}\nlet _id_counter = 0;\nfunction getKeyPathAlias(keyPath) {\n    return keyPath == null ?\n        \":id\" :\n        typeof keyPath === 'string' ?\n            keyPath :\n            `[${keyPath.join('+')}]`;\n}\nfunction createDBCore(db, IdbKeyRange, tmpTrans) {\n    function extractSchema(db, trans) {\n        const tables = arrayify(db.objectStoreNames);\n        return {\n            schema: {\n                name: db.name,\n                tables: tables.map(table => trans.objectStore(table)).map(store => {\n                    const { keyPath, autoIncrement } = store;\n                    const compound = isArray(keyPath);\n                    const outbound = keyPath == null;\n                    const indexByKeyPath = {};\n                    const result = {\n                        name: store.name,\n                        primaryKey: {\n                            name: null,\n                            isPrimaryKey: true,\n                            outbound,\n                            compound,\n                            keyPath,\n                            autoIncrement,\n                            unique: true,\n                            extractKey: getKeyExtractor(keyPath)\n                        },\n                        indexes: arrayify(store.indexNames).map(indexName => store.index(indexName))\n                            .map(index => {\n                            const { name, unique, multiEntry, keyPath } = index;\n                            const compound = isArray(keyPath);\n                            const result = {\n                                name,\n                                compound,\n                                keyPath,\n                                unique,\n                                multiEntry,\n                                extractKey: getKeyExtractor(keyPath)\n                            };\n                            indexByKeyPath[getKeyPathAlias(keyPath)] = result;\n                            return result;\n                        }),\n                        getIndexByKeyPath: (keyPath) => indexByKeyPath[getKeyPathAlias(keyPath)]\n                    };\n                    indexByKeyPath[\":id\"] = result.primaryKey;\n                    if (keyPath != null) {\n                        indexByKeyPath[getKeyPathAlias(keyPath)] = result.primaryKey;\n                    }\n                    return result;\n                })\n            },\n            hasGetAll: tables.length > 0 && ('getAll' in trans.objectStore(tables[0])) &&\n                !(typeof navigator !== 'undefined' && /Safari/.test(navigator.userAgent) &&\n                    !/(Chrome\\/|Edge\\/)/.test(navigator.userAgent) &&\n                    [].concat(navigator.userAgent.match(/Safari\\/(\\d*)/))[1] < 604)\n        };\n    }\n    function makeIDBKeyRange(range) {\n        if (range.type === 3 )\n            return null;\n        if (range.type === 4 )\n            throw new Error(\"Cannot convert never type to IDBKeyRange\");\n        const { lower, upper, lowerOpen, upperOpen } = range;\n        const idbRange = lower === undefined ?\n            upper === undefined ?\n                null :\n                IdbKeyRange.upperBound(upper, !!upperOpen) :\n            upper === undefined ?\n                IdbKeyRange.lowerBound(lower, !!lowerOpen) :\n                IdbKeyRange.bound(lower, upper, !!lowerOpen, !!upperOpen);\n        return idbRange;\n    }\n    function createDbCoreTable(tableSchema) {\n        const tableName = tableSchema.name;\n        function mutate({ trans, type, keys, values, range }) {\n            return new Promise((resolve, reject) => {\n                resolve = wrap(resolve);\n                const store = trans.objectStore(tableName);\n                const outbound = store.keyPath == null;\n                const isAddOrPut = type === \"put\" || type === \"add\";\n                if (!isAddOrPut && type !== 'delete' && type !== 'deleteRange')\n                    throw new Error(\"Invalid operation type: \" + type);\n                const { length } = keys || values || { length: 1 };\n                if (keys && values && keys.length !== values.length) {\n                    throw new Error(\"Given keys array must have same length as given values array.\");\n                }\n                if (length === 0)\n                    return resolve({ numFailures: 0, failures: {}, results: [], lastResult: undefined });\n                let req;\n                const reqs = [];\n                const failures = [];\n                let numFailures = 0;\n                const errorHandler = event => {\n                    ++numFailures;\n                    preventDefault(event);\n                };\n                if (type === 'deleteRange') {\n                    if (range.type === 4 )\n                        return resolve({ numFailures, failures, results: [], lastResult: undefined });\n                    if (range.type === 3 )\n                        reqs.push(req = store.clear());\n                    else\n                        reqs.push(req = store.delete(makeIDBKeyRange(range)));\n                }\n                else {\n                    const [args1, args2] = isAddOrPut ?\n                        outbound ?\n                            [values, keys] :\n                            [values, null] :\n                        [keys, null];\n                    if (isAddOrPut) {\n                        for (let i = 0; i < length; ++i) {\n                            reqs.push(req = (args2 && args2[i] !== undefined ?\n                                store[type](args1[i], args2[i]) :\n                                store[type](args1[i])));\n                            req.onerror = errorHandler;\n                        }\n                    }\n                    else {\n                        for (let i = 0; i < length; ++i) {\n                            reqs.push(req = store[type](args1[i]));\n                            req.onerror = errorHandler;\n                        }\n                    }\n                }\n                const done = event => {\n                    const lastResult = event.target.result;\n                    reqs.forEach((req, i) => req.error != null && (failures[i] = req.error));\n                    resolve({\n                        numFailures,\n                        failures,\n                        results: type === \"delete\" ? keys : reqs.map(req => req.result),\n                        lastResult\n                    });\n                };\n                req.onerror = event => {\n                    errorHandler(event);\n                    done(event);\n                };\n                req.onsuccess = done;\n            });\n        }\n        function openCursor({ trans, values, query, reverse, unique }) {\n            return new Promise((resolve, reject) => {\n                resolve = wrap(resolve);\n                const { index, range } = query;\n                const store = trans.objectStore(tableName);\n                const source = index.isPrimaryKey ?\n                    store :\n                    store.index(index.name);\n                const direction = reverse ?\n                    unique ?\n                        \"prevunique\" :\n                        \"prev\" :\n                    unique ?\n                        \"nextunique\" :\n                        \"next\";\n                const req = values || !('openKeyCursor' in source) ?\n                    source.openCursor(makeIDBKeyRange(range), direction) :\n                    source.openKeyCursor(makeIDBKeyRange(range), direction);\n                req.onerror = eventRejectHandler(reject);\n                req.onsuccess = wrap(ev => {\n                    const cursor = req.result;\n                    if (!cursor) {\n                        resolve(null);\n                        return;\n                    }\n                    cursor.___id = ++_id_counter;\n                    cursor.done = false;\n                    const _cursorContinue = cursor.continue.bind(cursor);\n                    let _cursorContinuePrimaryKey = cursor.continuePrimaryKey;\n                    if (_cursorContinuePrimaryKey)\n                        _cursorContinuePrimaryKey = _cursorContinuePrimaryKey.bind(cursor);\n                    const _cursorAdvance = cursor.advance.bind(cursor);\n                    const doThrowCursorIsNotStarted = () => { throw new Error(\"Cursor not started\"); };\n                    const doThrowCursorIsStopped = () => { throw new Error(\"Cursor not stopped\"); };\n                    cursor.trans = trans;\n                    cursor.stop = cursor.continue = cursor.continuePrimaryKey = cursor.advance = doThrowCursorIsNotStarted;\n                    cursor.fail = wrap(reject);\n                    cursor.next = function () {\n                        let gotOne = 1;\n                        return this.start(() => gotOne-- ? this.continue() : this.stop()).then(() => this);\n                    };\n                    cursor.start = (callback) => {\n                        const iterationPromise = new Promise((resolveIteration, rejectIteration) => {\n                            resolveIteration = wrap(resolveIteration);\n                            req.onerror = eventRejectHandler(rejectIteration);\n                            cursor.fail = rejectIteration;\n                            cursor.stop = value => {\n                                cursor.stop = cursor.continue = cursor.continuePrimaryKey = cursor.advance = doThrowCursorIsStopped;\n                                resolveIteration(value);\n                            };\n                        });\n                        const guardedCallback = () => {\n                            if (req.result) {\n                                try {\n                                    callback();\n                                }\n                                catch (err) {\n                                    cursor.fail(err);\n                                }\n                            }\n                            else {\n                                cursor.done = true;\n                                cursor.start = () => { throw new Error(\"Cursor behind last entry\"); };\n                                cursor.stop();\n                            }\n                        };\n                        req.onsuccess = wrap(ev => {\n                            req.onsuccess = guardedCallback;\n                            guardedCallback();\n                        });\n                        cursor.continue = _cursorContinue;\n                        cursor.continuePrimaryKey = _cursorContinuePrimaryKey;\n                        cursor.advance = _cursorAdvance;\n                        guardedCallback();\n                        return iterationPromise;\n                    };\n                    resolve(cursor);\n                }, reject);\n            });\n        }\n        function query(hasGetAll) {\n            return (request) => {\n                return new Promise((resolve, reject) => {\n                    resolve = wrap(resolve);\n                    const { trans, values, limit, query } = request;\n                    const nonInfinitLimit = limit === Infinity ? undefined : limit;\n                    const { index, range } = query;\n                    const store = trans.objectStore(tableName);\n                    const source = index.isPrimaryKey ? store : store.index(index.name);\n                    const idbKeyRange = makeIDBKeyRange(range);\n                    if (limit === 0)\n                        return resolve({ result: [] });\n                    if (hasGetAll) {\n                        const req = values ?\n                            source.getAll(idbKeyRange, nonInfinitLimit) :\n                            source.getAllKeys(idbKeyRange, nonInfinitLimit);\n                        req.onsuccess = event => resolve({ result: event.target.result });\n                        req.onerror = eventRejectHandler(reject);\n                    }\n                    else {\n                        let count = 0;\n                        const req = values || !('openKeyCursor' in source) ?\n                            source.openCursor(idbKeyRange) :\n                            source.openKeyCursor(idbKeyRange);\n                        const result = [];\n                        req.onsuccess = event => {\n                            const cursor = req.result;\n                            if (!cursor)\n                                return resolve({ result });\n                            result.push(values ? cursor.value : cursor.primaryKey);\n                            if (++count === limit)\n                                return resolve({ result });\n                            cursor.continue();\n                        };\n                        req.onerror = eventRejectHandler(reject);\n                    }\n                });\n            };\n        }\n        return {\n            name: tableName,\n            schema: tableSchema,\n            mutate,\n            getMany({ trans, keys }) {\n                return new Promise((resolve, reject) => {\n                    resolve = wrap(resolve);\n                    const store = trans.objectStore(tableName);\n                    const length = keys.length;\n                    const result = new Array(length);\n                    let keyCount = 0;\n                    let callbackCount = 0;\n                    let req;\n                    const successHandler = event => {\n                        const req = event.target;\n                        if ((result[req._pos] = req.result) != null)\n                            ;\n                        if (++callbackCount === keyCount)\n                            resolve(result);\n                    };\n                    const errorHandler = eventRejectHandler(reject);\n                    for (let i = 0; i < length; ++i) {\n                        const key = keys[i];\n                        if (key != null) {\n                            req = store.get(keys[i]);\n                            req._pos = i;\n                            req.onsuccess = successHandler;\n                            req.onerror = errorHandler;\n                            ++keyCount;\n                        }\n                    }\n                    if (keyCount === 0)\n                        resolve(result);\n                });\n            },\n            get({ trans, key }) {\n                return new Promise((resolve, reject) => {\n                    resolve = wrap(resolve);\n                    const store = trans.objectStore(tableName);\n                    const req = store.get(key);\n                    req.onsuccess = event => resolve(event.target.result);\n                    req.onerror = eventRejectHandler(reject);\n                });\n            },\n            query: query(hasGetAll),\n            openCursor,\n            count({ query, trans }) {\n                const { index, range } = query;\n                return new Promise((resolve, reject) => {\n                    const store = trans.objectStore(tableName);\n                    const source = index.isPrimaryKey ? store : store.index(index.name);\n                    const idbKeyRange = makeIDBKeyRange(range);\n                    const req = idbKeyRange ? source.count(idbKeyRange) : source.count();\n                    req.onsuccess = wrap(ev => resolve(ev.target.result));\n                    req.onerror = eventRejectHandler(reject);\n                });\n            }\n        };\n    }\n    const { schema, hasGetAll } = extractSchema(db, tmpTrans);\n    const tables = schema.tables.map(tableSchema => createDbCoreTable(tableSchema));\n    const tableMap = {};\n    tables.forEach(table => tableMap[table.name] = table);\n    return {\n        stack: \"dbcore\",\n        transaction: db.transaction.bind(db),\n        table(name) {\n            const result = tableMap[name];\n            if (!result)\n                throw new Error(`Table '${name}' not found`);\n            return tableMap[name];\n        },\n        MIN_KEY: -Infinity,\n        MAX_KEY: getMaxKey(IdbKeyRange),\n        schema\n    };\n}\n\nfunction createMiddlewareStack(stackImpl, middlewares) {\n    return middlewares.reduce((down, { create }) => ({ ...down, ...create(down) }), stackImpl);\n}\nfunction createMiddlewareStacks(middlewares, idbdb, { IDBKeyRange, indexedDB }, tmpTrans) {\n    const dbcore = createMiddlewareStack(createDBCore(idbdb, IDBKeyRange, tmpTrans), middlewares.dbcore);\n    return {\n        dbcore\n    };\n}\nfunction generateMiddlewareStacks({ _novip: db }, tmpTrans) {\n    const idbdb = tmpTrans.db;\n    const stacks = createMiddlewareStacks(db._middlewares, idbdb, db._deps, tmpTrans);\n    db.core = stacks.dbcore;\n    db.tables.forEach(table => {\n        const tableName = table.name;\n        if (db.core.schema.tables.some(tbl => tbl.name === tableName)) {\n            table.core = db.core.table(tableName);\n            if (db[tableName] instanceof db.Table) {\n                db[tableName].core = table.core;\n            }\n        }\n    });\n}\n\nfunction setApiOnPlace({ _novip: db }, objs, tableNames, dbschema) {\n    tableNames.forEach(tableName => {\n        const schema = dbschema[tableName];\n        objs.forEach(obj => {\n            const propDesc = getPropertyDescriptor(obj, tableName);\n            if (!propDesc || (\"value\" in propDesc && propDesc.value === undefined)) {\n                if (obj === db.Transaction.prototype || obj instanceof db.Transaction) {\n                    setProp(obj, tableName, {\n                        get() { return this.table(tableName); },\n                        set(value) {\n                            defineProperty(this, tableName, { value, writable: true, configurable: true, enumerable: true });\n                        }\n                    });\n                }\n                else {\n                    obj[tableName] = new db.Table(tableName, schema);\n                }\n            }\n        });\n    });\n}\nfunction removeTablesApi({ _novip: db }, objs) {\n    objs.forEach(obj => {\n        for (let key in obj) {\n            if (obj[key] instanceof db.Table)\n                delete obj[key];\n        }\n    });\n}\nfunction lowerVersionFirst(a, b) {\n    return a._cfg.version - b._cfg.version;\n}\nfunction runUpgraders(db, oldVersion, idbUpgradeTrans, reject) {\n    const globalSchema = db._dbSchema;\n    const trans = db._createTransaction('readwrite', db._storeNames, globalSchema);\n    trans.create(idbUpgradeTrans);\n    trans._completion.catch(reject);\n    const rejectTransaction = trans._reject.bind(trans);\n    const transless = PSD.transless || PSD;\n    newScope(() => {\n        PSD.trans = trans;\n        PSD.transless = transless;\n        if (oldVersion === 0) {\n            keys(globalSchema).forEach(tableName => {\n                createTable(idbUpgradeTrans, tableName, globalSchema[tableName].primKey, globalSchema[tableName].indexes);\n            });\n            generateMiddlewareStacks(db, idbUpgradeTrans);\n            DexiePromise.follow(() => db.on.populate.fire(trans)).catch(rejectTransaction);\n        }\n        else\n            updateTablesAndIndexes(db, oldVersion, trans, idbUpgradeTrans).catch(rejectTransaction);\n    });\n}\nfunction updateTablesAndIndexes({ _novip: db }, oldVersion, trans, idbUpgradeTrans) {\n    const queue = [];\n    const versions = db._versions;\n    let globalSchema = db._dbSchema = buildGlobalSchema(db, db.idbdb, idbUpgradeTrans);\n    let anyContentUpgraderHasRun = false;\n    const versToRun = versions.filter(v => v._cfg.version >= oldVersion);\n    versToRun.forEach(version => {\n        queue.push(() => {\n            const oldSchema = globalSchema;\n            const newSchema = version._cfg.dbschema;\n            adjustToExistingIndexNames(db, oldSchema, idbUpgradeTrans);\n            adjustToExistingIndexNames(db, newSchema, idbUpgradeTrans);\n            globalSchema = db._dbSchema = newSchema;\n            const diff = getSchemaDiff(oldSchema, newSchema);\n            diff.add.forEach(tuple => {\n                createTable(idbUpgradeTrans, tuple[0], tuple[1].primKey, tuple[1].indexes);\n            });\n            diff.change.forEach(change => {\n                if (change.recreate) {\n                    throw new exceptions.Upgrade(\"Not yet support for changing primary key\");\n                }\n                else {\n                    const store = idbUpgradeTrans.objectStore(change.name);\n                    change.add.forEach(idx => addIndex(store, idx));\n                    change.change.forEach(idx => {\n                        store.deleteIndex(idx.name);\n                        addIndex(store, idx);\n                    });\n                    change.del.forEach(idxName => store.deleteIndex(idxName));\n                }\n            });\n            const contentUpgrade = version._cfg.contentUpgrade;\n            if (contentUpgrade && version._cfg.version > oldVersion) {\n                generateMiddlewareStacks(db, idbUpgradeTrans);\n                trans._memoizedTables = {};\n                anyContentUpgraderHasRun = true;\n                let upgradeSchema = shallowClone(newSchema);\n                diff.del.forEach(table => {\n                    upgradeSchema[table] = oldSchema[table];\n                });\n                removeTablesApi(db, [db.Transaction.prototype]);\n                setApiOnPlace(db, [db.Transaction.prototype], keys(upgradeSchema), upgradeSchema);\n                trans.schema = upgradeSchema;\n                const contentUpgradeIsAsync = isAsyncFunction(contentUpgrade);\n                if (contentUpgradeIsAsync) {\n                    incrementExpectedAwaits();\n                }\n                let returnValue;\n                const promiseFollowed = DexiePromise.follow(() => {\n                    returnValue = contentUpgrade(trans);\n                    if (returnValue) {\n                        if (contentUpgradeIsAsync) {\n                            var decrementor = decrementExpectedAwaits.bind(null, null);\n                            returnValue.then(decrementor, decrementor);\n                        }\n                    }\n                });\n                return (returnValue && typeof returnValue.then === 'function' ?\n                    DexiePromise.resolve(returnValue) : promiseFollowed.then(() => returnValue));\n            }\n        });\n        queue.push(idbtrans => {\n            if (!anyContentUpgraderHasRun || !hasIEDeleteObjectStoreBug) {\n                const newSchema = version._cfg.dbschema;\n                deleteRemovedTables(newSchema, idbtrans);\n            }\n            removeTablesApi(db, [db.Transaction.prototype]);\n            setApiOnPlace(db, [db.Transaction.prototype], db._storeNames, db._dbSchema);\n            trans.schema = db._dbSchema;\n        });\n    });\n    function runQueue() {\n        return queue.length ? DexiePromise.resolve(queue.shift()(trans.idbtrans)).then(runQueue) :\n            DexiePromise.resolve();\n    }\n    return runQueue().then(() => {\n        createMissingTables(globalSchema, idbUpgradeTrans);\n    });\n}\nfunction getSchemaDiff(oldSchema, newSchema) {\n    const diff = {\n        del: [],\n        add: [],\n        change: []\n    };\n    let table;\n    for (table in oldSchema) {\n        if (!newSchema[table])\n            diff.del.push(table);\n    }\n    for (table in newSchema) {\n        const oldDef = oldSchema[table], newDef = newSchema[table];\n        if (!oldDef) {\n            diff.add.push([table, newDef]);\n        }\n        else {\n            const change = {\n                name: table,\n                def: newDef,\n                recreate: false,\n                del: [],\n                add: [],\n                change: []\n            };\n            if ((\n            '' + (oldDef.primKey.keyPath || '')) !== ('' + (newDef.primKey.keyPath || '')) ||\n                (oldDef.primKey.auto !== newDef.primKey.auto && !isIEOrEdge))\n             {\n                change.recreate = true;\n                diff.change.push(change);\n            }\n            else {\n                const oldIndexes = oldDef.idxByName;\n                const newIndexes = newDef.idxByName;\n                let idxName;\n                for (idxName in oldIndexes) {\n                    if (!newIndexes[idxName])\n                        change.del.push(idxName);\n                }\n                for (idxName in newIndexes) {\n                    const oldIdx = oldIndexes[idxName], newIdx = newIndexes[idxName];\n                    if (!oldIdx)\n                        change.add.push(newIdx);\n                    else if (oldIdx.src !== newIdx.src)\n                        change.change.push(newIdx);\n                }\n                if (change.del.length > 0 || change.add.length > 0 || change.change.length > 0) {\n                    diff.change.push(change);\n                }\n            }\n        }\n    }\n    return diff;\n}\nfunction createTable(idbtrans, tableName, primKey, indexes) {\n    const store = idbtrans.db.createObjectStore(tableName, primKey.keyPath ?\n        { keyPath: primKey.keyPath, autoIncrement: primKey.auto } :\n        { autoIncrement: primKey.auto });\n    indexes.forEach(idx => addIndex(store, idx));\n    return store;\n}\nfunction createMissingTables(newSchema, idbtrans) {\n    keys(newSchema).forEach(tableName => {\n        if (!idbtrans.db.objectStoreNames.contains(tableName)) {\n            createTable(idbtrans, tableName, newSchema[tableName].primKey, newSchema[tableName].indexes);\n        }\n    });\n}\nfunction deleteRemovedTables(newSchema, idbtrans) {\n    [].slice.call(idbtrans.db.objectStoreNames).forEach(storeName => newSchema[storeName] == null && idbtrans.db.deleteObjectStore(storeName));\n}\nfunction addIndex(store, idx) {\n    store.createIndex(idx.name, idx.keyPath, { unique: idx.unique, multiEntry: idx.multi });\n}\nfunction buildGlobalSchema(db, idbdb, tmpTrans) {\n    const globalSchema = {};\n    const dbStoreNames = slice(idbdb.objectStoreNames, 0);\n    dbStoreNames.forEach(storeName => {\n        const store = tmpTrans.objectStore(storeName);\n        let keyPath = store.keyPath;\n        const primKey = createIndexSpec(nameFromKeyPath(keyPath), keyPath || \"\", false, false, !!store.autoIncrement, keyPath && typeof keyPath !== \"string\", true);\n        const indexes = [];\n        for (let j = 0; j < store.indexNames.length; ++j) {\n            const idbindex = store.index(store.indexNames[j]);\n            keyPath = idbindex.keyPath;\n            var index = createIndexSpec(idbindex.name, keyPath, !!idbindex.unique, !!idbindex.multiEntry, false, keyPath && typeof keyPath !== \"string\", false);\n            indexes.push(index);\n        }\n        globalSchema[storeName] = createTableSchema(storeName, primKey, indexes);\n    });\n    return globalSchema;\n}\nfunction readGlobalSchema({ _novip: db }, idbdb, tmpTrans) {\n    db.verno = idbdb.version / 10;\n    const globalSchema = db._dbSchema = buildGlobalSchema(db, idbdb, tmpTrans);\n    db._storeNames = slice(idbdb.objectStoreNames, 0);\n    setApiOnPlace(db, [db._allTables], keys(globalSchema), globalSchema);\n}\nfunction verifyInstalledSchema(db, tmpTrans) {\n    const installedSchema = buildGlobalSchema(db, db.idbdb, tmpTrans);\n    const diff = getSchemaDiff(installedSchema, db._dbSchema);\n    return !(diff.add.length || diff.change.some(ch => ch.add.length || ch.change.length));\n}\nfunction adjustToExistingIndexNames({ _novip: db }, schema, idbtrans) {\n    const storeNames = idbtrans.db.objectStoreNames;\n    for (let i = 0; i < storeNames.length; ++i) {\n        const storeName = storeNames[i];\n        const store = idbtrans.objectStore(storeName);\n        db._hasGetAll = 'getAll' in store;\n        for (let j = 0; j < store.indexNames.length; ++j) {\n            const indexName = store.indexNames[j];\n            const keyPath = store.index(indexName).keyPath;\n            const dexieName = typeof keyPath === 'string' ? keyPath : \"[\" + slice(keyPath).join('+') + \"]\";\n            if (schema[storeName]) {\n                const indexSpec = schema[storeName].idxByName[dexieName];\n                if (indexSpec) {\n                    indexSpec.name = indexName;\n                    delete schema[storeName].idxByName[dexieName];\n                    schema[storeName].idxByName[indexName] = indexSpec;\n                }\n            }\n        }\n    }\n    if (typeof navigator !== 'undefined' && /Safari/.test(navigator.userAgent) &&\n        !/(Chrome\\/|Edge\\/)/.test(navigator.userAgent) &&\n        _global.WorkerGlobalScope && _global instanceof _global.WorkerGlobalScope &&\n        [].concat(navigator.userAgent.match(/Safari\\/(\\d*)/))[1] < 604) {\n        db._hasGetAll = false;\n    }\n}\nfunction parseIndexSyntax(primKeyAndIndexes) {\n    return primKeyAndIndexes.split(',').map((index, indexNum) => {\n        index = index.trim();\n        const name = index.replace(/([&*]|\\+\\+)/g, \"\");\n        const keyPath = /^\\[/.test(name) ? name.match(/^\\[(.*)\\]$/)[1].split('+') : name;\n        return createIndexSpec(name, keyPath || null, /\\&/.test(index), /\\*/.test(index), /\\+\\+/.test(index), isArray(keyPath), indexNum === 0);\n    });\n}\n\nclass Version {\n    _parseStoresSpec(stores, outSchema) {\n        keys(stores).forEach(tableName => {\n            if (stores[tableName] !== null) {\n                var indexes = parseIndexSyntax(stores[tableName]);\n                var primKey = indexes.shift();\n                if (primKey.multi)\n                    throw new exceptions.Schema(\"Primary key cannot be multi-valued\");\n                indexes.forEach(idx => {\n                    if (idx.auto)\n                        throw new exceptions.Schema(\"Only primary key can be marked as autoIncrement (++)\");\n                    if (!idx.keyPath)\n                        throw new exceptions.Schema(\"Index must have a name and cannot be an empty string\");\n                });\n                outSchema[tableName] = createTableSchema(tableName, primKey, indexes);\n            }\n        });\n    }\n    stores(stores) {\n        const db = this.db;\n        this._cfg.storesSource = this._cfg.storesSource ?\n            extend(this._cfg.storesSource, stores) :\n            stores;\n        const versions = db._versions;\n        const storesSpec = {};\n        let dbschema = {};\n        versions.forEach(version => {\n            extend(storesSpec, version._cfg.storesSource);\n            dbschema = (version._cfg.dbschema = {});\n            version._parseStoresSpec(storesSpec, dbschema);\n        });\n        db._dbSchema = dbschema;\n        removeTablesApi(db, [db._allTables, db, db.Transaction.prototype]);\n        setApiOnPlace(db, [db._allTables, db, db.Transaction.prototype, this._cfg.tables], keys(dbschema), dbschema);\n        db._storeNames = keys(dbschema);\n        return this;\n    }\n    upgrade(upgradeFunction) {\n        this._cfg.contentUpgrade = promisableChain(this._cfg.contentUpgrade || nop, upgradeFunction);\n        return this;\n    }\n}\n\nfunction createVersionConstructor(db) {\n    return makeClassConstructor(Version.prototype, function Version(versionNumber) {\n        this.db = db;\n        this._cfg = {\n            version: versionNumber,\n            storesSource: null,\n            dbschema: {},\n            tables: {},\n            contentUpgrade: null\n        };\n    });\n}\n\nfunction getDbNamesTable(indexedDB, IDBKeyRange) {\n    let dbNamesDB = indexedDB[\"_dbNamesDB\"];\n    if (!dbNamesDB) {\n        dbNamesDB = indexedDB[\"_dbNamesDB\"] = new Dexie$1(DBNAMES_DB, {\n            addons: [],\n            indexedDB,\n            IDBKeyRange,\n        });\n        dbNamesDB.version(1).stores({ dbnames: \"name\" });\n    }\n    return dbNamesDB.table(\"dbnames\");\n}\nfunction hasDatabasesNative(indexedDB) {\n    return indexedDB && typeof indexedDB.databases === \"function\";\n}\nfunction getDatabaseNames({ indexedDB, IDBKeyRange, }) {\n    return hasDatabasesNative(indexedDB)\n        ? Promise.resolve(indexedDB.databases()).then((infos) => infos\n            .map((info) => info.name)\n            .filter((name) => name !== DBNAMES_DB))\n        : getDbNamesTable(indexedDB, IDBKeyRange).toCollection().primaryKeys();\n}\nfunction _onDatabaseCreated({ indexedDB, IDBKeyRange }, name) {\n    !hasDatabasesNative(indexedDB) &&\n        name !== DBNAMES_DB &&\n        getDbNamesTable(indexedDB, IDBKeyRange).put({ name }).catch(nop);\n}\nfunction _onDatabaseDeleted({ indexedDB, IDBKeyRange }, name) {\n    !hasDatabasesNative(indexedDB) &&\n        name !== DBNAMES_DB &&\n        getDbNamesTable(indexedDB, IDBKeyRange).delete(name).catch(nop);\n}\n\nfunction vip(fn) {\n    return newScope(function () {\n        PSD.letThrough = true;\n        return fn();\n    });\n}\n\nfunction idbReady() {\n    var isSafari = !navigator.userAgentData &&\n        /Safari\\//.test(navigator.userAgent) &&\n        !/Chrom(e|ium)\\//.test(navigator.userAgent);\n    if (!isSafari || !indexedDB.databases)\n        return Promise.resolve();\n    var intervalId;\n    return new Promise(function (resolve) {\n        var tryIdb = function () { return indexedDB.databases().finally(resolve); };\n        intervalId = setInterval(tryIdb, 100);\n        tryIdb();\n    }).finally(function () { return clearInterval(intervalId); });\n}\n\nfunction dexieOpen(db) {\n    const state = db._state;\n    const { indexedDB } = db._deps;\n    if (state.isBeingOpened || db.idbdb)\n        return state.dbReadyPromise.then(() => state.dbOpenError ?\n            rejection(state.dbOpenError) :\n            db);\n    debug && (state.openCanceller._stackHolder = getErrorWithStack());\n    state.isBeingOpened = true;\n    state.dbOpenError = null;\n    state.openComplete = false;\n    const openCanceller = state.openCanceller;\n    function throwIfCancelled() {\n        if (state.openCanceller !== openCanceller)\n            throw new exceptions.DatabaseClosed('db.open() was cancelled');\n    }\n    let resolveDbReady = state.dbReadyResolve,\n    upgradeTransaction = null, wasCreated = false;\n    return DexiePromise.race([openCanceller, (typeof navigator === 'undefined' ? DexiePromise.resolve() : idbReady()).then(() => new DexiePromise((resolve, reject) => {\n            throwIfCancelled();\n            if (!indexedDB)\n                throw new exceptions.MissingAPI();\n            const dbName = db.name;\n            const req = state.autoSchema ?\n                indexedDB.open(dbName) :\n                indexedDB.open(dbName, Math.round(db.verno * 10));\n            if (!req)\n                throw new exceptions.MissingAPI();\n            req.onerror = eventRejectHandler(reject);\n            req.onblocked = wrap(db._fireOnBlocked);\n            req.onupgradeneeded = wrap(e => {\n                upgradeTransaction = req.transaction;\n                if (state.autoSchema && !db._options.allowEmptyDB) {\n                    req.onerror = preventDefault;\n                    upgradeTransaction.abort();\n                    req.result.close();\n                    const delreq = indexedDB.deleteDatabase(dbName);\n                    delreq.onsuccess = delreq.onerror = wrap(() => {\n                        reject(new exceptions.NoSuchDatabase(`Database ${dbName} doesnt exist`));\n                    });\n                }\n                else {\n                    upgradeTransaction.onerror = eventRejectHandler(reject);\n                    var oldVer = e.oldVersion > Math.pow(2, 62) ? 0 : e.oldVersion;\n                    wasCreated = oldVer < 1;\n                    db._novip.idbdb = req.result;\n                    runUpgraders(db, oldVer / 10, upgradeTransaction, reject);\n                }\n            }, reject);\n            req.onsuccess = wrap(() => {\n                upgradeTransaction = null;\n                const idbdb = db._novip.idbdb = req.result;\n                const objectStoreNames = slice(idbdb.objectStoreNames);\n                if (objectStoreNames.length > 0)\n                    try {\n                        const tmpTrans = idbdb.transaction(safariMultiStoreFix(objectStoreNames), 'readonly');\n                        if (state.autoSchema)\n                            readGlobalSchema(db, idbdb, tmpTrans);\n                        else {\n                            adjustToExistingIndexNames(db, db._dbSchema, tmpTrans);\n                            if (!verifyInstalledSchema(db, tmpTrans)) {\n                                console.warn(`Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.`);\n                            }\n                        }\n                        generateMiddlewareStacks(db, tmpTrans);\n                    }\n                    catch (e) {\n                    }\n                connections.push(db);\n                idbdb.onversionchange = wrap(ev => {\n                    state.vcFired = true;\n                    db.on(\"versionchange\").fire(ev);\n                });\n                idbdb.onclose = wrap(ev => {\n                    db.on(\"close\").fire(ev);\n                });\n                if (wasCreated)\n                    _onDatabaseCreated(db._deps, dbName);\n                resolve();\n            }, reject);\n        }))]).then(() => {\n        throwIfCancelled();\n        state.onReadyBeingFired = [];\n        return DexiePromise.resolve(vip(() => db.on.ready.fire(db.vip))).then(function fireRemainders() {\n            if (state.onReadyBeingFired.length > 0) {\n                let remainders = state.onReadyBeingFired.reduce(promisableChain, nop);\n                state.onReadyBeingFired = [];\n                return DexiePromise.resolve(vip(() => remainders(db.vip))).then(fireRemainders);\n            }\n        });\n    }).finally(() => {\n        state.onReadyBeingFired = null;\n        state.isBeingOpened = false;\n    }).then(() => {\n        return db;\n    }).catch(err => {\n        state.dbOpenError = err;\n        try {\n            upgradeTransaction && upgradeTransaction.abort();\n        }\n        catch (_a) { }\n        if (openCanceller === state.openCanceller) {\n            db._close();\n        }\n        return rejection(err);\n    }).finally(() => {\n        state.openComplete = true;\n        resolveDbReady();\n    });\n}\n\nfunction awaitIterator(iterator) {\n    var callNext = result => iterator.next(result), doThrow = error => iterator.throw(error), onSuccess = step(callNext), onError = step(doThrow);\n    function step(getNext) {\n        return (val) => {\n            var next = getNext(val), value = next.value;\n            return next.done ? value :\n                (!value || typeof value.then !== 'function' ?\n                    isArray(value) ? Promise.all(value).then(onSuccess, onError) : onSuccess(value) :\n                    value.then(onSuccess, onError));\n        };\n    }\n    return step(callNext)();\n}\n\nfunction extractTransactionArgs(mode, _tableArgs_, scopeFunc) {\n    var i = arguments.length;\n    if (i < 2)\n        throw new exceptions.InvalidArgument(\"Too few arguments\");\n    var args = new Array(i - 1);\n    while (--i)\n        args[i - 1] = arguments[i];\n    scopeFunc = args.pop();\n    var tables = flatten(args);\n    return [mode, tables, scopeFunc];\n}\nfunction enterTransactionScope(db, mode, storeNames, parentTransaction, scopeFunc) {\n    return DexiePromise.resolve().then(() => {\n        const transless = PSD.transless || PSD;\n        const trans = db._createTransaction(mode, storeNames, db._dbSchema, parentTransaction);\n        const zoneProps = {\n            trans: trans,\n            transless: transless\n        };\n        if (parentTransaction) {\n            trans.idbtrans = parentTransaction.idbtrans;\n        }\n        else {\n            try {\n                trans.create();\n                db._state.PR1398_maxLoop = 3;\n            }\n            catch (ex) {\n                if (ex.name === errnames.InvalidState && db.isOpen() && --db._state.PR1398_maxLoop > 0) {\n                    console.warn('Dexie: Need to reopen db');\n                    db._close();\n                    return db.open().then(() => enterTransactionScope(db, mode, storeNames, null, scopeFunc));\n                }\n                return rejection(ex);\n            }\n        }\n        const scopeFuncIsAsync = isAsyncFunction(scopeFunc);\n        if (scopeFuncIsAsync) {\n            incrementExpectedAwaits();\n        }\n        let returnValue;\n        const promiseFollowed = DexiePromise.follow(() => {\n            returnValue = scopeFunc.call(trans, trans);\n            if (returnValue) {\n                if (scopeFuncIsAsync) {\n                    var decrementor = decrementExpectedAwaits.bind(null, null);\n                    returnValue.then(decrementor, decrementor);\n                }\n                else if (typeof returnValue.next === 'function' && typeof returnValue.throw === 'function') {\n                    returnValue = awaitIterator(returnValue);\n                }\n            }\n        }, zoneProps);\n        return (returnValue && typeof returnValue.then === 'function' ?\n            DexiePromise.resolve(returnValue).then(x => trans.active ?\n                x\n                : rejection(new exceptions.PrematureCommit(\"Transaction committed too early. See http://bit.ly/2kdckMn\")))\n            : promiseFollowed.then(() => returnValue)).then(x => {\n            if (parentTransaction)\n                trans._resolve();\n            return trans._completion.then(() => x);\n        }).catch(e => {\n            trans._reject(e);\n            return rejection(e);\n        });\n    });\n}\n\nfunction pad(a, value, count) {\n    const result = isArray(a) ? a.slice() : [a];\n    for (let i = 0; i < count; ++i)\n        result.push(value);\n    return result;\n}\nfunction createVirtualIndexMiddleware(down) {\n    return {\n        ...down,\n        table(tableName) {\n            const table = down.table(tableName);\n            const { schema } = table;\n            const indexLookup = {};\n            const allVirtualIndexes = [];\n            function addVirtualIndexes(keyPath, keyTail, lowLevelIndex) {\n                const keyPathAlias = getKeyPathAlias(keyPath);\n                const indexList = (indexLookup[keyPathAlias] = indexLookup[keyPathAlias] || []);\n                const keyLength = keyPath == null ? 0 : typeof keyPath === 'string' ? 1 : keyPath.length;\n                const isVirtual = keyTail > 0;\n                const virtualIndex = {\n                    ...lowLevelIndex,\n                    isVirtual,\n                    keyTail,\n                    keyLength,\n                    extractKey: getKeyExtractor(keyPath),\n                    unique: !isVirtual && lowLevelIndex.unique\n                };\n                indexList.push(virtualIndex);\n                if (!virtualIndex.isPrimaryKey) {\n                    allVirtualIndexes.push(virtualIndex);\n                }\n                if (keyLength > 1) {\n                    const virtualKeyPath = keyLength === 2 ?\n                        keyPath[0] :\n                        keyPath.slice(0, keyLength - 1);\n                    addVirtualIndexes(virtualKeyPath, keyTail + 1, lowLevelIndex);\n                }\n                indexList.sort((a, b) => a.keyTail - b.keyTail);\n                return virtualIndex;\n            }\n            const primaryKey = addVirtualIndexes(schema.primaryKey.keyPath, 0, schema.primaryKey);\n            indexLookup[\":id\"] = [primaryKey];\n            for (const index of schema.indexes) {\n                addVirtualIndexes(index.keyPath, 0, index);\n            }\n            function findBestIndex(keyPath) {\n                const result = indexLookup[getKeyPathAlias(keyPath)];\n                return result && result[0];\n            }\n            function translateRange(range, keyTail) {\n                return {\n                    type: range.type === 1  ?\n                        2  :\n                        range.type,\n                    lower: pad(range.lower, range.lowerOpen ? down.MAX_KEY : down.MIN_KEY, keyTail),\n                    lowerOpen: true,\n                    upper: pad(range.upper, range.upperOpen ? down.MIN_KEY : down.MAX_KEY, keyTail),\n                    upperOpen: true\n                };\n            }\n            function translateRequest(req) {\n                const index = req.query.index;\n                return index.isVirtual ? {\n                    ...req,\n                    query: {\n                        index,\n                        range: translateRange(req.query.range, index.keyTail)\n                    }\n                } : req;\n            }\n            const result = {\n                ...table,\n                schema: {\n                    ...schema,\n                    primaryKey,\n                    indexes: allVirtualIndexes,\n                    getIndexByKeyPath: findBestIndex\n                },\n                count(req) {\n                    return table.count(translateRequest(req));\n                },\n                query(req) {\n                    return table.query(translateRequest(req));\n                },\n                openCursor(req) {\n                    const { keyTail, isVirtual, keyLength } = req.query.index;\n                    if (!isVirtual)\n                        return table.openCursor(req);\n                    function createVirtualCursor(cursor) {\n                        function _continue(key) {\n                            key != null ?\n                                cursor.continue(pad(key, req.reverse ? down.MAX_KEY : down.MIN_KEY, keyTail)) :\n                                req.unique ?\n                                    cursor.continue(cursor.key.slice(0, keyLength)\n                                        .concat(req.reverse\n                                        ? down.MIN_KEY\n                                        : down.MAX_KEY, keyTail)) :\n                                    cursor.continue();\n                        }\n                        const virtualCursor = Object.create(cursor, {\n                            continue: { value: _continue },\n                            continuePrimaryKey: {\n                                value(key, primaryKey) {\n                                    cursor.continuePrimaryKey(pad(key, down.MAX_KEY, keyTail), primaryKey);\n                                }\n                            },\n                            primaryKey: {\n                                get() {\n                                    return cursor.primaryKey;\n                                }\n                            },\n                            key: {\n                                get() {\n                                    const key = cursor.key;\n                                    return keyLength === 1 ?\n                                        key[0] :\n                                        key.slice(0, keyLength);\n                                }\n                            },\n                            value: {\n                                get() {\n                                    return cursor.value;\n                                }\n                            }\n                        });\n                        return virtualCursor;\n                    }\n                    return table.openCursor(translateRequest(req))\n                        .then(cursor => cursor && createVirtualCursor(cursor));\n                }\n            };\n            return result;\n        }\n    };\n}\nconst virtualIndexMiddleware = {\n    stack: \"dbcore\",\n    name: \"VirtualIndexMiddleware\",\n    level: 1,\n    create: createVirtualIndexMiddleware\n};\n\nfunction getObjectDiff(a, b, rv, prfx) {\n    rv = rv || {};\n    prfx = prfx || '';\n    keys(a).forEach((prop) => {\n        if (!hasOwn(b, prop)) {\n            rv[prfx + prop] = undefined;\n        }\n        else {\n            var ap = a[prop], bp = b[prop];\n            if (typeof ap === 'object' && typeof bp === 'object' && ap && bp) {\n                const apTypeName = toStringTag(ap);\n                const bpTypeName = toStringTag(bp);\n                if (apTypeName !== bpTypeName) {\n                    rv[prfx + prop] = b[prop];\n                }\n                else if (apTypeName === 'Object') {\n                    getObjectDiff(ap, bp, rv, prfx + prop + '.');\n                }\n                else if (ap !== bp) {\n                    rv[prfx + prop] = b[prop];\n                }\n            }\n            else if (ap !== bp)\n                rv[prfx + prop] = b[prop];\n        }\n    });\n    keys(b).forEach((prop) => {\n        if (!hasOwn(a, prop)) {\n            rv[prfx + prop] = b[prop];\n        }\n    });\n    return rv;\n}\n\nfunction getEffectiveKeys(primaryKey, req) {\n    if (req.type === 'delete')\n        return req.keys;\n    return req.keys || req.values.map(primaryKey.extractKey);\n}\n\nconst hooksMiddleware = {\n    stack: \"dbcore\",\n    name: \"HooksMiddleware\",\n    level: 2,\n    create: (downCore) => ({\n        ...downCore,\n        table(tableName) {\n            const downTable = downCore.table(tableName);\n            const { primaryKey } = downTable.schema;\n            const tableMiddleware = {\n                ...downTable,\n                mutate(req) {\n                    const dxTrans = PSD.trans;\n                    const { deleting, creating, updating } = dxTrans.table(tableName).hook;\n                    switch (req.type) {\n                        case 'add':\n                            if (creating.fire === nop)\n                                break;\n                            return dxTrans._promise('readwrite', () => addPutOrDelete(req), true);\n                        case 'put':\n                            if (creating.fire === nop && updating.fire === nop)\n                                break;\n                            return dxTrans._promise('readwrite', () => addPutOrDelete(req), true);\n                        case 'delete':\n                            if (deleting.fire === nop)\n                                break;\n                            return dxTrans._promise('readwrite', () => addPutOrDelete(req), true);\n                        case 'deleteRange':\n                            if (deleting.fire === nop)\n                                break;\n                            return dxTrans._promise('readwrite', () => deleteRange(req), true);\n                    }\n                    return downTable.mutate(req);\n                    function addPutOrDelete(req) {\n                        const dxTrans = PSD.trans;\n                        const keys = req.keys || getEffectiveKeys(primaryKey, req);\n                        if (!keys)\n                            throw new Error(\"Keys missing\");\n                        req = req.type === 'add' || req.type === 'put' ?\n                            { ...req, keys } :\n                            { ...req };\n                        if (req.type !== 'delete')\n                            req.values = [...req.values];\n                        if (req.keys)\n                            req.keys = [...req.keys];\n                        return getExistingValues(downTable, req, keys).then(existingValues => {\n                            const contexts = keys.map((key, i) => {\n                                const existingValue = existingValues[i];\n                                const ctx = { onerror: null, onsuccess: null };\n                                if (req.type === 'delete') {\n                                    deleting.fire.call(ctx, key, existingValue, dxTrans);\n                                }\n                                else if (req.type === 'add' || existingValue === undefined) {\n                                    const generatedPrimaryKey = creating.fire.call(ctx, key, req.values[i], dxTrans);\n                                    if (key == null && generatedPrimaryKey != null) {\n                                        key = generatedPrimaryKey;\n                                        req.keys[i] = key;\n                                        if (!primaryKey.outbound) {\n                                            setByKeyPath(req.values[i], primaryKey.keyPath, key);\n                                        }\n                                    }\n                                }\n                                else {\n                                    const objectDiff = getObjectDiff(existingValue, req.values[i]);\n                                    const additionalChanges = updating.fire.call(ctx, objectDiff, key, existingValue, dxTrans);\n                                    if (additionalChanges) {\n                                        const requestedValue = req.values[i];\n                                        Object.keys(additionalChanges).forEach(keyPath => {\n                                            if (hasOwn(requestedValue, keyPath)) {\n                                                requestedValue[keyPath] = additionalChanges[keyPath];\n                                            }\n                                            else {\n                                                setByKeyPath(requestedValue, keyPath, additionalChanges[keyPath]);\n                                            }\n                                        });\n                                    }\n                                }\n                                return ctx;\n                            });\n                            return downTable.mutate(req).then(({ failures, results, numFailures, lastResult }) => {\n                                for (let i = 0; i < keys.length; ++i) {\n                                    const primKey = results ? results[i] : keys[i];\n                                    const ctx = contexts[i];\n                                    if (primKey == null) {\n                                        ctx.onerror && ctx.onerror(failures[i]);\n                                    }\n                                    else {\n                                        ctx.onsuccess && ctx.onsuccess(req.type === 'put' && existingValues[i] ?\n                                            req.values[i] :\n                                            primKey\n                                        );\n                                    }\n                                }\n                                return { failures, results, numFailures, lastResult };\n                            }).catch(error => {\n                                contexts.forEach(ctx => ctx.onerror && ctx.onerror(error));\n                                return Promise.reject(error);\n                            });\n                        });\n                    }\n                    function deleteRange(req) {\n                        return deleteNextChunk(req.trans, req.range, 10000);\n                    }\n                    function deleteNextChunk(trans, range, limit) {\n                        return downTable.query({ trans, values: false, query: { index: primaryKey, range }, limit })\n                            .then(({ result }) => {\n                            return addPutOrDelete({ type: 'delete', keys: result, trans }).then(res => {\n                                if (res.numFailures > 0)\n                                    return Promise.reject(res.failures[0]);\n                                if (result.length < limit) {\n                                    return { failures: [], numFailures: 0, lastResult: undefined };\n                                }\n                                else {\n                                    return deleteNextChunk(trans, { ...range, lower: result[result.length - 1], lowerOpen: true }, limit);\n                                }\n                            });\n                        });\n                    }\n                }\n            };\n            return tableMiddleware;\n        },\n    })\n};\nfunction getExistingValues(table, req, effectiveKeys) {\n    return req.type === \"add\"\n        ? Promise.resolve([])\n        : table.getMany({ trans: req.trans, keys: effectiveKeys, cache: \"immutable\" });\n}\n\nfunction getFromTransactionCache(keys, cache, clone) {\n    try {\n        if (!cache)\n            return null;\n        if (cache.keys.length < keys.length)\n            return null;\n        const result = [];\n        for (let i = 0, j = 0; i < cache.keys.length && j < keys.length; ++i) {\n            if (cmp(cache.keys[i], keys[j]) !== 0)\n                continue;\n            result.push(clone ? deepClone(cache.values[i]) : cache.values[i]);\n            ++j;\n        }\n        return result.length === keys.length ? result : null;\n    }\n    catch (_a) {\n        return null;\n    }\n}\nconst cacheExistingValuesMiddleware = {\n    stack: \"dbcore\",\n    level: -1,\n    create: (core) => {\n        return {\n            table: (tableName) => {\n                const table = core.table(tableName);\n                return {\n                    ...table,\n                    getMany: (req) => {\n                        if (!req.cache) {\n                            return table.getMany(req);\n                        }\n                        const cachedResult = getFromTransactionCache(req.keys, req.trans[\"_cache\"], req.cache === \"clone\");\n                        if (cachedResult) {\n                            return DexiePromise.resolve(cachedResult);\n                        }\n                        return table.getMany(req).then((res) => {\n                            req.trans[\"_cache\"] = {\n                                keys: req.keys,\n                                values: req.cache === \"clone\" ? deepClone(res) : res,\n                            };\n                            return res;\n                        });\n                    },\n                    mutate: (req) => {\n                        if (req.type !== \"add\")\n                            req.trans[\"_cache\"] = null;\n                        return table.mutate(req);\n                    },\n                };\n            },\n        };\n    },\n};\n\nfunction isEmptyRange(node) {\n    return !(\"from\" in node);\n}\nconst RangeSet = function (fromOrTree, to) {\n    if (this) {\n        extend(this, arguments.length ? { d: 1, from: fromOrTree, to: arguments.length > 1 ? to : fromOrTree } : { d: 0 });\n    }\n    else {\n        const rv = new RangeSet();\n        if (fromOrTree && (\"d\" in fromOrTree)) {\n            extend(rv, fromOrTree);\n        }\n        return rv;\n    }\n};\nprops(RangeSet.prototype, {\n    add(rangeSet) {\n        mergeRanges(this, rangeSet);\n        return this;\n    },\n    addKey(key) {\n        addRange(this, key, key);\n        return this;\n    },\n    addKeys(keys) {\n        keys.forEach(key => addRange(this, key, key));\n        return this;\n    },\n    [iteratorSymbol]() {\n        return getRangeSetIterator(this);\n    }\n});\nfunction addRange(target, from, to) {\n    const diff = cmp(from, to);\n    if (isNaN(diff))\n        return;\n    if (diff > 0)\n        throw RangeError();\n    if (isEmptyRange(target))\n        return extend(target, { from, to, d: 1 });\n    const left = target.l;\n    const right = target.r;\n    if (cmp(to, target.from) < 0) {\n        left\n            ? addRange(left, from, to)\n            : (target.l = { from, to, d: 1, l: null, r: null });\n        return rebalance(target);\n    }\n    if (cmp(from, target.to) > 0) {\n        right\n            ? addRange(right, from, to)\n            : (target.r = { from, to, d: 1, l: null, r: null });\n        return rebalance(target);\n    }\n    if (cmp(from, target.from) < 0) {\n        target.from = from;\n        target.l = null;\n        target.d = right ? right.d + 1 : 1;\n    }\n    if (cmp(to, target.to) > 0) {\n        target.to = to;\n        target.r = null;\n        target.d = target.l ? target.l.d + 1 : 1;\n    }\n    const rightWasCutOff = !target.r;\n    if (left && !target.l) {\n        mergeRanges(target, left);\n    }\n    if (right && rightWasCutOff) {\n        mergeRanges(target, right);\n    }\n}\nfunction mergeRanges(target, newSet) {\n    function _addRangeSet(target, { from, to, l, r }) {\n        addRange(target, from, to);\n        if (l)\n            _addRangeSet(target, l);\n        if (r)\n            _addRangeSet(target, r);\n    }\n    if (!isEmptyRange(newSet))\n        _addRangeSet(target, newSet);\n}\nfunction rangesOverlap(rangeSet1, rangeSet2) {\n    const i1 = getRangeSetIterator(rangeSet2);\n    let nextResult1 = i1.next();\n    if (nextResult1.done)\n        return false;\n    let a = nextResult1.value;\n    const i2 = getRangeSetIterator(rangeSet1);\n    let nextResult2 = i2.next(a.from);\n    let b = nextResult2.value;\n    while (!nextResult1.done && !nextResult2.done) {\n        if (cmp(b.from, a.to) <= 0 && cmp(b.to, a.from) >= 0)\n            return true;\n        cmp(a.from, b.from) < 0\n            ? (a = (nextResult1 = i1.next(b.from)).value)\n            : (b = (nextResult2 = i2.next(a.from)).value);\n    }\n    return false;\n}\nfunction getRangeSetIterator(node) {\n    let state = isEmptyRange(node) ? null : { s: 0, n: node };\n    return {\n        next(key) {\n            const keyProvided = arguments.length > 0;\n            while (state) {\n                switch (state.s) {\n                    case 0:\n                        state.s = 1;\n                        if (keyProvided) {\n                            while (state.n.l && cmp(key, state.n.from) < 0)\n                                state = { up: state, n: state.n.l, s: 1 };\n                        }\n                        else {\n                            while (state.n.l)\n                                state = { up: state, n: state.n.l, s: 1 };\n                        }\n                    case 1:\n                        state.s = 2;\n                        if (!keyProvided || cmp(key, state.n.to) <= 0)\n                            return { value: state.n, done: false };\n                    case 2:\n                        if (state.n.r) {\n                            state.s = 3;\n                            state = { up: state, n: state.n.r, s: 0 };\n                            continue;\n                        }\n                    case 3:\n                        state = state.up;\n                }\n            }\n            return { done: true };\n        },\n    };\n}\nfunction rebalance(target) {\n    var _a, _b;\n    const diff = (((_a = target.r) === null || _a === void 0 ? void 0 : _a.d) || 0) - (((_b = target.l) === null || _b === void 0 ? void 0 : _b.d) || 0);\n    const r = diff > 1 ? \"r\" : diff < -1 ? \"l\" : \"\";\n    if (r) {\n        const l = r === \"r\" ? \"l\" : \"r\";\n        const rootClone = { ...target };\n        const oldRootRight = target[r];\n        target.from = oldRootRight.from;\n        target.to = oldRootRight.to;\n        target[r] = oldRootRight[r];\n        rootClone[r] = oldRootRight[l];\n        target[l] = rootClone;\n        rootClone.d = computeDepth(rootClone);\n    }\n    target.d = computeDepth(target);\n}\nfunction computeDepth({ r, l }) {\n    return (r ? (l ? Math.max(r.d, l.d) : r.d) : l ? l.d : 0) + 1;\n}\n\nconst observabilityMiddleware = {\n    stack: \"dbcore\",\n    level: 0,\n    create: (core) => {\n        const dbName = core.schema.name;\n        const FULL_RANGE = new RangeSet(core.MIN_KEY, core.MAX_KEY);\n        return {\n            ...core,\n            table: (tableName) => {\n                const table = core.table(tableName);\n                const { schema } = table;\n                const { primaryKey } = schema;\n                const { extractKey, outbound } = primaryKey;\n                const tableClone = {\n                    ...table,\n                    mutate: (req) => {\n                        const trans = req.trans;\n                        const mutatedParts = trans.mutatedParts || (trans.mutatedParts = {});\n                        const getRangeSet = (indexName) => {\n                            const part = `idb://${dbName}/${tableName}/${indexName}`;\n                            return (mutatedParts[part] ||\n                                (mutatedParts[part] = new RangeSet()));\n                        };\n                        const pkRangeSet = getRangeSet(\"\");\n                        const delsRangeSet = getRangeSet(\":dels\");\n                        const { type } = req;\n                        let [keys, newObjs] = req.type === \"deleteRange\"\n                            ? [req.range]\n                            : req.type === \"delete\"\n                                ? [req.keys]\n                                : req.values.length < 50\n                                    ? [[], req.values]\n                                    : [];\n                        const oldCache = req.trans[\"_cache\"];\n                        return table.mutate(req).then((res) => {\n                            if (isArray(keys)) {\n                                if (type !== \"delete\")\n                                    keys = res.results;\n                                pkRangeSet.addKeys(keys);\n                                const oldObjs = getFromTransactionCache(keys, oldCache);\n                                if (!oldObjs && type !== \"add\") {\n                                    delsRangeSet.addKeys(keys);\n                                }\n                                if (oldObjs || newObjs) {\n                                    trackAffectedIndexes(getRangeSet, schema, oldObjs, newObjs);\n                                }\n                            }\n                            else if (keys) {\n                                const range = { from: keys.lower, to: keys.upper };\n                                delsRangeSet.add(range);\n                                pkRangeSet.add(range);\n                            }\n                            else {\n                                pkRangeSet.add(FULL_RANGE);\n                                delsRangeSet.add(FULL_RANGE);\n                                schema.indexes.forEach(idx => getRangeSet(idx.name).add(FULL_RANGE));\n                            }\n                            return res;\n                        });\n                    },\n                };\n                const getRange = ({ query: { index, range }, }) => {\n                    var _a, _b;\n                    return [\n                        index,\n                        new RangeSet((_a = range.lower) !== null && _a !== void 0 ? _a : core.MIN_KEY, (_b = range.upper) !== null && _b !== void 0 ? _b : core.MAX_KEY),\n                    ];\n                };\n                const readSubscribers = {\n                    get: (req) => [primaryKey, new RangeSet(req.key)],\n                    getMany: (req) => [primaryKey, new RangeSet().addKeys(req.keys)],\n                    count: getRange,\n                    query: getRange,\n                    openCursor: getRange,\n                };\n                keys(readSubscribers).forEach(method => {\n                    tableClone[method] = function (req) {\n                        const { subscr } = PSD;\n                        if (subscr) {\n                            const getRangeSet = (indexName) => {\n                                const part = `idb://${dbName}/${tableName}/${indexName}`;\n                                return (subscr[part] ||\n                                    (subscr[part] = new RangeSet()));\n                            };\n                            const pkRangeSet = getRangeSet(\"\");\n                            const delsRangeSet = getRangeSet(\":dels\");\n                            const [queriedIndex, queriedRanges] = readSubscribers[method](req);\n                            getRangeSet(queriedIndex.name || \"\").add(queriedRanges);\n                            if (!queriedIndex.isPrimaryKey) {\n                                if (method === \"count\") {\n                                    delsRangeSet.add(FULL_RANGE);\n                                }\n                                else {\n                                    const keysPromise = method === \"query\" &&\n                                        outbound &&\n                                        req.values &&\n                                        table.query({\n                                            ...req,\n                                            values: false,\n                                        });\n                                    return table[method].apply(this, arguments).then((res) => {\n                                        if (method === \"query\") {\n                                            if (outbound && req.values) {\n                                                return keysPromise.then(({ result: resultingKeys }) => {\n                                                    pkRangeSet.addKeys(resultingKeys);\n                                                    return res;\n                                                });\n                                            }\n                                            const pKeys = req.values\n                                                ? res.result.map(extractKey)\n                                                : res.result;\n                                            if (req.values) {\n                                                pkRangeSet.addKeys(pKeys);\n                                            }\n                                            else {\n                                                delsRangeSet.addKeys(pKeys);\n                                            }\n                                        }\n                                        else if (method === \"openCursor\") {\n                                            const cursor = res;\n                                            const wantValues = req.values;\n                                            return (cursor &&\n                                                Object.create(cursor, {\n                                                    key: {\n                                                        get() {\n                                                            delsRangeSet.addKey(cursor.primaryKey);\n                                                            return cursor.key;\n                                                        },\n                                                    },\n                                                    primaryKey: {\n                                                        get() {\n                                                            const pkey = cursor.primaryKey;\n                                                            delsRangeSet.addKey(pkey);\n                                                            return pkey;\n                                                        },\n                                                    },\n                                                    value: {\n                                                        get() {\n                                                            wantValues && pkRangeSet.addKey(cursor.primaryKey);\n                                                            return cursor.value;\n                                                        },\n                                                    },\n                                                }));\n                                        }\n                                        return res;\n                                    });\n                                }\n                            }\n                        }\n                        return table[method].apply(this, arguments);\n                    };\n                });\n                return tableClone;\n            },\n        };\n    },\n};\nfunction trackAffectedIndexes(getRangeSet, schema, oldObjs, newObjs) {\n    function addAffectedIndex(ix) {\n        const rangeSet = getRangeSet(ix.name || \"\");\n        function extractKey(obj) {\n            return obj != null ? ix.extractKey(obj) : null;\n        }\n        const addKeyOrKeys = (key) => ix.multiEntry && isArray(key)\n            ? key.forEach(key => rangeSet.addKey(key))\n            : rangeSet.addKey(key);\n        (oldObjs || newObjs).forEach((_, i) => {\n            const oldKey = oldObjs && extractKey(oldObjs[i]);\n            const newKey = newObjs && extractKey(newObjs[i]);\n            if (cmp(oldKey, newKey) !== 0) {\n                if (oldKey != null)\n                    addKeyOrKeys(oldKey);\n                if (newKey != null)\n                    addKeyOrKeys(newKey);\n            }\n        });\n    }\n    schema.indexes.forEach(addAffectedIndex);\n}\n\nclass Dexie$1 {\n    constructor(name, options) {\n        this._middlewares = {};\n        this.verno = 0;\n        const deps = Dexie$1.dependencies;\n        this._options = options = {\n            addons: Dexie$1.addons,\n            autoOpen: true,\n            indexedDB: deps.indexedDB,\n            IDBKeyRange: deps.IDBKeyRange,\n            ...options\n        };\n        this._deps = {\n            indexedDB: options.indexedDB,\n            IDBKeyRange: options.IDBKeyRange\n        };\n        const { addons, } = options;\n        this._dbSchema = {};\n        this._versions = [];\n        this._storeNames = [];\n        this._allTables = {};\n        this.idbdb = null;\n        this._novip = this;\n        const state = {\n            dbOpenError: null,\n            isBeingOpened: false,\n            onReadyBeingFired: null,\n            openComplete: false,\n            dbReadyResolve: nop,\n            dbReadyPromise: null,\n            cancelOpen: nop,\n            openCanceller: null,\n            autoSchema: true,\n            PR1398_maxLoop: 3\n        };\n        state.dbReadyPromise = new DexiePromise(resolve => {\n            state.dbReadyResolve = resolve;\n        });\n        state.openCanceller = new DexiePromise((_, reject) => {\n            state.cancelOpen = reject;\n        });\n        this._state = state;\n        this.name = name;\n        this.on = Events(this, \"populate\", \"blocked\", \"versionchange\", \"close\", { ready: [promisableChain, nop] });\n        this.on.ready.subscribe = override(this.on.ready.subscribe, subscribe => {\n            return (subscriber, bSticky) => {\n                Dexie$1.vip(() => {\n                    const state = this._state;\n                    if (state.openComplete) {\n                        if (!state.dbOpenError)\n                            DexiePromise.resolve().then(subscriber);\n                        if (bSticky)\n                            subscribe(subscriber);\n                    }\n                    else if (state.onReadyBeingFired) {\n                        state.onReadyBeingFired.push(subscriber);\n                        if (bSticky)\n                            subscribe(subscriber);\n                    }\n                    else {\n                        subscribe(subscriber);\n                        const db = this;\n                        if (!bSticky)\n                            subscribe(function unsubscribe() {\n                                db.on.ready.unsubscribe(subscriber);\n                                db.on.ready.unsubscribe(unsubscribe);\n                            });\n                    }\n                });\n            };\n        });\n        this.Collection = createCollectionConstructor(this);\n        this.Table = createTableConstructor(this);\n        this.Transaction = createTransactionConstructor(this);\n        this.Version = createVersionConstructor(this);\n        this.WhereClause = createWhereClauseConstructor(this);\n        this.on(\"versionchange\", ev => {\n            if (ev.newVersion > 0)\n                console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`);\n            else\n                console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`);\n            this.close();\n        });\n        this.on(\"blocked\", ev => {\n            if (!ev.newVersion || ev.newVersion < ev.oldVersion)\n                console.warn(`Dexie.delete('${this.name}') was blocked`);\n            else\n                console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${ev.oldVersion / 10}`);\n        });\n        this._maxKey = getMaxKey(options.IDBKeyRange);\n        this._createTransaction = (mode, storeNames, dbschema, parentTransaction) => new this.Transaction(mode, storeNames, dbschema, this._options.chromeTransactionDurability, parentTransaction);\n        this._fireOnBlocked = ev => {\n            this.on(\"blocked\").fire(ev);\n            connections\n                .filter(c => c.name === this.name && c !== this && !c._state.vcFired)\n                .map(c => c.on(\"versionchange\").fire(ev));\n        };\n        this.use(virtualIndexMiddleware);\n        this.use(hooksMiddleware);\n        this.use(observabilityMiddleware);\n        this.use(cacheExistingValuesMiddleware);\n        this.vip = Object.create(this, { _vip: { value: true } });\n        addons.forEach(addon => addon(this));\n    }\n    version(versionNumber) {\n        if (isNaN(versionNumber) || versionNumber < 0.1)\n            throw new exceptions.Type(`Given version is not a positive number`);\n        versionNumber = Math.round(versionNumber * 10) / 10;\n        if (this.idbdb || this._state.isBeingOpened)\n            throw new exceptions.Schema(\"Cannot add version when database is open\");\n        this.verno = Math.max(this.verno, versionNumber);\n        const versions = this._versions;\n        var versionInstance = versions.filter(v => v._cfg.version === versionNumber)[0];\n        if (versionInstance)\n            return versionInstance;\n        versionInstance = new this.Version(versionNumber);\n        versions.push(versionInstance);\n        versions.sort(lowerVersionFirst);\n        versionInstance.stores({});\n        this._state.autoSchema = false;\n        return versionInstance;\n    }\n    _whenReady(fn) {\n        return (this.idbdb && (this._state.openComplete || PSD.letThrough || this._vip)) ? fn() : new DexiePromise((resolve, reject) => {\n            if (this._state.openComplete) {\n                return reject(new exceptions.DatabaseClosed(this._state.dbOpenError));\n            }\n            if (!this._state.isBeingOpened) {\n                if (!this._options.autoOpen) {\n                    reject(new exceptions.DatabaseClosed());\n                    return;\n                }\n                this.open().catch(nop);\n            }\n            this._state.dbReadyPromise.then(resolve, reject);\n        }).then(fn);\n    }\n    use({ stack, create, level, name }) {\n        if (name)\n            this.unuse({ stack, name });\n        const middlewares = this._middlewares[stack] || (this._middlewares[stack] = []);\n        middlewares.push({ stack, create, level: level == null ? 10 : level, name });\n        middlewares.sort((a, b) => a.level - b.level);\n        return this;\n    }\n    unuse({ stack, name, create }) {\n        if (stack && this._middlewares[stack]) {\n            this._middlewares[stack] = this._middlewares[stack].filter(mw => create ? mw.create !== create :\n                name ? mw.name !== name :\n                    false);\n        }\n        return this;\n    }\n    open() {\n        return dexieOpen(this);\n    }\n    _close() {\n        const state = this._state;\n        const idx = connections.indexOf(this);\n        if (idx >= 0)\n            connections.splice(idx, 1);\n        if (this.idbdb) {\n            try {\n                this.idbdb.close();\n            }\n            catch (e) { }\n            this._novip.idbdb = null;\n        }\n        state.dbReadyPromise = new DexiePromise(resolve => {\n            state.dbReadyResolve = resolve;\n        });\n        state.openCanceller = new DexiePromise((_, reject) => {\n            state.cancelOpen = reject;\n        });\n    }\n    close() {\n        this._close();\n        const state = this._state;\n        this._options.autoOpen = false;\n        state.dbOpenError = new exceptions.DatabaseClosed();\n        if (state.isBeingOpened)\n            state.cancelOpen(state.dbOpenError);\n    }\n    delete() {\n        const hasArguments = arguments.length > 0;\n        const state = this._state;\n        return new DexiePromise((resolve, reject) => {\n            const doDelete = () => {\n                this.close();\n                var req = this._deps.indexedDB.deleteDatabase(this.name);\n                req.onsuccess = wrap(() => {\n                    _onDatabaseDeleted(this._deps, this.name);\n                    resolve();\n                });\n                req.onerror = eventRejectHandler(reject);\n                req.onblocked = this._fireOnBlocked;\n            };\n            if (hasArguments)\n                throw new exceptions.InvalidArgument(\"Arguments not allowed in db.delete()\");\n            if (state.isBeingOpened) {\n                state.dbReadyPromise.then(doDelete);\n            }\n            else {\n                doDelete();\n            }\n        });\n    }\n    backendDB() {\n        return this.idbdb;\n    }\n    isOpen() {\n        return this.idbdb !== null;\n    }\n    hasBeenClosed() {\n        const dbOpenError = this._state.dbOpenError;\n        return dbOpenError && (dbOpenError.name === 'DatabaseClosed');\n    }\n    hasFailed() {\n        return this._state.dbOpenError !== null;\n    }\n    dynamicallyOpened() {\n        return this._state.autoSchema;\n    }\n    get tables() {\n        return keys(this._allTables).map(name => this._allTables[name]);\n    }\n    transaction() {\n        const args = extractTransactionArgs.apply(this, arguments);\n        return this._transaction.apply(this, args);\n    }\n    _transaction(mode, tables, scopeFunc) {\n        let parentTransaction = PSD.trans;\n        if (!parentTransaction || parentTransaction.db !== this || mode.indexOf('!') !== -1)\n            parentTransaction = null;\n        const onlyIfCompatible = mode.indexOf('?') !== -1;\n        mode = mode.replace('!', '').replace('?', '');\n        let idbMode, storeNames;\n        try {\n            storeNames = tables.map(table => {\n                var storeName = table instanceof this.Table ? table.name : table;\n                if (typeof storeName !== 'string')\n                    throw new TypeError(\"Invalid table argument to Dexie.transaction(). Only Table or String are allowed\");\n                return storeName;\n            });\n            if (mode == \"r\" || mode === READONLY)\n                idbMode = READONLY;\n            else if (mode == \"rw\" || mode == READWRITE)\n                idbMode = READWRITE;\n            else\n                throw new exceptions.InvalidArgument(\"Invalid transaction mode: \" + mode);\n            if (parentTransaction) {\n                if (parentTransaction.mode === READONLY && idbMode === READWRITE) {\n                    if (onlyIfCompatible) {\n                        parentTransaction = null;\n                    }\n                    else\n                        throw new exceptions.SubTransaction(\"Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY\");\n                }\n                if (parentTransaction) {\n                    storeNames.forEach(storeName => {\n                        if (parentTransaction && parentTransaction.storeNames.indexOf(storeName) === -1) {\n                            if (onlyIfCompatible) {\n                                parentTransaction = null;\n                            }\n                            else\n                                throw new exceptions.SubTransaction(\"Table \" + storeName +\n                                    \" not included in parent transaction.\");\n                        }\n                    });\n                }\n                if (onlyIfCompatible && parentTransaction && !parentTransaction.active) {\n                    parentTransaction = null;\n                }\n            }\n        }\n        catch (e) {\n            return parentTransaction ?\n                parentTransaction._promise(null, (_, reject) => { reject(e); }) :\n                rejection(e);\n        }\n        const enterTransaction = enterTransactionScope.bind(null, this, idbMode, storeNames, parentTransaction, scopeFunc);\n        return (parentTransaction ?\n            parentTransaction._promise(idbMode, enterTransaction, \"lock\") :\n            PSD.trans ?\n                usePSD(PSD.transless, () => this._whenReady(enterTransaction)) :\n                this._whenReady(enterTransaction));\n    }\n    table(tableName) {\n        if (!hasOwn(this._allTables, tableName)) {\n            throw new exceptions.InvalidTable(`Table ${tableName} does not exist`);\n        }\n        return this._allTables[tableName];\n    }\n}\n\nconst symbolObservable = typeof Symbol !== \"undefined\" && \"observable\" in Symbol\n    ? Symbol.observable\n    : \"@@observable\";\nclass Observable {\n    constructor(subscribe) {\n        this._subscribe = subscribe;\n    }\n    subscribe(x, error, complete) {\n        return this._subscribe(!x || typeof x === \"function\" ? { next: x, error, complete } : x);\n    }\n    [symbolObservable]() {\n        return this;\n    }\n}\n\nfunction extendObservabilitySet(target, newSet) {\n    keys(newSet).forEach(part => {\n        const rangeSet = target[part] || (target[part] = new RangeSet());\n        mergeRanges(rangeSet, newSet[part]);\n    });\n    return target;\n}\n\nfunction liveQuery(querier) {\n    return new Observable((observer) => {\n        const scopeFuncIsAsync = isAsyncFunction(querier);\n        function execute(subscr) {\n            if (scopeFuncIsAsync) {\n                incrementExpectedAwaits();\n            }\n            const exec = () => newScope(querier, { subscr, trans: null });\n            const rv = PSD.trans\n                ?\n                    usePSD(PSD.transless, exec)\n                : exec();\n            if (scopeFuncIsAsync) {\n                rv.then(decrementExpectedAwaits, decrementExpectedAwaits);\n            }\n            return rv;\n        }\n        let closed = false;\n        let accumMuts = {};\n        let currentObs = {};\n        const subscription = {\n            get closed() {\n                return closed;\n            },\n            unsubscribe: () => {\n                closed = true;\n                globalEvents.storagemutated.unsubscribe(mutationListener);\n            },\n        };\n        observer.start && observer.start(subscription);\n        let querying = false, startedListening = false;\n        function shouldNotify() {\n            return keys(currentObs).some((key) => accumMuts[key] && rangesOverlap(accumMuts[key], currentObs[key]));\n        }\n        const mutationListener = (parts) => {\n            extendObservabilitySet(accumMuts, parts);\n            if (shouldNotify()) {\n                doQuery();\n            }\n        };\n        const doQuery = () => {\n            if (querying || closed)\n                return;\n            accumMuts = {};\n            const subscr = {};\n            const ret = execute(subscr);\n            if (!startedListening) {\n                globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, mutationListener);\n                startedListening = true;\n            }\n            querying = true;\n            Promise.resolve(ret).then((result) => {\n                querying = false;\n                if (closed)\n                    return;\n                if (shouldNotify()) {\n                    doQuery();\n                }\n                else {\n                    accumMuts = {};\n                    currentObs = subscr;\n                    observer.next && observer.next(result);\n                }\n            }, (err) => {\n                querying = false;\n                observer.error && observer.error(err);\n                subscription.unsubscribe();\n            });\n        };\n        doQuery();\n        return subscription;\n    });\n}\n\nlet domDeps;\ntry {\n    domDeps = {\n        indexedDB: _global.indexedDB || _global.mozIndexedDB || _global.webkitIndexedDB || _global.msIndexedDB,\n        IDBKeyRange: _global.IDBKeyRange || _global.webkitIDBKeyRange\n    };\n}\ncatch (e) {\n    domDeps = { indexedDB: null, IDBKeyRange: null };\n}\n\nconst Dexie = Dexie$1;\nprops(Dexie, {\n    ...fullNameExceptions,\n    delete(databaseName) {\n        const db = new Dexie(databaseName, { addons: [] });\n        return db.delete();\n    },\n    exists(name) {\n        return new Dexie(name, { addons: [] }).open().then(db => {\n            db.close();\n            return true;\n        }).catch('NoSuchDatabaseError', () => false);\n    },\n    getDatabaseNames(cb) {\n        try {\n            return getDatabaseNames(Dexie.dependencies).then(cb);\n        }\n        catch (_a) {\n            return rejection(new exceptions.MissingAPI());\n        }\n    },\n    defineClass() {\n        function Class(content) {\n            extend(this, content);\n        }\n        return Class;\n    },\n    ignoreTransaction(scopeFunc) {\n        return PSD.trans ?\n            usePSD(PSD.transless, scopeFunc) :\n            scopeFunc();\n    },\n    vip,\n    async: function (generatorFn) {\n        return function () {\n            try {\n                var rv = awaitIterator(generatorFn.apply(this, arguments));\n                if (!rv || typeof rv.then !== 'function')\n                    return DexiePromise.resolve(rv);\n                return rv;\n            }\n            catch (e) {\n                return rejection(e);\n            }\n        };\n    },\n    spawn: function (generatorFn, args, thiz) {\n        try {\n            var rv = awaitIterator(generatorFn.apply(thiz, args || []));\n            if (!rv || typeof rv.then !== 'function')\n                return DexiePromise.resolve(rv);\n            return rv;\n        }\n        catch (e) {\n            return rejection(e);\n        }\n    },\n    currentTransaction: {\n        get: () => PSD.trans || null\n    },\n    waitFor: function (promiseOrFunction, optionalTimeout) {\n        const promise = DexiePromise.resolve(typeof promiseOrFunction === 'function' ?\n            Dexie.ignoreTransaction(promiseOrFunction) :\n            promiseOrFunction)\n            .timeout(optionalTimeout || 60000);\n        return PSD.trans ?\n            PSD.trans.waitFor(promise) :\n            promise;\n    },\n    Promise: DexiePromise,\n    debug: {\n        get: () => debug,\n        set: value => {\n            setDebug(value, value === 'dexie' ? () => true : dexieStackFrameFilter);\n        }\n    },\n    derive: derive,\n    extend: extend,\n    props: props,\n    override: override,\n    Events: Events,\n    on: globalEvents,\n    liveQuery,\n    extendObservabilitySet,\n    getByKeyPath: getByKeyPath,\n    setByKeyPath: setByKeyPath,\n    delByKeyPath: delByKeyPath,\n    shallowClone: shallowClone,\n    deepClone: deepClone,\n    getObjectDiff: getObjectDiff,\n    cmp,\n    asap: asap$1,\n    minKey: minKey,\n    addons: [],\n    connections: connections,\n    errnames: errnames,\n    dependencies: domDeps,\n    semVer: DEXIE_VERSION,\n    version: DEXIE_VERSION.split('.')\n        .map(n => parseInt(n))\n        .reduce((p, c, i) => p + (c / Math.pow(10, i * 2))),\n});\nDexie.maxKey = getMaxKey(Dexie.dependencies.IDBKeyRange);\n\nif (typeof dispatchEvent !== 'undefined' && typeof addEventListener !== 'undefined') {\n    globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, updatedParts => {\n        if (!propagatingLocally) {\n            let event;\n            if (isIEOrEdge) {\n                event = document.createEvent('CustomEvent');\n                event.initCustomEvent(STORAGE_MUTATED_DOM_EVENT_NAME, true, true, updatedParts);\n            }\n            else {\n                event = new CustomEvent(STORAGE_MUTATED_DOM_EVENT_NAME, {\n                    detail: updatedParts\n                });\n            }\n            propagatingLocally = true;\n            dispatchEvent(event);\n            propagatingLocally = false;\n        }\n    });\n    addEventListener(STORAGE_MUTATED_DOM_EVENT_NAME, ({ detail }) => {\n        if (!propagatingLocally) {\n            propagateLocally(detail);\n        }\n    });\n}\nfunction propagateLocally(updateParts) {\n    let wasMe = propagatingLocally;\n    try {\n        propagatingLocally = true;\n        globalEvents.storagemutated.fire(updateParts);\n    }\n    finally {\n        propagatingLocally = wasMe;\n    }\n}\nlet propagatingLocally = false;\n\nif (typeof BroadcastChannel !== 'undefined') {\n    const bc = new BroadcastChannel(STORAGE_MUTATED_DOM_EVENT_NAME);\n    globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, (changedParts) => {\n        if (!propagatingLocally) {\n            bc.postMessage(changedParts);\n        }\n    });\n    bc.onmessage = (ev) => {\n        if (ev.data)\n            propagateLocally(ev.data);\n    };\n}\nelse if (typeof self !== 'undefined' && typeof navigator !== 'undefined') {\n    globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, (changedParts) => {\n        try {\n            if (!propagatingLocally) {\n                if (typeof localStorage !== 'undefined') {\n                    localStorage.setItem(STORAGE_MUTATED_DOM_EVENT_NAME, JSON.stringify({\n                        trig: Math.random(),\n                        changedParts,\n                    }));\n                }\n                if (typeof self['clients'] === 'object') {\n                    [...self['clients'].matchAll({ includeUncontrolled: true })].forEach((client) => client.postMessage({\n                        type: STORAGE_MUTATED_DOM_EVENT_NAME,\n                        changedParts,\n                    }));\n                }\n            }\n        }\n        catch (_a) { }\n    });\n    if (typeof addEventListener !== 'undefined') {\n        addEventListener('storage', (ev) => {\n            if (ev.key === STORAGE_MUTATED_DOM_EVENT_NAME) {\n                const data = JSON.parse(ev.newValue);\n                if (data)\n                    propagateLocally(data.changedParts);\n            }\n        });\n    }\n    const swContainer = self.document && navigator.serviceWorker;\n    if (swContainer) {\n        swContainer.addEventListener('message', propagateMessageLocally);\n    }\n}\nfunction propagateMessageLocally({ data }) {\n    if (data && data.type === STORAGE_MUTATED_DOM_EVENT_NAME) {\n        propagateLocally(data.changedParts);\n    }\n}\n\nDexiePromise.rejectionMapper = mapError;\nsetDebug(debug, dexieStackFrameFilter);\n\nexport { Dexie$1 as Dexie, RangeSet, Dexie$1 as default, liveQuery, mergeRanges, rangesOverlap };\n//# sourceMappingURL=dexie.mjs.map\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import \"./lib/live2d.min\";\r\n\r\nimport { L2DTargetPoint, L2DViewMatrix, L2DMatrix44 } from \"./lib/Live2DFramework\";\r\n\r\nimport {LAppLive2DManager} from \"./LAppLive2DManager_v2\"\r\n\r\nimport * as LAppDefine from \"./lappdefine\"\r\n\r\nimport {MatrixStack} from \"./lib/MatrixStack\"\r\n\r\nimport {LAppDelegate} from './lappdelegate'\r\n\r\nimport {PlatformManager} from \"./PlatformManager\"\r\nimport{ClearDb} from './DbCache';\r\n\r\nconst platform = window.navigator.platform.toLowerCase();\r\n\r\nconst live2DMgr = new LAppLive2DManager();\r\n\r\nlet isDrawStart = false;\r\n\r\nlet gl = null;\r\n\r\nlet canvas = null;\r\n\r\nlet dragMgr = null;\r\n\r\nlet viewMatrix = null;\r\n\r\nlet projMatrix = null;\r\n\r\nlet deviceToScreen = null;\r\n\r\nlet lastMouseX = 0;\r\n\r\nlet lastMouseY = 0;\r\n\r\nlet drag = false;\r\n\r\nlet head_pos = 0.5;\r\n\r\nlet zoomv2 = 1.0;\r\n\r\nlet modelX = 0;\r\nlet modelY = 0;\r\n\r\nlet hit_Area_List = {};\r\n\r\n\r\n/**\r\n * 这是V2版本的处理 V3版本在lappdelegate.ts中进行\r\n * @param {*} canvasId \r\n */\r\nfunction initL2dCanvas(canvasId) {\r\n  canvas = document.getElementById(canvasId);\r\n  if (canvas.addEventListener) {\r\n    //canvas.addEventListener(\"mousewheel\", mouseEvent);\r\n    window.addEventListener(\"click\", mouseEvent);\r\n    window.addEventListener(\"mousedown\", mouseEvent);\r\n    window.addEventListener(\"mousemove\", mouseEvent);\r\n    window.addEventListener(\"mouseup\", mouseEvent);\r\n    document.addEventListener(\"mouseout\", mouseEvent);\r\n    //canvas.addEventListener(\"contextmenu\", mouseEvent);\r\n    window.addEventListener(\"touchstart\", touchEvent);\r\n    window.addEventListener(\"touchend\", touchEvent);\r\n    window.addEventListener(\"touchmove\", touchEvent);\r\n  }\r\n}\r\n\r\nfunction initv2(modelurl) {\r\n  let width = canvas.width;\r\n  let height = canvas.height;\r\n\r\n  dragMgr = new L2DTargetPoint();\r\n\r\n  let ratio = height / width;\r\n  let left = LAppDefine.ViewLogicalLeft;\r\n  let right = LAppDefine.ViewLogicalRight;\r\n  let bottom = -ratio;\r\n  let top = ratio;\r\n\r\n  window.Live2D.captureFrame = false;\r\n\r\n  viewMatrix = new L2DViewMatrix();\r\n\r\n\r\n  viewMatrix.setScreenRect(left, right, bottom, top);\r\n\r\n  viewMatrix.setMaxScreenRect(LAppDefine.ViewLogicalMaxLeft,\r\n    LAppDefine.ViewLogicalMaxRight,\r\n    LAppDefine.ViewLogicalMaxBottom,\r\n    LAppDefine.ViewLogicalMaxTop);\r\n\r\n  viewMatrix.setMaxScale(LAppDefine.ViewMaxScale);\r\n  viewMatrix.setMinScale(LAppDefine.ViewMinScale);\r\n\r\n  //此处控制渲染人物放大倍数和比例\r\n  projMatrix = new L2DMatrix44();\r\n  projMatrix.translate(modelX / 100, modelY / 100);\r\n  projMatrix.multScale(zoomv2, (zoomv2 * width) / height);\r\n\r\n  deviceToScreen = new L2DMatrix44();\r\n  deviceToScreen.multTranslate(-width / 2.0, -height / 2.0);\r\n  deviceToScreen.multScale(2 / width, -2 / width);\r\n\r\n  gl = getWebGLContext();\r\n  LAppDefine.setContext(gl);\r\n  if (!gl) {\r\n    console.error(\"Failed to create WebGL context.\");\r\n    if(!!window.WebGLRenderingContext){\r\n      console.error(\"Your browser don't support WebGL, check https://get.webgl.org/ for futher information.\");\r\n    }\r\n    return;\r\n  }\r\n  window.Live2D.setGL(gl);\r\n  gl.clearColor(0.0, 0.0, 0.0, 0.0);\r\n  changeModel(modelurl);\r\n  startDraw();\r\n}\r\n\r\n\r\n\r\nfunction startDraw() {\r\n  if (!isDrawStart) {\r\n    isDrawStart = true;\r\n    (function tick() {\r\n      draw();\r\n      let requestAnimationFrame =\r\n        window.requestAnimationFrame ||\r\n        window.mozRequestAnimationFrame ||\r\n        window.webkitRequestAnimationFrame ||\r\n        window.msRequestAnimationFrame;\r\n        //截图\r\n        if (window.Live2D.captureFrame) {\r\n            window.Live2D.captureFrame = false;\r\n            var link = document.createElement('a');\r\n            document.body.appendChild(link);\r\n            link.setAttribute(\"type\", \"hidden\");\r\n            link.href = canvas.toDataURL();\r\n            link.download = window.Live2D.captureName || 'live2d.png';\r\n            link.click();\r\n        }\r\n\r\n      requestAnimationFrame(tick, canvas);\r\n    })();\r\n  }\r\n}\r\n\r\nfunction draw()\r\n{\r\n    let matrix = new MatrixStack();\r\n    matrix.reset();\r\n    matrix.loadIdentity();\r\n\r\n    dragMgr.update(); \r\n    live2DMgr.setDrag(dragMgr.getX(), dragMgr.getY());\r\n    \r\n    gl.clear(gl.COLOR_BUFFER_BIT);\r\n    \r\n    matrix.multMatrix(projMatrix.getArray());\r\n    matrix.multMatrix(viewMatrix.getArray());\r\n    matrix.push();\r\n\r\n    for (let i = 0; i < live2DMgr.numModels(); i++)\r\n    {\r\n        let model = live2DMgr.getModel(i);\r\n\r\n        if(model == null) return;\r\n        \r\n        if (model.initialized && !model.updating)\r\n        {\r\n            model.update();\r\n            model.draw(matrix);\r\n        }\r\n    }\r\n\r\n    matrix.pop();\r\n}\r\n\r\nfunction changeModel(modelurl)\r\n{\r\n    live2DMgr.reloadFlg = true;\r\n    live2DMgr.count++;\r\n    live2DMgr.changeModel(gl,modelurl);\r\n}\r\n\r\nfunction modelScaling(scale)\r\n{\r\n    let isMaxScale = viewMatrix.isMaxScale();\r\n    let isMinScale = viewMatrix.isMinScale();\r\n    \r\n    viewMatrix.adjustScale(0, 0, scale);\r\n\r\n    if (!isMaxScale)\r\n    {\r\n        if (viewMatrix.isMaxScale())\r\n        {\r\n            live2DMgr.maxScaleEvent();\r\n        }\r\n    }\r\n    \r\n    if (!isMinScale)\r\n    {\r\n        if (viewMatrix.isMinScale())\r\n        {\r\n            live2DMgr.minScaleEvent();\r\n        }\r\n    }\r\n}\r\n\r\n\r\nfunction dot(A,B)\r\n{\r\n    return A.x * B.x + A.y * B.y;\r\n}\r\n\r\nfunction normalize(x,y)\r\n{\r\n    let length = Math.sqrt(x * x + y * y)\r\n    return {\r\n        x: x / length,\r\n        y: y / length\r\n    }\r\n}\r\n\r\nfunction transformRect(center, transform, rect)\r\n{\r\n    if (transform.x < rect.left + rect.width && transform.y < rect.top + rect.height &&\r\n        transform.x > rect.left && transform.y > rect.top) return transform;\r\n    let Len_X = center.x - transform.x;\r\n    let Len_Y = center.y - transform.y;\r\n\r\n    function angle(Len_X, Len_Y)\r\n    {\r\n        return Math.acos(dot({\r\n            x: 0,\r\n            y: 1\r\n        }, normalize(Len_X, Len_Y))) * 180 / Math.PI\r\n    }\r\n\r\n    let angleTarget = angle(Len_X, Len_Y);\r\n    if (transform.x < center.x) angleTarget = 360 - angleTarget;\r\n    let angleLeftTop = 360 - angle(rect.left - center.x, (rect.top - center.y) * -1);\r\n    let angleLeftBottom = 360 - angle(rect.left - center.x, (rect.top + rect.height - center.y) * -1);\r\n    let angleRightTop = angle(rect.left + rect.width - center.x, (rect.top - center.y) * -1);\r\n    let angleRightBottom = angle(rect.left + rect.width - center.x, (rect.top + rect.height - center.y) * -1);\r\n    let scale = Len_Y / Len_X;\r\n    let res = {};\r\n\r\n    if (angleTarget < angleRightTop) {\r\n        let y3 = rect.top - center.y;\r\n        let x3 = y3 / scale;\r\n        res = {\r\n            y: center.y + y3,\r\n            x: center.x + x3\r\n        }\r\n    } else if(angleTarget < angleRightBottom) {\r\n        let x3 = rect.left + rect.width - center.x;\r\n        let y3 = x3 * scale;\r\n        res = {\r\n            y: center.y + y3,\r\n            x: center.x + x3\r\n        }\r\n    } else if (angleTarget < angleLeftBottom) {\r\n        let y3 = rect.top + rect.height - center.y;\r\n        let x3 = y3 / scale;\r\n        res = {\r\n            y: center.y + y3,\r\n            x: center.x + x3\r\n        }\r\n    } else if (angleTarget < angleLeftTop) {\r\n        let x3 = center.x - rect.left;\r\n        let y3 = x3 * scale;\r\n        res = {\r\n            y: center.y - y3,\r\n            x: center.x - x3\r\n        }\r\n    } else {\r\n        let y3 = rect.top - center.y;\r\n        let x3 = y3 / scale;\r\n        res = {\r\n            y: center.y + y3,\r\n            x: center.x + x3\r\n        }\r\n    }\r\n\r\n    return res;\r\n}\r\n\r\nfunction modelTurnHead(event)\r\n{\r\n    drag = true;\r\n    \r\n    let rect = canvas.getBoundingClientRect();\r\n    \r\n    let sx = transformScreenX(event.clientX - rect.left);\r\n    let sy = transformScreenY(event.clientY - rect.top);\r\n    let target = transformRect({\r\n        x: rect.left + rect.width / 2,\r\n        y: rect.top + rect.height * head_pos\r\n    }, {\r\n        x: event.clientX,\r\n        y: event.clientY\r\n    }, rect)\r\n    let vx = transformViewX(target.x - rect.left);\r\n    let vy = transformViewY(target.y - rect.top);\r\n\r\n    if (LAppDefine.DebugTouchLogEnable)\r\n        console.log(\"onMouseMove device( x:\" + event.clientX + \" y:\" + event.clientY + \" ) view( x:\" + vx + \" y:\" + vy + \")\");\r\n\r\n    lastMouseX = sx;\r\n    lastMouseY = sy;\r\n\r\n    dragMgr.setPoint(vx, vy); \r\n    \r\n    //live2DMgr.tapEvent(vx, vy);\r\n}\r\n\r\nfunction modelTapEvent(event)\r\n{\r\n    drag = true;\r\n    \r\n    let rect = canvas.getBoundingClientRect();\r\n\r\n    let sx = transformScreenX(event.clientX - rect.left);\r\n    let sy = transformScreenY(event.clientY - rect.top);\r\n    let target = transformRect({\r\n        x: rect.left + rect.width / 2,\r\n        y: rect.top + rect.height * head_pos\r\n    }, {\r\n        x: event.clientX,\r\n        y: event.clientY\r\n    }, rect)\r\n    let vx = transformViewX(target.x - rect.left);\r\n    let vy = transformViewY(target.y - rect.top);\r\n\r\n    if (LAppDefine.DebugTouchLogEnable)\r\n        console.log(\"onMouseDown device( x:\" + event.clientX + \" y:\" + event.clientY + \" ) view( x:\" + vx + \" y:\" + vy + \")\");\r\n\r\n    lastMouseX = sx;\r\n    lastMouseY = sy;\r\n\r\n    //dragMgr.setPoint(vx, vy); \r\n    \r\n    live2DMgr.tapEvent(vx, vy);\r\n}\r\n\r\nfunction followPointer(event)\r\n{    \r\n    let rect = canvas.getBoundingClientRect();\r\n\r\n    let sx = transformScreenX(event.clientX - rect.left);\r\n    let sy = transformScreenY(event.clientY - rect.top);\r\n    let target = transformRect({\r\n        x: rect.left + rect.width / 2,\r\n        y: rect.top + rect.height * head_pos\r\n    }, {\r\n        x: event.clientX,\r\n        y: event.clientY\r\n    }, rect)\r\n    let vx = transformViewX(target.x - rect.left);\r\n    let vy = transformViewY(target.y - rect.top);\r\n\r\n    if (LAppDefine.DebugTouchLogEnable)\r\n        console.log(\"onMouseMove device( x:\" + event.clientX + \" y:\" + event.clientY + \" ) view( x:\" + vx + \" y:\" + vy + \")\");\r\n\r\n    if (drag)\r\n    {\r\n        lastMouseX = sx;\r\n        lastMouseY = sy;\r\n        dragMgr.setPoint(vx, vy); \r\n    }\r\n}\r\n\r\nfunction lookFront()\r\n{   \r\n    if (drag)\r\n    {\r\n        drag = false;\r\n    }\r\n    dragMgr.setPoint(0, 0);\r\n}\r\n\r\nfunction sleepy()\r\n{\r\n    if (LAppDefine.DebugLogEnable)\r\n        console.log(\"Set Session Storage.\");\r\n    \r\n    sessionStorage.setItem('Sleepy', '1');\r\n}\r\n\r\nfunction mouseEvent(e)\r\n{\r\n    //e.preventDefault();\r\n    if (e.type == \"mousewheel\") {\r\n        // if (e.clientX < 0 || canvas.clientWidth < e.clientX || \r\n        // e.clientY < 0 || canvas.clientHeight < e.clientY)\r\n        // {\r\n        //     return;\r\n        // }\r\n        // if (e.wheelDelta > 0) modelScaling(1.1); \r\n        // else modelScaling(0.9); \r\n    } else if (e.type == \"mousedown\") {\r\n        //if(\"button\" in e && e.button != 0) return;\r\n        // modelTurnHead(e);\r\n        modelTapEvent(e);\r\n    } else if (e.type == \"mousemove\") {\r\n        var Sleepy = sessionStorage.getItem('Sleepy');\r\n        if(Sleepy === '1') {\r\n            sessionStorage.setItem('Sleepy', '0');\r\n        }\r\n        modelTurnHead(e);\r\n    } else if (e.type == \"mouseup\") {\r\n        if(\"button\" in e && e.button != 0) return;\r\n        // lookFront();\r\n    } else if (e.type == \"mouseout\") {\r\n        if (LAppDefine.DebugLogEnable)\r\n            console.log(\"Mouse out Window.\");\r\n        lookFront();\r\n        var SleepyTimer = sessionStorage.getItem('SleepyTimer');\r\n        window.clearTimeout(SleepyTimer);\r\n\r\n        SleepyTimer = window.setTimeout(sleepy, 50000);\r\n        sessionStorage.setItem('SleepyTimer', SleepyTimer);\r\n    }\r\n}\r\n\r\nfunction touchEvent(e)\r\n{\r\n    var touch = e.touches[0];\r\n    if (e.type == \"touchstart\") {\r\n        if (e.touches.length == 1) modelTurnHead(touch);\r\n        // onClick(touch);\r\n    } else if (e.type == \"touchmove\") {\r\n        followPointer(touch);\r\n    } else if (e.type == \"touchend\") {\r\n        lookFront();\r\n    }\r\n}\r\n\r\nfunction transformViewX(deviceX)\r\n{\r\n    var screenX = deviceToScreen.transformX(deviceX); \r\n    return viewMatrix.invertTransformX(screenX); \r\n}\r\n\r\n\r\nfunction transformViewY(deviceY)\r\n{\r\n    var screenY = deviceToScreen.transformY(deviceY); \r\n    return viewMatrix.invertTransformY(screenY); \r\n}\r\n\r\n\r\nfunction transformScreenX(deviceX)\r\n{\r\n    return deviceToScreen.transformX(deviceX);\r\n}\r\n\r\n\r\nfunction transformScreenY(deviceY)\r\n{\r\n    return deviceToScreen.transformY(deviceY);\r\n}\r\n\r\nfunction getWebGLContext()\r\n{\r\n    var NAMES = [ \"webgl\" , \"experimental-webgl\" , \"webkit-3d\" , \"moz-webgl\"];\r\n    for( var i = 0; i < NAMES.length; i++ ){\r\n        try{\r\n            var ctx = canvas.getContext(NAMES[i], {premultipliedAlpha : true});\r\n            if(ctx) return ctx;\r\n        }\r\n        catch(e){}\r\n    }\r\n    return null;\r\n};\r\n\r\n/**\r\n * 程序入口\r\n * @param {画板的ID} id \r\n * @param {模型URL 用于获取JSON} modelurl \r\n * @param {头部动作参数} headPos \r\n * @param {缩放比例} zoom \r\n * @param {V3版本触碰区域} hitAreaList \r\n * @param {V4SDK的异步调用} sdkUrl \r\n */\r\nfunction loadlive2d(\r\n        canvasId,\r\n        modelurl,\r\n        settings\r\n    ){\r\n    head_pos = typeof settings.headPos === 'undefined' ? 0.5 : settings.headPos;\r\n    //console.log(userName);\r\n    hit_Area_List = settings.defineHitAreaName;\r\n    let pm = new PlatformManager();\r\n    pm.loadString(modelurl).then((response)=>{\r\n        let jsonStr = JSON.parse(response);\r\n        let ver = Number(jsonStr.Version | jsonStr.version);\r\n        console.log(ver)\r\n        if(ver === 3){\r\n            loadlive2dv3(canvasId,modelurl,settings);\r\n        }else{\r\n            loadlive2dv2(canvasId,modelurl,settings);\r\n        }\r\n    });\r\n}\r\n\r\nfunction loadlive2dv2(canvasId,modelurl,settings) {\r\n    zoomv2 = settings.modelPoint.zoom;\r\n    modelX = settings.modelPoint.x;\r\n    modelY = settings.modelPoint.y;\r\n    initL2dCanvas(canvasId);\r\n    initv2(modelurl);\r\n}\r\n\r\nexport function loadlive2dv3(canvasId,modelurl,settings){\r\n    jQuery.ajax({\r\n        url : settings.sdkUrl,\r\n        dataType : 'script',\r\n        cache : true\r\n    }).done(function(){\r\n        LAppDelegate.getInstance()._hitAreaList = settings.defineHitAreaName;\r\n        LAppDelegate.getInstance()._zoom = settings.modelPoint.zoom;\r\n        LAppDelegate.getInstance()._head_pos = head_pos;\r\n        LAppDelegate.getInstance()._modelX = settings.modelPoint.x;\r\n        LAppDelegate.getInstance()._modelY = settings.modelPoint.y;\r\n        if(!LAppDelegate.getInstance().initialize(canvasId,modelurl)){\r\n          return;\r\n        }\r\n        LAppDelegate.getInstance().run();\r\n    });\r\n}\r\n\r\n/**\r\n * 截停动画帧，并生成截图\r\n * 不用增加v3判断，应为他们不可能互相穿插使用\r\n * @param {截图名称} captureName \r\n * @param {是否点击} captureFrame \r\n */\r\nexport function screenshot(captureName,captureFrame){\r\n    // v3方法\r\n    //let lagate = new LAppDelegate();\r\n    LAppDelegate.getInstance()._captureName = captureName;\r\n    LAppDelegate.getInstance()._captureFrame = captureFrame;\r\n    \r\n    // v2方法\r\n    window.Live2D.captureFrame = captureFrame;\r\n    window.Live2D.captureName = captureName;\r\n}\r\n\r\nexport function clearCache(){\r\n    ClearDb();\r\n}\r\n\r\nwindow.screenshot = screenshot;\r\nwindow.loadlive2d = loadlive2d;\r\nwindow.loadlive2dv3 = loadlive2dv3;\r\nwindow.clearCache = clearCache;\r\n"],"names":["L2DBaseModel","this","live2DModel","modelMatrix","eyeBlink","physics","pose","debugMode","initialized","updating","alpha","accAlpha","lipSync","lipSyncValue","accelX","accelY","accelZ","dragX","dragY","startTimeMSec","mainMotionManager","L2DMotionManager","expressionManager","motions","expressions","isTexLoaded","texCounter","L2DExpressionMotion","AMotion","prototype","constructor","call","paramList","Array","L2DExpressionParam","id","type","value","L2DEyeBlink","nextBlinkTime","stateStartTime","blinkIntervalMsec","eyeState","EYE_STATE","STATE_FIRST","closingMotionMsec","closedMotionMsec","openingMotionMsec","closeIfZero","eyeID_L","eyeID_R","getModelMatrix","setAlpha","a","getAlpha","isInitialized","setInitialized","v","isUpdating","setUpdating","getLive2DModel","setLipSync","setLipSyncValue","setAccel","x","y","z","setDrag","getMainMotionManager","getExpressionManager","loadModelData","path","callback","pm","Live2DFramework","getPlatformManager","log","thisRef","loadLive2DModel","l2dModel","saveParam","Live2D","getError","L2DModelMatrix","getCanvasWidth","getCanvasHeight","setWidth","setCenterPosition","console","error","loadTexture","no","loadMotion","name","motion","loadBytes","then","buf","Live2DMotion","loadExpression","loadJson","loadPose","L2DPose","load","e","warn","loadPhysics","L2DPhysics","hitTestSimple","drawID","testX","testY","drawIndex","getDrawDataIndex","points","getTransformedPoints","left","right","top","bottom","j","length","tx","invertTransformX","ty","invertTransformY","hitTestSimpleCustom","err","EXPRESSION_DEFAULT","TYPE_SET","TYPE_ADD","TYPE_MULT","ret","json","jsonParseFromBytes","setFadeIn","parseInt","fade_in","setFadeOut","fade_out","params","paramNum","i","param","paramID","toString","parseFloat","val","calcTypeInt","calc","defaultValue","def","item","push","updateParamExe","model","timeMSec","weight","motionQueueEnt","addToParamFloat","multParamFloat","setParamFloat","calcNextBlink","UtSystem","getUserTimeMSec","Math","random","setInterval","setEyeMotion","updateParam","eyeParamValue","time","t","STATE_CLOSING","STATE_CLOSED","STATE_OPENING","STATE_INTERVAL","L2DMatrix44","tr","Float32Array","identity","w","h","width","height","MotionQueueManager","currentPriority","reservePriority","super","physicsList","lastTime","lastModel","partsGroups","L2DPartsParam","paramIndex","partsIndex","link","L2DTargetPoint","EPSILON","faceTargetX","faceTargetY","faceX","faceY","faceVX","faceVY","lastTimeSec","L2DViewMatrix","screenLeft","screenRight","screenTop","screenBottom","maxLeft","maxRight","maxTop","maxBottom","max","Number","MAX_VALUE","min","mul","b","dst","k","c","getArray","getCopyMatrix","setMatrix","getScaleX","getScaleY","transformX","src","transformY","multTranslate","shiftX","shiftY","tr1","translate","translateX","translateY","multScale","scaleX","scaleY","scale","setPosition","setY","setX","centerX","centerY","setHeight","getCurrentPriority","getReservePriority","reserveMotion","priority","setReservePriority","updated","isFinished","startMotionPrio","startMotion","physics_hair","PhysicsHair","setup","resist","regist","mass","srcList","srcNum","Src","SRC_TO_X","typeStr","ptype","SRC_TO_Y","SRC_TO_G_ANGLE","UtDebug","addSrcParam","targetList","targets","targetNum","target","Target","TARGET_FROM_ANGLE","TARGET_FROM_ANGLE_V","addTargetParam","update","poseListInfo","parts_visible","poseNum","i_pose","idListInfo","group","idNum","partsGroup","i_group","partsInfo","parts","linkListInfo","linkNum","i_link","linkParts","initParam","curTime","deltaTimeSec","normalizePartsOpacityGroup","copyOpacityOtherParts","initIndex","getParamFloat","setPartsOpacity","visibleParts","visibleOpacity","phi","getPartsOpacity","a1","opacity","partsParam","getParamIndex","getPartsDataIndex","PartsDataID","getID","FRAME_RATE","setPoint","getX","getY","MAX_V","curTimeSec","deltaTimeWeight","MAX_A","dx","dy","abs","d","sqrt","vy","ax","ay","max_v","cur_v","getMaxScale","getMinScale","setMaxScale","setMinScale","isMaxScale","isMinScale","adjustTranslate","adjustScale","cx","cy","targetScale","tr2","tr3","setScreenRect","setMaxScreenRect","getScreenLeft","getScreenRight","getScreenBottom","getScreenTop","getMaxLeft","getMaxRight","getMaxBottom","getMaxTop","platformManager","setPlatformManager","module","exports","aa","_$MT","_$5S","_$NP","_$42","W","aJ","clipContextList","glcontext","gl","dp_webgl","curFrameNo","firstError_clipInNotUpdate","colorBuffer","isInitGLFBFunc","tmpBoundsOnModel","av","Q","glContext","frameBuffers","getMaskRenderTexture","tmpModelToViewMatrix","ac","tmpMatrix2","tmpMatrixForMask","tmpMatrixForDraw","CHANNEL_COLORS","aI","o","r","g","aH","setChannelFlagAsColor","U","aK","clipIDList","clippingMaskDrawIndexList","clippedDrawContextList","isUsing","layoutChannelNo","layoutBounds","allClippedDrawRect","matrixForMask","matrixForDraw","owner","R","_$gP","drawDataIndex","I","color","ah","_$dP","_$eo","_$V0","_$a0","q","af","_$r","_$0S","F","ak","_$vo","_$F2","_$ao","_$1S","u","p1","N","p2","_$Fo","_$Db","_$L2","_$M2","_$ks","_$9b","_$iP","_$iT","_$lL","_$qP","_$p","vx","fx","fy","_$s0","_$70","_$7L","_$HL","at","_$wL","_$tL","aF","_$YP","X","_$fL","_$gL","_$B0","_$z0","_$qT","reflectX","reflectY","_$0s","_$4s","_$62","aQ","aU","ArrayBuffer","DataView","J","aN","aS","K","aM","_$ST","_$gr","_$T7","aL","_$nP","_$s7","_$9T","aT","_$KS","aP","getModelContext","setDrawParam","getDrawParam","init","aO","_$Rb","getModelImpl","_$zP","arguments","loadParam","_$Rs","_$li","_$Ds","_$K2","draw","_$s2","_$P7","aR","a0","aY","aW","aV","aZ","Z","getDrawData","_$C2","ag","getIndexArray","_$aS","getType","_$wb","CHANNEL_COUNT","RENDER_TEXTURE_USE_MIPMAP","NOT_USED_FRAME","_$L7","splice","releaseShader","deleteFramebuffer","framebuffer","getClipIDList","findSameClip","getDrawDataID","addClippedDrawData","clipBufPre_clipContext","createFramebuffer","glno","setupClip","calcClippedDrawTotalBounds","getParameter","FRAMEBUFFER_BINDING","canvas","viewport","clippingMaskBufferSize","setupLayoutBounds","bindFramebuffer","FRAMEBUFFER","clearColor","clear","COLOR_BUFFER_BIT","_$jL","expand","m","aX","setClipBufPre_clipContextForMask","getColorBuffer","a6","_$Ri","a5","_$yo","a4","a3","aw","_$i2","_$No","a2","apply","_$JT","_$pT","getFadeOut","_$4T","_$mT","getDurationMSec","getLoopDurationMSec","_$AT","_$9L","P","_$z2","_$bs","_$Do","A","_$r2","_$8s","_$fT","Object","start","getSystemTimeMSec","dump","end","_$Ji","_$dL","_$KL","_$nr","stack","_$8P","_$6P","_$EL","_$5T","_$tP","_$27","_$3s","an","_$F0","_$6L","_$6S","_$Xr","_$E2","_$Yb","_$xT","getPhysicsPoint1","getPhysicsPoint2","_$qr","_$pr","_$5r","_$Cs","atan2","PI","_$oP","_$oo","_$YS","cos","sin","aC","_$bS","_$_T","getFormatVersion","LIVE2D_FORMAT_VERSION_V2_10_SDK2","_$po","_$e","ad","aG","ae","_$dr","_$GS","_$qb","_$Lb","_$mS","clipID","_$Eb","_$ps","_$lT","_$C0","_$tT","_$WL","culling","matrix4x4","premultipliedAlpha","anisotropy","clippingProcess","CLIPPING_PROCESS_NONE","clipBufPre_clipContextMask","clipBufPre_clipContextDraw","_$ho","blendMode","L2D_COLOR_BLEND_MODE_MULT","_$kP","_$Ai","aA","_$VP","_$GP","_$8o","_$ds","_$2r","_$O2","_$ri","G","_$Ob","aD","_$7","_$f","_$H","_$g","_$k","_$w","_$hi","STATE_IDENTITY","_$Z","_$pS","Y","_$7r","_$Co","_$D0","_$yT","_$E","loopFadeIn","_$AS","aE","_$P","size","_$4P","_$I0","_$RP","_$QT","_$co","_$qo","_$pb","_$is","_$_2","_$vr","_$Rr","_$Or","_$fs","_$Js","_$3S","_$Bo","_$db","_$8b","_$Hr","_$Ws","_$Vs","_$Er","_$Es","Int16Array","_$Qb","_$ZP","_$1r","_$b0","_$HP","clipManager","ap","ar","_$12","_$bb","_$_L","_$jo","_$iL","_$0L","_$Br","_$Dr","_$Cb","_$mr","az","_$ni","isNaN","contains","_$Z2","bb","bo","bp","_$Q2","_$vs","ba","_$Tr","_$zr","bj","bi","a9","br","a8","bn","bm","bg","bf","bu","bt","bl","bk","be","bc","a7","bh","bs","bd","_$br","bq","_$Vr","bV","bW","bC","bX","bH","bw","_$jT","bT","b3","b2","bP","b1","b0","bM","bL","b8","bN","bZ","b7","bU","bS","b6","b5","bQ","bO","bD","bB","by","bx","bG","bE","bv","bA","bz","bY","bK","b4","bJ","bF","bR","_$HT","_$ur","_$ES","_$8S","_$52","_$R2","_$or","_$Pr","convertClipIDForV2_11","test","split","_$cS","_$Tb","_$MS","_$Nr","_$IS","_$Us","_$Zs","_$7s","_$2b","_$j2","getOpacity","_$zS","getTargetBaseDataID","_$gs","_$32","n","_$2o","preDraw","_$B2","CLIPPING_PROCESS_OVERWRITE_ALPHA","CLIPPING_PROCESS_MULTIPLY_ALPHA","CLIPPING_PROCESS_DRAW","CLIPPING_PROCESS_CLEAR_ALPHA","getChannelFlagAsColor","_$ZT","_$Uo","setBaseColor","_$WP","_$IT","setPremultipliedAlpha","isPremultipliedAlpha","setAnisotropy","getAnisotropy","getClippingProcess","setClippingProcess","getClipBufPre_clipContextMask","setClipBufPre_clipContextForDraw","getClipBufPre_clipContextDraw","_$c2","_$_b","readV2_opacity","interpolateOpacity","setInterpolatedOpacity","_$nb","_$a2","getBaseDataID","_$W2","_$CS","_$Mo","_$XP","getTimeMSec","setUserTimeMSec","updateUserTimeMSec","Date","getTime","_$Q","_$Pb","getParamID","_$yP","_$N2","_$d2","_$t2","_$Lr","_$wr","_$SL","_$AL","startsWith","getChar","charAt","String","fromCharCode","getUint8","createString","Uint16Array","_$LS","_$Ur","_$WS","_$v2","_$Xb","Exception","_$J","_$3T","_$h2","_$J2","getParamCount","_$zs","mult","mult_safe","mult_fast","rotateX","fcos","_$9","rotateY","rotateZ","_$kS","_$hb","_$gb","_$fo","_$go","transform","_$RT","_$so","_$CT","_$cs","_$ar","_$D2","_$1T","_$hs","_$xs","_$us","_$qs","_$Ys","_$ws","_$Ns","_$Fr","_$BL","_$r0","_$aL","isLoopFadeIn","setLoopFadeIn","add","_$Ms","_$Qs","_$do","_$Ls","_$FT","_$Ss","_$o7","_$S7","_$77","LIVE2D_FORMAT_VERSION_V2_11_SDK2_1","_$Is","_$h0","_$4L","_$7P","_$uT","_$9o","E","ab","f","s","aq","_$_0","_$V2","_$W0","_$jr","_$ZS","_$tr","_$lr","release","getBaseData","_$l2","_$IP","getBaseDataIndex","_$1s","_$02","getDefaultValue","getMinValue","getMaxValue","_$u2","floor","_$sT","_$H7","_$VS","_$BS","_$UT","_$Zo","getParamMax","getParamMin","_$p2","_$q2","_$Bb","_$5s","_$GT","_$0T","_$5","exists","_$ls","_$3b","Int8Array","_$Xs","_$kb","read","_$C","_$js","write","_$TS","close","flush","_$T2","_$10","_$uo","_$QS","_$7T","_$sb","Int32Array","_$As","_$U2","_$NT","_$9r","_$vS","_$no","_$vb","_$Y0","al","B","_$8r","_$Yr","_$Wr","_$NL","_$zo","ao","_$o2","_$rr","_$eP","p","_$o","_$A","_$Eo","H","_$Cr","_$hr","visible","_$g0","aj","_$e0","_$4S","au","context","_$6r","_$xP","_$3r","_$uP","_$Qo","cacheImages","_$TT","_$LT","_$FS","_$JS","totalScale","totalOpacity","_$ib","_$LP","_$d0","_$Yo","_$JP","_$5P","_$BP","_$Qi","_$6s","_$ms","gl_cacheImage","instanceNo","aB","l","drawParamWebGL","C","setGL","getGL","V","_$eb","M","_$w0","_$sr","_$Gs","am","textures","firstDraw","anisotropyExt","maxAnisotropy","_$Gr","vertShader","fragShader","vertShaderOff","fragShaderOff","T","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","DYNAMIC_DRAW","L","ELEMENT_ARRAY_BUFFER","_$R0","buffer","_$3i","_$hL","_$v0","_$S2","_$Ko","_$T","_$F","_$cr","_$yL","put","_$oT","_$mb","_$Hs","_$as","setTransform","EXPAND_W","drawElements","Error","_$Sr","setTexture","_$nS","_$Xo","_$io","_$0o","_$Lo","_$To","_$Po","_$gT","_$Ib","pow","_$hS","_$Jr","_$92","_$NS","getTotalScale","setTotalScale_notForClient","getTotalOpacity","setTotalOpacity","getInterpolatedOpacity","_$os","_$Sb","_$1b","getDrawDataList","_$kr","_$xo","loadModel","_$to","_$er","_$PL","_$nL","_$_o","MTN_PREFIX_FADEIN","MTN_PREFIX_FADEOUT","byteLength","charCodeAt","_$S0","_$U0","_$VT","transformPoints_sdk2","System","printf","transformPoints_sdk1","_$ts","_$8L","isVisible","_$6o","_$3o","_$uL","_$KP","_$ET","_$ob","getPartsID","_$MP","_$Ks","_$50","_$Ti","_$Pi","_$B","_$lP","_$bL","save","beginPath","_$Li","clip","_$ei","restore","globalAlpha","_$PS","ceil","rotate","shear","setContext","IGNORE_EXPAND","USE_CACHED_POLYGON_IMAGE","createCanvas","DEBUG_DATA","LDGL_CANVAS_MB","getContext","drawImage","cacheCanvas","cacheContext","IGNORE_CLIP","USE_ADJUST_TRANSLATION","expandClip","clipWithTransform","_$P2","moveTo","lineTo","document","createElement","setAttribute","dumpValues","toFixed","getPartsIndex","_$x2","_$2s","_$Kr","_$sP","_$cb","_$Ts","_$fb","L2D_DEFORMER_EXTEND","_$Wb","_$yr","L2D_NO_ERROR","_$i7","_$9s","_$es","_$r7","_$07","_$b7","L2D_COLOR_BLEND_MODE_ADD","L2D_COLOR_BLEND_MODE_INTERPOLATE","_$6b","_$cT","fTexture","USE_CANVAS_TRANSFORM","PROFILE_IOS_SPEED","PROFILE_NAME","PROFILE_IOS_QUALITY","PROFILE_IOS_DEFAULT","PROFILE_ANDROID","PROFILE_DESKTOP","initProfile","isIOS","setupProfile","isAndroid","alert","getVersionStr","getVersionNo","dispose","setClippingMaskBufferSize","getClippingMaskBufferSize","deleteBuffer","PI_F","_$fr","_$Os","_$ns","_$_s","_$_S","getTextureNo","_$ZL","_$H2","getNumPoints","_$Hb","baseOpacity","_$72","_$tb","_$qS","stopAllMotions","_$Zr","_$Bs","concatenate","_$eT","initShader","getExtension","MAX_TEXTURE_MAX_ANISOTROPY_EXT","disable","SCISSOR_TEST","STENCIL_TEST","DEPTH_TEST","frontFace","CW","enable","BLEND","colorMask","CCW","useProgram","shaderProgram","enableVertexAttribArray","a_position_Loc","vertexAttribPointer","FLOAT","activeTexture","TEXTURE1","bindTexture","TEXTURE_2D","uniform1i","s_texture0_Loc","a_texCoord_Loc","uniformMatrix4fv","u_matrix_Loc","uniform4f","u_channelFlag","u_baseColor_Loc","u_maskFlag_Loc","shaderProgramOff","a_position_Loc_Off","s_texture0_Loc_Off","a_texCoord_Loc_Off","u_clipMatrix_Loc_Off","u_matrix_Loc_Off","TEXTURE2","s_texture1_Loc_Off","u_channelFlag_Loc_Off","u_baseColor_Loc_Off","CULL_FACE","ONE","ONE_MINUS_SRC_ALPHA","ZERO","DST_COLOR","blendEquationSeparate","FUNC_ADD","blendFuncSeparate","texParameteri","TEXTURE_MAX_ANISOTROPY_EXT","TRIANGLES","UNSIGNED_SHORT","loadShaders2","getAttribLocation","getUniformLocation","disposeShader","deleteProgram","compileShader","createShader","shaderSource","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","deleteShader","createProgram","VERTEX_SHADER","FRAGMENT_SHADER","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","createRenderbuffer","bindRenderbuffer","RENDERBUFFER","renderbufferStorage","RGBA4","framebufferRenderbuffer","COLOR_ATTACHMENT0","createTexture","texImage2D","RGBA","UNSIGNED_BYTE","TEXTURE_MIN_FILTER","LINEAR","TEXTURE_MAG_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","framebufferTexture2D","renderbuffer","texture","_$fP","_$3L","_$mP","_$zT","getFloat64","getFloat32","getInt32","getInt8","getInt16","_$2T","O","_$bT","_$5b","Float64Array","_$Jb","_$4b","_$2S","_$wS","_$kT","_$tS","SYSTEM_INFO","USER_AGENT","navigator","userAgent","isIPhone","_isIPhone","_isIPad","_isAndroid","getOSVersion","version","getOS","substring","indexOf","os","window","LDTransform","LDGL","Live2DModelWebGL","Live2DModelJS","DrawDataID","BaseDataID","ParamID","DbCache","stores","mocJson","ClearDb","db","delete","CubismDefaultParameterId","freeze","HitAreaPrefix","HitAreaHead","HitAreaBody","PartsIdCore","PartsArmPrefix","PartsArmLPrefix","PartsArmRPrefix","ParamAngleX","ParamAngleY","ParamAngleZ","ParamEyeLOpen","ParamEyeLSmile","ParamEyeROpen","ParamEyeRSmile","ParamEyeBallX","ParamEyeBallY","ParamEyeBallForm","ParamBrowLY","ParamBrowRY","ParamBrowLX","ParamBrowRX","ParamBrowLAngle","ParamBrowRAngle","ParamBrowLForm","ParamBrowRForm","ParamMouthForm","ParamMouthOpenY","ParamCheek","ParamBodyAngleX","ParamBodyAngleY","ParamBodyAngleZ","ParamBreath","ParamArmLA","ParamArmRA","ParamArmLB","ParamArmRB","ParamHandL","ParamHandR","ParamHairFront","ParamHairSide","ParamHairBack","ParamHairFluffy","ParamShoulderY","ParamBustX","ParamBustY","ParamBaseX","ParamBaseY","ParamNONE","Live2DCubismFramework","CSM_LOG_LEVEL_VERBOSE","CSM_LOG_LEVEL_DEBUG","CSM_LOG_LEVEL_INFO","CSM_LOG_LEVEL_WARNING","CSM_LOG_LEVEL_ERROR","CSM_LOG_LEVEL_OFF","CSM_LOG_LEVEL","FileReferences","UserData","Name","FilePath","Ids","SoundPath","FadeInTime","FadeOutTime","LipSync","EyeBlink","FrequestNode","CubismModelSettingJson","ICubismModelSetting","_json","CubismJson","_jsonValue","csmVector","pushBack","getRoot","getValueByString","GetJson","getModelFileName","isExistModelFile","FrequestNode_Moc","getRawString","getTextureCount","isExistTextureFiles","FrequestNode_Textures","getSize","getTextureDirectory","pathArray","getValueByIndex","arrayLength","textureDirectoryStr","getTextureFileName","index","getHitAreasCount","isExistHitAreas","FrequestNode_HitAreas","getHitAreaId","CubismFramework","getId","getHitAreaName","getPhysicsFileName","isExistPhysicsFile","FrequestNode_Physics","getPoseFileName","isExistPoseFile","FrequestNode_Pose","getExpressionCount","isExistExpressionFile","FrequestNode_Expressions","getExpressionName","getExpressionFileName","getMotionGroupCount","isExistMotionGroups","FrequestNode_Motions","getKeys","getMotionGroupName","getMotionCount","groupName","isExistMotionGroupName","getMotionFileName","getMotionSoundFileName","isExistMotionSoundFile","getMotionFadeInTimeValue","isExistMotionFadeIn","toFloat","getMotionFadeOutTimeValue","isExistMotionFadeOut","getUserDataFile","isExistUserDataFile","getLayoutMap","outLayoutMap","map","getMap","ite","begin","notEqual","preIncrement","setValue","ptr","first","second","getEyeBlinkParameterCount","isExistEyeBlinkParameters","num","FrequestNode_Groups","refI","isNull","isError","getVector","getEyeBlinkParameterId","getLipSyncParameterCount","isExistLipSyncParameters","getLipSyncParameterId","node","CubismBreath","_currentTime","static","instance","setParameters","breathParameters","_breathParameters","getParameters","updateParameters","deltaTimeSeconds","data","addParameterValueById","parameterId","offset","peak","cycle","BreathParameterData","undefined","EyeState","CubismEyeBlink","modelSetting","_blinkingState","EyeState_First","_nextBlinkingTime","_stateStartTimeSeconds","_blinkingIntervalSeconds","_closingSeconds","_closedSeconds","_openingSeconds","_userTimeSeconds","_parameterIds","setBlinkingInterval","blinkingInterval","setBlinkingSetting","closing","closed","opening","setParameterIds","parameterIds","getParameterIds","parameterValue","EyeState_Closing","EyeState_Closed","EyeState_Opening","EyeState_Interval","determinNextBlinkingTiming","CloseIfZero","setParameterValueById","FadeIn","Link","CubismPose","_fadeTimeSeconds","_lastModel","_partGroups","_partGroupCounts","pose3json","root","poseCount","poseIndex","idCount","groupCount","groupIndex","partInfo","partData","PartData","partId","linkCount","linkIndex","linkPart","linkId","getString","clone","reset","beginIndex","partGroupCount","doFade","copyPartOpacities","initialize","partIndex","parameterIndex","setPartOpacityByIndex","setParameterValueByIndex","getPartOpacityByIndex","linkPartIndex","visiblePartIndex","newOpacity","getParameterValueByIndex","assignment","getParameterIndex","getPartIndex","clonePartData","increment","CubismId","_id","csmString","isEqual","isNotEqual","CubismIdManager","_ids","set","registerIds","ids","registerId","result","findId","isExist","strtod","endPtr","testC","slice","number","NaN","s_isStarted","s_isInitialized","s_option","s_cubismIdManager","Constant","vertexOffset","vertexStep","csmDelete","address","option","CubismLogInfo","Live2DCubismCore","Logging","csmSetLogFunction","logFunction","Version","csmGetVersion","major","minor","patch","versionNumber","CSM_ASSERT","CubismLogWarning","Value","CubismRenderer","message","csmGetLogFunction","loggingLevel","LogLevel","LogLevel_Off","Option","CubismMath","isNegativeNumber","Infinity","exp","degrees","radian","from","to","directionToRadian","degree","radianToDegrees","totalAngle","CubismVector2","Epsilon","range","quadraticEquation","ca","p3","q2","discriminant","center","threshold","mp3","mp33","cosphi","acos","t1","cbrt","root1","root2","root3","u1","sd","CubismMatrix44","_tr","loadIdentity","getTranslateX","getTranslateY","translateRelative","multiply","scaleRelative","multiplyByMatrix","cloneMatrix","CubismModelMatrix","_width","_height","setupFromLayout","layout","key","CubismTargetPoint","_faceTargetX","_faceTargetY","_faceX","_faceY","_faceVX","_faceVY","_lastTimeSeconds","maxV","maxA","timeToMaxSpeed","curV","vector2","substract","multiplyByScaler","scalar","division","divisionByScalar","getLength","getDistanceWith","dot","normalize","rhs","CubismViewMatrix","_screenLeft","_screenRight","_screenTop","_screenBottom","_maxLeft","_maxRight","_maxTop","_maxBottom","_maxScale","_minScale","maxScale","minScale","CubismMoc","moc","_moc","_modelCount","_mocVersion","mocBytes","cubismMoc","Moc","fromArrayBuffer","csmGetMocVersion","_release","createModel","cubismModel","Model","fromMoc","CubismModel","deleteModel","getLatestMocVersion","csmGetLatestMocVersion","getMocVersion","DrawableColorData","isOverwritten","Color","CubismTextureColor","_model","_parameterValues","_parameterMaximumValues","_parameterMinimumValues","_partOpacities","_savedParameters","_drawableIds","_partIds","_isOverwrittenModelMultiplyColors","_isOverwrittenModelScreenColors","_userMultiplyColors","_userScreenColors","_notExistPartId","csmMap","_notExistParameterId","_notExistParameterValues","_notExistPartOpacities","drawables","resetDynamicFlags","canvasinfo","CanvasWidth","PixelsPerUnit","CanvasHeight","saveParameters","parameterCount","parameters","count","savedParameterCount","getMultiplyColor","getOverwriteFlagForModelMultiplyColors","getOverwriteFlagForDrawableMultiplyColors","getDrawableMultiplyColor","getScreenColor","getOverwriteFlagForModelScreenColors","getOverwriteFlagForDrawableScreenColors","getDrawableScreenColor","setMultiplyColorByTextureColor","setMultiplyColorByRGBA","setScreenColorByTextureColor","setScreenColorByRGBA","setOverwriteFlagForModelMultiplyColors","setOverwriteFlagForModelScreenColors","drawableindex","setOverwriteFlagForDrawableMultiplyColors","setOverwriteFlagForDrawableScreenColors","getModel","partCount","getValue","appendKey","getPartCount","setPartOpacityById","getPartOpacityById","getParameterCount","getParameterType","types","getParameterMaximumValue","maximumValues","getParameterMinimumValue","minimumValues","getParameterDefaultValue","defaultValues","getParameterValueById","addParameterValueByIndex","multiplyParameterValueById","multiplyParameterValueByIndex","getDrawableIndex","drawableId","drawableCount","drawableIndex","getDrawableCount","getDrawableId","getDrawableRenderOrders","renderOrders","getDrawableTextureIndices","getDrawableTextureIndex","textureIndices","getDrawableDynamicFlagVertexPositionsDidChange","dynamicFlags","Utils","hasVertexPositionsDidChangeBit","getDrawableVertexIndexCount","indexCounts","getDrawableVertexCount","vertexCounts","getDrawableVertices","getDrawableVertexPositions","getDrawableVertexIndices","indices","vertexPositions","getDrawableVertexUvs","vertexUvs","getDrawableOpacity","opacities","multiplyColors","multiplyColor","screenColors","screenColor","getDrawableParentPartIndex","parentPartIndices","getDrawableCulling","constantFlags","hasIsDoubleSidedBit","getDrawableBlendMode","hasBlendAdditiveBit","CubismBlendMode","hasBlendMultiplicativeBit","getDrawableInvertedMaskBit","hasIsInvertedMaskBit","getDrawableMasks","masks","getDrawableMaskCounts","maskCounts","isUsingMasking","getDrawableDynamicFlagIsVisible","hasIsVisibleBit","getDrawableDynamicFlagVisibilityDidChange","hasVisibilityDidChangeBit","getDrawableDynamicFlagOpacityDidChange","hasOpacityDidChangeBit","getDrawableDynamicFlagRenderOrderDidChange","hasRenderOrderDidChangeBit","getDrawableDynamicFlagBlendColorDidChange","hasBlendColorDidChangeBit","loadParameters","values","prepareCapacity","partIds","drawableIds","updateSize","CubismModelUserDataNode","CubismModelUserData","_userDataNodes","_artMeshUserDataNode","parseUserData","modelUserData","getArtMeshUserDatas","CubismModelUserDataJson","typeOfArtMesh","nodeCount","getUserDataCount","addNode","targetId","getUserDataId","targetType","getUserDataTargetType","getUserDataValue","Meta","toInt","getTotalUserDataSize","CubismUserModel","onFinishedMotionHandler","CubismMotion","_motionManager","_expressionManager","_eyeBlink","_breath","_modelMatrix","_pose","_dragManager","_physics","_modelUserData","_initialized","_updating","_opacity","_lipsync","_lastLipSyncValue","_dragX","_dragY","_accelerationX","_accelerationY","_accelerationZ","_debugMode","_renderer","CubismMotionManager","setEventCallback","cubismDefaultMotionEventCallback","setDragging","setAcceleration","setOpacity","CubismLogError","CubismExpressionMotion","loadUserData","CubismPhysics","isHit","pointX","pointY","vertices","getRenderer","createRenderer","deleteRenderer","CubismRenderer_WebGL","motionEventFired","eventValue","caller","customData","ACubismMotion","setFinishedMotionHandler","_onFinishedMotion","getFinishedMotionHandler","_fadeInSeconds","_fadeOutSeconds","_weight","_offsetSeconds","_firedEventValues","motionQueueEntry","userTimeSeconds","isAvailable","isStarted","setIsStarted","setStartTime","setFadeInStartTime","duration","getDuration","getEndTime","setEndTime","getStartTime","fadeWeight","getFadeInStartTime","setState","doUpdateParameters","setIsFinished","setFadeInTime","fadeInSeconds","setFadeOutTime","fadeOutSeconds","getFadeOutTime","getFadeInTime","setWeight","getWeight","getLoopDuration","setOffsetTime","offsetSeconds","getFiredEvent","beforeCheckTimeSeconds","motionTimeSeconds","ExpressionKeyParameters","ExpressionKeyBlend","_parameters","expression","blendType","ExpressionBlendType","ExpressionBlendType_Add","ExpressionBlendType_Multiply","ExpressionBlendType_Overwrite","ExpressionParameter","parameter","lerpPoints","CubismMotionPoint","linearEvaluate","bezierEvaluate","p01","p12","p23","p012","p123","bezierEvaluateCardanoInterpretation","x1","x2","cx1","cx2","steppedEvaluate","inverseSteppedEvaluate","evaluateCurve","motionData","curve","curves","totalSegmentCount","baseSegmentIndex","segmentCount","pointPosition","segments","basePointIndex","segmentType","CubismMotionSegmentType","segment","evaluate","get","_sourceFrameRate","_loopDurationSeconds","_isLoop","_isLoopFadeIn","_lastWeight","_motionData","_modelCurveIdEyeBlink","_modelCurveIdLipSync","_eyeBlinkParameterIds","_lipSyncParameterIds","parse","fps","timeOffsetSeconds","eyeBlinkValue","MaxTargetSize","lipSyncFlags","eyeBlinkFlags","CubismLogDebug","tmpFadeIn","tmpFadeOut","curveCount","CubismMotionCurveTarget","sourceValue","fadeInTime","fadeOutTime","fin","fout","setIsLoop","loop","isLoop","setIsLoopFadeIn","setParameterFadeInTime","setParameterFadeOutTime","getParameterFadeInTime","getParameterFadeOutTime","setEffectIds","eyeBlinkParameterIds","lipSyncParameterIds","motionJson","CubismMotionData","CubismMotionJson","getMotionDuration","isMotionLoop","getMotionCurveCount","getMotionFps","eventCount","getEventCount","areBeziersRestructed","getEvaluationOptionFlag","EvaluationOptionFlag","isExistMotionFadeInTime","getMotionFadeInTime","isExistMotionFadeOutTime","getMotionFadeOutTime","CubismMotionCurve","getMotionTotalSegmentCount","CubismMotionSegment","getMotionTotalPointCount","events","CubismMotionEvent","totalPointCount","getMotionCurveTarget","getMotionCurveId","isExistMotionCurveFadeInTime","getMotionCurveFadeInTime","isExistMotionCurveFadeOutTime","getMotionCurveFadeOutTime","segmentPosition","getMotionCurveSegmentCount","getMotionCurveSegment","userdatacount","fireTime","getEventTime","getEventValue","CubismMotionCurveTarget_Model","Curves","Segments","toBoolean","flagType","EvaluationOptionFlag_AreBeziersRistricted","curveIndex","segmentIndex","getTotalEventValueSize","userDataIndex","CubismMotionQueueManager","_currentPriority","_reservePriority","startMotionPriority","autoDelete","updateMotion","doUpdateMotion","CubismMotionQueueEntry","_autoDelete","_motion","_available","_finished","_started","_startTimeSeconds","_fadeInStartTimeSeconds","_endTimeSeconds","_stateTimeSeconds","_stateWeight","_lastEventCheckSeconds","_motionQueueEntryHandle","_isTriggeredFadeOut","startFadeOut","newEndTimeSeconds","startTime","endTime","setIsAvailable","timeSeconds","getStateTime","getStateWeight","getLastCheckEventSeconds","setLastCheckEventSeconds","checkSeconds","isTriggeredFadeOut","getFadeOutSeconds","_eventCallBack","_eventCustomData","_motions","InvalidMotionQueueEntryHandleValue","erase","isFinishedByHandle","motionQueueEntryNumber","getCubismMotionQueueEntry","firedList","PhysicsTypeTagAngle","_physicsRig","_options","Options","gravity","wind","_currentRigOutputs","_previousRigOutputs","_currentRemainTime","_parameterCaches","_parameterInputCaches","physicsJson","CubismPhysicsRig","CubismPhysicsJson","getGravity","getWind","subRigCount","getSubRigCount","getFps","settings","CubismPhysicsSubRig","inputs","getTotalInputCount","CubismPhysicsInput","outputs","getTotalOutputCount","CubismPhysicsOutput","particles","getVertexCount","CubismPhysicsParticle","inputIndex","outputIndex","particleIndex","normalizationPosition","minimum","getNormalizationPositionMinimumValue","maximum","getNormalizationPositionMaximumValue","defalut","getNormalizationPositionDefaultValue","normalizationAngle","getNormalizationAngleMinimumValue","getNormalizationAngleMaximumValue","getNormalizationAngleDefaultValue","inputCount","getInputCount","baseInputIndex","sourceParameterIndex","getInputWeight","reflect","getInputReflect","getInputType","CubismPhysicsSource","getNormalizedParameterValue","getInputTranslationXFromNormalizedParameterValue","getInputTranslationYFromNormalizedParamterValue","getInputAngleFromNormalizedParameterValue","source","CubismPhysicsTargetType","getInputSourceId","outputCount","getOutputCount","baseOutputIndex","currentRigOutput","PhysicsOutput","resize","previousRigOutput","destinationParameterIndex","vertexIndex","getOutputVertexIndex","angleScale","getOutputAngleScale","getOutputWeight","destination","getOutputDestinationId","getOutputType","getOutputTranslationX","getScale","getOutputScaleTranslationX","getOutputTranslationY","getOutputScaleTranslationY","getOutputAngle","getOutputScaleAngle","getOutputReflect","particleCount","getParticleCount","baseParticleIndex","mobility","getParticleMobility","delay","getParticleDelay","acceleration","getParticleAcceleration","radius","getParticleRadius","position","getParticlePosition","stabilization","radAngle","outputValue","totalTranslation","currentSetting","currentInputs","currentOutputs","currentParticles","parameterValues","parameterMaximumValues","parameterMinimumValues","parameterDefaultValues","settingIndex","angle","updateParticlesForStabilization","translation","outParameterCaches","JSON","stringify","subarray","updateOutputParameterValue","outParamIndex","physicsDeltaTime","inputWeight","updateParticles","interpolate","outParameterValues","setOptions","options","getOption","strand","initialPosition","lastPosition","lastGravity","velocity","force","targetTranslation","targetAngle","parameterMinimumValue","parameterMaximumValue","parameterDefaultValue","isInverted","normalizeParameterValue","normalizaitionPosition","parentGravity","maxValue","minValue","getRangeValue","translationScale","strandCount","windDirection","thresholdValue","airResistance","totalRadian","currentGravity","direction","newDirection","parameterValueMinimum","parameterValueMaximum","output","outputScale","valueBelowMinimum","valueExceededMaximum","parameterMinimum","parameterMaximum","parameterDefault","normalizedMinimum","normalizedMaximum","normalizedDefault","minNormValue","maxNormValue","middleNormValue","middleValue","paramValue","sign","nLength","pLength","PhysicsJsonEffectiveForces","CubismPhysicsParameter","CubismPhysicsNormalization","Position","Angle","Type","EffectiveForces","Gravity","Wind","PhysicsSettings","Normalization","Minimum","Maximum","Default","Reflect","Weight","Input","Output","Vertices","physicsSettingIndex","_isCulling","_isPremultipliedAlpha","_anisotropy","_modelColor","_mvpMatrix4x4","renderer","drawModel","doDrawModel","setMvpMatrix","matrix44","getMvpMatrix","setModelColor","red","green","blue","getModelColor","setIsPremultipliedAlpha","setIsCulling","isCulling","s_instance","s_viewport","s_fbo","CubismClippingManager_WebGL","_maskRenderTexture","_colorBuffer","_currentFrameNo","_clippingMaskBufferSize","_clippingContextListForMask","_clippingContextListForDraw","_channelColors","_tmpBoundsOnModel","csmRect","_tmpMatrix","_tmpMatrixForMask","_tmpMatrixForDraw","_maskTexture","tmp","channelNo","frameNo","CubismRenderTextureResource","clippingContext","clippedDrawTotalMinX","clippedDrawTotalMinY","clippedDrawTotalMaxX","MIN_VALUE","clippedDrawTotalMaxY","clippedDrawCount","_clippedDrawableIndexList","clippedDrawableIndex","drawableVertexCount","drawableVertexes","minX","minY","maxX","maxY","pi","_allClippedDrawRect","_isUsing","deleteTexture","drawableMasks","drawableMaskCounts","CubismClippingContext","addClippedDrawable","setupClippingContext","usingClipCount","clipIndex","cc","clipContext","allClipedDrawRect","layoutBoundsOnTex01","_layoutBounds","MARGIN","setRect","_matrixForMask","_matrixForDraw","clipDrawCount","_clippingIdCount","clipDrawIndex","_clippingIdList","setClippingContextBufferForMask","drawMesh","sameCount","clipId","div","mod","curClipIndex","layoutCount","_layoutChannelNo","xpos","ypos","getClippingContextListForDraw","manager","clippingDrawableIndices","clipCount","_owner","getClippingManager","setGl","CubismShader_WebGL","_shaderSets","releaseShaderProgram","setupShaderProgram","textureId","vertexCount","vertexArray","indexArray","uvArray","colorBlendMode","baseColor","invertedMask","SRC_COLOR","SRC_ALPHA","DST_ALPHA","generateShaders","getClippingContextBufferForMask","shaderSet","ShaderNames","ShaderNames_SetupMask","TEXTURE0","samplerTexture0Location","vertex","attributePositionLocation","uv","attributeTexCoordLocation","colorChannel","uniformChannelFlagLocation","uniformClipMatrixLocation","rect","uniformBaseColorLocation","getRight","getBottom","uniformMultiplyColorLocation","uniformScreenColorLocation","ONE_MINUS_SRC_COLOR","masked","getClippingContextBufferForDraw","CubismShaderSet","ShaderNames_NormalPremultipliedAlpha","ShaderNames_AddPremultipliedAlpha","ShaderNames_MultPremultipliedAlpha","tex","samplerTexture1Location","uniformMatrixLocation","loadShaderProgram","vertexShaderSrcSetupMask","fragmentShaderSrcsetupMask","vertexShaderSrc","fragmentShaderSrcPremultipliedAlpha","vertexShaderSrcMasked","fragmentShaderSrcMaskPremultipliedAlpha","fragmentShaderSrcMaskInvertedPremultipliedAlpha","vertexShaderSource","fragmentShaderSource","compileShaderSource","shaderType","shader","_clippingContextBufferForMask","_clippingContextBufferForDraw","_clippingManager","_textures","_sortedDrawableIndexList","_bufferData","WebGLBuffer","modelTextureNo","glTexture","getBindedTextures","renderOrder","order","setClippingContextBufferForDraw","textureNo","indexCount","modelColorRGBA","drawtexture","getInstance","deleteInstance","setRenderState","fbo","_extension","texParameterf","startUp","doStaticRelease","csmPair","_keyValues","_dummyValue","_size","found","newSize","fitToSize","DefaultSize","iterator","_index","dumpAsInt","idx","_map","preDecrement","decrement","iteold","getCenterX","getCenterY","append","substr","expansion","getBytes","encodeURIComponent","replace","isLess","isGreat","isEmpty","initialCapacity","_ptr","_capacity","s_defaultSize","assign","callPlacementNew","sub","insert","dstSi","srcSi","srcEi","addCount","addSize","_vector","remove","getOffset","newVector","substitution","CubismLogPrint","level","fmt","args","CubismDebug","print","CubismLogPrintIn","expr","assert","CubismLogVerbose","logLevel","format","logPrint","CSM_JSON_ERROR_TYPE_MISMATCH","indent","errorValue","setErrorNotForClientCall","nullValue","s_dummyKeys","isBool","isFloat","isString","isArray","isMap","equals","isStatic","errorStr","JsonError","JsonBoolean","trueValue","falseValue","JsonNullvalue","_parseCallback","CubismJsonExtension","_error","_lineCount","_root","parseBytes","uint8Array","Uint8Array","str","len","pad","decodeURIComponent","parseCallback","endPos","decodeBuffer","arrayBufferToString","parseValue","JsonMap","strbuf","JsonString","getParseError","checkEndOfFile","outEndPos","afterString","JsonFloat","parseString","parseArray","parseObject","string","c2","bufStart","localRetEndPos2","ok","FOR_LOOP","FOR_LOOP2","FOR_LOOP3","JsonArray","localRetEndpos2","_value","_stringBuffer","round","_boolValue","_isStatic","_array","stringBuffer","iter","_keys","obj","keys","forEach","parseJsonArray","parseJsonObject","arr","convKey","LAppLive2DManager","models","reloadFlg","PlatformManager","LAppModel","changeModel","modelurl","releaseModel","numModels","maxScaleEvent","startRandomMotion","minScaleEvent","tapEvent","hitTest","setRandomExpression","hitTestCustom","modelHomeDir","tmpMatrix","modelSettingPath","lastIndexOf","ModelSettingJson","loadModelSetting","getModelFile","getTextureNum","texPaths","getTextureFile","getExpressionNum","expName","expFilePath","getExpressionFile","getPhysicsFile","getPoseFile","getLayout","getHitAreasCustom","hit_areas_custom","getInitParamNum","getInitParamID","getInitParamValue","getInitPartsVisibleNum","getInitPartsVisibleID","getInitPartsVisibleValue","preloadMotionGroup","getMotionNum","file","getMotionFile","getMotionFadeIn","getMotionFadeOut","sessionStorage","getItem","setExpression","motionName","mtn","setFadeInFadeOut","getMotionSound","soundName","snd","play","matrix","multMatrix","getMatrix","getHitAreaNum","getHitAreaID","fileKey","path2FileName","fileName","path2DirName","rsp","request","fetch","arrayBuffer","status","loadString","loadedImage","Image","crossOrigin","onload","pixelStorei","UNPACK_PREMULTIPLY_ALPHA_WEBGL","UNPACK_FLIP_Y_WEBGL","LINEAR_MIPMAP_NEAREST","generateMipmap","onerror","jsonStr","bomCode","txt","ViewMaxScale","ViewMinScale","ViewLogicalLeft","ViewLogicalRight","ViewLogicalMaxLeft","ViewLogicalMaxRight","ViewLogicalMaxBottom","ViewLogicalMaxTop","MotionGroupIdle","MotionGroupTapBody","MotionGroupSleepy","MotionGroupFlickHead","MOTION_GROUP_TAP_BODY","MotionGroupPinchIn","MotionGroupPinchOut","MotionGroupShake","HitAreaNameHead","HitAreaNameBody","PriorityNone","PriorityIdle","PrioritySleepy","PriorityNormal","PriorityForce","DebugLogEnable","DebugTouchLogEnable","DebugDrawHitArea","DebugDrawAlphaModel","CubismLoggingLevel","_HitAreasCustomHead_x","_HitAreasCustomHead_y","_HitAreasCustomBody_x","_HitAreasCustomBody_y","webglContext","setHitAreasCustomHead_x","HitAreasCustomHead_x","getHitAreasCustomHead_x","setHitAreasCustomHead_y","HitAreasCustomHead_y","getHitAreasCustomHead_y","setHitAreasCustomBody_x","HitAreasCustomBody_x","getHitAreasCustomBody_x","setHitAreasCustomBody_y","HitAreasCustomBody_y","getHitAreasCustomBody_y","path2ModelName","jsonName","pathName","url","dirList","Csm_CubismFramework","zoom","modelX","modelY","frameBuffer","jsonPath","modelName","modelDir","LAppDelegate","_captured","_captureFrame","_mouseX","_mouseY","_modelX","_modelY","_isEnd","_cubismOption","_view","LAppView","_textureManager","LAppTextureManager","_zoom","_head_pos","canvasId","getElementById","ontouchstart","onTouchBegan","ontouchmove","onTouchMoved","ontouchend","onTouchEnded","ontouchcancel","onTouchCancel","onmousedown","onClickBegan","onmousemove","onMouseMoved","onmouseup","onClickEnded","onmouseleave","onMouseLeave","NAMES","ctx","getWebGLContext","blendFunc","initializeCubism","body","innerHTML","run","LAppPal","depthFunc","LEQUAL","DEPTH_BUFFER_BIT","clearDepth","_hitAreaList","render","appendChild","href","toDataURL","download","_captureName","click","requestAnimationFrame","vertexShaderId","fragmentShaderId","programId","getView","getTextureManager","initializeSprite","posX","pageX","posY","pageY","onTouchesBegan","getBoundingClientRect","onTouchesMoved","clientX","clientY","onTouchesEnded","changedTouches","Csm_CubismMatrix44","_finishedMotion","self","_viewMatrix","modelJsonName","loadAssets","releaseAllModel","onDrag","onTap","hitAreaList","hitTestDefine","startMotionFile","onUpdate","projection","saveProjection","LoadStep","_motionFileName","Map","_modelSetting","_modelHomeDir","_eyeBlinkIds","_lipSyncIds","_expressions","_hitArea","_userArea","_idParamAngleX","getIdManager","_idParamAngleY","_idParamAngleZ","_idParamEyeBallX","_idParamEyeBallY","_idParamBodyAngleX","_state","LoadAssets","_expressionCount","_textureCount","_motionCount","_allMotionCount","dir","theName","response","setting","LoadModel","setupModel","mainFileName","modelFileName","LoadExpression","loadCubismExpression","WaitLoadModel","expressionName","expressionFileName","LoadPhysics","loadCubismPhysics","WaitLoadExpression","physicsFileName","LoadPose","loadCubismPose","WaitLoadPhysics","poseFileName","SetupEyeBlink","setupEyeBlink","WaitLoadPose","create","SetupBreath","setupBreath","LoadUserData","userDataFile","SetupEyeBlinkIds","setupEyeBlinkIds","WaitLoadUserData","eyeBlinkIdCount","SetupLipSyncIds","setupLipSyncIds","lipSyncIdCount","SetupLayout","setupLayout","LoadMotion","loadCubismMotion","WaitLoadMotion","motionGroupCount","preLoadMotionGroup","restartMotion","setupTextures","LoadTexture","textureCount","modelTextureNumber","texturePath","onLoad","textureInfo","CompleteSetup","createTextureFromPngFile","WaitLoadTexture","reloadRenderer","motionUpdated","motionFileName","motionFileArr","fadeTime","expressionId","hitArenaName","drawId","ex","hitAreaItem","spList","toUpperCase","join","tmpMotion","releaseMotions","releaseExpressions","doDraw","filePath","s_deltaTime","s_currentFrame","now","s_lastFrame","mode","method","lastUpdate","Csm_csmVector","usePremultiply","usePremultply","img","TextureInfo","releaseTextures","releaseTextureByTexture","releaseTextureByFilePath","Csm_CubismViewMatrix","_programId","_back","_gear","_touchManager","TouchManager","_deviceToScreen","ratio","screenW","touchesBegan","sx","transformScreenX","sy","transformScreenY","transformRect","viewX","transformViewX","viewY","transformViewY","touchesMoved","live2DManager","deviceX","screenX","deviceY","screenY","Len_X","Len_Y","angleTarget","angleLeftTop","angleLeftBottom","angleRightTop","angleRightBottom","res","y3","x3","transformRange","MatrixStack","depth","matrixStack","currentMatrix","nextOffset","pop","matNew","NAME","ID","MODEL","TEXTURES","HIT_AREAS","PHYSICS","POSE","EXPRESSIONS","MOTION_GROUPS","SOUND","FADE_IN","FADE_OUT","LAYOUT","HIT_AREAS_CUSTOM","INIT_PARAM","INIT_PARTS_VISIBLE","VALUE","FILE","_startX","_startY","_lastX","_lastY","_lastX1","_lastY1","_lastX2","_lastY2","_lastTouchDistance","_deltaX","_deltaY","_scale","_touchSingle","_flipAvailable","getDeltaX","getDeltaY","getStartX","getStartY","getX1","getY1","getX2","getY2","isSingleTouch","isFlickAvailable","disableFlick","getFlickDistance","calculateDistance","y1","y2","calculateMovingAmount","v1","v2","absoluteValue1","absoluteValue2","_global","globalThis","global","extend","extension","Promise","getProto","getPrototypeOf","_hasOwn","hasOwnProperty","hasOwn","prop","props","proto","ownKeys","setProp","defineProperty","functionOrGetSet","configurable","writable","derive","Child","Parent","bind","getOwnPropertyDescriptor","getPropertyDescriptor","_slice","override","origFunc","overridedFactory","asap$1","fn","setImmediate","setTimeout","arrayToObject","array","extractor","reduce","nameAndValue","getByKeyPath","keyPath","rv","period","innerObj","setByKeyPath","isFrozen","currentKeyPath","remainingKeyPath","shallowClone","concat","flatten","intrinsicTypeNames","filter","intrinsicTypes","circularRefs","deepClone","any","WeakMap","innerDeepClone","toStringTag","iteratorSymbol","Symbol","getIteratorOf","NO_CHAR_ARRAY","getArrayOf","arrayLike","it","next","done","isAsyncFunction","debug","location","setDebug","libraryFilter","NEEDS_THROW_FOR_STACK","getErrorWithStack","prettyStack","exception","numIgnoredFrames","frame","idbDomErrorNames","errorList","defaultTexts","VersionChanged","DatabaseClosed","Abort","TransactionInactive","MissingAPI","DexieError","msg","_e","getMultiErrorMessage","failures","ModifyError","successCount","failedKeys","BulkError","pos","failuresByPos","_stack","errnames","BaseException","exceptions","fullName","msgOrInner","inner","Syntax","SyntaxError","TypeError","Range","RangeError","exceptionMap","fullNameExceptions","nop","mirror","pureFunctionChain","f1","f2","callBoth","on1","on2","hookCreatingChain","onsuccess","res2","hookDeletingChain","hookUpdatingChain","modifications","reverseStoppableEventChain","promisableChain","thiz","INTERNAL","resolvedNativePromise","nativePromiseProto","resolvedGlobalPromise","globalP","resolve","crypto","subtle","nativeP","digest","nativePromiseThen","NativePromise","patchGlobalPromise","stack_being_generated","schedulePhysicalTick","physicalTick","MutationObserver","hiddenDiv","observe","attributes","asap","microtickQueue","needsNewPhysicalTick","isOutsideMicroTick","unhandledErrors","rejectingErrors","currentFulfiller","rejectionMapper","globalPSD","ref","unhandleds","onunhandled","globalError","pgp","env","finalize","uh","PSD","numScheduledCalls","tickFinalizers","DexiePromise","_listeners","onuncatched","_lib","psd","_PSD","_stackHolder","_prev","_numPrev","handleRejection","executePromiseTask","thenProp","microTaskId","totalEchoes","onFulfilled","onRejected","possibleAwait","cleanup","decrementExpectedAwaits","reject","propagateToListener","Listener","nativeAwaitCompatibleWrap","linkToPreviousPromise","zone","promise","shouldExecuteTick","beginMicroTickScope","_then","propagateAllListeners","endMicroTickScope","reason","_promise","tryCatch","origProp","some","addPossiblyUnhandledError","listeners","finalizePhysicalTick","listener","cb","callListener","markErrorAsHandled","getStack","stacks","limit","errorName","failure","prev","numPrev","wasRootExec","callbacks","unhandledErrs","finalizers","PromiseReject","wrap","errorCatcher","outerScope","switchToZone","catch","handler","finally","onFinally","timeout","ms","handle","Timeout","clearTimeout","snapShot","all","onPossibleParallellAsync","remaining","race","newPSD","newScope","usePSD","scheduler","follow","zoneProps","finalizer","run_at_end_of_this_or_next_physical_tick","allSettled","possiblePromises","results","AggregateError","task","awaits","echoes","taskCounter","zoneStack","zoneEchoes","zone_id_counter","parent","globalEnv","PromiseProp","nthen","getPatchedPromiseThen","gthen","incrementExpectedAwaits","possiblePromise","rejection","zoneEnterEcho","targetZone","zoneLeaveEcho","bEnteringZone","currentZone","enqueueNativeMicroTask","GlobalPromise","targetEnv","job","outerZone","origThen","onResolved","UNHANDLEDREJECTION","event","eventData","createEvent","initEvent","CustomEvent","detail","dispatchEvent","PromiseRejectionEvent","onunhandledrejection","_","defaultPrevented","tempTransaction","storeNames","idbdb","openComplete","letThrough","_vip","trans","_createTransaction","_dbSchema","PR1398_maxLoop","InvalidState","isOpen","_close","open","_completion","dbOpenError","isBeingOpened","autoOpen","dbReadyPromise","DEXIE_VERSION","maxString","minKey","INVALID_KEY_ARGUMENT","STRING_EXPECTED","connections","isIEOrEdge","hasIEDeleteObjectStoreBug","hangsOnDeleteLargeKeyRange","dexieStackFrameFilter","DBNAMES_DB","READONLY","READWRITE","combine","filter1","filter2","AnyRange","lower","lowerOpen","upper","upperOpen","workaroundForUndefinedPrimKey","Table","_trans","writeLocked","_tx","tableName","checkTableInTransaction","schema","NotFound","idbtrans","transless","keyOrCrit","where","core","hook","reading","fire","indexOrCrit","WhereClause","keyPaths","compoundIndex","indexes","primKey","ix","compound","every","_maxKey","kp","idxByName","idb","_deps","indexedDB","cmp","filterFunction","prevIndex","prevFilterFn","multi","toCollection","and","thenShortcut","numRows","each","toArray","Collection","orderBy","reverse","mapToClass","mappedClass","readHook","unsubscribe","defineClass","content","auto","objToAdd","mutate","numFailures","lastResult","keyOrObject","modify","InvalidArgument","_a","bulkGet","getMany","bulkAdd","objects","keysOrOptions","wantResults","allKeys","numObjects","objectsToAdd","bulkPut","objectsToPut","bulkDelete","numKeys","Events","evs","eventName","subscriber","subscribe","addEventType","chainFunction","defaultFunction","addConfiguredEvents","subscribers","cfg","makeClassConstructor","isPlainKeyRange","ignoreLimitFilter","algorithm","or","justLimit","replayFilter","addFilter","addReplayFilter","factory","isLimitFilter","curr","getIndexOrStore","coreSchema","isPrimKey","primaryKey","getIndexByKeyPath","Schema","openCursor","coreTable","keysOnly","unique","query","coreTrans","union","cursor","advance","stop","fail","_iterate","iterate","valueMapper","cursorPromise","wrappedFn","continue","advancer","ta","tb","compareUint8Arrays","getUint8Array","compareArrays","isView","tsTag","byteOffset","_read","_ctx","table","_write","_addAlgorithm","raw","sortBy","lastPart","lastIndex","getval","sorter","aVal","bVal","sort","offsetLeft","rowsLeft","until","bIncludeStopEntry","last","isMatch","indexName","_ondirectionchange","desc","eachKey","eachUniqueKey","eachPrimaryKey","primaryKeys","uniqueKeys","firstKey","lastKey","distinct","strKey","changes","modifyer","anythingModified","outbound","extractKey","modifyChunkSize","totalFailures","applyMutateResult","expectedCount","nextChunk","cache","addValues","putValues","putKeys","deleteKeys","origValue","criteria","deleteCallback","changeSpec","coreRange","simpleCompare","simpleCompareReverse","collectionOrWhereClause","collection","emptyCollection","whereClause","rangeEqual","nextCasing","lowerKey","upperNeedle","lowerNeedle","llp","lwrKeyChar","addIgnoreCaseAlgorithm","match","needles","suffix","compare","upperNeedles","lowerNeedles","nextKeySuffix","needlesLen","initDirection","toLowerCase","upperFactory","lowerFactory","needleBounds","needle","nb","createRange","firstPossibleNeedle","lowestPossibleCasing","casing","between","includeLower","includeUpper","_cmp","above","aboveOrEqual","below","belowOrEqual","startsWithIgnoreCase","equalsIgnoreCase","anyOfIgnoreCase","startsWithAnyOfIgnoreCase","anyOf","_ascending","_descending","inAnyRange","includeLowers","includeUppers","noneOf","ranges","ascending","descending","_min","_max","sortDirection","rangeSorter","newRange","rangePos","keyIsBeyondCurrentEntry","keyIsBeforeCurrentEntry","checkKey","keyWithinCurrentRange","startsWithAnyOf","eventRejectHandler","preventDefault","stopPropagation","DEXIE_STORAGE_MUTATED_EVENT_NAME","STORAGE_MUTATED_DOM_EVENT_NAME","globalEvents","Transaction","_lock","_reculock","lockOwnerFor","_unlock","_blockedFuncs","_locked","fnAndPSD","shift","OpenFailed","active","transaction","durability","chromeTransactionDurability","ev","_reject","onabort","on","oncomplete","_resolve","storagemutated","bWriteLock","ReadOnly","waitFor","promiseLike","_waitingFor","_waitingQueue","store","objectStore","spin","_spinCount","currentWaitPromise","abort","memoizedTables","_memoizedTables","tableSchema","transactionBoundTable","createIndexSpec","nameFromKeyPath","createTableSchema","getMaxKey","IdbKeyRange","only","getKeyExtractor","getSinglePathKeyExtractor","arrayify","_id_counter","getKeyPathAlias","createDBCore","tmpTrans","makeIDBKeyRange","upperBound","lowerBound","bound","hasGetAll","tables","objectStoreNames","autoIncrement","indexByKeyPath","isPrimaryKey","indexNames","multiEntry","extractSchema","isAddOrPut","req","reqs","errorHandler","args1","args2","keyCount","callbackCount","successHandler","_pos","nonInfinitLimit","idbKeyRange","getAll","getAllKeys","openKeyCursor","___id","_cursorContinue","_cursorContinuePrimaryKey","continuePrimaryKey","_cursorAdvance","doThrowCursorIsStopped","gotOne","iterationPromise","resolveIteration","rejectIteration","guardedCallback","createDbCoreTable","tableMap","MIN_KEY","MAX_KEY","generateMiddlewareStacks","_novip","middlewares","IDBKeyRange","dbcore","stackImpl","down","createMiddlewareStack","createMiddlewareStacks","_middlewares","tbl","setApiOnPlace","objs","tableNames","dbschema","propDesc","enumerable","removeTablesApi","lowerVersionFirst","_cfg","runUpgraders","oldVersion","idbUpgradeTrans","globalSchema","_storeNames","rejectTransaction","createTable","populate","queue","versions","_versions","buildGlobalSchema","anyContentUpgraderHasRun","runQueue","oldSchema","newSchema","adjustToExistingIndexNames","diff","getSchemaDiff","tuple","change","recreate","Upgrade","addIndex","deleteIndex","del","idxName","contentUpgrade","upgradeSchema","contentUpgradeIsAsync","returnValue","promiseFollowed","decrementor","storeName","deleteObjectStore","deleteRemovedTables","updateTablesAndIndexes","oldDef","newDef","oldIndexes","newIndexes","oldIdx","newIdx","createObjectStore","createIndex","idbindex","_hasGetAll","dexieName","indexSpec","WorkerGlobalScope","_parseStoresSpec","outSchema","indexNum","trim","storesSource","storesSpec","_allTables","upgrade","upgradeFunction","getDbNamesTable","dbNamesDB","Dexie$1","addons","dbnames","hasDatabasesNative","databases","vip","idbReady","intervalId","userAgentData","tryIdb","clearInterval","dexieOpen","state","openCanceller","throwIfCancelled","resolveDbReady","dbReadyResolve","upgradeTransaction","wasCreated","dbName","autoSchema","verno","onblocked","_fireOnBlocked","onupgradeneeded","allowEmptyDB","delreq","deleteDatabase","NoSuchDatabase","oldVer","readGlobalSchema","ch","verifyInstalledSchema","onversionchange","vcFired","onclose","_onDatabaseCreated","onReadyBeingFired","ready","fireRemainders","remainders","awaitIterator","callNext","onSuccess","step","onError","throw","getNext","extractTransactionArgs","_tableArgs_","scopeFunc","enterTransactionScope","parentTransaction","scopeFuncIsAsync","PrematureCommit","virtualIndexMiddleware","indexLookup","allVirtualIndexes","addVirtualIndexes","keyTail","lowLevelIndex","keyPathAlias","indexList","keyLength","isVirtual","virtualIndex","translateRequest","virtualCursor","createVirtualCursor","getObjectDiff","prfx","apTypeName","hooksMiddleware","downCore","downTable","tableMiddleware","dxTrans","deleting","creating","addPutOrDelete","deleteNextChunk","deleteRange","getEffectiveKeys","effectiveKeys","getExistingValues","existingValues","contexts","existingValue","generatedPrimaryKey","objectDiff","additionalChanges","requestedValue","getFromTransactionCache","cacheExistingValuesMiddleware","cachedResult","isEmptyRange","RangeSet","fromOrTree","addRange","rebalance","rightWasCutOff","mergeRanges","newSet","_addRangeSet","rangesOverlap","rangeSet1","rangeSet2","i1","getRangeSetIterator","nextResult1","i2","nextResult2","keyProvided","up","_b","rootClone","oldRootRight","computeDepth","rangeSet","addKey","addKeys","observabilityMiddleware","FULL_RANGE","tableClone","mutatedParts","getRangeSet","part","pkRangeSet","delsRangeSet","newObjs","oldCache","oldObjs","addAffectedIndex","addKeyOrKeys","oldKey","newKey","trackAffectedIndexes","getRange","readSubscribers","subscr","queriedIndex","queriedRanges","keysPromise","resultingKeys","pKeys","wantValues","pkey","deps","dependencies","cancelOpen","bSticky","keyRangeGenerator","keyRange","whereCtx","readingHook","createTableConstructor","complete","wasActive","createTransactionConstructor","createVersionConstructor","orCollection","_IDBKeyRange","createWhereClauseConstructor","newVersion","use","addon","versionInstance","_whenReady","unuse","mw","hasArguments","doDelete","_onDatabaseDeleted","backendDB","hasBeenClosed","hasFailed","dynamicallyOpened","_transaction","onlyIfCompatible","idbMode","SubTransaction","enterTransaction","InvalidTable","symbolObservable","observable","Observable","_subscribe","extendObservabilitySet","liveQuery","querier","observer","accumMuts","currentObs","subscription","mutationListener","querying","startedListening","shouldNotify","doQuery","exec","execute","domDeps","mozIndexedDB","webkitIndexedDB","msIndexedDB","webkitIDBKeyRange","Dexie","propagateLocally","updateParts","wasMe","propagatingLocally","databaseName","getDatabaseNames","infos","info","ignoreTransaction","async","generatorFn","spawn","currentTransaction","promiseOrFunction","optionalTimeout","delByKeyPath","semVer","maxKey","addEventListener","updatedParts","initCustomEvent","BroadcastChannel","changedParts","postMessage","onmessage","localStorage","setItem","trig","matchAll","includeUncontrolled","client","newValue","swContainer","serviceWorker","domError","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","__esModule","definition","platform","live2DMgr","isDrawStart","dragMgr","viewMatrix","projMatrix","deviceToScreen","lastMouseX","lastMouseY","drag","head_pos","zoomv2","hit_Area_List","initv2","LAppDefine","captureFrame","WebGLRenderingContext","tick","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame","captureName","modelTurnHead","lookFront","sleepy","mouseEvent","modelTapEvent","button","SleepyTimer","touchEvent","touch","touches","followPointer","loadlive2dv3","jQuery","ajax","sdkUrl","dataType","defineHitAreaName","modelPoint","screenshot","clearCache","loadlive2d","headPos","ver","initL2dCanvas","loadlive2dv2"],"sourceRoot":""}