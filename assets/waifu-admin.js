(()=>{"use strict";var t={n:e=>{var a=e&&e.__esModule?()=>e.default:()=>e;return t.d(a,{a}),a},d:(e,a)=>{for(var n in a)t.o(a,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:a[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};const e=jQuery;var a=t.n(e);class n{constructor(t){this.userInfo=t.userInfo,this.homeUrl=t.homeUrl}initLogin(){let t=this;200==this.userInfo.errorCode&&this.userInfo.userName?(a()("#btnLogin").hide(),a()(".lgoined").show(),a()("#labLogined").html(`${this.userInfo.userName} 已登录`)):(a()("#btnLogin").show(),a()(".lgoined").hide()),a()("#btnLogin").on("click",(function(){let e=encodeURIComponent(`${t.homeUrl}`),a=window.open(`https://www.live2dweb.com/SingleLogin?referer=${e}`,"Login","toolbar=no,location=no,resizable=no, height=680, width=500"),n=window.screen.availWidth-500,r=window.screen.availHeight-680;try{a.moveTo(n/2,r/2)}catch(t){}let i=setInterval((()=>{a.closed&&(window.location.reload(),clearInterval(i))}),500);console.log("已打开登陆窗口")}))}initControl(){var t=this;a()(".group").hide(),a()(".nav-tab-wrapper a").removeClass("nav-tab-active");var e="";"undefined"!=typeof localStorage&&(e=localStorage.getItem("activetab")),""!==e&&a()(e).length?a()(e).fadeIn():a()(".group:first").fadeIn(),""!==e&&a()(e+"_btn").length?a()(e+"_btn").addClass("nav-tab-active"):a()("#settings_btn").addClass("nav-tab-active"),a()(".nav-tab-wrapper a").on("click",(function(t){a()(".nav-tab-wrapper a").removeClass("nav-tab-active"),a()(this).addClass("nav-tab-active");var e=a()(this).attr("href");a()(".group").hide(),a()(e).fadeIn(),t.preventDefault(),"undefined"!=typeof localStorage&&localStorage.setItem("activetab",e)})),a()("input.addbtn").on("click",(function(){var e=a()(this).attr("optname"),n=a()(this).attr("keyname"),r=a()(this).attr("arrtype");t.addMsgInput(e,n,this,r)})),a()("input.delbtn").on("click",(function(){var e=a()(this).attr("optname"),n=a()(this).attr("keyname"),r=a()(this).attr("arrtype");t.delMsgInput(e,n,this,r)})),a()("input[type=range]").on("input propertychange",(function(){let t=a()(this).val();a()(this).next(".result").html(`${t}`)}))}addMsgInput(t,e,n,r){var i=this,o=a()("p."+e),l=o.length,s=o.last().clone();switch(r){case"Selector":s.children("input.selector").attr("name",t+"["+e+"]["+l+"][selector]").attr("id",e+"_"+l+"_selector").val(""),s.children("input.text").attr("name",t+"["+e+"]["+l+"][text]").attr("id",e+"_"+l+"_text").val("");break;case"Array":s.children("input:eq(0)").attr("name",t+"["+e+"]["+l+"][0]").attr("id",e+"_"+l+"_0").val(""),s.children("input:eq(1)").attr("name",t+"["+e+"]["+l+"][1]").attr("id",e+"_"+l+"_1").val("");break;case"List":s.children("input.textArray").attr("name",t+"["+e+"]["+l+"]").attr("id",e+"_"+l).val("")}s.children("input.delbtn").attr("name",e+"_delbtn"+l).attr("id",e+"_delbtn"+l).on("click",(function(){i.delMsgInput(t,e,this,r)})),o.last().after(s)}delMsgInput(t,e,n,r){0!=a()(n).parent().siblings("."+e).length&&a()(n).parent().fadeOut("fast",(function(){a()(this).siblings("."+e).each((function(n,i){switch(r){case"Selector":a()(i).children(".selector").attr("name",t+"["+e+"]["+n+"][selector]").attr("id",e+"_"+n+"_selector"),a()(i).children(".text").attr("name",t+"["+e+"]["+n+"][text]").attr("id",e+"_"+n+"_text");break;case"Array":a()(i).children("input:eq(0)").attr("name",t+"["+e+"]["+n+"][0]").attr("id",e+"_"+n+"_0"),a()(i).children("input:eq(1)").attr("name",t+"["+e+"]["+n+"][1]").attr("id",e+"_"+n+"_1");break;case"List":a()(i).children("input.textArray").attr("name",t+"["+e+"]["+n+"]").attr("id",e+"_"+n)}a()(i).children("input.delbtn").attr("id",e+"_delbtn"+n).attr("name",e+"_delbtn"+n)})),this.remove()}))}}a()((function(){var t=new n(settings);t.initLogin(),t.initControl()}))})();